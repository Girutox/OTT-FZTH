"use strict";(self.webpackChunkfzth=self.webpackChunkfzth||[]).push([[179],{2011:(Et,De,U)=>{U.d(De,{Dh:()=>de,GT:()=>oe,cc:()=>Se,hO:()=>He,on:()=>Z,pX:()=>ie,xv:()=>ge});var d=U(4650),$=U(9260),O=U(2122);Et=U.hmd(Et);const ne=["ngOnDestroy"],ie=(Ae,be,Fe,xe={})=>new Proxy(Ae,{get:(Pe,Te)=>Fe.runOutsideAngular(()=>{var je;if(Ae[Te])return!(null===(je=xe?.spy)||void 0===je)&&je.get&&xe.spy.get(Te,Ae[Te]),Ae[Te];if(ne.indexOf(Te)>-1)return()=>{};const J=be.toPromise().then(ae=>{const Ee=ae&&ae[Te];return"function"==typeof Ee?Ee.bind(ae):Ee&&Ee.then?Ee.then(Ke=>Fe.run(()=>Ke)):Fe.run(()=>Ee)});return new Proxy(()=>{},{get:(ae,Ee)=>J[Ee],apply:(ae,Ee,Ke)=>J.then(ze=>{var Mt;const Je=ze&&ze(...Ke);return!(null===(Mt=xe?.spy)||void 0===Mt)&&Mt.apply&&xe.spy.apply(Te,Ke,Je),Je})})})}),oe=(Ae,be)=>{be.forEach(Fe=>{Object.getOwnPropertyNames(Fe.prototype||Fe).forEach(xe=>{Object.defineProperty(Ae.prototype,xe,Object.getOwnPropertyDescriptor(Fe.prototype||Fe,xe))})})};class _e{constructor(be){return be}}const de=new d.OlP("angularfire2.app.options"),ge=new d.OlP("angularfire2.app.name");function Z(Ae,be,Fe){const Pe="object"==typeof Fe&&Fe||{};Pe.name=Pe.name||"string"==typeof Fe&&Fe||"[DEFAULT]";const je=$.Z.apps.filter(J=>J&&J.name===Pe.name)[0]||be.runOutsideAngular(()=>$.Z.initializeApp(Ae,Pe));try{JSON.stringify(Ae)!==JSON.stringify(je.options)&&W("error",`${je.name} Firebase App already initialized with different options${Et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new _e(je)}const W=(Ae,...be)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Ae](...be)},Q={provide:_e,useFactory:Z,deps:[de,d.R0b,[new d.FiY,ge]]};let He=(()=>{class Ae{constructor(Fe){$.Z.registerVersion("angularfire",O.q4.full,"core"),$.Z.registerVersion("angularfire",O.q4.full,"app-compat"),$.Z.registerVersion("angular",d.q4F.full,Fe.toString())}static initializeApp(Fe,xe){return{ngModule:Ae,providers:[{provide:de,useValue:Fe},{provide:ge,useValue:xe}]}}}return Ae.\u0275fac=function(Fe){return new(Fe||Ae)(d.LFG(d.Lbi))},Ae.\u0275mod=d.oAB({type:Ae}),Ae.\u0275inj=d.cJS({providers:[Q]}),Ae})();function Se(Ae,be,Fe,xe,Pe){const[,Te,je]=globalThis.\u0275AngularfireInstanceCache.find(J=>J[0]===Ae)||[];if(Te)return function We(Ae,be){try{return Ae.toString()===be.toString()}catch{return Ae===be}}(Pe,je)||(me("error",`${be} was already initialized on the ${Fe} Firebase App with different settings.${lt?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:Pe,was:je})),Te;{const J=xe();return globalThis.\u0275AngularfireInstanceCache.push([Ae,J,Pe]),J}}const lt=!!Et.hot,me=(Ae,...be)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Ae](...be)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(Et,De,U)=>{U.d(De,{q4:()=>Bu,iC:()=>Ua,fc:()=>Cr,HU:()=>qr,vb:()=>pd,JM:()=>zr});var d=U(4650),$=U(259),O=U(5861),ne=U(9681),ie=U(2090),oe=U(4859),_e=U(1877),de=U(8766);const ge="@firebase/installations",Z="0.6.3",Q=`w:${Z}`,He="FIS_v2",be=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Fe(D){return D instanceof ie.ZR&&D.code.includes("request-failed")}function xe({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Pe(D){return{token:D.token,requestStatus:2,expiresIn:ze(D.expiresIn),creationTime:Date.now()}}function Te(D,T){return je.apply(this,arguments)}function je(){return(je=(0,O.Z)(function*(D,T){const H=(yield T.json()).error;return be.create("request-failed",{requestName:D,serverCode:H.code,serverMessage:H.message,serverStatus:H.status})})).apply(this,arguments)}function J({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function ae(D,{refreshToken:T}){const x=J(D);return x.append("Authorization",function Mt(D){return`${He} ${D}`}(T)),x}function Ee(D){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,O.Z)(function*(D){const T=yield D();return T.status>=500&&T.status<600?D():T})).apply(this,arguments)}function ze(D){return Number(D.replace("s","000"))}function Je(D,T){return ue.apply(this,arguments)}function ue(){return(ue=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:T},{fid:x}){const H=xe(D),X=J(D),re=T.getImmediate({optional:!0});if(re){const at=yield re.getHeartbeatsHeader();at&&X.append("x-firebase-client",at)}const qe={method:"POST",headers:X,body:JSON.stringify({fid:x,authVersion:He,appId:D.appId,sdkVersion:Q})},Ct=yield Ee(()=>fetch(H,qe));if(Ct.ok){const at=yield Ct.json();return{fid:at.fid||x,registrationStatus:2,refreshToken:at.refreshToken,authToken:Pe(at.authToken)}}throw yield Te("Create Installation",Ct)})).apply(this,arguments)}function pe(D){return new Promise(T=>{setTimeout(T,D)})}const Ne=/^[cdef][\w-]{21}$/;function Be(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function nt(D){return function Ce(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Ne.test(x)?x:""}catch{return""}}function Ye(D){return`${D.appName}!${D.appId}`}const hn=new Map;function Tt(D,T){const x=Ye(D);sn(x,T),function Dn(D,T){const x=function un(){return!Cn&&"BroadcastChannel"in self&&(Cn=new BroadcastChannel("[Firebase] FID Change"),Cn.onmessage=D=>{sn(D.data.key,D.data.fid)}),Cn}();x&&x.postMessage({key:D,fid:T}),function Qn(){0===hn.size&&Cn&&(Cn.close(),Cn=null)}()}(x,T)}function sn(D,T){const x=hn.get(D);if(x)for(const H of x)H(T)}let Cn=null;const Bn="firebase-installations-store";let pi=null;function Si(){return pi||(pi=(0,de.X3)("firebase-installations-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(Bn)}})),pi}function vn(D,T){return pr.apply(this,arguments)}function pr(){return(pr=(0,O.Z)(function*(D,T){const x=Ye(D),X=(yield Si()).transaction(Bn,"readwrite"),re=X.objectStore(Bn),Oe=yield re.get(x);return yield re.put(T,x),yield X.done,(!Oe||Oe.fid!==T.fid)&&Tt(D,T.fid),T})).apply(this,arguments)}function ct(D){return gr.apply(this,arguments)}function gr(){return(gr=(0,O.Z)(function*(D){const T=Ye(D),H=(yield Si()).transaction(Bn,"readwrite");yield H.objectStore(Bn).delete(T),yield H.done})).apply(this,arguments)}function Pr(D,T){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,O.Z)(function*(D,T){const x=Ye(D),X=(yield Si()).transaction(Bn,"readwrite"),re=X.objectStore(Bn),Oe=yield re.get(x),qe=T(Oe);return void 0===qe?yield re.delete(x):yield re.put(qe,x),yield X.done,qe&&(!Oe||Oe.fid!==qe.fid)&&Tt(D,qe.fid),qe})).apply(this,arguments)}function jn(D){return ti.apply(this,arguments)}function ti(){return(ti=(0,O.Z)(function*(D){let T;const x=yield Pr(D.appConfig,H=>{const X=Ot(H),re=It(D,X);return T=re.registrationPromise,re.installationEntry});return""===x.fid?{installationEntry:yield T}:{installationEntry:x,registrationPromise:T}})).apply(this,arguments)}function Ot(D){return er(D||{fid:Be(),registrationStatus:0})}function It(D,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(be.create("app-offline"))};const x={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},H=function Rt(D,T){return wn.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:H}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Jn(D)}:{installationEntry:T}}function wn(){return(wn=(0,O.Z)(function*(D,T){try{const x=yield Je(D,T);return vn(D.appConfig,x)}catch(x){throw Fe(x)&&409===x.customData.serverCode?yield ct(D.appConfig):yield vn(D.appConfig,{fid:T.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Jn(D){return xn.apply(this,arguments)}function xn(){return(xn=(0,O.Z)(function*(D){let T=yield gi(D.appConfig);for(;1===T.registrationStatus;)yield pe(100),T=yield gi(D.appConfig);if(0===T.registrationStatus){const{installationEntry:x,registrationPromise:H}=yield jn(D);return H||x}return T})).apply(this,arguments)}function gi(D){return Pr(D,T=>{if(!T)throw be.create("installation-not-found");return er(T)})}function er(D){return function Ai(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function jt(D,T){return xi.apply(this,arguments)}function xi(){return(xi=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:T},x){const H=Kt(D,x),X=ae(D,x),re=T.getImmediate({optional:!0});if(re){const at=yield re.getHeartbeatsHeader();at&&X.append("x-firebase-client",at)}const qe={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:Q,appId:D.appId}})},Ct=yield Ee(()=>fetch(H,qe));if(Ct.ok)return Pe(yield Ct.json());throw yield Te("Generate Auth Token",Ct)})).apply(this,arguments)}function Kt(D,{fid:T}){return`${xe(D)}/${T}/authTokens:generate`}function Br(D){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,O.Z)(function*(D,T=!1){let x;const H=yield Pr(D.appConfig,re=>{if(!Jt(re))throw be.create("not-registered");const Oe=re.authToken;if(!T&&q(Oe))return re;if(1===Oe.requestStatus)return x=$e(D,T),re;{if(!navigator.onLine)throw be.create("app-offline");const qe=Y(re);return x=St(D,qe),qe}});return x?yield x:H.authToken})).apply(this,arguments)}function $e(D,T){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,O.Z)(function*(D,T){let x=yield rt(D.appConfig);for(;1===x.authToken.requestStatus;)yield pe(100),x=yield rt(D.appConfig);const H=x.authToken;return 0===H.requestStatus?Br(D,T):H})).apply(this,arguments)}function rt(D){return Pr(D,T=>{if(!Jt(T))throw be.create("not-registered");return function j(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function St(D,T){return xt.apply(this,arguments)}function xt(){return(xt=(0,O.Z)(function*(D,T){try{const x=yield jt(D,T),H=Object.assign(Object.assign({},T),{authToken:x});return yield vn(D.appConfig,H),x}catch(x){if(!Fe(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const H=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield vn(D.appConfig,H)}else yield ct(D.appConfig);throw x}})).apply(this,arguments)}function Jt(D){return void 0!==D&&2===D.registrationStatus}function q(D){return 2===D.requestStatus&&!function G(D){const T=Date.now();return T<D.creationTime||D.creationTime+D.expiresIn<T+36e5}(D)}function Y(D){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:T})}function B(){return(B=(0,O.Z)(function*(D){const T=D,{installationEntry:x,registrationPromise:H}=yield jn(T);return H?H.catch(console.error):Br(T).catch(console.error),x.fid})).apply(this,arguments)}function Me(){return(Me=(0,O.Z)(function*(D,T=!1){const x=D;return yield pt(x),(yield Br(x,T)).token})).apply(this,arguments)}function pt(D){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,O.Z)(function*(D){const{registrationPromise:T}=yield jn(D);T&&(yield T)})).apply(this,arguments)}function Nl(D){return be.create("missing-app-config-values",{valueName:D})}const Ol="installations",Vo=D=>{const T=D.getProvider("app").getImmediate(),x=function Uo(D){if(!D||!D.options)throw Nl("App Configuration");if(!D.name)throw Nl("App Name");const T=["projectId","apiKey","appId"];for(const x of T)if(!D.options[x])throw Nl(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(T);return{app:T,appConfig:x,heartbeatServiceProvider:(0,ne._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Gc=D=>{const T=D.getProvider("app").getImmediate(),x=(0,ne._getProvider)(T,Ol).getImmediate();return{getId:()=>function N(D){return B.apply(this,arguments)}(x),getToken:X=>function se(D){return Me.apply(this,arguments)}(x,X)}};(function kl(){(0,ne._registerComponent)(new oe.wA(Ol,Vo,"PUBLIC")),(0,ne._registerComponent)(new oe.wA("installations-internal",Gc,"PRIVATE"))})(),(0,ne.registerVersion)(ge,Z),(0,ne.registerVersion)(ge,Z,"esm2017");const du="@firebase/remote-config",$n=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ps{constructor(T,x,H,X){this.client=T,this.storage=x,this.storageCache=H,this.logger=X}isCachedDataFresh(T,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const H=Date.now()-x,X=H<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${H}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${X}.`),X}fetch(T){var x=this;return(0,O.Z)(function*(){const[H,X]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(X&&x.isCachedDataFresh(T.cacheMaxAgeMillis,H))return X;T.eTag=X&&X.eTag;const re=yield x.client.fetch(T),Oe=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&Oe.push(x.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(Oe),re})()}}function _i(D=navigator){return D.languages&&D.languages[0]||D.language}class Mi{constructor(T,x,H,X,re,Oe){this.firebaseInstallations=T,this.sdkVersion=x,this.namespace=H,this.projectId=X,this.apiKey=re,this.appId=Oe}fetch(T){var x=this;return(0,O.Z)(function*(){const[H,X]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Oe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Ct={sdk_version:x.sdkVersion,app_instance_id:H,app_instance_id_token:X,app_id:x.appId,language_code:_i()},at={method:"POST",headers:qe,body:JSON.stringify(Ct)},Ht=fetch(Oe,at),Pt=new Promise((Zr,Kr)=>{T.signal.addEventListener(()=>{const Ts=new Error("The operation was aborted.");Ts.name="AbortError",Kr(Ts)})});let Wr;try{yield Promise.race([Ht,Pt]),Wr=yield Ht}catch(Zr){let Kr="fetch-client-network";throw"AbortError"===Zr?.name&&(Kr="fetch-timeout"),$n.create(Kr,{originalErrorMessage:Zr?.message})}let nr=Wr.status;const Co=Wr.headers.get("ETag")||void 0;let Ds,sa;if(200===Wr.status){let Zr;try{Zr=yield Wr.json()}catch(Kr){throw $n.create("fetch-client-parse",{originalErrorMessage:Kr?.message})}Ds=Zr.entries,sa=Zr.state}if("INSTANCE_STATE_UNSPECIFIED"===sa?nr=500:"NO_CHANGE"===sa?nr=304:("NO_TEMPLATE"===sa||"EMPTY_CONFIG"===sa)&&(Ds={}),304!==nr&&200!==nr)throw $n.create("fetch-status",{httpStatus:nr});return{status:nr,eTag:Co,config:Ds}})()}}class tr{constructor(T,x){this.client=T,this.storage=x}fetch(T){var x=this;return(0,O.Z)(function*(){const H=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(T,H)})()}attemptFetch(T,{throttleEndTimeMillis:x,backoffCount:H}){var X=this;return(0,O.Z)(function*(){yield function Fl(D,T){return new Promise((x,H)=>{const X=Math.max(T-Date.now(),0),re=setTimeout(x,X);D.addEventListener(()=>{clearTimeout(re),H($n.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,x);try{const re=yield X.client.fetch(T);return yield X.storage.deleteThrottleMetadata(),re}catch(re){if(!function Sn(D){if(!(D instanceof ie.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(re))throw re;const Oe={throttleEndTimeMillis:Date.now()+(0,ie.$s)(H),backoffCount:H+1};return yield X.storage.setThrottleMetadata(Oe),X.attemptFetch(T,Oe)}})()}}class gu{constructor(T,x,H,X,re){this.app=T,this._client=x,this._storageCache=H,this._storage=X,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function gs(D,T){const x=D.target.error||void 0;return $n.create(T,{originalErrorMessage:x&&x?.message})}const Ri="app_namespace_store";class vi{constructor(T,x,H,X=function yi(){return new Promise((D,T)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=H=>{T(gs(H,"storage-open"))},x.onsuccess=H=>{D(H.target.result)},x.onupgradeneeded=H=>{0===H.oldVersion&&H.target.result.createObjectStore(Ri,{keyPath:"compositeKey"})}}catch(x){T($n.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=T,this.appName=x,this.namespace=H,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var x=this;return(0,O.Z)(function*(){const H=yield x.openDbPromise;return new Promise((X,re)=>{const qe=H.transaction([Ri],"readonly").objectStore(Ri),Ct=x.createCompositeKey(T);try{const at=qe.get(Ct);at.onerror=Ht=>{re(gs(Ht,"storage-get"))},at.onsuccess=Ht=>{const Pt=Ht.target.result;X(Pt?Pt.value:void 0)}}catch(at){re($n.create("storage-get",{originalErrorMessage:at?.message}))}})})()}set(T,x){var H=this;return(0,O.Z)(function*(){const X=yield H.openDbPromise;return new Promise((re,Oe)=>{const Ct=X.transaction([Ri],"readwrite").objectStore(Ri),at=H.createCompositeKey(T);try{const Ht=Ct.put({compositeKey:at,value:x});Ht.onerror=Pt=>{Oe(gs(Pt,"storage-set"))},Ht.onsuccess=()=>{re()}}catch(Ht){Oe($n.create("storage-set",{originalErrorMessage:Ht?.message}))}})})()}delete(T){var x=this;return(0,O.Z)(function*(){const H=yield x.openDbPromise;return new Promise((X,re)=>{const qe=H.transaction([Ri],"readwrite").objectStore(Ri),Ct=x.createCompositeKey(T);try{const at=qe.delete(Ct);at.onerror=Ht=>{re(gs(Ht,"storage-delete"))},at.onsuccess=()=>{X()}}catch(at){re($n.create("storage-delete",{originalErrorMessage:at?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class ms{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,O.Z)(function*(){const x=T.storage.getLastFetchStatus(),H=T.storage.getLastSuccessfulFetchTimestampMillis(),X=T.storage.getActiveConfig(),re=yield x;re&&(T.lastFetchStatus=re);const Oe=yield H;Oe&&(T.lastSuccessfulFetchTimestampMillis=Oe);const qe=yield X;qe&&(T.activeConfig=qe)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function pg(){return mu.apply(this,arguments)}function mu(){return(mu=(0,O.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function Ia(){(0,ne._registerComponent)(new oe.wA("remote-config",function D(T,{instanceIdentifier:x}){const H=T.getProvider("app").getImmediate(),X=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw $n.create("registration-window");if(!(0,ie.hl)())throw $n.create("indexed-db-unavailable");const{projectId:re,apiKey:Oe,appId:qe}=H.options;if(!re)throw $n.create("registration-project-id");if(!Oe)throw $n.create("registration-api-key");if(!qe)throw $n.create("registration-app-id");const Ct=new vi(qe,H.name,x=x||"firebase"),at=new ms(Ct),Ht=new _e.Yd(du);Ht.logLevel=_e.in.ERROR;const Pt=new Mi(X,ne.SDK_VERSION,x,re,Oe,qe),Wr=new tr(Pt,Ct),nr=new ps(Wr,Ct,at,Ht),Co=new gu(H,nr,at,Ct,Ht);return function Tn(D){const T=(0,ie.m9)(D);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Co),Co},"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(du,"0.4.3"),(0,ne.registerVersion)(du,"0.4.3","esm2017")}();const _s="/firebase-messaging-sw.js",Ho="/firebase-cloud-messaging-push-scope",ba="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zc="google.c.a.c_id",qh="google.c.a.c_l",mg="google.c.a.ts",Da="google.c.a.e";var is=(()=>{return(D=is||(is={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",is;var D})();function co(D){const T=new Uint8Array(D);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _g(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),H=atob(x),X=new Uint8Array(H.length);for(let re=0;re<H.length;++re)X[re]=H.charCodeAt(re);return X}const _u="fcm_token_details_db",yu="fcm_token_object_Store";function qc(D){return vu.apply(this,arguments)}function vu(){return vu=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(_u))return null;let T=null;return(yield(0,de.X3)(_u,5,{upgrade:(H=(0,O.Z)(function*(X,re,Oe,qe){var Ct;if(re<2||!X.objectStoreNames.contains(yu))return;const at=qe.objectStore(yu),Ht=yield at.index("fcmSenderId").get(D);if(yield at.clear(),Ht)if(2===re){const Pt=Ht;if(!Pt.auth||!Pt.p256dh||!Pt.endpoint)return;T={token:Pt.fcmToken,createTime:null!==(Ct=Pt.createTime)&&void 0!==Ct?Ct:Date.now(),subscriptionOptions:{auth:Pt.auth,p256dh:Pt.p256dh,endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:"string"==typeof Pt.vapidKey?Pt.vapidKey:co(Pt.vapidKey)}}}else if(3===re){const Pt=Ht;T={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:co(Pt.auth),p256dh:co(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:co(Pt.vapidKey)}}}else if(4===re){const Pt=Ht;T={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:co(Pt.auth),p256dh:co(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:co(Pt.vapidKey)}}}}),function(re,Oe,qe,Ct){return H.apply(this,arguments)})})).close(),yield(0,de.Lj)(_u),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),Vl(T)?T:null;var H}),vu.apply(this,arguments)}function Vl(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:T}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const $o="firebase-messaging-store";let Go=null;function zo(){return Go||(Go=(0,de.X3)("firebase-messaging-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore($o)}})),Go}function wu(D){return fo.apply(this,arguments)}function fo(){return(fo=(0,O.Z)(function*(D){const T=po(D),H=yield(yield zo()).transaction($o).objectStore($o).get(T);if(H)return H;{const X=yield qc(D.appConfig.senderId);if(X)return yield qo(D,X),X}})).apply(this,arguments)}function qo(D,T){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,O.Z)(function*(D,T){const x=po(D),X=(yield zo()).transaction($o,"readwrite");return yield X.objectStore($o).put(T,x),yield X.done,T})).apply(this,arguments)}function Cu(D){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,O.Z)(function*(D){const T=po(D),H=(yield zo()).transaction($o,"readwrite");yield H.objectStore($o).delete(T),yield H.done})).apply(this,arguments)}function po({appConfig:D}){return D.appId}const Gn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Bl(D,T){return kn.apply(this,arguments)}function kn(){return(kn=(0,O.Z)(function*(D,T){const x=yield ys(D),H=Du(T),X={method:"POST",headers:x,body:JSON.stringify(H)};let re;try{re=yield(yield fetch(bu(D.appConfig),X)).json()}catch(Oe){throw Gn.create("token-subscribe-failed",{errorInfo:Oe?.toString()})}if(re.error)throw Gn.create("token-subscribe-failed",{errorInfo:re.error.message});if(!re.token)throw Gn.create("token-subscribe-no-token");return re.token})).apply(this,arguments)}function Iu(D,T){return js.apply(this,arguments)}function js(){return(js=(0,O.Z)(function*(D,T){const x=yield ys(D),H=Du(T.subscriptionOptions),X={method:"PATCH",headers:x,body:JSON.stringify(H)};let re;try{re=yield(yield fetch(`${bu(D.appConfig)}/${T.token}`,X)).json()}catch(Oe){throw Gn.create("token-update-failed",{errorInfo:Oe?.toString()})}if(re.error)throw Gn.create("token-update-failed",{errorInfo:re.error.message});if(!re.token)throw Gn.create("token-update-no-token");return re.token})).apply(this,arguments)}function Er(D,T){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,O.Z)(function*(D,T){const H={method:"DELETE",headers:yield ys(D)};try{const re=yield(yield fetch(`${bu(D.appConfig)}/${T}`,H)).json();if(re.error)throw Gn.create("token-unsubscribe-failed",{errorInfo:re.error.message})}catch(X){throw Gn.create("token-unsubscribe-failed",{errorInfo:X?.toString()})}})).apply(this,arguments)}function bu({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function ys(D){return ur.apply(this,arguments)}function ur(){return(ur=(0,O.Z)(function*({appConfig:D,installations:T}){const x=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Du({p256dh:D,auth:T,endpoint:x,vapidKey:H}){const X={web:{endpoint:x,auth:T,p256dh:D}};return H!==ba&&(X.web.applicationPubKey=H),X}const go=6048e5;function Zh(D){return zi.apply(this,arguments)}function zi(){return(zi=(0,O.Z)(function*(D){const T=yield Yh(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:T.endpoint,auth:co(T.getKey("auth")),p256dh:co(T.getKey("p256dh"))},H=yield wu(D.firebaseDependencies);if(H){if(Zc(H.subscriptionOptions,x))return Date.now()>=H.createTime+go?Vt(D,{token:H.token,createTime:Date.now(),subscriptionOptions:x}):H.token;try{yield Er(D.firebaseDependencies,H.token)}catch(X){console.warn(X)}return Kh(D.firebaseDependencies,x)}return Kh(D.firebaseDependencies,x)})).apply(this,arguments)}function jl(D){return mo.apply(this,arguments)}function mo(){return(mo=(0,O.Z)(function*(D){const T=yield wu(D.firebaseDependencies);T&&(yield Er(D.firebaseDependencies,T.token),yield Cu(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Vt(D,T){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,O.Z)(function*(D,T){try{const x=yield Iu(D.firebaseDependencies,T),H=Object.assign(Object.assign({},T),{token:x,createTime:Date.now()});return yield qo(D.firebaseDependencies,H),x}catch(x){throw yield jl(D),x}})).apply(this,arguments)}function Kh(D,T){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,O.Z)(function*(D,T){const H={token:yield Bl(D,T),createTime:Date.now(),subscriptionOptions:T};return yield qo(D,H),H.token})).apply(this,arguments)}function Yh(D,T){return xa.apply(this,arguments)}function xa(){return(xa=(0,O.Z)(function*(D,T){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_g(T)})})).apply(this,arguments)}function Zc(D,T){return T.vapidKey===D.vapidKey&&T.endpoint===D.endpoint&&T.auth===D.auth&&T.p256dh===D.p256dh}function Hl(D){const T={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Qh(D,T){if(!T.notification)return;D.notification={};const x=T.notification.title;x&&(D.notification.title=x);const H=T.notification.body;H&&(D.notification.body=H);const X=T.notification.image;X&&(D.notification.image=X);const re=T.notification.icon;re&&(D.notification.icon=re)}(T,D),function ye(D,T){T.data&&(D.data=T.data)}(T,D),function tn(D,T){var x,H,X,re,Oe;if(!(T.fcmOptions||null!==(x=T.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const qe=null!==(X=null===(H=T.fcmOptions)||void 0===H?void 0:H.link)&&void 0!==X?X:null===(re=T.notification)||void 0===re?void 0:re.click_action;qe&&(D.fcmOptions.link=qe);const Ct=null===(Oe=T.fcmOptions)||void 0===Oe?void 0:Oe.analytics_label;Ct&&(D.fcmOptions.analyticsLabel=Ct)}(T,D),T}function yg(D){return"object"==typeof D&&!!D&&zc in D}function Xh(D,T){const x=[];for(let H=0;H<D.length;H++)x.push(D.charAt(H)),H<T.length&&x.push(T.charAt(H));return x.join("")}function $l(D){return Gn.create("missing-app-config-values",{valueName:D})}Xh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Xh("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Zo{constructor(T,x,H){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function lr(D){if(!D||!D.options)throw $l("App Configuration Object");if(!D.name)throw $l("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const H of T)if(!x[H])throw $l(H);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:X,installations:x,analyticsProvider:H}}_delete(){return Promise.resolve()}}function qi(D){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(_s,{scope:Ho}),D.swRegistration.update().catch(()=>{})}catch(T){throw Gn.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function Kc(D,T){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,O.Z)(function*(D,T){if(!T&&!D.swRegistration&&(yield qi(D)),T||!D.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Gn.create("invalid-sw-registration");D.swRegistration=T}})).apply(this,arguments)}function Jh(D,T){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,O.Z)(function*(D,T){T?D.vapidKey=T:D.vapidKey||(D.vapidKey=ba)})).apply(this,arguments)}function $r(){return($r=(0,O.Z)(function*(D,T){if(!navigator)throw Gn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Gn.create("permission-blocked");return yield Jh(D,T?.vapidKey),yield Kc(D,T?.serviceWorkerRegistration),Zh(D)})).apply(this,arguments)}function Qo(D,T,x){return vs.apply(this,arguments)}function vs(){return(vs=(0,O.Z)(function*(D,T,x){const H=Hs(T);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(H,{message_id:x[zc],message_name:x[qh],message_time:x[mg],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Hs(D){switch(D){case is.NOTIFICATION_CLICKED:return"notification_open";case is.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Xo(){return(Xo=(0,O.Z)(function*(D,T){const x=T.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===is.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Hl(x)):D.onMessageHandler.next(Hl(x)));const H=x.data;yg(H)&&"1"===H[Da]&&(yield Qo(D,x.messageType,H))})).apply(this,arguments)}const Gl="@firebase/messaging",$s=D=>{const T=new Zo(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Yc(D,T){return Xo.apply(this,arguments)}(T,x)),T},Ma=D=>{const T=D.getProvider("messaging").getImmediate();return{getToken:H=>function kr(D,T){return $r.apply(this,arguments)}(T,H)}};function zl(){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,O.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function tf(){(0,ne._registerComponent)(new oe.wA("messaging",$s,"PUBLIC")),(0,ne._registerComponent)(new oe.wA("messaging-internal",Ma,"PRIVATE")),(0,ne.registerVersion)(Gl,"0.12.3"),(0,ne.registerVersion)(Gl,"0.12.3","esm2017")}();const Jc="analytics",ri="firebase_id",ed="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",rf="https://www.googletagmanager.com/gtag/js",Fr=new _e.Yd("@firebase/analytics");function sf(D){return Promise.all(D.map(T=>T.catch(x=>x)))}function Ig(D,T){const x=document.createElement("script");x.src=`${rf}?l=${D}&id=${T}`,x.async=!0,document.head.appendChild(x)}function Ra(D,T,x,H,X,re){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,O.Z)(function*(D,T,x,H,X,re){const Oe=H[X];try{if(Oe)yield T[Oe];else{const Ct=(yield sf(x)).find(at=>at.measurementId===X);Ct&&(yield T[Ct.appId])}}catch(qe){Fr.error(qe)}D("config",X,re)})).apply(this,arguments)}function _o(D,T,x,H,X){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,O.Z)(function*(D,T,x,H,X){try{let re=[];if(X&&X.send_to){let Oe=X.send_to;Array.isArray(Oe)||(Oe=[Oe]);const qe=yield sf(x);for(const Ct of Oe){const at=qe.find(Pt=>Pt.measurementId===Ct),Ht=at&&T[at.appId];if(!Ht){re=[];break}re.push(Ht)}}0===re.length&&(re=Object.values(T)),yield Promise.all(re),D("event",H,X||{})}catch(re){Fr.error(re)}})).apply(this,arguments)}function Es(D){const T=window.document.getElementsByTagName("script");for(const x of Object.values(T))if(x.src&&x.src.includes(rf)&&x.src.includes(D))return x;return null}const Gr=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),nd=new class bg{constructor(T={},x=1e3){this.throttleMetadata=T,this.intervalMillis=x}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,x){this.throttleMetadata[T]=x}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function zs(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function ql(D){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,O.Z)(function*(D){var T;const{appId:x,apiKey:H}=D,X={method:"GET",headers:zs(H)},re=ed.replace("{app-id}",x),Oe=yield fetch(re,X);if(200!==Oe.status&&304!==Oe.status){let qe="";try{const Ct=yield Oe.json();null!==(T=Ct.error)&&void 0!==T&&T.message&&(qe=Ct.error.message)}catch{}throw Gr.create("config-fetch-failed",{httpStatus:Oe.status,responseMessage:qe})}return Oe.json()})).apply(this,arguments)}function xu(D){return ss.apply(this,arguments)}function ss(){return(ss=(0,O.Z)(function*(D,T=nd,x){const{appId:H,apiKey:X,measurementId:re}=D.options;if(!H)throw Gr.create("no-app-id");if(!X){if(re)return{measurementId:re,appId:H};throw Gr.create("no-api-key")}const Oe=T.getThrottleMetadata(H)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new ea;return setTimeout((0,O.Z)(function*(){qe.abort()}),void 0!==x?x:6e4),Mu({appId:H,apiKey:X,measurementId:re},Oe,qe,T)})).apply(this,arguments)}function Mu(D,T,x){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,O.Z)(function*(D,{throttleEndTimeMillis:T,backoffCount:x},H,X=nd){var re;const{appId:Oe,measurementId:qe}=D;try{yield Ru(H,T)}catch(Ct){if(qe)return Fr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${Ct?.message}]`),{appId:Oe,measurementId:qe};throw Ct}try{const Ct=yield ql(D);return X.deleteThrottleMetadata(Oe),Ct}catch(Ct){const at=Ct;if(!Wl(at)){if(X.deleteThrottleMetadata(Oe),qe)return Fr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${at?.message}]`),{appId:Oe,measurementId:qe};throw Ct}const Ht=503===Number(null===(re=at?.customData)||void 0===re?void 0:re.httpStatus)?(0,ie.$s)(x,X.intervalMillis,30):(0,ie.$s)(x,X.intervalMillis),Pt={throttleEndTimeMillis:Date.now()+Ht,backoffCount:x+1};return X.setThrottleMetadata(Oe,Pt),Fr.debug(`Calling attemptFetch again in ${Ht} millis`),Mu(D,Pt,H,X)}})).apply(this,arguments)}function Ru(D,T){return new Promise((x,H)=>{const X=Math.max(T-Date.now(),0),re=setTimeout(x,X);D.addEventListener(()=>{clearTimeout(re),H(Gr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Wl(D){if(!(D instanceof ie.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}class ea{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Zl,na;function ta(){return(ta=(0,O.Z)(function*(D,T,x,H,X){if(X&&X.global)D("event",x,H);else{const re=yield T;D("event",x,Object.assign(Object.assign({},H),{send_to:re}))}})).apply(this,arguments)}function Yl(D){na=D}function Nu(D){Zl=D}function Ql(){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,O.Z)(function*(){if(!(0,ie.hl)())return Fr.warn(Gr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(D){return Fr.warn(Gr.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function ku(){return(ku=(0,O.Z)(function*(D,T,x,H,X,re,Oe){var qe;const Ct=xu(D);Ct.then(nr=>{x[nr.measurementId]=nr.appId,D.options.measurementId&&nr.measurementId!==D.options.measurementId&&Fr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${nr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(nr=>Fr.error(nr)),T.push(Ct);const at=Ql().then(nr=>{if(nr)return H.getId()}),[Ht,Pt]=yield Promise.all([Ct,at]);Es(re)||Ig(re,Ht.measurementId),na&&(X("consent","default",na),Yl(void 0)),X("js",new Date);const Wr=null!==(qe=Oe?.config)&&void 0!==qe?qe:{};return Wr.origin="firebase",Wr.update=!0,null!=Pt&&(Wr[ri]=Pt),X("config",Ht.measurementId,Wr),Zl&&(X("set",Zl),Nu(void 0)),Ht.measurementId})).apply(this,arguments)}class Fu{constructor(T){this.app=T}_delete(){return delete Zi[this.app.options.appId],Promise.resolve()}}let Zi={},uf=[];const wo={};let Xl,wi,os="dataLayer",Is=!1;function ra(D,T,x){!function Jl(){const D=[];if((0,ie.ru)()&&D.push("This is a browser extension environment."),(0,ie.zI)()||D.push("Cookies are not available."),D.length>0){const T=D.map((H,X)=>`(${X+1}) ${H}`).join(" "),x=Gr.create("invalid-analytics-context",{errorInfo:T});Fr.warn(x.message)}}();const H=D.options.appId;if(!H)throw Gr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Gr.create("no-api-key");Fr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Zi[H])throw Gr.create("already-exists",{id:H});if(!Is){!function td(D){let T=[];Array.isArray(window[D])?T=window[D]:window[D]=T}(os);const{wrappedGtag:re,gtagCore:Oe}=function af(D,T,x,H,X){let re=function(...Oe){window[H].push(arguments)};return window[X]&&"function"==typeof window[X]&&(re=window[X]),window[X]=function Jo(D,T,x,H){function re(){return(re=(0,O.Z)(function*(Oe,qe,Ct){try{"event"===Oe?yield _o(D,T,x,qe,Ct):"config"===Oe?yield Ra(D,T,x,H,qe,Ct):"consent"===Oe?D("consent","update",Ct):D("set",qe)}catch(at){Fr.error(at)}})).apply(this,arguments)}return function X(Oe,qe,Ct){return re.apply(this,arguments)}}(re,D,T,x),{gtagCore:re,wrappedGtag:window[X]}}(Zi,uf,wo,os,"gtag");wi=re,Xl=Oe,Is=!0}return Zi[H]=function id(D,T,x,H,X,re,Oe){return ku.apply(this,arguments)}(D,uf,wo,T,Xl,os,x),new Fu(D)}function ad(){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,O.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const ln="@firebase/analytics";!function cd(){(0,ne._registerComponent)(new oe.wA(Jc,(T,{options:x})=>ra(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ne._registerComponent)(new oe.wA("analytics-internal",function D(T){try{const x=T.getProvider(Jc).getImmediate();return{logEvent:(H,X,re)=>function cf(D,T,x,H){D=(0,ie.m9)(D),function yo(D,T,x,H,X){return ta.apply(this,arguments)}(wi,Zi[D.app.options.appId],T,x,H).catch(X=>Fr.error(X))}(x,H,X,re)}}catch(x){throw Gr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ne.registerVersion)(ln,"0.9.3"),(0,ne.registerVersion)(ln,"0.9.3","esm2017")}();var Tg=U(4408),Vu=U(7565);const fy=new class df extends Vu.v{}(class Uu extends Tg.o{constructor(T,x){super(T,x),this.scheduler=T,this.work=x}schedule(T,x=0){return x>0?super.schedule(T,x):(this.delay=x,this.state=T,this.scheduler.flush(this),this)}execute(T,x){return x>0||this.closed?super.execute(T,x):this._execute(T,x)}requestAsyncId(T,x,H=0){return null!=H&&H>0||null==H&&this.delay>0?super.requestAsyncId(T,x,H):(T.flush(this),0)}});var Sg=U(4986),Fa=U(8505),Ln=U(5363),dd=U(9468);const Bu=new d.GfV("7.5.0"),hd="__angularfire_symbol__analyticsIsSupportedValue",Lr="__angularfire_symbol__analyticsIsSupported",bs="__angularfire_symbol__remoteConfigIsSupportedValue",ec="__angularfire_symbol__remoteConfigIsSupported",La="__angularfire_symbol__messagingIsSupportedValue",Ys="__angularfire_symbol__messagingIsSupported";function zr(D,T,x){if(T){if(1===T.length)return T[0];const re=T.filter(Oe=>Oe.app===x);if(1===re.length)return re[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[Lr]||(globalThis[Lr]=ad().then(D=>globalThis[hd]=D).catch(()=>globalThis[hd]=!1)),globalThis[Ys]||(globalThis[Ys]=zl().then(D=>globalThis[La]=D).catch(()=>globalThis[La]=!1)),globalThis[ec]||(globalThis[ec]=pg().then(D=>globalThis[bs]=D).catch(()=>globalThis[bs]=!1));const pd=(D,T)=>{const x=T?[T]:(0,$.C6)(),H=[];return x.forEach(X=>{X.container.getProvider(D).instances.forEach(Oe=>{H.includes(Oe)||H.push(Oe)})}),H};function Bt(){}class Qs{constructor(T,x=fy){this.zone=T,this.delegate=x}now(){return this.delegate.now()}schedule(T,x,H){const X=this.zone;return this.delegate.schedule(function(Oe){X.runGuarded(()=>{T.apply(this,[Oe])})},x,H)}}class ut{constructor(T){this.zone=T,this.task=null}call(T,x){const H=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Bt,{},Bt,Bt)),x.pipe((0,Fa.b)({next:H,complete:H,error:H})).subscribe(T).add(H)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let qr=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Qs(Zone.current)),this.insideAngular=x.run(()=>new Qs(Zone.current,Sg.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(d.LFG(d.R0b))},D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function gn(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Cr(D){return D.pipe((0,Ln.Q)(gn().outsideAngular))}function Ua(D){return gn(),function ju(D){return function(x){return(x=x.lift(new ut(D.ngZone))).pipe((0,dd.R)(D.outsideAngular),(0,Ln.Q)(D.insideAngular))}}(gn())(D)}},2722:(Et,De,U)=>{U.d(De,{$:()=>bu,A:()=>W,B:()=>Se,G:()=>Gc,H:()=>Mn,J:()=>tr,L:()=>q,M:()=>mu,N:()=>gg,P:()=>Sg,Q:()=>zc,R:()=>ld,T:()=>qh,U:()=>ba,V:()=>is,W:()=>co,X:()=>qc,Y:()=>ni,Z:()=>Bl,_:()=>Iu,a:()=>Na,a0:()=>Zh,a1:()=>jl,a2:()=>Vt,a3:()=>Kh,a4:()=>Yh,a5:()=>Zc,a6:()=>Qh,a7:()=>ye,a8:()=>yg,a9:()=>Xh,aA:()=>G,aB:()=>Ct,aC:()=>Cr,aD:()=>as,aE:()=>_r,aI:()=>zs,aL:()=>Da,aa:()=>qi,ab:()=>Kc,ac:()=>Jh,af:()=>Qo,ag:()=>Hs,ah:()=>Yc,ak:()=>$o,al:()=>Su,an:()=>rf,ao:()=>Pa,ap:()=>Ee,aq:()=>vt,ar:()=>pt,as:()=>Fe,at:()=>So,au:()=>Zr,av:()=>In,aw:()=>xe,ax:()=>J,ay:()=>nr,az:()=>ze,b:()=>Gr,c:()=>La,d:()=>py,e:()=>fd,f:()=>ju,g:()=>H,h:()=>D,i:()=>Ou,j:()=>Oe,k:()=>yf,l:()=>Ks,m:()=>dE,o:()=>de,r:()=>Tg,s:()=>hy,u:()=>fy});var d=U(5861),$=U(2090),O=U(9681),ne=U(1877),ie=U(655),oe=U(4859);const de={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},W={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Se=function Q(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},We=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},lt=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ae=new ne.Yd("@firebase/auth");function be(w,...g){Ae.logLevel<=ne.in.ERROR&&Ae.error(`Auth (${O.SDK_VERSION}): ${w}`,...g)}function Fe(w,...g){throw je(w,...g)}function xe(w,...g){return je(w,...g)}function Pe(w,g,_){const E=Object.assign(Object.assign({},We()),{[g]:_});return new $.LL("auth","Firebase",E).create(g,{appName:w.name})}function Te(w,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Fe(w,"argument-error"),Pe(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(w,...g){if("string"!=typeof w){const _=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(_,...E)}return lt.create(w,...g)}function J(w,g,..._){if(!w)throw je(g,..._)}function ae(w){const g="INTERNAL ASSERTION FAILED: "+w;throw be(g),new Error(g)}function Ee(w,g){w||ae(g)}const Ke=new Map;function ze(w){Ee(w instanceof Function,"Expected a class definition");let g=Ke.get(w);return g?(Ee(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,Ke.set(w,g),g)}function ue(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function pe(){return"http:"===Ce()||"https:"===Ce()}function Ce(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Be{constructor(g,_){this.shortDelay=g,this.longDelay=_,Ee(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function Ne(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(pe()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function nt(w,g){Ee(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class Ye{static initialize(g,_,E){this.fetchImpl=g,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ae("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ae("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ae("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const hn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Tt=new Be(3e4,6e4);function bt(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function st(w,g,_,E){return sn.apply(this,arguments)}function sn(){return(sn=(0,d.Z)(function*(w,g,_,E,R={}){return Dn(w,R,(0,d.Z)(function*(){let k={},ee={};E&&("GET"===g?ee=E:k={body:JSON.stringify(E)});const Re=(0,$.xO)(Object.assign({key:w.config.apiKey},ee)).slice(1),it=yield w._getAdditionalHeaders();return it["Content-Type"]="application/json",w.languageCode&&(it["X-Firebase-Locale"]=w.languageCode),Ye.fetch()(Vr(w,w.config.apiHost,_,Re),Object.assign({method:g,headers:it,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function Dn(w,g,_){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,d.Z)(function*(w,g,_){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},hn),g);try{const R=new Hi(w),k=yield Promise.race([_(),R.promise]);R.clearNetworkTimeout();const ee=yield k.json();if("needConfirmation"in ee)throw Bn(w,"account-exists-with-different-credential",ee);if(k.ok&&!("errorMessage"in ee))return ee;{const Re=k.ok?ee.errorMessage:ee.error.message,[it,_t]=Re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===it)throw Bn(w,"credential-already-in-use",ee);if("EMAIL_EXISTS"===it)throw Bn(w,"email-already-in-use",ee);if("USER_DISABLED"===it)throw Bn(w,"user-disabled",ee);const Qt=E[it]||it.toLowerCase().replace(/[_\s]+/g,"-");if(_t)throw Pe(w,Qt,_t);Fe(w,Qt)}}catch(R){if(R instanceof $.ZR)throw R;Fe(w,"network-request-failed")}})).apply(this,arguments)}function un(w,g,_,E){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,d.Z)(function*(w,g,_,E,R={}){const k=yield st(w,g,_,E,R);return"mfaPendingCredential"in k&&Fe(w,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function Vr(w,g,_,E){const R=`${g}${_}?${E}`;return w.config.emulator?nt(w.config,R):`${w.config.apiScheme}://${R}`}class Hi{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(xe(this.auth,"network-request-failed")),Tt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bn(w,g,_){const E={appName:w.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const R=xe(w,g,E);return R.customData._tokenResponse=_,R}function Si(){return(Si=(0,d.Z)(function*(w,g){return st(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function vn(w,g){return pr.apply(this,arguments)}function pr(){return(pr=(0,d.Z)(function*(w,g){return st(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ct(w,g){return gr.apply(this,arguments)}function gr(){return(gr=(0,d.Z)(function*(w,g){return st(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Pr(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function ti(){return(ti=(0,d.Z)(function*(w,g=!1){const _=(0,$.m9)(w),E=yield _.getIdToken(g),R=It(E);J(R&&R.exp&&R.auth_time&&R.iat,_.auth,"internal-error");const k="object"==typeof R.firebase?R.firebase:void 0,ee=k?.sign_in_provider;return{claims:R,token:E,authTime:Pr(Ot(R.auth_time)),issuedAtTime:Pr(Ot(R.iat)),expirationTime:Pr(Ot(R.exp)),signInProvider:ee||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function Ot(w){return 1e3*Number(w)}function It(w){const[g,_,E]=w.split(".");if(void 0===g||void 0===_||void 0===E)return be("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,$.tV)(_);return R?JSON.parse(R):(be("Failed to decode base64 JWT payload"),null)}catch(R){return be("Caught error parsing JWT payload as JSON",R?.toString()),null}}function wn(w,g){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,d.Z)(function*(w,g,_=!1){if(_)return g;try{return yield g}catch(E){throw E instanceof $.ZR&&xn(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}function xn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class gi{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const R=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),E)}iteration(){var g=this;return(0,d.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&g.schedule(!0))}g.schedule()})()}}class er{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pr(this.lastLoginAt),this.creationTime=Pr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ai(w){return jt.apply(this,arguments)}function jt(){return(jt=(0,d.Z)(function*(w){var g;const _=w.auth,E=yield w.getIdToken(),R=yield wn(w,ct(_,{idToken:E}));J(R?.users.length,_,"internal-error");const k=R.users[0];w._notifyReloadListener(k);const ee=null!==(g=k.providerUserInfo)&&void 0!==g&&g.length?Hn(k.providerUserInfo):[],Re=Br(w.providerData,ee),Qt=!!w.isAnonymous&&!(w.email&&k.passwordHash||Re?.length),bn={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:Re,metadata:new er(k.createdAt,k.lastLoginAt),isAnonymous:Qt};Object.assign(w,bn)})).apply(this,arguments)}function Kt(){return(Kt=(0,d.Z)(function*(w){const g=(0,$.m9)(w);yield Ai(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Br(w,g){return[...w.filter(E=>!g.some(R=>R.providerId===E.providerId)),...g]}function Hn(w){return w.map(g=>{var{providerId:_}=g,E=(0,ie._T)(g,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Ie(){return(Ie=(0,d.Z)(function*(w,g){const _=yield Dn(w,{},(0,d.Z)(function*(){const E=(0,$.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:R,apiKey:k}=w.config,ee=Vr(w,R,"/v1/token",`key=${k}`),Re=yield w._getAdditionalHeaders();return Re["Content-Type"]="application/x-www-form-urlencoded",Ye.fetch()(ee,{method:"POST",headers:Re,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class rt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){J(g.idToken,"internal-error"),J(typeof g.idToken<"u","internal-error"),J(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function Rt(w){const g=It(w);return J(g,"internal-error"),J(typeof g.exp<"u","internal-error"),J(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var E=this;return(0,d.Z)(function*(){return J(!E.accessToken||E.refreshToken,g,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var E=this;return(0,d.Z)(function*(){const{accessToken:R,refreshToken:k,expiresIn:ee}=yield function $e(w,g){return Ie.apply(this,arguments)}(g,_);E.updateTokensAndExpiration(R,k,Number(ee))})()}updateTokensAndExpiration(g,_,E){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,_){const{refreshToken:E,accessToken:R,expirationTime:k}=_,ee=new rt;return E&&(J("string"==typeof E,"internal-error",{appName:g}),ee.refreshToken=E),R&&(J("string"==typeof R,"internal-error",{appName:g}),ee.accessToken=R),k&&(J("number"==typeof k,"internal-error",{appName:g}),ee.expirationTime=k),ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new rt,this.toJSON())}_performRefresh(){return ae("not implemented")}}function St(w,g){J("string"==typeof w||typeof w>"u","internal-error",{appName:g})}class xt{constructor(g){var{uid:_,auth:E,stsTokenManager:R}=g,k=(0,ie._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new er(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,d.Z)(function*(){const E=yield wn(_,_.stsTokenManager.getToken(_.auth,g));return J(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(g){return function jn(w){return ti.apply(this,arguments)}(this,g)}reload(){return function xi(w){return Kt.apply(this,arguments)}(this)}_assign(g){this!==g&&(J(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new xt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var E=this;return(0,d.Z)(function*(){let R=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),R=!0),_&&(yield Ai(E)),yield E.auth._persistUserIfCurrent(E),R&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,d.Z)(function*(){const _=yield g.getIdToken();return yield wn(g,function pi(w,g){return Si.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var E,R,k,ee,Re,it,_t,Qt;const bn=null!==(E=_.displayName)&&void 0!==E?E:void 0,oi=null!==(R=_.email)&&void 0!==R?R:void 0,As=null!==(k=_.phoneNumber)&&void 0!==k?k:void 0,aa=null!==(ee=_.photoURL)&&void 0!==ee?ee:void 0,ja=null!==(Re=_.tenantId)&&void 0!==Re?Re:void 0,Ha=null!==(it=_._redirectEventId)&&void 0!==it?it:void 0,$u=null!==(_t=_.createdAt)&&void 0!==_t?_t:void 0,Ef=null!==(Qt=_.lastLoginAt)&&void 0!==Qt?Qt:void 0,{uid:Gu,emailVerified:kg,isAnonymous:Fg,providerData:Cf,stsTokenManager:oc}=_;J(Gu&&oc,g,"internal-error");const yy=rt.fromJSON(this.name,oc);J("string"==typeof Gu,g,"internal-error"),St(bn,g.name),St(oi,g.name),J("boolean"==typeof kg,g,"internal-error"),J("boolean"==typeof Fg,g,"internal-error"),St(As,g.name),St(aa,g.name),St(ja,g.name),St(Ha,g.name),St($u,g.name),St(Ef,g.name);const If=new xt({uid:Gu,auth:g,email:oi,emailVerified:kg,displayName:bn,isAnonymous:Fg,photoURL:aa,phoneNumber:As,tenantId:ja,stsTokenManager:yy,createdAt:$u,lastLoginAt:Ef});return Cf&&Array.isArray(Cf)&&(If.providerData=Cf.map(Lg=>Object.assign({},Lg))),Ha&&(If._redirectEventId=Ha),If}static _fromIdTokenResponse(g,_,E=!1){return(0,d.Z)(function*(){const R=new rt;R.updateFromServerResponse(_);const k=new xt({uid:_.localId,auth:g,stsTokenManager:R,isAnonymous:E});return yield Ai(k),k})()}}const q=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,E){var R=this;return(0,d.Z)(function*(){R.storage[_]=E})()}_get(_){var E=this;return(0,d.Z)(function*(){const R=E.storage[_];return void 0===R?null:R})()}_remove(_){var E=this;return(0,d.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return w.type="NONE",w})();function G(w,g,_){return`firebase:${w}:${g}:${_}`}class Y{constructor(g,_,E){this.persistence=g,this.auth=_,this.userKey=E;const{config:R,name:k}=this.auth;this.fullUserKey=G(this.userKey,R.apiKey,k),this.fullPersistenceKey=G("persistence",R.apiKey,k),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,d.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?xt._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,d.Z)(function*(){if(_.persistence===g)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,E="authUser"){return(0,d.Z)(function*(){if(!_.length)return new Y(ze(q),g,E);const R=(yield Promise.all(_.map(function(){var _t=(0,d.Z)(function*(Qt){if(yield Qt._isAvailable())return Qt});return function(Qt){return _t.apply(this,arguments)}}()))).filter(_t=>_t);let k=R[0]||ze(q);const ee=G(E,g.config.apiKey,g.name);let Re=null;for(const _t of _)try{const Qt=yield _t._get(ee);if(Qt){const bn=xt._fromJSON(g,Qt);_t!==k&&(Re=bn),k=_t;break}}catch{}const it=R.filter(_t=>_t._shouldAllowMigration);return k._shouldAllowMigration&&it.length?(k=it[0],Re&&(yield k._set(ee,Re.toJSON())),yield Promise.all(_.map(function(){var _t=(0,d.Z)(function*(Qt){if(Qt!==k)try{yield Qt._remove(ee)}catch{}});return function(Qt){return _t.apply(this,arguments)}}())),new Y(k,g,E)):new Y(k,g,E)})()}}function j(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Me(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(N(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Ze(g))return"Blackberry";if(Ut(g))return"Webos";if(B(g))return"Safari";if((g.includes("chrome/")||se(g))&&!g.includes("edge/"))return"Chrome";if(pt(g))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function N(w=(0,$.z$)()){return/firefox\//i.test(w)}function B(w=(0,$.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function se(w=(0,$.z$)()){return/crios\//i.test(w)}function Me(w=(0,$.z$)()){return/iemobile/i.test(w)}function pt(w=(0,$.z$)()){return/android/i.test(w)}function Ze(w=(0,$.z$)()){return/blackberry/i.test(w)}function Ut(w=(0,$.z$)()){return/webos/i.test(w)}function vt(w=(0,$.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function In(w=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function jr(w=(0,$.z$)()){return vt(w)||pt(w)||Ut(w)||Ze(w)||/windows phone/i.test(w)||Me(w)}function Uo(w,g=[]){let _;switch(w){case"Browser":_=j((0,$.z$)());break;case"Worker":_=`${j((0,$.z$)())}-${w}`;break;default:_=w}const E=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${O.SDK_VERSION}/${E}`}class Nl{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const E=k=>new Promise((ee,Re)=>{try{ee(g(k))}catch(it){Re(it)}});E.onAbort=_,this.queue.push(E);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,d.Z)(function*(){if(_.auth.currentUser===g)return;const E=[];try{for(const R of _.queue)yield R(g),R.onAbort&&E.push(R.onAbort)}catch(R){E.reverse();for(const k of E)try{k()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:R?.message})}})()}}class Ol{constructor(g,_,E){this.app=g,this.heartbeatServiceProvider=_,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vo(this),this.idTokenSubscription=new Vo(this),this.beforeStateQueue=new Nl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,_){var E=this;return _&&(this._popupRedirectResolver=ze(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var R,k;if(!E._deleted&&(E.persistenceManager=yield Y.create(E,g),!E._deleted)){if(null!==(R=E._popupRedirectResolver)&&void 0!==R&&R._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(k=E.currentUser)||void 0===k?void 0:k.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,d.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,d.Z)(function*(){var E;const R=yield _.assertedPersistence.getCurrentUser();let k=R,ee=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Re=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,it=k?._redirectEventId,_t=yield _.tryRedirectSignIn(g);(!Re||Re===it)&&_t?.user&&(k=_t.user,ee=!0)}if(!k)return _.directlySetCurrentUser(null);if(!k._redirectEventId){if(ee)try{yield _.beforeStateQueue.runMiddleware(k)}catch(Re){k=R,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Re))}return k?_.reloadAndSetCurrentUserOrClear(k):_.directlySetCurrentUser(null)}return J(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===k._redirectEventId?_.directlySetCurrentUser(k):_.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(g){var _=this;return(0,d.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,d.Z)(function*(){try{yield Ai(g)}catch(E){if("auth/network-request-failed"!==E?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Ve(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,d.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,d.Z)(function*(){const E=g?(0,$.m9)(g):null;return E&&J(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(g,_=!1){var E=this;return(0,d.Z)(function*(){if(!E._deleted)return g&&J(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),_||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,d.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,d.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(ze(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new $.LL("auth","Firebase",g())}onAuthStateChanged(g,_,E){return this.registerStateListener(this.authStateSubscription,g,_,E)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,E){return this.registerStateListener(this.idTokenSubscription,g,_,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var E=this;return(0,d.Z)(function*(){const R=yield E.getOrInitRedirectPersistenceManager(_);return null===g?R.removeCurrentUser():R.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const E=g&&ze(g)||_._popupRedirectResolver;J(E,_,"argument-error"),_.redirectPersistenceManager=yield Y.create(_,[ze(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,d.Z)(function*(){var E,R;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===g?_._currentUser:(null===(R=_.redirectUser)||void 0===R?void 0:R._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,d.Z)(function*(){if(g===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,E,R){if(this._deleted)return()=>{};const k="function"==typeof _?_:_.next.bind(_),ee=this._isInitialized?Promise.resolve():this._initializationPromise;return J(ee,this,"internal-error"),ee.then(()=>k(this.currentUser)),"function"==typeof _?g.addObserver(_,E,R):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Uo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,d.Z)(function*(){var _;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const R=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return R&&(E["X-Firebase-Client"]=R),E})()}}function _r(w){return(0,$.m9)(w)}class Vo{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Gc(w,g,_){const E=_r(w);J(E._canInitEmulator,E,"emulator-config-failed"),J(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const R=!!_?.disableWarnings,k=kl(g),{host:ee,port:Re}=function du(w){const g=kl(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(E);if(R){const k=R[1];return{host:k,port:Bo(E.substr(k.length+1))}}{const[k,ee]=E.split(":");return{host:k,port:Bo(ee)}}}(g);E.config.emulator={url:`${k}//${ee}${null===Re?"":`:${Re}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ee,port:Re,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function on(){function w(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function kl(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function Bo(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class Mn{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return ae("not implemented")}_getIdTokenResponse(g){return ae("not implemented")}_linkToIdToken(g,_){return ae("not implemented")}_getReauthenticationResolver(g){return ae("not implemented")}}function Nr(w,g){return $n.apply(this,arguments)}function $n(){return($n=(0,d.Z)(function*(w,g){return st(w,"POST","/v1/accounts:resetPassword",bt(w,g))})).apply(this,arguments)}function Hr(w,g){return mi.apply(this,arguments)}function mi(){return(mi=(0,d.Z)(function*(w,g){return st(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ot(w,g){return kt.apply(this,arguments)}function kt(){return(kt=(0,d.Z)(function*(w,g){return st(w,"POST","/v1/accounts:update",bt(w,g))})).apply(this,arguments)}function Or(){return(Or=(0,d.Z)(function*(w,g){return un(w,"POST","/v1/accounts:signInWithPassword",bt(w,g))})).apply(this,arguments)}function rs(w,g){return ar.apply(this,arguments)}function ar(){return(ar=(0,d.Z)(function*(w,g){return st(w,"POST","/v1/accounts:sendOobCode",bt(w,g))})).apply(this,arguments)}function $i(w,g){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,d.Z)(function*(w,g){return rs(w,g)})).apply(this,arguments)}function hu(w,g){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,d.Z)(function*(w,g){return rs(w,g)})).apply(this,arguments)}function Yt(w,g){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,d.Z)(function*(w,g){return rs(w,g)})).apply(this,arguments)}function jo(w,g){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,d.Z)(function*(w,g){return rs(w,g)})).apply(this,arguments)}function yr(){return(yr=(0,d.Z)(function*(w,g){return un(w,"POST","/v1/accounts:signInWithEmailLink",bt(w,g))})).apply(this,arguments)}function ps(){return(ps=(0,d.Z)(function*(w,g){return un(w,"POST","/v1/accounts:signInWithEmailLink",bt(w,g))})).apply(this,arguments)}class _i extends Mn{constructor(g,_,E,R=null){super("password",E),this._email=g,this._password=_,this._tenantId=R}static _fromEmailAndPassword(g,_){return new _i(g,_,"password")}static _fromEmailAndCode(g,_,E=null){return new _i(g,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,d.Z)(function*(){switch(_.signInMethod){case"password":return function Pn(w,g){return Or.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function fs(w,g){return yr.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Fe(g,"internal-error")}})()}_linkToIdToken(g,_){var E=this;return(0,d.Z)(function*(){switch(E.signInMethod){case"password":return Hr(g,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function fu(w,g){return ps.apply(this,arguments)}(g,{idToken:_,email:E._email,oobCode:E._password});default:Fe(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Mi(w,g){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,d.Z)(function*(w,g){return un(w,"POST","/v1/accounts:signInWithIdp",bt(w,g))})).apply(this,arguments)}class tr extends Mn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new tr(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Fe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:R}=_,k=(0,ie._T)(_,["providerId","signInMethod"]);if(!E||!R)return null;const ee=new tr(E,R);return ee.idToken=k.idToken||void 0,ee.accessToken=k.accessToken||void 0,ee.secret=k.secret,ee.nonce=k.nonce,ee.pendingToken=k.pendingToken||null,ee}_getIdTokenResponse(g){return Mi(g,this.buildRequest())}_linkToIdToken(g,_){const E=this.buildRequest();return E.idToken=_,Mi(g,E)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Mi(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,$.xO)(_)}return g}}function Ll(w,g){return pu.apply(this,arguments)}function pu(){return(pu=(0,d.Z)(function*(w,g){return st(w,"POST","/v1/accounts:sendVerificationCode",bt(w,g))})).apply(this,arguments)}function gs(){return(gs=(0,d.Z)(function*(w,g){return un(w,"POST","/v1/accounts:signInWithPhoneNumber",bt(w,g))})).apply(this,arguments)}function vr(){return(vr=(0,d.Z)(function*(w,g){const _=yield un(w,"POST","/v1/accounts:signInWithPhoneNumber",bt(w,g));if(_.temporaryProof)throw Bn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const fg={USER_NOT_FOUND:"user-not-found"};function vi(){return(vi=(0,d.Z)(function*(w,g){return un(w,"POST","/v1/accounts:signInWithPhoneNumber",bt(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),fg)})).apply(this,arguments)}class ms extends Mn{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new ms({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new ms({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function gu(w,g){return gs.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function Ri(w,g){return vr.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function yi(w,g){return vi.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:E,verificationCode:R}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:E,code:R}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:E,phoneNumber:R,temporaryProof:k}=g;return E||_||R||k?new ms({verificationId:_,verificationCode:E,phoneNumber:R,temporaryProof:k}):null}}class wr{constructor(g){var _,E,R,k,ee,Re;const it=(0,$.zd)((0,$.pd)(g)),_t=null!==(_=it.apiKey)&&void 0!==_?_:null,Qt=null!==(E=it.oobCode)&&void 0!==E?E:null,bn=function Ia(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=it.mode)&&void 0!==R?R:null);J(_t&&Qt&&bn,"argument-error"),this.apiKey=_t,this.operation=bn,this.code=Qt,this.continueUrl=null!==(k=it.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(ee=it.languageCode)&&void 0!==ee?ee:null,this.tenantId=null!==(Re=it.tenantId)&&void 0!==Re?Re:null}static parseLink(g){const _=function Ul(w){const g=(0,$.zd)((0,$.pd)(w)).link,_=g?(0,$.zd)((0,$.pd)(g)).deep_link_id:null,E=(0,$.zd)((0,$.pd)(w)).deep_link_id;return(E?(0,$.zd)((0,$.pd)(E)).link:null)||E||_||g||w}(g);try{return new wr(_)}catch{return null}}}let mu=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,E){return _i._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const R=wr.parseLink(E);return J(R,"argument-error"),_i._fromEmailAndCode(_,R.code,R.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class _s{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ho extends _s{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ba extends Ho{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return J("providerId"in _&&"signInMethod"in _,"argument-error"),tr._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return J(g.idToken||g.accessToken,"argument-error"),tr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ba.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ba.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:R,pendingToken:k,nonce:ee,providerId:Re}=g;if(!E&&!R&&!_&&!k||!Re)return null;try{return new ba(Re)._credential({idToken:_,accessToken:E,nonce:ee,pendingToken:k})}catch{return null}}}let gg=(()=>{class w extends Ho{constructor(){super("facebook.com")}static credential(_){return tr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),zc=(()=>{class w extends Ho{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return tr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:R}=_;if(!E&&!R)return null;try{return w.credential(E,R)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),qh=(()=>{class w extends Ho{constructor(){super("github.com")}static credential(_){return tr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Da extends Mn{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return Mi(g,this.buildRequest())}_linkToIdToken(g,_){const E=this.buildRequest();return E.idToken=_,Mi(g,E)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Mi(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:R,pendingToken:k}=_;return E&&R&&k&&E===R?new Da(E,k):null}static _create(g,_){return new Da(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class is extends _s{constructor(g){J(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return is.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return is.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Da.fromJSON(g);return J(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:E}=g;if(!_||!E)return null;try{return Da._create(E,_)}catch{return null}}}let co=(()=>{class w extends Ho{constructor(){super("twitter.com")}static credential(_,E){return tr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:R}=_;if(!E||!R)return null;try{return w.credential(E,R)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function _g(w,g){return _u.apply(this,arguments)}function _u(){return(_u=(0,d.Z)(function*(w,g){return un(w,"POST","/v1/accounts:signUp",bt(w,g))})).apply(this,arguments)}class Pi{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,E,R=!1){return(0,d.Z)(function*(){const k=yield xt._fromIdTokenResponse(g,E,R),ee=yu(E);return new Pi({user:k,providerId:ee,_tokenResponse:E,operationType:_})})()}static _forOperation(g,_,E){return(0,d.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const R=yu(E);return new Pi({user:g,providerId:R,_tokenResponse:E,operationType:_})})()}}function yu(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function qc(w){return vu.apply(this,arguments)}function vu(){return(vu=(0,d.Z)(function*(w){var g;const _=_r(w);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new Pi({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield _g(_,{returnSecureToken:!0}),R=yield Pi._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class Vl extends $.ZR{constructor(g,_,E,R){var k;super(_.code,_.message),this.operationType=E,this.user=R,Object.setPrototypeOf(this,Vl.prototype),this.customData={appName:g.name,tenantId:null!==(k=g.tenantId)&&void 0!==k?k:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,_,E,R){return new Vl(g,_,E,R)}}function Wc(w,g,_,E){return("reauthenticate"===g?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Vl._fromErrorAndOperation(w,k,g,E):k})}function ho(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function $o(w,g){return Go.apply(this,arguments)}function Go(){return(Go=(0,d.Z)(function*(w,g){const _=(0,$.m9)(w);yield fo(!0,_,g);const{providerUserInfo:E}=yield vn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),R=ho(E||[]);return _.providerData=_.providerData.filter(k=>R.has(k.providerId)),R.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function zo(w,g){return wu.apply(this,arguments)}function wu(){return(wu=(0,d.Z)(function*(w,g,_=!1){const E=yield wn(w,g._linkToIdToken(w.auth,yield w.getIdToken()),_);return Pi._forOperation(w,"link",E)})).apply(this,arguments)}function fo(w,g,_){return qo.apply(this,arguments)}function qo(){return(qo=(0,d.Z)(function*(w,g,_){yield Ai(g);const R=!1===w?"provider-already-linked":"no-such-provider";J(ho(g.providerData).has(_)===w,g.auth,R)})).apply(this,arguments)}function Eu(w,g){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,d.Z)(function*(w,g,_=!1){const{auth:E}=w,R="reauthenticate";try{const k=yield wn(w,Wc(E,R,g,w),_);J(k.idToken,E,"internal-error");const ee=It(k.idToken);J(ee,E,"internal-error");const{sub:Re}=ee;return J(w.uid===Re,E,"user-mismatch"),Pi._forOperation(w,R,k)}catch(k){throw"auth/user-not-found"===k?.code&&Fe(E,"user-mismatch"),k}})).apply(this,arguments)}function Ta(w,g){return po.apply(this,arguments)}function po(){return(po=(0,d.Z)(function*(w,g,_=!1){const E="signIn",R=yield Wc(w,E,g),k=yield Pi._fromIdTokenResponse(w,E,R);return _||(yield w._updateCurrentUser(k.user)),k})).apply(this,arguments)}function ni(w,g){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,d.Z)(function*(w,g){return Ta(_r(w),g)})).apply(this,arguments)}function Bl(w,g){return kn.apply(this,arguments)}function kn(){return(kn=(0,d.Z)(function*(w,g){const _=(0,$.m9)(w);return yield fo(!1,_,g.providerId),zo(_,g)})).apply(this,arguments)}function Iu(w,g){return js.apply(this,arguments)}function js(){return(js=(0,d.Z)(function*(w,g){return Eu((0,$.m9)(w),g)})).apply(this,arguments)}function Er(w,g){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,d.Z)(function*(w,g){return un(w,"POST","/v1/accounts:signInWithCustomToken",bt(w,g))})).apply(this,arguments)}function bu(w,g){return ys.apply(this,arguments)}function ys(){return(ys=(0,d.Z)(function*(w,g){const _=_r(w),E=yield Er(_,{token:g,returnSecureToken:!0}),R=yield Pi._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class ur{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Du._fromServerResponse(g,_):Fe(g,"internal-error")}}class Du extends ur{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Du(_)}}function go(w,g,_){var E;J((null===(E=_.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),J(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(J(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(J(_.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function Zh(w,g,_){return zi.apply(this,arguments)}function zi(){return(zi=(0,d.Z)(function*(w,g,_){const E=(0,$.m9)(w),R={requestType:"PASSWORD_RESET",email:g};_&&go(E,R,_),yield hu(E,R)})).apply(this,arguments)}function jl(w,g,_){return mo.apply(this,arguments)}function mo(){return(mo=(0,d.Z)(function*(w,g,_){yield Nr((0,$.m9)(w),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Vt(w,g){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,d.Z)(function*(w,g){yield ot((0,$.m9)(w),{oobCode:g})})).apply(this,arguments)}function Kh(w,g){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,d.Z)(function*(w,g){const _=(0,$.m9)(w),E=yield Nr(_,{oobCode:g}),R=E.requestType;switch(J(R,_,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":J(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":J(E.mfaInfo,_,"internal-error");default:J(E.email,_,"internal-error")}let k=null;return E.mfaInfo&&(k=ur._fromServerResponse(_r(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:k},operation:R}})).apply(this,arguments)}function Yh(w,g){return xa.apply(this,arguments)}function xa(){return(xa=(0,d.Z)(function*(w,g){const{data:_}=yield Kh((0,$.m9)(w),g);return _.email})).apply(this,arguments)}function Zc(w,g,_){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,d.Z)(function*(w,g,_){const E=_r(w),R=yield _g(E,{returnSecureToken:!0,email:g,password:_}),k=yield Pi._fromIdTokenResponse(E,"signIn",R);return yield E._updateCurrentUser(k.user),k})).apply(this,arguments)}function Qh(w,g,_){return ni((0,$.m9)(w),mu.credential(g,_))}function ye(w,g,_){return tn.apply(this,arguments)}function tn(){return(tn=(0,d.Z)(function*(w,g,_){const E=(0,$.m9)(w),R={requestType:"EMAIL_SIGNIN",email:g};J(_.handleCodeInApp,E,"argument-error"),_&&go(E,R,_),yield Yt(E,R)})).apply(this,arguments)}function yg(w,g){return"EMAIL_SIGNIN"===wr.parseLink(g)?.operation}function Xh(w,g,_){return lr.apply(this,arguments)}function lr(){return(lr=(0,d.Z)(function*(w,g,_){const E=(0,$.m9)(w),R=mu.credentialWithLink(g,_||ue());return J(R._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),ni(E,R)})).apply(this,arguments)}function $l(w,g){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,d.Z)(function*(w,g){return st(w,"POST","/v1/accounts:createAuthUri",bt(w,g))})).apply(this,arguments)}function qi(w,g){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,d.Z)(function*(w,g){const E={identifier:g,continueUri:pe()?ue():"http://localhost"},{signinMethods:R}=yield $l((0,$.m9)(w),E);return R||[]})).apply(this,arguments)}function Kc(w,g){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,d.Z)(function*(w,g){const _=(0,$.m9)(w),R={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&go(_.auth,R,g);const{email:k}=yield $i(_.auth,R);k!==w.email&&(yield w.reload())})).apply(this,arguments)}function Jh(w,g,_){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,d.Z)(function*(w,g,_){const E=(0,$.m9)(w),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};_&&go(E.auth,k,_);const{email:ee}=yield jo(E.auth,k);ee!==w.email&&(yield w.reload())})).apply(this,arguments)}function kr(w,g){return $r.apply(this,arguments)}function $r(){return($r=(0,d.Z)(function*(w,g){return st(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Qo(w,g){return vs.apply(this,arguments)}function vs(){return(vs=(0,d.Z)(function*(w,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const E=(0,$.m9)(w),k={idToken:yield E.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},ee=yield wn(E,kr(E.auth,k));E.displayName=ee.displayName||null,E.photoURL=ee.photoUrl||null;const Re=E.providerData.find(({providerId:it})=>"password"===it);Re&&(Re.displayName=E.displayName,Re.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ee)})).apply(this,arguments)}function Hs(w,g){return Xo((0,$.m9)(w),g,null)}function Yc(w,g){return Xo((0,$.m9)(w),null,g)}function Xo(w,g,_){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,d.Z)(function*(w,g,_){const{auth:E}=w,k={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(k.email=g),_&&(k.password=_);const ee=yield wn(w,Hr(E,k));yield w._updateTokensIfNecessary(ee,!0)})).apply(this,arguments)}class $s{constructor(g,_,E={}){this.isNewUser=g,this.providerId=_,this.profile=E}}class Ma extends $s{constructor(g,_,E,R){super(g,_,E),this.username=R}}class tf extends $s{constructor(g,_){super(g,"facebook.com",_)}}class zl extends Ma{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Qc extends $s{constructor(g,_){super(g,"google.com",_)}}class nf extends Ma{constructor(g,_,E){super(g,"twitter.com",_,E)}}function Su(w){const{user:g,_tokenResponse:_}=w;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function ef(w){var g,_;if(!w)return null;const{providerId:E}=w,R=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},k=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&w?.idToken){const ee=null===(_=null===(g=It(w.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(ee)return new $s(k,"anonymous"!==ee&&"custom"!==ee?ee:null)}if(!E)return null;switch(E){case"facebook.com":return new tf(k,R);case"github.com":return new zl(k,R);case"google.com":return new Qc(k,R);case"twitter.com":return new nf(k,R,w.screenName||null);case"custom":case"anonymous":return new $s(k,null);default:return new $s(k,E,R)}}(_)}class pn{constructor(g,_,E){this.type=g,this.credential=_,this.auth=E}static _fromIdtoken(g,_){return new pn("enroll",g,_)}static _fromMfaPendingCredential(g){return new pn("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,E;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return pn._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(E=g.multiFactorSession)&&void 0!==E&&E.idToken)return pn._fromIdtoken(g.multiFactorSession.idToken)}return null}}class ed{constructor(g,_,E){this.session=g,this.hints=_,this.signInResolver=E}static _fromError(g,_){const E=_r(g),R=_.customData._serverResponse,k=(R.mfaInfo||[]).map(Re=>ur._fromServerResponse(E,Re));J(R.mfaPendingCredential,E,"internal-error");const ee=pn._fromMfaPendingCredential(R.mfaPendingCredential);return new ed(ee,k,function(){var Re=(0,d.Z)(function*(it){const _t=yield it._process(E,ee);delete R.mfaInfo,delete R.mfaPendingCredential;const Qt=Object.assign(Object.assign({},R),{idToken:_t.idToken,refreshToken:_t.refreshToken});switch(_.operationType){case"signIn":const bn=yield Pi._fromIdTokenResponse(E,_.operationType,Qt);return yield E._updateCurrentUser(bn.user),bn;case"reauthenticate":return J(_.user,E,"internal-error"),Pi._forOperation(_.user,_.operationType,Qt);default:Fe(E,"internal-error")}});return function(it){return Re.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,d.Z)(function*(){return _.signInResolver(g)})()}}function rf(w,g){var _;const E=(0,$.m9)(w),R=g;return J(g.customData.operationType,E,"argument-error"),J(null===(_=R.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),ed._fromError(E,R)}function Fr(w,g){return st(w,"POST","/v2/accounts/mfaEnrollment:start",bt(w,g))}class td{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>ur._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new td(g)}getSession(){var g=this;return(0,d.Z)(function*(){return pn._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var E=this;return(0,d.Z)(function*(){const R=g,k=yield E.getSession(),ee=yield wn(E.user,R._process(E.user.auth,k,_));return yield E.user._updateTokensIfNecessary(ee),E.user.reload()})()}unenroll(g){var _=this;return(0,d.Z)(function*(){const E="string"==typeof g?g:g.uid,R=yield _.user.getIdToken();try{const k=yield wn(_.user,function Ig(w,g){return st(w,"POST","/v2/accounts/mfaEnrollment:withdraw",bt(w,g))}(_.user.auth,{idToken:R,mfaEnrollmentId:E}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ee})=>ee!==E),yield _.user._updateTokensIfNecessary(k),yield _.user.reload()}catch(k){throw k}})()}}const Ra=new WeakMap;function Pa(w){const g=(0,$.m9)(w);return Ra.has(g)||Ra.set(g,td._fromUser(g)),Ra.get(g)}const _o="__sak";class Gs{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(_o,"1"),this.storage.removeItem(_o),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Gr=(()=>{class w extends Gs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Jo(){const w=(0,$.z$)();return B(w)||vt(w)}()&&function Pl(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=jr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const R=this.storage.getItem(E),k=this.localCache[E];R!==k&&_(E,k,R)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((Re,it,_t)=>{this.notifyListeners(Re,_t)});const R=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Re=this.storage.getItem(R);if(_.newValue!==Re)null!==_.newValue?this.storage.setItem(R,_.newValue):this.storage.removeItem(R);else if(this.localCache[R]===_.newValue&&!E)return}const k=()=>{const Re=this.storage.getItem(R);!E&&this.localCache[R]===Re||this.notifyListeners(R,Re)},ee=this.storage.getItem(R);!function Lt(){return(0,$.w1)()&&10===document.documentMode}()||ee===_.newValue||_.newValue===_.oldValue?k():setTimeout(k,10)}notifyListeners(_,E){this.localCache[_]=E;const R=this.listeners[_];if(R)for(const k of Array.from(R))k(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var R=()=>super._set,k=this;return(0,d.Z)(function*(){yield R().call(k,_,E),k.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,R=this;return(0,d.Z)(function*(){const k=yield E().call(R,_);return R.localCache[_]=JSON.stringify(k),k})()}_remove(_){var E=()=>super._remove,R=this;return(0,d.Z)(function*(){yield E().call(R,_),delete R.localCache[_]})()}}return w.type="LOCAL",w})(),Na=(()=>{class w extends Gs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return w.type="SESSION",w})();let nd=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(k=>k.isListeningto(_));if(E)return E;const R=new w(_);return this.receivers.push(R),R}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,d.Z)(function*(){const R=_,{eventId:k,eventType:ee,data:Re}=R.data,it=E.handlersMap[ee];if(!it?.size)return;R.ports[0].postMessage({status:"ack",eventId:k,eventType:ee});const _t=Array.from(it).map(function(){var bn=(0,d.Z)(function*(oi){return oi(R.origin,Re)});return function(oi){return bn.apply(this,arguments)}}()),Qt=yield function bg(w){return Promise.all(w.map(function(){var g=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return g.apply(this,arguments)}}()))}(_t);R.ports[0].postMessage({status:"done",eventId:k,eventType:ee,response:Qt})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function zs(w="",g=10){let _="";for(let E=0;E<g;E++)_+=Math.floor(10*Math.random());return w+_}class ql{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,E=50){var R=this;return(0,d.Z)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let ee,Re;return new Promise((it,_t)=>{const Qt=zs("",20);k.port1.start();const bn=setTimeout(()=>{_t(new Error("unsupported_event"))},E);Re={messageChannel:k,onMessage(oi){const As=oi;if(As.data.eventId===Qt)switch(As.data.status){case"ack":clearTimeout(bn),ee=setTimeout(()=>{_t(new Error("timeout"))},3e3);break;case"done":clearTimeout(ee),it(As.data.response);break;default:clearTimeout(bn),clearTimeout(ee),_t(new Error("invalid_response"))}}},R.handlers.add(Re),k.port1.addEventListener("message",Re.onMessage),R.target.postMessage({eventType:g,eventId:Qt,data:_},[k.port2])}).finally(()=>{Re&&R.removeMessageHandler(Re)})})()}}function Fn(){return window}function ss(){return typeof Fn().WorkerGlobalScope<"u"&&"function"==typeof Fn().importScripts}function Wi(){return(Wi=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ea="firebaseLocalStorageDb",yo="firebaseLocalStorage",ta="fbase_key";class qs{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function vo(w,g){return w.transaction([yo],g?"readwrite":"readonly").objectStore(yo)}function Ws(){const w=indexedDB.open(ea,1);return new Promise((g,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(yo,{keyPath:ta})}catch(R){_(R)}}),w.addEventListener("success",(0,d.Z)(function*(){const E=w.result;E.objectStoreNames.contains(yo)?g(E):(E.close(),yield function Kl(){const w=indexedDB.deleteDatabase(ea);return new qs(w).toPromise()}(),g(yield Ws()))}))})}function Pu(w,g,_){return ii.apply(this,arguments)}function ii(){return(ii=(0,d.Z)(function*(w,g,_){const E=vo(w,!0).put({[ta]:g,value:_});return new qs(E).toPromise()})).apply(this,arguments)}function Cs(){return(Cs=(0,d.Z)(function*(w,g){const _=vo(w,!1).get(g),E=yield new qs(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function na(w,g){const _=vo(w,!0).delete(g);return new qs(_).toPromise()}const Ou=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield Ws()),_.db})()}_withRetries(_){var E=this;return(0,d.Z)(function*(){let R=0;for(;;)try{const k=yield E._openDb();return yield _(k)}catch(k){if(R++>3)throw k;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return ss()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=nd._getInstance(function Wl(){return ss()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,d.Z)(function*(R,k){return{keyProcessed:(yield _._poll()).includes(k.key)}});return function(R,k){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,d.Z)(function*(R,k){return["keyChanged"]});return function(R,k){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var E,R;if(_.activeServiceWorker=yield function Mu(){return Wi.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new ql(_.activeServiceWorker);const k=yield _.sender._send("ping",{},800);k&&null!==(E=k[0])&&void 0!==E&&E.fulfilled&&null!==(R=k[0])&&void 0!==R&&R.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,d.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Ru(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Ws();return yield Pu(_,_o,"1"),yield na(_,_o),!0}catch{}return!1})()}_withPendingWrite(_){var E=this;return(0,d.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var R=this;return(0,d.Z)(function*(){return R._withPendingWrite((0,d.Z)(function*(){return yield R._withRetries(k=>Pu(k,_,E)),R.localCache[_]=E,R.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,d.Z)(function*(){const R=yield E._withRetries(k=>function rd(w,g){return Cs.apply(this,arguments)}(k,_));return E.localCache[_]=R,R})()}_remove(_){var E=this;return(0,d.Z)(function*(){return E._withPendingWrite((0,d.Z)(function*(){return yield E._withRetries(R=>na(R,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const E=yield _._withRetries(ee=>{const Re=vo(ee,!1).getAll();return new qs(Re).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const R=[],k=new Set;for(const{fbase_key:ee,value:Re}of E)k.add(ee),JSON.stringify(_.localCache[ee])!==JSON.stringify(Re)&&(_.notifyListeners(ee,Re),R.push(ee));for(const ee of Object.keys(_.localCache))_.localCache[ee]&&!k.has(ee)&&(_.notifyListeners(ee,null),R.push(ee));return R})()}notifyListeners(_,E){this.localCache[_]=E;const R=this.listeners[_];if(R)for(const k of Array.from(R))k(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function id(w,g){return st(w,"POST","/v2/accounts/mfaSignIn:start",bt(w,g))}function Zi(){return(Zi=(0,d.Z)(function*(w){return(yield st(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function wo(w){return new Promise((g,_)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=g,E.onerror=R=>{const k=xe("internal-error");k.customData=R,_(k)},E.type="text/javascript",E.charset="UTF-8",function uf(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(E)})}function os(w){return`__${w}${Math.floor(1e6*Math.random())}`}const wi=1e12;class Is{constructor(g){this.auth=g,this.counter=wi,this._widgets=new Map}render(g,_){const E=this.counter;return this._widgets.set(E,new Dg(g,this.auth.name,_||{})),this.counter++,E}reset(g){var _;const E=g||wi;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(g){var _;return(null===(_=this._widgets.get(g||wi))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,d.Z)(function*(){var E;return null===(E=_._widgets.get(g||wi))||void 0===E||E.execute(),""})()}}class Dg{constructor(g,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof g?document.getElementById(g):g;J(R,"argument-error",{appName:_}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Jl(w){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<w;E++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ra=os("rcb"),lf=new Be(3e4,6e4);class ad{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Fn().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return J(function Zs(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Fn().grecaptcha):new Promise((E,R)=>{const k=Fn().setTimeout(()=>{R(xe(g,"network-request-failed"))},lf.get());Fn()[ra]=()=>{Fn().clearTimeout(k),delete Fn()[ra];const Re=Fn().grecaptcha;if(!Re)return void R(xe(g,"internal-error"));const it=Re.render;Re.render=(_t,Qt)=>{const bn=it(_t,Qt);return this.counter++,bn},this.hostLanguage=_,E(Re)},wo(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:ra,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(k),R(xe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=Fn().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Lu{load(g){return(0,d.Z)(function*(){return new Is(g)})()}clearedOneInstance(){}}const ia="recaptcha",ud={theme:"light",type:"image"};class ld{constructor(g,_=Object.assign({},ud),E){this.parameters=_,this.type=ia,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_r(E),this.isInvisible="invisible"===this.parameters.size,J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof g?document.getElementById(g):g;J(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Lu:new ad,this.validateStartingState()}verify(){var g=this;return(0,d.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(_)||new Promise(k=>{const ee=Re=>{Re&&(g.tokenChangeListeners.delete(ee),k(Re))};g.tokenChangeListeners.add(ee),g.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){J(!this.parameters.sitekey,this.auth,"argument-error"),J(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof g)g(_);else if("string"==typeof g){const E=Fn()[g];"function"==typeof E&&E(_)}}}assertNotDestroyed(){J(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,d.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,d.Z)(function*(){J(pe()&&!ss(),g.auth,"internal-error"),yield function Oa(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function Fu(w){return Zi.apply(this,arguments)}(g.auth);J(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return J(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class cf{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=ms._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function hy(w,g,_){return ln.apply(this,arguments)}function ln(){return(ln=(0,d.Z)(function*(w,g,_){const E=_r(w),R=yield Vu(E,g,(0,$.m9)(_));return new cf(R,k=>ni(E,k))})).apply(this,arguments)}function Ks(w,g,_){return cd.apply(this,arguments)}function cd(){return(cd=(0,d.Z)(function*(w,g,_){const E=(0,$.m9)(w);yield fo(!1,E,"phone");const R=yield Vu(E.auth,g,(0,$.m9)(_));return new cf(R,k=>Bl(E,k))})).apply(this,arguments)}function Tg(w,g,_){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,d.Z)(function*(w,g,_){const E=(0,$.m9)(w),R=yield Vu(E.auth,g,(0,$.m9)(_));return new cf(R,k=>Iu(E,k))})).apply(this,arguments)}function Vu(w,g,_){return df.apply(this,arguments)}function df(){return(df=(0,d.Z)(function*(w,g,_){var E;const R=yield _.verify();try{let k;if(J("string"==typeof R,w,"argument-error"),J(_.type===ia,w,"argument-error"),k="string"==typeof g?{phoneNumber:g}:g,"session"in k){const ee=k.session;if("phoneNumber"in k)return J("enroll"===ee.type,w,"internal-error"),(yield Fr(w,{idToken:ee.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{J("signin"===ee.type,w,"internal-error");const Re=(null===(E=k.multiFactorHint)||void 0===E?void 0:E.uid)||k.multiFactorUid;return J(Re,w,"missing-multi-factor-info"),(yield id(w,{mfaPendingCredential:ee.credential,mfaEnrollmentId:Re,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ee}=yield Ll(w,{phoneNumber:k.phoneNumber,recaptchaToken:R});return ee}}finally{_._reset()}})).apply(this,arguments)}function fy(w,g){return ka.apply(this,arguments)}function ka(){return(ka=(0,d.Z)(function*(w,g){yield zo((0,$.m9)(w),g)})).apply(this,arguments)}let Sg=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=_r(_)}verifyPhoneNumber(_,E){return Vu(this.auth,_,(0,$.m9)(E))}static credential(_,E){return ms._fromVerification(_,E)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:R}=_;return E&&R?ms._fromTokenResponse(E,R):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Fa(w,g){return g?ze(g):(J(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Ln extends Mn{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Mi(g,this._buildIdpRequest())}_linkToIdToken(g,_){return Mi(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return Mi(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function dd(w){return Ta(w.auth,new Ln(w),w.bypassAuthState)}function Bu(w){const{auth:g,user:_}=w;return J(_,g,"internal-error"),Eu(_,new Ln(w),w.bypassAuthState)}function hd(w){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,d.Z)(function*(w){const{auth:g,user:_}=w;return J(_,g,"internal-error"),zo(_,new Ln(w),w.bypassAuthState)})).apply(this,arguments)}class bs{constructor(g,_,E,R,k=!1){this.auth=g,this.resolver=E,this.user=R,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,d.Z)(function*(E,R){g.pendingPromise={resolve:E,reject:R};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(k){g.reject(k)}});return function(E,R){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,d.Z)(function*(){const{urlResponse:E,sessionId:R,postBody:k,tenantId:ee,error:Re,type:it}=g;if(Re)return void _.reject(Re);const _t={auth:_.auth,requestUri:E,sessionId:R,tenantId:ee||void 0,postBody:k||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(it)(_t))}catch(Qt){_.reject(Qt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return dd;case"linkViaPopup":case"linkViaRedirect":return hd;case"reauthViaPopup":case"reauthViaRedirect":return Bu;default:Fe(this.auth,"internal-error")}}resolve(g){Ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ec=new Be(2e3,1e4);function La(w,g,_){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,d.Z)(function*(w,g,_){const E=_r(w);Te(w,g,_s);const R=Fa(E,_);return new zr(E,"signInViaPopup",g,R).executeNotNull()})).apply(this,arguments)}function fd(w,g,_){return Ag.apply(this,arguments)}function Ag(){return(Ag=(0,d.Z)(function*(w,g,_){const E=(0,$.m9)(w);Te(E.auth,g,_s);const R=Fa(E.auth,_);return new zr(E.auth,"reauthViaPopup",g,R,E).executeNotNull()})).apply(this,arguments)}function py(w,g,_){return xg.apply(this,arguments)}function xg(){return(xg=(0,d.Z)(function*(w,g,_){const E=(0,$.m9)(w);Te(E.auth,g,_s);const R=Fa(E.auth,_);return new zr(E.auth,"linkViaPopup",g,R,E).executeNotNull()})).apply(this,arguments)}let zr=(()=>{class w extends bs{constructor(_,E,R,k,ee){super(_,E,k,ee),this.provider=R,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const E=yield _.execute();return J(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,d.Z)(function*(){Ee(1===_.filter.length,"Popup operations only handle one event");const E=zs();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(R=>{_.reject(R)}),_.resolver._isIframeWebStorageSupported(_.auth,R=>{R||_.reject(xe(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,R;this.pollId=null!==(R=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==R&&R.closed?window.setTimeout(()=>{this.pollId=null,this.reject(xe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,ec.get())};_()}}return w.currentPopupAction=null,w})();const Bt=new Map;class Qs extends bs{constructor(g,_,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,d.Z)(function*(){let E=Bt.get(_.auth._key());if(!E){try{const k=(yield function ut(w,g){return qr.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;E=()=>Promise.resolve(k)}catch(R){E=()=>Promise.reject(R)}Bt.set(_.auth._key(),E)}return _.bypassAuthState||Bt.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,E=this;return(0,d.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(E,g);if("unknown"!==g.type){if(g.eventId){const R=yield E.auth._redirectUserForId(g.eventId);if(R)return E.user=R,_().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function qr(){return(qr=(0,d.Z)(function*(w,g){const _=Ua(g),E=hf(w);if(!(yield E._isAvailable()))return!1;const R="true"===(yield E._get(_));return yield E._remove(_),R})).apply(this,arguments)}function gn(w,g){return tc.apply(this,arguments)}function tc(){return(tc=(0,d.Z)(function*(w,g){return hf(w)._set(Ua(g),"true")})).apply(this,arguments)}function as(){Bt.clear()}function Cr(w,g){Bt.set(w._key(),g)}function hf(w){return ze(w._redirectPersistence)}function Ua(w){return G("pendingRedirect",w.config.apiKey,w.name)}function ju(w,g,_){return function nc(w,g,_){return Eo.apply(this,arguments)}(w,g,_)}function Eo(){return(Eo=(0,d.Z)(function*(w,g,_){const E=_r(w);Te(w,g,_s),yield E._initializationPromise;const R=Fa(E,_);return yield gn(R,E),R._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function D(w,g,_){return function T(w,g,_){return x.apply(this,arguments)}(w,g,_)}function x(){return(x=(0,d.Z)(function*(w,g,_){const E=(0,$.m9)(w);Te(E.auth,g,_s),yield E.auth._initializationPromise;const R=Fa(E.auth,_);yield gn(R,E.auth);const k=yield Ht(E);return R._openRedirect(E.auth,g,"reauthViaRedirect",k)})).apply(this,arguments)}function H(w,g,_){return function X(w,g,_){return re.apply(this,arguments)}(w,g,_)}function re(){return(re=(0,d.Z)(function*(w,g,_){const E=(0,$.m9)(w);Te(E.auth,g,_s),yield E.auth._initializationPromise;const R=Fa(E.auth,_);yield fo(!1,E,g.providerId),yield gn(R,E.auth);const k=yield Ht(E);return R._openRedirect(E.auth,g,"linkViaRedirect",k)})).apply(this,arguments)}function Oe(w,g){return qe.apply(this,arguments)}function qe(){return(qe=(0,d.Z)(function*(w,g){return yield _r(w)._initializationPromise,Ct(w,g,!1)})).apply(this,arguments)}function Ct(w,g){return at.apply(this,arguments)}function at(){return(at=(0,d.Z)(function*(w,g,_=!1){const E=_r(w),R=Fa(E,g),ee=yield new Qs(E,R,_).execute();return ee&&!_&&(delete ee.user._redirectEventId,yield E._persistUserIfCurrent(ee.user),yield E._setRedirectUser(null,g)),ee})).apply(this,arguments)}function Ht(w){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,d.Z)(function*(w){const g=zs(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class nr{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(_=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function sa(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ds(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var E;if(g.error&&!Ds(g)){const R=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(xe(this.auth,R))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const E=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Co(g))}saveEventToCache(g){this.cachedEventUids.add(Co(g)),this.lastProcessedEventTime=Date.now()}}function Co(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function Ds({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===g?.code}function Zr(w){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,d.Z)(function*(w,g={}){return st(w,"GET","/v1/projects",g)})).apply(this,arguments)}const Ts=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Io=/^https?/;function Nn(){return(Nn=(0,d.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield Zr(w);for(const _ of g)try{if(Rg(_))return}catch{}Fe(w,"unauthorized-domain")})).apply(this,arguments)}function Rg(w){const g=ue(),{protocol:_,hostname:E}=new URL(g);if(w.startsWith("chrome-extension://")){const ee=new URL(w);return""===ee.hostname&&""===E?"chrome-extension:"===_&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&ee.hostname===E}if(!Io.test(_))return!1;if(Ts.test(w))return E===w;const R=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(E)}const gd=new Be(3e4,6e4);function zn(){const w=Fn().___jsl;if(w?.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let bo=null;function Ei(w){return bo=bo||function Va(w){return new Promise((g,_)=>{var E,R,k;function ee(){zn(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{zn(),_(xe(w,"network-request-failed"))},timeout:gd.get()})}if(null!==(R=null===(E=Fn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==R&&R.Iframe)g(gapi.iframes.getContext());else{if(null===(k=Fn().gapi)||void 0===k||!k.load){const Re=os("iframefcb");return Fn()[Re]=()=>{gapi.load?ee():_(xe(w,"network-request-failed"))},wo(`https://apis.google.com/js/api.js?onload=${Re}`).catch(it=>_(it))}ee()}}).catch(g=>{throw bo=null,g})}(w),bo}const Ci=new Be(5e3,15e3),cE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ba(w){const g=w.config;J(g.authDomain,w,"auth-domain-config-required");const _=g.emulator?nt(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:w.name,v:O.SDK_VERSION},R=oa.get(w.config.apiHost);R&&(E.eid=R);const k=w._getFrameworks();return k.length&&(E.fw=k.join(",")),`${_}?${(0,$.xO)(E).slice(1)}`}function Do(){return Do=(0,d.Z)(function*(w){const g=yield Ei(w),_=Fn().gapi;return J(_,w,"internal-error"),g.open({where:document.body,url:Ba(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cE,dontclear:!0},E=>new Promise(function(){var R=(0,d.Z)(function*(k,ee){yield E.restyle({setHideOnLeave:!1});const Re=xe(w,"network-request-failed"),it=Fn().setTimeout(()=>{ee(Re)},Ci.get());function _t(){Fn().clearTimeout(it),k(E)}E.ping(_t).then(_t,()=>{ee(Re)})});return function(k,ee){return R.apply(this,arguments)}}()))}),Do.apply(this,arguments)}const gy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class gf{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function So(w,g,_,E,R,k){J(w.config.authDomain,w,"auth-domain-config-required"),J(w.config.apiKey,w,"invalid-api-key");const ee={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:E,v:O.SDK_VERSION,eventId:R};if(g instanceof _s){g.setDefaultLanguage(w.languageCode),ee.providerId=g.providerId||"",(0,$.xb)(g.getCustomParameters())||(ee.customParameters=JSON.stringify(g.getCustomParameters()));for(const[it,_t]of Object.entries(k||{}))ee[it]=_t}if(g instanceof Ho){const it=g.getScopes().filter(_t=>""!==_t);it.length>0&&(ee.scopes=it.join(","))}w.tenantId&&(ee.tid=w.tenantId);const Re=ee;for(const it of Object.keys(Re))void 0===Re[it]&&delete Re[it];return`${function mf({config:w}){return w.emulator?nt(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,$.xO)(Re).slice(1)}`}const _f="webStorageSupport",yf=class Xs{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Na,this._completeRedirectFn=Ct,this._overrideRedirectResult=Cr}_openPopup(g,_,E,R){var k=this;return(0,d.Z)(function*(){var ee;Ee(null===(ee=k.eventManagers[g._key()])||void 0===ee?void 0:ee.manager,"_initialize() not called before _openPopup()");const Re=So(g,_,E,ue(),R);return function us(w,g,_,E=500,R=600){const k=Math.max((window.screen.availHeight-R)/2,0).toString(),ee=Math.max((window.screen.availWidth-E)/2,0).toString();let Re="";const it=Object.assign(Object.assign({},gy),{width:E.toString(),height:R.toString(),top:k,left:ee}),_t=(0,$.z$)().toLowerCase();_&&(Re=se(_t)?"_blank":_),N(_t)&&(g=g||"http://localhost",it.scrollbars="yes");const Qt=Object.entries(it).reduce((oi,[As,aa])=>`${oi}${As}=${aa},`,"");if(function mr(w=(0,$.z$)()){var g;return vt(w)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(_t)&&"_self"!==Re)return function zt(w,g){const _=document.createElement("a");_.href=w,_.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(g||"",Re),new gf(null);const bn=window.open(g||"",Re,Qt);J(bn,w,"popup-blocked");try{bn.focus()}catch{}return new gf(bn)}(g,Re,zs())})()}_openRedirect(g,_,E,R){var k=this;return(0,d.Z)(function*(){return yield k._originValidation(g),function xu(w){Fn().location.href=w}(So(g,_,E,ue(),R)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:R,promise:k}=this.eventManagers[_];return R?Promise.resolve(R):(Ee(k,"If manager is not set, promise should be"),k)}const E=this.initAndGetManager(g);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(g){var _=this;return(0,d.Z)(function*(){const E=yield function si(w){return Do.apply(this,arguments)}(g),R=new nr(g);return E.register("authEvent",k=>(J(k?.authEvent,g,"invalid-auth-event"),{status:R.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:R},_.iframes[g._key()]=E,R})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(_f,{type:_f},R=>{var k;const ee=null===(k=R?.[0])||void 0===k?void 0:k[_f];void 0!==ee&&_(!!ee),Fe(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Mg(w){return Nn.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return jr()||B()||vt()}};class vf{constructor(g){this.factorId=g}_process(g,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,E);case"signin":return this._finalizeSignIn(g,_.credential);default:return ae("unexpected MultiFactorSessionType")}}}class _d extends vf{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new _d(g)}_finalizeEnroll(g,_,E){return function sf(w,g){return st(w,"POST","/v2/accounts/mfaEnrollment:finalize",bt(w,g))}(g,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function ku(w,g){return st(w,"POST","/v2/accounts/mfaSignIn:finalize",bt(w,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let dE=(()=>{class w{constructor(){}static assertion(_){return _d._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var fn="@firebase/auth";class sc{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(E=>{g(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);_&&(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,$.Pz)("authIdTokenMaxAge"),function Yr(w){(0,O._registerComponent)(new oe.wA("auth",(g,{options:_})=>{const E=g.getProvider("app").getImmediate(),R=g.getProvider("heartbeat"),{apiKey:k,authDomain:ee}=E.options;return((Re,it)=>{J(k&&!k.includes(":"),"invalid-api-key",{appName:Re.name}),J(!ee?.includes(":"),"argument-error",{appName:Re.name});const _t={apiKey:k,authDomain:ee,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Uo(w)},Qt=new Ol(Re,it,_t);return function Je(w,g){const _=g?.persistence||[],E=(Array.isArray(_)?_:[_]).map(ze);g?.errorMap&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(E,g?.popupRedirectResolver)}(Qt,_),Qt})(E,R)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,E)=>{g.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new oe.wA("auth-internal",g=>{const _=_r(g.getProvider("auth").getImmediate());return new sc(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(fn,"0.21.3",function wf(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,O.registerVersion)(fn,"0.21.3","esm2017")}("Browser")},2090:(Et,De,U)=>{U.d(De,{$s:()=>rt,BH:()=>Pe,DV:()=>Bn,Dv:()=>Jn,G6:()=>Ce,GJ:()=>Vr,L:()=>de,LL:()=>hn,Pz:()=>xe,Sg:()=>Te,UG:()=>ae,UI:()=>Si,US:()=>oe,Wj:()=>er,Wl:()=>sn,Yr:()=>pe,ZB:()=>W,ZR:()=>Ye,aH:()=>Fe,b$:()=>ze,cI:()=>st,dS:()=>jt,eu:()=>Ve,g5:()=>O,gK:()=>xn,gQ:()=>jn,h$:()=>_e,hl:()=>Ne,hu:()=>$,jU:()=>Ee,lb:()=>Ai,m9:()=>Jt,ne:()=>ti,p$:()=>Z,pd:()=>Xn,r3:()=>Hi,ru:()=>Ke,tV:()=>ge,uI:()=>J,ug:()=>xi,vZ:()=>vn,w1:()=>Je,w9:()=>Qn,xO:()=>gr,xb:()=>pi,z$:()=>je,zI:()=>Be,zd:()=>Pr});const $=function(q,G){if(!q)throw O(G)},O=function(q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+q)},ne=function(q){const G=[];let Y=0;for(let j=0;j<q.length;j++){let N=q.charCodeAt(j);N<128?G[Y++]=N:N<2048?(G[Y++]=N>>6|192,G[Y++]=63&N|128):55296==(64512&N)&&j+1<q.length&&56320==(64512&q.charCodeAt(j+1))?(N=65536+((1023&N)<<10)+(1023&q.charCodeAt(++j)),G[Y++]=N>>18|240,G[Y++]=N>>12&63|128,G[Y++]=N>>6&63|128,G[Y++]=63&N|128):(G[Y++]=N>>12|224,G[Y++]=N>>6&63|128,G[Y++]=63&N|128)}return G},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,G){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,j=[];for(let N=0;N<q.length;N+=3){const B=q[N],se=N+1<q.length,Me=se?q[N+1]:0,pt=N+2<q.length,Ze=pt?q[N+2]:0;let In=(15&Me)<<2|Ze>>6,mr=63&Ze;pt||(mr=64,se||(In=64)),j.push(Y[B>>2],Y[(3&B)<<4|Me>>4],Y[In],Y[mr])}return j.join("")},encodeString(q,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(q):this.encodeByteArray(ne(q),G)},decodeString(q,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(q):function(q){const G=[];let Y=0,j=0;for(;Y<q.length;){const N=q[Y++];if(N<128)G[j++]=String.fromCharCode(N);else if(N>191&&N<224){const B=q[Y++];G[j++]=String.fromCharCode((31&N)<<6|63&B)}else if(N>239&&N<365){const pt=((7&N)<<18|(63&q[Y++])<<12|(63&q[Y++])<<6|63&q[Y++])-65536;G[j++]=String.fromCharCode(55296+(pt>>10)),G[j++]=String.fromCharCode(56320+(1023&pt))}else{const B=q[Y++],se=q[Y++];G[j++]=String.fromCharCode((15&N)<<12|(63&B)<<6|63&se)}}return G.join("")}(this.decodeStringToByteArray(q,G))},decodeStringToByteArray(q,G){this.init_();const Y=G?this.charToByteMapWebSafe_:this.charToByteMap_,j=[];for(let N=0;N<q.length;){const B=Y[q.charAt(N++)],Me=N<q.length?Y[q.charAt(N)]:0;++N;const Ze=N<q.length?Y[q.charAt(N)]:64;++N;const vt=N<q.length?Y[q.charAt(N)]:64;if(++N,null==B||null==Me||null==Ze||null==vt)throw Error();j.push(B<<2|Me>>4),64!==Ze&&(j.push(Me<<4&240|Ze>>2),64!==vt&&j.push(Ze<<6&192|vt))}return j},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},_e=function(q){const G=ne(q);return oe.encodeByteArray(G,!0)},de=function(q){return _e(q).replace(/\./g,"")},ge=function(q){try{return oe.decodeString(q,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function Z(q){return W(void 0,q)}function W(q,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return G}for(const Y in G)!G.hasOwnProperty(Y)||!Q(Y)||(q[Y]=W(q[Y],G[Y]));return q}function Q(q){return"__proto__"!==q}const me=()=>{try{return function He(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const q=process.env.__FIREBASE_DEFAULTS__;return q?JSON.parse(q):void 0})()||(()=>{if(typeof document>"u")return;let q;try{q=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const G=q&&ge(q[1]);return G&&JSON.parse(G)})()}catch(q){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${q}`)}},Fe=()=>{var q;return null===(q=me())||void 0===q?void 0:q.config},xe=q=>{var G;return null===(G=me())||void 0===G?void 0:G[`_${q}`]};class Pe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,Y)=>{this.resolve=G,this.reject=Y})}wrapCallback(G){return(Y,j)=>{Y?this.reject(Y):this.resolve(j),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(Y):G(Y,j))}}}function Te(q,G){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const j=G||"demo-project",N=q.iat||0,B=q.sub||q.user_id;if(!B)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const se=Object.assign({iss:`https://securetoken.google.com/${j}`,aud:j,iat:N,exp:N+3600,auth_time:N,sub:B,user_id:B,firebase:{sign_in_provider:"custom",identities:{}}},q);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(se)),""].join(".")}function je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function J(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function ae(){var q;const G=null===(q=me())||void 0===q?void 0:q.forceEnvironment;if("node"===G)return!0;if("browser"===G)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ee(){return"object"==typeof self&&self.self===self}function Ke(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Je(){const q=je();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function pe(){return!1}function Ce(){return!ae()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ne(){try{return"object"==typeof indexedDB}catch{return!1}}function Ve(){return new Promise((q,G)=>{try{let Y=!0;const j="validate-browser-context-for-indexeddb-analytics-module",N=self.indexedDB.open(j);N.onsuccess=()=>{N.result.close(),Y||self.indexedDB.deleteDatabase(j),q(!0)},N.onupgradeneeded=()=>{Y=!1},N.onerror=()=>{var B;G((null===(B=N.error)||void 0===B?void 0:B.message)||"")}}catch(Y){G(Y)}})}function Be(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ye extends Error{constructor(G,Y,j){super(Y),this.code=G,this.customData=j,this.name="FirebaseError",Object.setPrototypeOf(this,Ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hn.prototype.create)}}class hn{constructor(G,Y,j){this.service=G,this.serviceName=Y,this.errors=j}create(G,...Y){const j=Y[0]||{},N=`${this.service}/${G}`,B=this.errors[G],se=B?function Tt(q,G){return q.replace(bt,(Y,j)=>{const N=G[j];return null!=N?String(N):`<${j}?>`})}(B,j):"Error";return new Ye(N,`${this.serviceName}: ${se} (${N}).`,j)}}const bt=/\{\$([^}]+)}/g;function st(q){return JSON.parse(q)}function sn(q){return JSON.stringify(q)}const Dn=function(q){let G={},Y={},j={},N="";try{const B=q.split(".");G=st(ge(B[0])||""),Y=st(ge(B[1])||""),N=B[2],j=Y.d||{},delete Y.d}catch{}return{header:G,claims:Y,data:j,signature:N}},Qn=function(q){const Y=Dn(q).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},Vr=function(q){const G=Dn(q).claims;return"object"==typeof G&&!0===G.admin};function Hi(q,G){return Object.prototype.hasOwnProperty.call(q,G)}function Bn(q,G){if(Object.prototype.hasOwnProperty.call(q,G))return q[G]}function pi(q){for(const G in q)if(Object.prototype.hasOwnProperty.call(q,G))return!1;return!0}function Si(q,G,Y){const j={};for(const N in q)Object.prototype.hasOwnProperty.call(q,N)&&(j[N]=G.call(Y,q[N],N,q));return j}function vn(q,G){if(q===G)return!0;const Y=Object.keys(q),j=Object.keys(G);for(const N of Y){if(!j.includes(N))return!1;const B=q[N],se=G[N];if(pr(B)&&pr(se)){if(!vn(B,se))return!1}else if(B!==se)return!1}for(const N of j)if(!Y.includes(N))return!1;return!0}function pr(q){return null!==q&&"object"==typeof q}function gr(q){const G=[];for(const[Y,j]of Object.entries(q))Array.isArray(j)?j.forEach(N=>{G.push(encodeURIComponent(Y)+"="+encodeURIComponent(N))}):G.push(encodeURIComponent(Y)+"="+encodeURIComponent(j));return G.length?"&"+G.join("&"):""}function Pr(q){const G={};return q.replace(/^\?/,"").split("&").forEach(j=>{if(j){const[N,B]=j.split("=");G[decodeURIComponent(N)]=decodeURIComponent(B)}}),G}function Xn(q){const G=q.indexOf("?");if(!G)return"";const Y=q.indexOf("#",G);return q.substring(G,Y>0?Y:void 0)}class jn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let G=1;G<this.blockSize;++G)this.pad_[G]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(G,Y){Y||(Y=0);const j=this.W_;if("string"==typeof G)for(let vt=0;vt<16;vt++)j[vt]=G.charCodeAt(Y)<<24|G.charCodeAt(Y+1)<<16|G.charCodeAt(Y+2)<<8|G.charCodeAt(Y+3),Y+=4;else for(let vt=0;vt<16;vt++)j[vt]=G[Y]<<24|G[Y+1]<<16|G[Y+2]<<8|G[Y+3],Y+=4;for(let vt=16;vt<80;vt++){const In=j[vt-3]^j[vt-8]^j[vt-14]^j[vt-16];j[vt]=4294967295&(In<<1|In>>>31)}let Ze,Ut,N=this.chain_[0],B=this.chain_[1],se=this.chain_[2],Me=this.chain_[3],pt=this.chain_[4];for(let vt=0;vt<80;vt++){vt<40?vt<20?(Ze=Me^B&(se^Me),Ut=1518500249):(Ze=B^se^Me,Ut=1859775393):vt<60?(Ze=B&se|Me&(B|se),Ut=2400959708):(Ze=B^se^Me,Ut=3395469782);const In=(N<<5|N>>>27)+Ze+pt+Ut+j[vt]&4294967295;pt=Me,Me=se,se=4294967295&(B<<30|B>>>2),B=N,N=In}this.chain_[0]=this.chain_[0]+N&4294967295,this.chain_[1]=this.chain_[1]+B&4294967295,this.chain_[2]=this.chain_[2]+se&4294967295,this.chain_[3]=this.chain_[3]+Me&4294967295,this.chain_[4]=this.chain_[4]+pt&4294967295}update(G,Y){if(null==G)return;void 0===Y&&(Y=G.length);const j=Y-this.blockSize;let N=0;const B=this.buf_;let se=this.inbuf_;for(;N<Y;){if(0===se)for(;N<=j;)this.compress_(G,N),N+=this.blockSize;if("string"==typeof G){for(;N<Y;)if(B[se]=G.charCodeAt(N),++se,++N,se===this.blockSize){this.compress_(B),se=0;break}}else for(;N<Y;)if(B[se]=G[N],++se,++N,se===this.blockSize){this.compress_(B),se=0;break}}this.inbuf_=se,this.total_+=Y}digest(){const G=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let N=this.blockSize-1;N>=56;N--)this.buf_[N]=255&Y,Y/=256;this.compress_(this.buf_);let j=0;for(let N=0;N<5;N++)for(let B=24;B>=0;B-=8)G[j]=this.chain_[N]>>B&255,++j;return G}}function ti(q,G){const Y=new Ot(q,G);return Y.subscribe.bind(Y)}class Ot{constructor(G,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{G(this)}).catch(j=>{this.error(j)})}next(G){this.forEachObserver(Y=>{Y.next(G)})}error(G){this.forEachObserver(Y=>{Y.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,Y,j){let N;if(void 0===G&&void 0===Y&&void 0===j)throw new Error("Missing Observer.");N=function Rt(q,G){if("object"!=typeof q||null===q)return!1;for(const Y of G)if(Y in q&&"function"==typeof q[Y])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:Y,complete:j},void 0===N.next&&(N.next=wn),void 0===N.error&&(N.error=wn),void 0===N.complete&&(N.complete=wn);const B=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?N.error(this.finalError):N.complete()}catch{}}),this.observers.push(N),B}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,G)}sendOne(G,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{Y(this.observers[G])}catch(j){typeof console<"u"&&console.error&&console.error(j)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wn(){}const Jn=function(q,G,Y,j){let N;if(j<G?N="at least "+G:j>Y&&(N=0===Y?"none":"no more than "+Y),N)throw new Error(q+" failed: Was called with "+j+(1===j?" argument.":" arguments.")+" Expects "+N+".")};function xn(q,G){return`${q} failed: ${G} argument `}function er(q,G,Y,j){if((!j||Y)&&"function"!=typeof Y)throw new Error(xn(q,G)+"must be a valid function.")}function Ai(q,G,Y,j){if((!j||Y)&&("object"!=typeof Y||null===Y))throw new Error(xn(q,G)+"must be a valid context object.")}const jt=function(q){const G=[];let Y=0;for(let j=0;j<q.length;j++){let N=q.charCodeAt(j);if(N>=55296&&N<=56319){const B=N-55296;j++,$(j<q.length,"Surrogate pair missing trail surrogate."),N=65536+(B<<10)+(q.charCodeAt(j)-56320)}N<128?G[Y++]=N:N<2048?(G[Y++]=N>>6|192,G[Y++]=63&N|128):N<65536?(G[Y++]=N>>12|224,G[Y++]=N>>6&63|128,G[Y++]=63&N|128):(G[Y++]=N>>18|240,G[Y++]=N>>12&63|128,G[Y++]=N>>6&63|128,G[Y++]=63&N|128)}return G},xi=function(q){let G=0;for(let Y=0;Y<q.length;Y++){const j=q.charCodeAt(Y);j<128?G++:j<2048?G+=2:j>=55296&&j<=56319?(G+=4,Y++):G+=3}return G};function rt(q,G=1e3,Y=2){const j=G*Math.pow(Y,q),N=Math.round(.5*j*(Math.random()-.5)*2);return Math.min(144e5,j+N)}function Jt(q){return q&&q._delegate?q._delegate:q}},9436:(Et,De,U)=>{var d=U(4650);let $=null;function O(){return $}class ie{}const oe=new d.OlP("DocumentToken");let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function de(){return(0,d.LFG)(Z)}()},providedIn:"platform"}),n})();const ge=new d.OlP("Location Initialized");let Z=(()=>{class n extends _e{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){W()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){W()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Q(){return new Z((0,d.LFG)(oe))}()},providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function He(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Se(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function We(n){return n&&"?"!==n[0]?"?"+n:n}let lt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Ae)},providedIn:"root"}),n})();const me=new d.OlP("appBaseHref");let Ae=(()=>{class n extends lt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return He(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+We(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+We(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+We(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_e),d.LFG(me,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),be=(()=>{class n extends lt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=He(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+We(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+We(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_e),d.LFG(me,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function je(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Se(Te(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+We(r))}normalize(t){return n.stripTrailingSlash(function Pe(n,e){return n&&new RegExp(`^${n}([/;?#]|$)`).test(e)?e.substring(n.length):e}(this._basePath,Te(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+We(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+We(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=We,n.joinWithSlash=He,n.stripTrailingSlash=Se,n.\u0275fac=function(t){return new(t||n)(d.LFG(lt))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function xe(){return new Fe((0,d.LFG)(lt))}()},providedIn:"root"}),n})();function Te(n){return n.replace(/\/index.html$/,"")}var ae=(()=>((ae=ae||{})[ae.Decimal=0]="Decimal",ae[ae.Percent=1]="Percent",ae[ae.Currency=2]="Currency",ae[ae.Scientific=3]="Scientific",ae))(),Je=(()=>((Je=Je||{})[Je.Decimal=0]="Decimal",Je[Je.Group=1]="Group",Je[Je.List=2]="List",Je[Je.PercentSign=3]="PercentSign",Je[Je.PlusSign=4]="PlusSign",Je[Je.MinusSign=5]="MinusSign",Je[Je.Exponential=6]="Exponential",Je[Je.SuperscriptingExponent=7]="SuperscriptingExponent",Je[Je.PerMille=8]="PerMille",Je[Je.Infinity=9]="Infinity",Je[Je.NaN=10]="NaN",Je[Je.TimeSeparator=11]="TimeSeparator",Je[Je.CurrencyDecimal=12]="CurrencyDecimal",Je[Je.CurrencyGroup=13]="CurrencyGroup",Je))();function st(n,e){const t=(0,d.cg1)(n),r=t[d.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===Je.CurrencyDecimal)return t[d.wAp.NumberSymbols][Je.Decimal];if(e===Je.CurrencyGroup)return t[d.wAp.NumberSymbols][Je.Group]}return r}const pt=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Bo(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Hr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}const mi=/\s+/,ot=[];let kt=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this.initialClasses=ot,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(mi):ot}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(mi):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(mi).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class ar{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $i=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ar(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,l),Tn(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Tn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Tn(n,e){n.context.$implicit=e.item}let Gi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Yt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ea("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ea("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Yt{constructor(){this.$implicit=null,this.ngIf=null}}function Ea(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let qh=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function Wh(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function _r(n,e,t){return function Uo(n,e,t,r,i,a,l=!1){let f="",m=!1;if(isFinite(n)){let v=function kl(n){let r,i,a,l,f,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(a=e.search(/e/i))>0?(i<0&&(i=a),i+=+e.slice(a+1),e=e.substring(0,a)):i<0&&(i=e.length),a=0;"0"===e.charAt(a);a++);if(a===(f=e.length))r=[0],i=1;else{for(f--;"0"===e.charAt(f);)f--;for(i-=a,r=[],l=0;a<=f;a++,l++)r[l]=Number(e.charAt(a))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);l&&(v=function Gc(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(v));let I=e.minInt,S=e.minFrac,P=e.maxFrac;if(a){const wt=a.match(pt);if(null===wt)throw new Error(`${a} is not a valid digit info`);const ft=wt[1],mt=wt[3],Ft=wt[5];null!=ft&&(I=Bo(ft)),null!=mt&&(S=Bo(mt)),null!=Ft?P=Bo(Ft):null!=mt&&S>P&&(P=S)}!function du(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const a=Math.min(Math.max(e,i),t);let l=a+n.integerLen,f=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let S=l;S<r.length;S++)r[S]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,l=a+1),r[0]=0;for(let S=1;S<l;S++)r[S]=0}if(f>=5)if(l-1<0){for(let S=0;S>l;S--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;i<Math.max(0,a);i++)r.push(0);let m=0!==a;const v=e+n.integerLen,I=r.reduceRight(function(S,P,V,z){return z[V]=(P+=S)<10?P:P-10,m&&(0===z[V]&&V>=v?z.pop():m=!1),P>=10?1:0},0);I&&(r.unshift(I),n.integerLen++)}(v,S,P);let V=v.digits,z=v.integerLen;const ce=v.exponent;let ve=[];for(m=V.every(wt=>!wt);z<I;z++)V.unshift(0);for(;z<0;z++)V.unshift(0);z>0?ve=V.splice(z,V.length):(ve=V,V=[0]);const tt=[];for(V.length>=e.lgSize&&tt.unshift(V.splice(-e.lgSize,V.length).join(""));V.length>e.gSize;)tt.unshift(V.splice(-e.gSize,V.length).join(""));V.length&&tt.unshift(V.join("")),f=tt.join(st(t,r)),ve.length&&(f+=st(t,i)+ve.join("")),ce&&(f+=st(t,Je.Exponential)+"+"+ce)}else f=st(t,Je.Infinity);return f=n<0&&!m?e.negPre+f+e.negSuf:e.posPre+f+e.posSuf,f}(n,function Vo(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],a=r[1],l=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],f=l[0],m=l[1]||"";t.posPre=f.substring(0,f.indexOf("#"));for(let I=0;I<m.length;I++){const S=m.charAt(I);"0"===S?t.minFrac=t.maxFrac=I+1:"#"===S?t.maxFrac=I+1:t.posSuf+=S}const v=f.split(",");if(t.gSize=v[1]?v[1].length:0,t.lgSize=v[2]||v[1]?(v[2]||v[1]).length:0,a){const I=i.length-t.posPre.length-t.posSuf.length,S=a.indexOf("#");t.negPre=a.substring(0,S).replace(/'/g,""),t.negSuf=a.slice(S+I).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function sn(n,e){return(0,d.cg1)(n)[d.wAp.NumberFormats][e]}(e,ae.Decimal),st(e,Je.MinusSign)),e,Je.Group,Je.Decimal,t)}(function is(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(a){throw function tr(n,e){return new d.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.soG,16))},n.\u0275pipe=d.Yjl({name:"number",type:n,pure:!0,standalone:!0}),n})();let _u=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Pi="browser";function Wc(n){return"server"===n}let zo=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new wu((0,d.LFG)(oe),window)}),n})();class wu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function qo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=fo(this.window.history)||fo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function fo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Cu{}class _o extends ie{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Gs extends _o{static makeCurrent(){!function ne(n){$||($=n)}(new Gs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function af(){return Jo=Jo||document.querySelector("base"),Jo?Jo.getAttribute("href"):null}();return null==t?null:function Au(n){Es=Es||document.createElement("a"),Es.setAttribute("href",n);const e=Es.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Jo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Hr(document.cookie,e)}}let Es,Jo=null;const Gr=new d.OlP("TRANSITION_ID"),Na=[{provide:d.ip1,useFactory:function dy(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Gr,oe,d.zs3],multi:!0}];let nd=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const zs=new d.OlP("EventManagerPlugins");let ql=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(zs),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Fn{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let xu=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ss=(()=>{class n extends xu{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Mu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Mu))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Mu(n){O().remove(n)}const Wi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ru=/%COMP%/g;function vo(n,e){return e.flat(100).map(t=>t.replace(Ru,n))}function Kl(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ws=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Pu(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new na(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case d.ifc.ShadowDom:return new Yl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=vo(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ql),d.LFG(ss),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Pu{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Wi[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Cs(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Cs(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Wi[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Wi[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Kl(r)):this.eventManager.addEventListener(e,t,Kl(r))}}function Cs(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class na extends Pu{constructor(e,t,r,i){super(e),this.component=r;const a=vo(i+"-"+r.id,r.styles);t.addStyles(a),this.contentAttr=function ta(n){return"_ngcontent-%COMP%".replace(Ru,n)}(i+"-"+r.id),this.hostAttr=function qs(n){return"_nghost-%COMP%".replace(Ru,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Yl extends Pu{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=vo(i.id,i.styles);for(let l=0;l<a.length;l++){const f=document.createElement("style");f.textContent=a[l],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Nu=(()=>{class n extends Fn{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ql=["alt","control","meta","shift"],Ou={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},id={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ku=(()=>{class n extends Fn{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),l="code."),Ql.forEach(v=>{const I=r.indexOf(v);I>-1&&(r.splice(I,1),l+=v+".")}),l+=a,0!=r.length||0===a.length)return null;const m={};return m.domEventName=i,m.fullKey=l,m}static matchEventFullKeyCode(t,r){let i=Ou[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ql.forEach(l=>{l!==i&&(0,id[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Dg=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:Pi},{provide:d.g9A,useValue:function sd(){Gs.makeCurrent()},multi:!0},{provide:oe,useFactory:function wi(){return(0,d.RDi)(document),document},deps:[]}]),Jl=new d.OlP(""),ra=[{provide:d.rWj,useClass:class bg{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const f=function(m){l=l||m,a--,0==a&&r(l)};i.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],lf=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Xl(){return new d.qLn},deps:[]},{provide:zs,useClass:Nu,multi:!0,deps:[oe,d.R0b,d.Lbi]},{provide:zs,useClass:ku,multi:!0,deps:[oe]},{provide:Ws,useClass:Ws,deps:[ql,ss,d.AFp]},{provide:d.FYo,useExisting:Ws},{provide:xu,useExisting:ss},{provide:ss,useClass:ss,deps:[oe]},{provide:ql,useClass:ql,deps:[zs,d.R0b]},{provide:Cu,useClass:nd,deps:[]},[]];let od=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:Gr,useExisting:d.AFp},Na]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Jl,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...lf,...ra],imports:[_u,d.hGG]}),n})(),ud=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function ia(){return new ud((0,d.LFG)(oe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Bt=U(8996),Qs=U(7669);function ut(...n){const e=(0,Qs.yG)(n);return(0,Bt.D)(n,e)}var qr=U(7579);class gn extends qr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const as=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Cr=U(9751);const{isArray:hf}=Array,{getPrototypeOf:Ua,prototype:ju,keys:nc}=Object;function Eo(n){if(1===n.length){const e=n[0];if(hf(e))return{args:e,keys:null};if(function D(n){return n&&"object"==typeof n&&Ua(n)===ju}(e)){const t=nc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var T=U(4671),x=U(4004);const{isArray:H}=Array;function re(n){return(0,x.U)(e=>function X(n,e){return H(e)?n(...e):n(e)}(n,e))}function Oe(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var qe=U(5403),Ct=U(9672);function at(...n){const e=(0,Qs.yG)(n),t=(0,Qs.jO)(n),{args:r,keys:i}=Eo(n);if(0===r.length)return(0,Bt.D)([],e);const a=new Cr.y(Ht(r,e,i?l=>Oe(i,l):T.y));return t?a.pipe(re(t)):a}function Ht(n,e,t=T.y){return r=>{Pt(e,()=>{const{length:i}=n,a=new Array(i);let l=i,f=i;for(let m=0;m<i;m++)Pt(e,()=>{const v=(0,Bt.D)(n[m],e);let I=!1;v.subscribe((0,qe.x)(r,S=>{a[m]=S,I||(I=!0,f--),f||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}function Pt(n,e,t){n?(0,Ct.f)(t,n,e):e()}var Wr=U(8189);function Co(...n){return function nr(){return(0,Wr.J)(1)}()((0,Bt.D)(n,(0,Qs.yG)(n)))}var Ds=U(8421);function sa(n){return new Cr.y(e=>{(0,Ds.Xf)(n()).subscribe(e)})}var Zr=U(9635),Kr=U(576);function Ts(n,e){const t=(0,Kr.m)(n)?n:()=>n,r=i=>i.error(t());return new Cr.y(e?i=>e.schedule(r,0,i):r)}var Io=U(515),Mg=U(727),Nn=U(4482);function Rg(){return(0,Nn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,qe.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class gd extends Cr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Nn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Mg.w0;const t=this.getSubject();e.add(this.source.subscribe((0,qe.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Mg.w0.EMPTY)}return e}refCount(){return Rg()(this)}}function zn(n,e){return(0,Nn.e)((t,r)=>{let i=null,a=0,l=!1;const f=()=>l&&!i&&r.complete();t.subscribe((0,qe.x)(r,m=>{i?.unsubscribe();let v=0;const I=a++;(0,Ds.Xf)(n(m,I)).subscribe(i=(0,qe.x)(r,S=>r.next(e?e(m,S,I,v++):S),()=>{i=null,f()}))},()=>{l=!0,f()}))})}function Va(n){return n<=0?()=>Io.E:(0,Nn.e)((e,t)=>{let r=0;e.subscribe((0,qe.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function bo(...n){const e=(0,Qs.yG)(n);return(0,Nn.e)((t,r)=>{(e?Co(n,t,e):Co(n,t)).subscribe(r)})}function Ei(n,e){return(0,Nn.e)((t,r)=>{let i=0;t.subscribe((0,qe.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Ci=U(5577);function ff(n){return(0,Nn.e)((e,t)=>{let r=!1;e.subscribe((0,qe.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function md(n=cE){return(0,Nn.e)((e,t)=>{let r=!1;e.subscribe((0,qe.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function cE(){return new as}function oa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ei((i,a)=>n(i,a,r)):T.y,Va(1),t?ff(e):md(()=>new as))}function Ba(n,e){return(0,Kr.m)(e)?(0,Ci.z)(n,e,1):(0,Ci.z)(n,1)}var si=U(8505);function Do(n){return(0,Nn.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,qe.x)(t,void 0,void 0,l=>{a=(0,Ds.Xf)(n(l,Do(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function gy(n,e,t,r,i){return(a,l)=>{let f=t,m=e,v=0;a.subscribe((0,qe.x)(l,I=>{const S=v++;m=f?n(m,I,S):(f=!0,I),r&&l.next(m)},i&&(()=>{f&&l.next(m),l.complete()})))}}function To(n,e){return(0,Nn.e)(gy(n,e,arguments.length>=2,!0))}function rc(n){return n<=0?()=>Io.E:(0,Nn.e)((e,t)=>{let r=[];e.subscribe((0,qe.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function pf(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ei((i,a)=>n(i,a,r)):T.y,rc(1),t?ff(e):md(()=>new as))}function us(n){return(0,Nn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const zt="primary",ic=Symbol("RouteTitle");class my{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function So(n){return new my(n)}function mf(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],f=n[a];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Xs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!yf(n[i],e[i]))return!1;return!0}function yf(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function vf(n){return Array.prototype.concat.apply([],n)}function _d(n){return n.length>0?n[n.length-1]:null}function fn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ss(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,Bt.D)(Promise.resolve(n)):ut(n)}const sc=!1,wf={exact:function yd(n,e,t){if(!ee(n.segments,e.segments)||!g(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!yd(n.children[r],e.children[r],t))return!1;return!0},subset:Og},Yr={exact:function Ng(n,e){return Xs(n,e)},subset:function _y(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>yf(n[t],e[t]))},ignored:()=>!0};function Hu(n,e,t){return wf[t.paths](n.root,e.root,t.matrixParams)&&Yr[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Og(n,e,t){return w(n,e,e.segments,t)}function w(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ee(i,t)||e.hasChildren()||!g(i,t,r))}if(n.segments.length===t.length){if(!ee(n.segments,t)||!g(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Og(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(ee(n.segments,i)&&g(n.segments,i,r)&&n.children[zt])&&w(n.children[zt],e,a,r)}}function g(n,e,t){return e.every((r,i)=>Yr[t](n[i].parameters,r.parameters))}class _{constructor(e=new E([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=So(this.queryParams)),this._queryParamMap}toString(){return Qt.serialize(this)}}class E{constructor(e,t){this.segments=e,this.children=t,this.parent=null,fn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bn(this)}}class R{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=So(this.parameters)),this._parameterMap}toString(){return Gu(this)}}function ee(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let it=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new _t},providedIn:"root"}),n})();class _t{parse(e){const t=new hE(e);return new _(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${oi(e.root,!0)}`,r=function Fg(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${aa(t)}=${aa(i)}`).join("&"):`${aa(t)}=${aa(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ja(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Qt=new _t;function bn(n){return n.segments.map(e=>Gu(e)).join("/")}function oi(n,e){if(!n.hasChildren())return bn(n);if(e){const t=n.children[zt]?oi(n.children[zt],!1):"",r=[];return fn(n.children,(i,a)=>{a!==zt&&r.push(`${a}:${oi(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Re(n,e){let t=[];return fn(n.children,(r,i)=>{i===zt&&(t=t.concat(e(r,i)))}),fn(n.children,(r,i)=>{i!==zt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===zt?[oi(n.children[zt],!1)]:[`${i}:${oi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[zt]?`${bn(n)}/${t[0]}`:`${bn(n)}/(${t.join("//")})`}}function As(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function aa(n){return As(n).replace(/%3B/gi,";")}function Ha(n){return As(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $u(n){return decodeURIComponent(n)}function Ef(n){return $u(n.replace(/\+/g,"%20"))}function Gu(n){return`${Ha(n.path)}${function kg(n){return Object.keys(n).map(e=>`;${Ha(e)}=${Ha(n[e])}`).join("")}(n.parameters)}`}const Cf=/^[^\/()?;=#]+/;function oc(n){const e=n.match(Cf);return e?e[0]:""}const yy=/^[^=?&#]+/,Lg=/^[^&#]+/;class hE{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new E([],{}):new E([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[zt]=new E(e,t)),r}parseSegment(){const e=oc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,sc);return this.capture(e),new R($u(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=oc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=oc(this.remaining);i&&(r=i,this.capture(r))}e[$u(t)]=$u(r)}parseQueryParam(e){const t=function If(n){const e=n.match(yy);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function vy(n){const e=n.match(Lg);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Ef(t),a=Ef(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=oc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,sc);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=zt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[zt]:new E([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,sc)}}function bf(n){return n.segments.length>0?new E([],{[zt]:n}):n}function Ug(n){const e={};for(const r of Object.keys(n.children)){const a=Ug(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function vT(n){if(1===n.numberOfChildren&&n.children[zt]){const e=n.children[zt];return new E(n.segments.concat(e.segments),e.children)}return n}(new E(n.segments,e))}function zu(n){return n instanceof _}function wT(n,e,t,r,i){if(0===t.length)return wd(e.root,e.root,e.root,r,i);const a=function Cy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ey(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return fn(a.outlets,(m,v)=>{f[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new Ey(t,e,r)}(t);return a.toRoot()?wd(e.root,e.root,new E([],{}),r,i):function l(m){const v=function jg(n,e,t,r){if(n.isAbsolute)return new Wu(e.root,!0,0);if(-1===r)return new Wu(t,t===e.root,0);return function Df(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new Wu(r,!1,i-a)}(t,r+(Bg(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,m),I=v.processChildren?Zu(v.segmentGroup,v.index,a.commands):Tf(v.segmentGroup,v.index,a.commands);return wd(e.root,v.segmentGroup,I,r,i)}(n.snapshot?._lastPathIndex)}function Bg(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function qu(n){return"object"==typeof n&&null!=n&&n.outlets}function wd(n,e,t,r,i){let l,a={};r&&fn(r,(m,v)=>{a[v]=Array.isArray(m)?m.map(I=>`${I}`):`${m}`}),l=n===e?t:wy(n,e,t);const f=bf(Ug(l));return new _(f,a,i)}function wy(n,e,t){const r={};return fn(n.children,(i,a)=>{r[a]=i===e?t:wy(i,e,t)}),new E(n.segments,r)}class Ey{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Bg(r[0]))throw new d.vHH(4003,!1);const i=r.find(qu);if(i&&i!==_d(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Wu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Tf(n,e,t){if(n||(n=new E([],{})),0===n.segments.length&&n.hasChildren())return Zu(n,e,t);const r=function Iy(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],f=t[r];if(qu(f))break;const m=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!_E(m,v,l))return a;r+=2}else{if(!_E(m,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new E(n.segments.slice(0,r.pathIndex),{});return a.children[zt]=new E(n.segments.slice(r.pathIndex),n.children),Zu(a,0,i)}return r.match&&0===i.length?new E(n.segments,{}):r.match&&!n.hasChildren()?ac(n,e,t):r.match?Zu(n,0,i):ac(n,e,t)}function Zu(n,e,t){if(0===t.length)return new E(n.segments,{});{const r=function mE(n){return qu(n[0])?n[0].outlets:{[zt]:n}}(t),i={};return!r[zt]&&n.children[zt]&&1===n.numberOfChildren&&0===n.children[zt].segments.length?Zu(n.children[zt],e,t):(fn(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=Tf(n.children[l],e,a))}),fn(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new E(n.segments,i))}}function ac(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(qu(a)){const m=ET(a.outlets);return new E(r,m)}if(0===i&&Bg(t[0])){r.push(new R(n.segments[e].path,by(t[0]))),i++;continue}const l=qu(a)?a.outlets[zt]:`${a}`,f=i<t.length-1?t[i+1]:null;l&&f&&Bg(f)?(r.push(new R(l,by(f))),i+=2):(r.push(new R(l,{})),i++)}return new E(r,{})}function ET(n){const e={};return fn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=ac(new E([],{}),0,t))}),e}function by(n){const e={};return fn(n,(t,r)=>e[r]=`${t}`),e}function _E(n,e,t){return n==t.path&&Xs(e,t.parameters)}const Sf="imperative";class ua{constructor(e,t){this.id=e,this.url=t}}class Hg extends ua{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ku extends ua{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class uc extends ua{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $g extends ua{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Yu extends ua{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class CT extends ua{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class IT extends ua{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fN extends ua{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bT extends ua{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dy extends ua{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DT{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class yE{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Gg{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ty{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vE{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wE{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sy{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let TT=(()=>{class n{createUrlTree(t,r,i,a,l,f){return wT(t||r.root,i,a,l,f)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ST=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(e){return TT.\u0275fac(e)},providedIn:"root"}),n})();class CE{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=la(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=la(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=lc(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return lc(e,this._root).map(t=>t.value)}}function la(n,e){if(n===e.value)return e;for(const t of e.children){const r=la(n,t);if(r)return r}return null}function lc(n,e){if(n===e.value)return[e];for(const t of e.children){const r=lc(n,t);if(r.length)return r.unshift(e),r}return[]}class $a{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Af(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class AT extends CE{constructor(e,t){super(e),this.snapshot=t,xy(this,e)}toString(){return this.snapshot.toString()}}function xT(n,e){const t=function mN(n,e){const l=new zg([],{},{},"",{},zt,e,null,n.root,-1,{});return new IE("",new $a(l,[]))}(n,e),r=new gn([new R("",{})]),i=new gn({}),a=new gn({}),l=new gn({}),f=new gn(""),m=new Ed(r,i,l,f,a,zt,e,t.root);return m.snapshot=t.root,new AT(new $a(m,[]),t)}class Ed{constructor(e,t,r,i,a,l,f,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.title=this.data?.pipe((0,x.U)(v=>v[ic]))??ut(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,x.U)(e=>So(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,x.U)(e=>So(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ay(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function MT(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class zg{get title(){return this.data?.[ic]}constructor(e,t,r,i,a,l,f,m,v,I,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=I,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=So(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=So(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class IE extends CE{constructor(e,t){super(t),this.url=e,xy(this,t)}toString(){return qg(this._root)}}function xy(n,e){e.value._routerState=n,e.children.forEach(t=>xy(n,t))}function qg(n){const e=n.children.length>0?` { ${n.children.map(qg).join(", ")} } `:"";return`${n.value}${e}`}function Ao(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Xs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Xs(e.params,t.params)||n.params.next(t.params),function _f(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Xs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Xs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function cc(n,e){const t=Xs(n.params,e.params)&&function k(n,e){return ee(n,e)&&n.every((t,r)=>Xs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||cc(n.parent,e.parent))}function Cd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function DE(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Cd(n,r,i);return Cd(n,r)})}(n,e,t);return new $a(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>Cd(n,f)),l}}const r=function _N(n){return new Ed(new gn(n.url),new gn(n.params),new gn(n.queryParams),new gn(n.fragment),new gn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Cd(n,a));return new $a(r,i)}}const TE="ngNavigationCancelingError";function RT(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=zu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Wg(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Wg(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[TE]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Zg(n){return PT(n)&&zu(n.url)}function PT(n){return n&&n[TE]}class yN{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Id,this.attachRef=null}}let Id=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new yN,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Kg=!1;let Yg=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=zt,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(Id),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,Kg);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,Kg);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,Kg);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,Kg);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,m=new NT(t,f,i.injector);if(r&&function OT(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(l);this.activated=i.createComponent(v,i.length,m)}else this.activated=i.createComponent(l,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]}),n})();class NT{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ed?this.route:e===Id?this.childContexts:this.parent.get(e,t)}}let Qg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Yg],encapsulation:2}),n})();function xf(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Py(n){const e=n.children&&n.children.map(Py),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==zt&&(t.component=Qg),t}function Js(n){return n.outlet||zt}function xE(n,e){const t=n.filter(r=>Js(r)===e);return t.push(...n.filter(r=>Js(r)!==e)),t}function Mf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class EN{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ao(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Af(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),fn(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Af(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Af(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Af(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new wE(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Ty(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Ao(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),Ao(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=Mf(i.snapshot),m=f?.get(d._Vd)??null;l.attachRef=null,l.route=i,l.resolver=m,l.injector=f,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class FT{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Qu{constructor(e,t){this.component=e,this.route=t}}function Ny(n,e,t){const r=n._root;return bd(r,e?e._root:null,t,[r.value])}function dc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function bd(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Af(e);return n.children.forEach(l=>{(function LT(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const m=function UT(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ee(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ee(n.url,e.url)||!Xs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!cc(n,e)||!Xs(n.queryParams,e.queryParams);default:return!cc(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new FT(r)):(a.data=l.data,a._resolvedData=l._resolvedData),bd(n,e,a.component?f?f.children:null:t,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new Qu(f.outlet.component,l))}else l&&Dd(e,f,i),i.canActivateChecks.push(new FT(r)),bd(n,null,a.component?f?f.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),fn(a,(l,f)=>Dd(l,t.getContext(f),i)),i}function Dd(n,e,t){const r=Af(n),i=n.value;fn(r,(a,l)=>{Dd(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Qu(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Td(n){return"function"==typeof n}function Ly(n){return n instanceof as||"EmptyError"===n?.name}const Sd=Symbol("INITIAL_VALUE");function Ga(){return zn(n=>at(n.map(e=>e.pipe(Va(1),bo(Sd)))).pipe((0,x.U)(e=>{for(const t of e)if(!0!==t){if(t===Sd)return Sd;if(!1===t||t instanceof _)return t}return!0}),Ei(e=>e!==Sd),Va(1)))}function pc(n){return(0,Zr.z)((0,si.b)(e=>{if(zu(e))throw RT(0,e)}),(0,x.U)(e=>!0===e))}const By={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function kE(n,e,t,r,i){const a=Rf(n,e,t);return a.matched?function GT(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ut(i.map(l=>{const f=dc(l,n);return Ss(function PE(n){return n&&Td(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(Ga(),pc()):ut(!0)}(r=xf(e,r),e,t).pipe((0,x.U)(l=>!0===l?a:{...By})):ut(a)}function Rf(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...By}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||mf)(t,n,e);if(!i)return{...By};const a={};fn(i.posParams,(f,m)=>{a[m]=f.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Jg(n,e,t,r){if(t.length>0&&function LE(n,e,t){return t.some(r=>em(n,e,r)&&Js(r)!==zt)}(n,t,r)){const a=new E(e,function zT(n,e,t,r){const i={};i[zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Js(a)!==zt){const l=new E([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Js(a)]=l}return i}(n,e,r,new E(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function IN(n,e,t){return t.some(r=>em(n,e,r))}(n,t,r)){const a=new E(n.segments,function FE(n,e,t,r,i){const a={};for(const l of r)if(em(n,t,l)&&!i[Js(l)]){const f=new E([],{});f._sourceSegment=n,f._segmentIndexShift=e.length,a[Js(l)]=f}return{...i,...a}}(n,e,t,r,n.children));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const i=new E(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function em(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ad(n,e,t,r){return!!(Js(n)===r||r!==zt&&em(e,t,n))&&("**"===n.path||Rf(e,n,t).matched)}function UE(n,e,t){return 0===e.length&&!n.children[t]}const za=!1;class Xu{constructor(e){this.segmentGroup=e||null}}class VE{constructor(e){this.urlTree=e}}function xd(n){return Ts(new Xu(n))}function BE(n){return Ts(new VE(n))}class HE{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=Jg(this.urlTree.root,[],[],this.config).segmentGroup,t=new E(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,zt).pipe((0,x.U)(a=>this.createUrlTree(Ug(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Do(a=>{if(a instanceof VE)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Xu?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,zt).pipe((0,x.U)(i=>this.createUrlTree(Ug(i),e.queryParams,e.fragment))).pipe(Do(i=>{throw i instanceof Xu?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,za)}createUrlTree(e,t,r){const i=bf(e);return new _(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,x.U)(a=>new E([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Bt.D)(i).pipe(Ba(a=>{const l=r.children[a],f=xE(t,a);return this.expandSegmentGroup(e,f,l,a).pipe((0,x.U)(m=>({segment:m,outlet:a})))}),To((a,l)=>(a[l.outlet]=l.segment,a),{}),pf())}expandSegment(e,t,r,i,a,l){return(0,Bt.D)(r).pipe(Ba(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,l).pipe(Do(v=>{if(v instanceof Xu)return ut(null);throw v}))),oa(f=>!!f),Do((f,m)=>{if(Ly(f))return UE(t,i,a)?ut(new E([],{})):xd(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,l,f){return Ad(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):xd(t):xd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?BE(a):this.lineralizeSegments(r,a).pipe((0,Ci.z)(l=>{const f=new E(l,{});return this.expandSegment(e,f,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:f,consumedSegments:m,remainingSegments:v,positionalParamSegments:I}=Rf(t,i,a);if(!f)return xd(t);const S=this.applyRedirectCommands(m,i.redirectTo,I);return i.redirectTo.startsWith("/")?BE(S):this.lineralizeSegments(i,S).pipe((0,Ci.z)(P=>this.expandSegment(e,t,r,P.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=xf(r,e),r.loadChildren?(r._loadedRoutes?ut({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,x.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new E(i,{})))):ut(new E(i,{}))):kE(t,r,i,e).pipe(zn(({matched:l,consumedSegments:f,remainingSegments:m})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Ci.z)(I=>{const S=I.injector??e,P=I.routes,{segmentGroup:V,slicedSegments:z}=Jg(t,f,m,P),ce=new E(V.segments,V.children);if(0===z.length&&ce.hasChildren())return this.expandChildren(S,P,ce).pipe((0,x.U)(ft=>new E(f,ft)));if(0===P.length&&0===z.length)return ut(new E(f,{}));const ve=Js(r)===a;return this.expandSegment(S,ce,P,z,ve?zt:a,!0).pipe((0,x.U)(wt=>new E(f.concat(wt.segments),wt.children)))})):xd(t)))}getChildConfig(e,t,r){return t.children?ut({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ut({routes:t._loadedRoutes,injector:t._loadedInjector}):function OE(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ut(!0):ut(i.map(l=>{const f=dc(l,n);return Ss(function CN(n){return n&&Td(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(Ga(),pc())}(e,t,r).pipe((0,Ci.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,si.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function WT(n){return Ts(Wg(za,3))}())):ut({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ut(r);if(i.numberOfChildren>1||!i.children[zt])return Ts(new d.vHH(4e3,za));i=i.children[zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new _(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return fn(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return fn(t.children,(f,m)=>{l[m]=this.createSegmentGroup(e,f,r,i)}),new E(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,za);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class ZT{}class KT{constructor(e,t,r,i,a,l,f){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.urlSerializer=f}recognize(){const e=Jg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,zt).pipe((0,x.U)(t=>{if(null===t)return null;const r=new zg([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new $a(r,t),a=new IE(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=Ay(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Bt.D)(Object.keys(r.children)).pipe(Ba(i=>{const a=r.children[i],l=xE(t,i);return this.processSegmentGroup(e,l,a,i)}),To((i,a)=>i&&a?(i.push(...a),i):null),function Pg(n,e=!1){return(0,Nn.e)((t,r)=>{let i=0;t.subscribe((0,qe.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),ff(null),pf(),(0,x.U)(i=>{if(null===i)return null;const a=$y(i);return function QT(n){n.sort((e,t)=>e.value.outlet===zt?-1:t.value.outlet===zt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,Bt.D)(t).pipe(Ba(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),oa(l=>!!l),Do(l=>{if(Ly(l))return UE(r,i,a)?ut([]):ut(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!Ad(t,r,i,a))return ut(null);let l;if("**"===t.path){const f=i.length>0?_d(i).parameters:{},m=gc(r)+i.length;l=ut({snapshot:new zg(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,GE(t),Js(t),t.component??t._loadedComponent??null,t,$E(r),m,zE(t)),consumedSegments:[],remainingSegments:[]})}else l=kE(r,t,i,e).pipe((0,x.U)(({matched:f,consumedSegments:m,remainingSegments:v,parameters:I})=>{if(!f)return null;const S=gc(r)+m.length;return{snapshot:new zg(m,I,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,GE(t),Js(t),t.component??t._loadedComponent??null,t,$E(r),S,zE(t)),consumedSegments:m,remainingSegments:v}}));return l.pipe(zn(f=>{if(null===f)return ut(null);const{snapshot:m,consumedSegments:v,remainingSegments:I}=f;e=t._injector??e;const S=t._loadedInjector??e,P=function XT(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:V,slicedSegments:z}=Jg(r,v,I,P.filter(ve=>void 0===ve.redirectTo));if(0===z.length&&V.hasChildren())return this.processChildren(S,P,V).pipe((0,x.U)(ve=>null===ve?null:[new $a(m,ve)]));if(0===P.length&&0===z.length)return ut([new $a(m,[])]);const ce=Js(t)===a;return this.processSegment(S,P,V,z,ce?zt:a).pipe((0,x.U)(ve=>null===ve?null:[new $a(m,ve)]))}))}}function JT(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function $y(n){const e=[],t=new Set;for(const r of n){if(!JT(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=$y(r.children);e.push(new $a(r.value,i))}return e.filter(r=>!t.has(r))}function $E(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function gc(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function GE(n){return n.data||{}}function zE(n){return n.resolve||{}}function KE(n){return"string"==typeof n.title||null===n.title}function nm(n){return zn(e=>{const t=n(e);return t?(0,Bt.D)(t).pipe((0,x.U)(()=>e)):ut(e)})}const Ni=new d.OlP("ROUTES");let Gy=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ut(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ss(t.loadComponent()).pipe((0,x.U)(XE),(0,si.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),us(()=>{this.componentLoaders.delete(t)})),i=new gd(r,()=>new qr.x).pipe(Rg());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ut({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,x.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,v,I=!1;Array.isArray(f)?v=f:(m=f.create(t).injector,v=vf(m.get(Ni,[],d.XFs.Self|d.XFs.Optional)));return{routes:v.map(Py),injector:m}}),us(()=>{this.childrenLoaders.delete(r)})),l=new gd(a,()=>new qr.x).pipe(Rg());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Ss(t()).pipe((0,x.U)(XE),(0,Ci.z)(i=>i instanceof d.YKP||Array.isArray(i)?ut(i):(0,Bt.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function XE(n){return function QE(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let im=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new qr.x,this.configLoader=(0,d.f3M)(Gy),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(it),this.rootContexts=(0,d.f3M)(Id),this.navigationId=0,this.afterPreactivation=()=>ut(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new yE(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new DT(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new gn({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Sf,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ei(r=>0!==r.id),(0,x.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),zn(r=>{let i=!1,a=!1;return ut(r).pipe((0,si.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),zn(l=>{const f=t.browserUrlTree.toString(),m=!t.navigated||l.extractedUrl.toString()!==f||f!==t.currentUrlTree.toString();if(!m&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const I="";return this.events.next(new $g(l.id,t.serializeUrl(r.rawUrl),I,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Io.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return JE(l.source)&&(t.browserUrlTree=l.extractedUrl),ut(l).pipe(zn(I=>{const S=this.transitions?.getValue();return this.events.next(new Hg(I.id,this.urlSerializer.serialize(I.extractedUrl),I.source,I.restoredState)),S!==this.transitions?.getValue()?Io.E:Promise.resolve(I)}),function jy(n,e,t,r){return zn(i=>function jE(n,e,t,r,i){return new HE(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,x.U)(a=>({...i,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,si.b)(I=>{this.currentNavigation={...this.currentNavigation,finalUrl:I.urlAfterRedirects},r.urlAfterRedirects=I.urlAfterRedirects}),function bN(n,e,t,r,i){return(0,Ci.z)(a=>function Pf(n,e,t,r,i,a,l="emptyOnly"){return new KT(n,e,t,r,i,l,a).recognize().pipe(zn(f=>null===f?function Hy(n){return new Cr.y(e=>e.error(n))}(new ZT):ut(f)))}(n,e,t,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i).pipe((0,x.U)(l=>({...a,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,si.b)(I=>{if(r.targetSnapshot=I.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!I.extras.skipLocationChange){const P=t.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);t.setBrowserUrl(P,I)}t.browserUrlTree=I.urlAfterRedirects}const S=new CT(I.id,this.urlSerializer.serialize(I.extractedUrl),this.urlSerializer.serialize(I.urlAfterRedirects),I.targetSnapshot);this.events.next(S)}));if(m&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:I,extractedUrl:S,source:P,restoredState:V,extras:z}=l,ce=new Hg(I,this.urlSerializer.serialize(S),P,V);this.events.next(ce);const ve=xT(S,this.rootComponentType).snapshot;return ut(r={...l,targetSnapshot:ve,urlAfterRedirects:S,extras:{...z,skipLocationChange:!1,replaceUrl:!1}})}{const I="";return this.events.next(new $g(l.id,t.serializeUrl(r.extractedUrl),I,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Io.E}}),(0,si.b)(l=>{const f=new IT(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),(0,x.U)(l=>r={...l,guards:Ny(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function jT(n,e){return(0,Ci.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?ut({...t,guardsResult:!0}):function Uy(n,e,t,r){return(0,Bt.D)(n).pipe((0,Ci.z)(i=>function $T(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?ut(a.map(f=>{const m=Mf(e)??i,v=dc(f,m);return Ss(function Fy(n){return n&&Td(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):m.runInContext(()=>v(n,e,t,r))).pipe(oa())})).pipe(Ga()):ut(!0)}(i.component,i.route,t,e,r)),oa(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Ci.z)(f=>f&&function Oy(n){return"boolean"==typeof n}(f)?function Xg(n,e,t,r){return(0,Bt.D)(e).pipe(Ba(i=>Co(function NE(n,e){return null!==n&&e&&e(new Gg(n)),ut(!0)}(i.route.parent,r),function fc(n,e){return null!==n&&e&&e(new vE(n)),ut(!0)}(i.route,r),function HT(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function RE(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>sa(()=>ut(l.guards.map(m=>{const v=Mf(l.node)??t,I=dc(m,v);return Ss(function VT(n){return n&&Td(n.canActivateChild)}(I)?I.canActivateChild(r,n):v.runInContext(()=>I(r,n))).pipe(oa())})).pipe(Ga())));return ut(a).pipe(Ga())}(n,i.path,t),function Vy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ut(!0);const i=r.map(a=>sa(()=>{const l=Mf(e)??t,f=dc(a,l);return Ss(function ky(n){return n&&Td(n.canActivate)}(f)?f.canActivate(e,n):l.runInContext(()=>f(e,n))).pipe(oa())}));return ut(i).pipe(Ga())}(n,i.route,t))),oa(i=>!0!==i,!0))}(r,a,n,e):ut(f)),(0,x.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,l=>this.events.next(l)),(0,si.b)(l=>{if(r.guardsResult=l.guardsResult,zu(l.guardsResult))throw RT(0,l.guardsResult);const f=new fN(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(f)}),Ei(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),nm(l=>{if(l.guards.canActivateChecks.length)return ut(l).pipe((0,si.b)(f=>{const m=new bT(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}),zn(f=>{let m=!1;return ut(f).pipe(function DN(n,e){return(0,Ci.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ut(t);let a=0;return(0,Bt.D)(i).pipe(Ba(l=>function qE(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!KE(i)&&(a[ic]=i.title),function TN(n,e,t,r){const i=function WE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ut({});const a={};return(0,Bt.D)(i).pipe((0,Ci.z)(l=>function ZE(n,e,t,r){const i=Mf(e)??r,a=dc(n,i);return Ss(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(oa(),(0,si.b)(f=>{a[l]=f}))),rc(1),function gf(n){return(0,x.U)(()=>n)}(a),Do(l=>Ly(l)?Io.E:Ts(l)))}(a,n,e,r).pipe((0,x.U)(l=>(n._resolvedData=l,n.data=Ay(n,t).resolve,i&&KE(i)&&(n.data[ic]=i.title),null)))}(l.route,r,n,e)),(0,si.b)(()=>a++),rc(1),(0,Ci.z)(l=>a===i.length?ut(t):Io.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,si.b)({next:()=>m=!0,complete:()=>{m||(t.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,si.b)(f=>{const m=new Dy(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}))}),nm(l=>{const f=m=>{const v=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(m.routeConfig).pipe((0,si.b)(I=>{m.component=I}),(0,x.U)(()=>{})));for(const I of m.children)v.push(...f(I));return v};return at(f(l.targetSnapshot.root)).pipe(ff(),Va(1))}),nm(()=>this.afterPreactivation()),(0,x.U)(l=>{const f=function bE(n,e,t){const r=Cd(n,e._root,t?t._root:void 0);return new AT(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:f}}),(0,si.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,x.U)(r=>(new EN(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),(0,si.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Ku(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),us(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Do(l=>{if(a=!0,PT(l)){Zg(l)||(t.navigated=!0,t.restoreHistory(r,!0));const f=new uc(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(f),Zg(l)){const m=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),v={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||JE(r.source)};t.scheduleNavigation(m,Sf,null,v,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const f=new Yu(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(f);try{r.resolve(t.errorHandler(l))}catch(m){r.reject(m)}}return Io.E}))}))}cancelNavigationTransition(t,r,i){const a=new uc(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function JE(n){return n!==Sf}let zy=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===zt);return r}getResolvedTitleForRoute(t){return t.data[ic]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(nS)},providedIn:"root"}),n})(),nS=(()=>{class n extends zy{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ud))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Zt)},providedIn:"root"}),n})();class iS{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Zt=(()=>{class n extends iS{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Nf=new d.OlP("",{providedIn:"root",factory:()=>({})});let tC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(sS)},providedIn:"root"}),n})(),sS=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rC(n){throw n}function oS(n,e,t){return e.parse("/")}const iC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},aS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ii=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this.options=(0,d.f3M)(Nf,{optional:!0})||{},this.errorHandler=this.options.errorHandler||rC,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||oS,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(tC),this.routeReuseStrategy=(0,d.f3M)(rS),this.urlCreationStrategy=(0,d.f3M)(ST),this.titleStrategy=(0,d.f3M)(zy),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=vf((0,d.f3M)(Ni,{optional:!0})??[]),this.navigationTransitions=(0,d.f3M)(im),this.urlSerializer=(0,d.f3M)(it),this.location=(0,d.f3M)(Fe),this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new _,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=xT(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Sf,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const m={...i};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Py),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:f,preserveFragment:m}=r,v=m?this.currentUrlTree.fragment:l;let I=null;switch(f){case"merge":I={...this.currentUrlTree.queryParams,...a};break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=a||null}return null!==I&&(I=this.removeEmptyProps(I)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,I,v??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=zu(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,Sf,null,r)}navigate(t,r={skipLocationChange:!1}){return function SN(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...iC}:!1===r?{...aS}:r,zu(t))return Hu(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Hu(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let f,m,v,I;return l?(f=l.resolve,m=l.reject,v=l.promise):v=new Promise((S,P)=>{f=S,m=P}),I="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:I,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:f,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qa=(()=>{class n{constructor(t,r,i,a,l,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.locationStrategy=f,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new qr.x;const m=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===m||"area"===m,this.isAnchorElement?this.subscription=t.events.subscribe(v=>{v instanceof Ku&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ii),d.Y36(Ed),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(lt))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&d.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&d.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})();class oC{}let uS=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Ei(t=>t instanceof Ku),Ba(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,d.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,f=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,Bt.D)(i).pipe((0,Wr.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ut(null);const a=i.pipe((0,Ci.z)(l=>null===l?ut(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Bt.D)([a,l]).pipe((0,Wr.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ii),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(oC),d.LFG(Gy))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lC=new d.OlP("");let lS=(()=>{class n{constructor(t,r,i,a,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Hg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ku&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Sy&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Sy(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Md(n,e){return{\u0275kind:n,\u0275providers:e}}function kf(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(Ii),i=n.get(cC);1===n.get(sm)&&r.initialNavigation(),n.get(dC,null,d.XFs.Optional)?.setUpPreloading(),n.get(lC,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const cC=new d.OlP("",{factory:()=>new qr.x}),sm=new d.OlP("",{providedIn:"root",factory:()=>1});const dC=new d.OlP("");function pS(n){return Md(0,[{provide:dC,useExisting:uS},{provide:oC,useExisting:n}])}const om=new d.OlP("ROUTER_FORROOT_GUARD"),RN=[Fe,{provide:it,useClass:_t},Ii,Id,{provide:Ed,useFactory:function qy(n){return n.routerState.root},deps:[Ii]},Gy,[]];function Zy(){return new d.PXZ("Router",Ii)}let hC=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[RN,[],{provide:Ni,multi:!0,useValue:t},{provide:om,useFactory:_S,deps:[[Ii,new d.FiY,new d.tp0]]},{provide:Nf,useValue:r||{}},r?.useHash?{provide:lt,useClass:be}:{provide:lt,useClass:Ae},{provide:lC,useFactory:()=>{const n=(0,d.f3M)(zo),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)(Nf),r=(0,d.f3M)(im),i=(0,d.f3M)(it);return t.scrollOffset&&n.setOffset(t.scrollOffset),new lS(i,r,n,e,t)}},r?.preloadingStrategy?pS(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:Zy},r?.initialNavigation?pC(r):[],[{provide:gC,useFactory:kf},{provide:d.tb,multi:!0,useExisting:gC}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Ni,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(om,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Qg]}),n})();function _S(n){return"guarded"}function pC(n){return["disabled"===n.initialNavigation?Md(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Ii);return()=>{e.setUpLocationChangeListener()}}},{provide:sm,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Md(2,[{provide:sm,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(ge,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const a=e.get(Ii),l=e.get(cC);(function r(i){e.get(Ii).events.pipe(Ei(l=>l instanceof Ku||l instanceof uc||l instanceof Yu),(0,x.U)(l=>l instanceof Ku||l instanceof uc&&(0===l.code||1===l.code)&&null),Ei(l=>null!==l),Va(1)).subscribe(()=>{i()})})(()=>{i(!0)}),e.get(im).afterPreactivation=()=>(i(!0),l.closed?ut(void 0):l),a.initialNavigation()}))}}]).\u0275providers:[]]}const gC=new d.OlP(""),mn_theMovieDataBase_baseUrl="https://api.themoviedb.org/3",mn_theMovieDataBase_apiKey="b9dbfd453d43a3ee31b48c5306f1cf5c";class Od{}class _c{}class xo{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof xo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new xo;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof xo?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(f=>-1===a.indexOf(f)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class mC{encodeKey(e){return ev(e)}encodeValue(e){return ev(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Xy=/%(\d[a-f0-9])/gi,Jy={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ev(n){return encodeURIComponent(n).replace(Xy,(e,t)=>Jy[t]??e)}function kd(n){return`${n}`}class el{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new mC,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Qy(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,f]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],m=t.get(l)||[];m.push(f),t.set(l,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(kd):[kd(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new el({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(kd(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(kd(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class _C{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function tv(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function nv(n){return typeof Blob<"u"&&n instanceof Blob}function yC(n){return typeof FormData<"u"&&n instanceof FormData}class bi{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function vS(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new xo),this.context||(this.context=new _C),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+l}}else this.params=new el,this.urlWithParams=t}serializeBody(){return null===this.body?null:tv(this.body)||nv(this.body)||yC(this.body)||function wS(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof el?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||yC(this.body)?null:nv(this.body)?this.body.type||null:tv(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof el?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let m=e.headers||this.headers,v=e.params||this.params;const I=e.context??this.context;return void 0!==e.setHeaders&&(m=Object.keys(e.setHeaders).reduce((S,P)=>S.set(P,e.setHeaders[P]),m)),e.setParams&&(v=Object.keys(e.setParams).reduce((S,P)=>S.set(P,e.setParams[P]),v)),new bi(t,r,a,{params:v,headers:m,context:I,reportProgress:f,responseType:i,withCredentials:l})}}var Ir=(()=>((Ir=Ir||{})[Ir.Sent=0]="Sent",Ir[Ir.UploadProgress=1]="UploadProgress",Ir[Ir.ResponseHeader=2]="ResponseHeader",Ir[Ir.DownloadProgress=3]="DownloadProgress",Ir[Ir.Response=4]="Response",Ir[Ir.User=5]="User",Ir))();class rv{constructor(e,t=200,r="OK"){this.headers=e.headers||new xo,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class vC extends rv{constructor(e={}){super(e),this.type=Ir.ResponseHeader}clone(e={}){return new vC({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Fd extends rv{constructor(e={}){super(e),this.type=Ir.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Fd({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class iv extends rv{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function sv(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let wC=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof bi)a=t;else{let m,v;m=i.headers instanceof xo?i.headers:new xo(i.headers),i.params&&(v=i.params instanceof el?i.params:new el({fromObject:i.params})),a=new bi(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=ut(a).pipe(Ba(m=>this.handler.handle(m)));if(t instanceof bi||"events"===i.observe)return l;const f=l.pipe(Ei(m=>m instanceof Fd));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe((0,x.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return f.pipe((0,x.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return f.pipe((0,x.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return f.pipe((0,x.U)(m=>m.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new el).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,sv(i,r))}post(t,r,i={}){return this.request("POST",t,sv(i,r))}put(t,r,i={}){return this.request("PUT",t,sv(i,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Od))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function EC(n,e){return e(n)}function CC(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const CS=new d.OlP("HTTP_INTERCEPTORS"),yc=new d.OlP("HTTP_INTERCEPTOR_FNS");function IS(){let n=null;return(e,t)=>(null===n&&(n=((0,d.f3M)(CS,{optional:!0})??[]).reduceRight(CC,EC)),n(e,t))}let IC=(()=>{class n extends Od{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(yc)));this.chain=r.reduceRight((i,a)=>function ES(n,e,t){return(r,i)=>t.runInContext(()=>e(r,a=>n(a,i)))}(i,a,this.injector),EC)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_c),d.LFG(d.lqb))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ov=/^\)\]\}',?\n/;let SC=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Cr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((V,z)=>i.setRequestHeader(V,z.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const V=t.detectContentTypeHeader();null!==V&&i.setRequestHeader("Content-Type",V)}if(t.responseType){const V=t.responseType.toLowerCase();i.responseType="json"!==V?V:"text"}const a=t.serializeBody();let l=null;const f=()=>{if(null!==l)return l;const V=i.statusText||"OK",z=new xo(i.getAllResponseHeaders()),ce=function TS(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new vC({headers:z,status:i.status,statusText:V,url:ce}),l},m=()=>{let{headers:V,status:z,statusText:ce,url:ve}=f(),tt=null;204!==z&&(tt=typeof i.response>"u"?i.responseText:i.response),0===z&&(z=tt?200:0);let wt=z>=200&&z<300;if("json"===t.responseType&&"string"==typeof tt){const ft=tt;tt=tt.replace(ov,"");try{tt=""!==tt?JSON.parse(tt):null}catch(mt){tt=ft,wt&&(wt=!1,tt={error:mt,text:tt})}}wt?(r.next(new Fd({body:tt,headers:V,status:z,statusText:ce,url:ve||void 0})),r.complete()):r.error(new iv({error:tt,headers:V,status:z,statusText:ce,url:ve||void 0}))},v=V=>{const{url:z}=f(),ce=new iv({error:V,status:i.status||0,statusText:i.statusText||"Unknown Error",url:z||void 0});r.error(ce)};let I=!1;const S=V=>{I||(r.next(f()),I=!0);let z={type:Ir.DownloadProgress,loaded:V.loaded};V.lengthComputable&&(z.total=V.total),"text"===t.responseType&&i.responseText&&(z.partialText=i.responseText),r.next(z)},P=V=>{let z={type:Ir.UploadProgress,loaded:V.loaded};V.lengthComputable&&(z.total=V.total),r.next(z)};return i.addEventListener("load",m),i.addEventListener("error",v),i.addEventListener("timeout",v),i.addEventListener("abort",v),t.reportProgress&&(i.addEventListener("progress",S),null!==a&&i.upload&&i.upload.addEventListener("progress",P)),i.send(a),r.next({type:Ir.Sent}),()=>{i.removeEventListener("error",v),i.removeEventListener("abort",v),i.removeEventListener("load",m),i.removeEventListener("timeout",v),t.reportProgress&&(i.removeEventListener("progress",S),null!==a&&i.upload&&i.upload.removeEventListener("progress",P)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Cu))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ld=new d.OlP("XSRF_ENABLED"),am="XSRF-TOKEN",Ff=new d.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>am}),SS="X-XSRF-TOKEN",um=new d.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>SS});class AS{}let AC=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Hr(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe),d.LFG(d.Lbi),d.LFG(Ff))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function xC(n,e){const t=n.url.toLowerCase();if(!(0,d.f3M)(Ld)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,d.f3M)(AS).getToken(),i=(0,d.f3M)(um);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var cr=(()=>((cr=cr||{})[cr.Interceptors=0]="Interceptors",cr[cr.LegacyInterceptors=1]="LegacyInterceptors",cr[cr.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",cr[cr.NoXsrfProtection=3]="NoXsrfProtection",cr[cr.JsonpSupport=4]="JsonpSupport",cr[cr.RequestsMadeViaParent=5]="RequestsMadeViaParent",cr))();function tl(n,e){return{\u0275kind:n,\u0275providers:e}}function Za(...n){const e=[wC,SC,IC,{provide:Od,useExisting:IC},{provide:_c,useExisting:SC},{provide:yc,useValue:xC,multi:!0},{provide:Ld,useValue:!0},{provide:AS,useClass:AC}];for(const t of n)e.push(...t.\u0275providers);return(0,d.MR2)(e)}const Lf=new d.OlP("LEGACY_INTERCEPTOR_FN");function MS({cookieName:n,headerName:e}){const t=[];return void 0!==n&&t.push({provide:Ff,useValue:n}),void 0!==e&&t.push({provide:um,useValue:e}),tl(cr.CustomXsrfConfiguration,t)}let Vf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Za(tl(cr.LegacyInterceptors,[{provide:Lf,useFactory:IS},{provide:yc,useExisting:Lf,multi:!0}]),MS({cookieName:am,headerName:SS}))]}),n})();class Ka{constructor(e){this.http=e}bannerApiData(){return this.http.get(`${mn_theMovieDataBase_baseUrl}/trending/all/week?api_key=${mn_theMovieDataBase_apiKey}`)}trendingMovieApiData(){return this.http.get(`${mn_theMovieDataBase_baseUrl}/trending/movie/day?api_key=${mn_theMovieDataBase_apiKey}`)}getSearchMovie(e){return this.http.get(`${mn_theMovieDataBase_baseUrl}/search/movie?api_key=${mn_theMovieDataBase_apiKey}&query=${e.movieName}`)}getMovieDetails(e){return this.http.get(`${mn_theMovieDataBase_baseUrl}/movie/${e.movie_id}?api_key=${mn_theMovieDataBase_apiKey}`)}getMovieVideos(e){return this.http.get(`${mn_theMovieDataBase_baseUrl}/movie/${e.movie_id}/videos?api_key=${mn_theMovieDataBase_apiKey}`)}getMovieCast(e){return this.http.get(`${mn_theMovieDataBase_baseUrl}/movie/${e.movie_id}/credits?api_key=${mn_theMovieDataBase_apiKey}`)}fetchActionMovies(){return this.http.get(`${mn_theMovieDataBase_baseUrl}/discover/movie?api_key=${mn_theMovieDataBase_apiKey}&with_genres=28`)}fetchAdventureMovies(){return this.http.get(`${mn_theMovieDataBase_baseUrl}/discover/movie?api_key=${mn_theMovieDataBase_apiKey}&with_genres=12`)}fetchAnimationMovies(){return this.http.get(`${mn_theMovieDataBase_baseUrl}/discover/movie?api_key=${mn_theMovieDataBase_apiKey}&with_genres=16`)}fetchComedyMovies(){return this.http.get(`${mn_theMovieDataBase_baseUrl}/discover/movie?api_key=${mn_theMovieDataBase_apiKey}&with_genres=35`)}fetchDocumentaryMovies(){return this.http.get(`${mn_theMovieDataBase_baseUrl}/discover/movie?api_key=${mn_theMovieDataBase_apiKey}&with_genres=99`)}fetchScienceFictionMovies(){return this.http.get(`${mn_theMovieDataBase_baseUrl}/discover/movie?api_key=${mn_theMovieDataBase_apiKey}&with_genres=878`)}fetchThrillerMovies(){return this.http.get(`${mn_theMovieDataBase_baseUrl}/discover/movie?api_key=${mn_theMovieDataBase_apiKey}&with_genres=53`)}}Ka.\u0275fac=function(e){return new(e||Ka)(d.LFG(wC))},Ka.\u0275prov=d.Yz7({token:Ka,factory:Ka.\u0275fac,providedIn:"root"});const NS=function(n){return{active:n}};function OS(n,e){if(1&n&&(d.TgZ(0,"div",17),d._UZ(1,"img",18),d.TgZ(2,"div",19)(3,"h2"),d._uU(4),d.qZA(),d.TgZ(5,"p"),d._uU(6),d.qZA()()()),2&n){const t=e.$implicit;d.Q6J("ngClass",d.VKq(4,NS,1===e.index)),d.xp6(1),d.MGl("src","https://image.tmdb.org/t/p/original/",t.backdrop_path,"",d.LSH),d.xp6(3),d.Oqu(t.original_title),d.xp6(2),d.Oqu(t.overview)}}function kS(n,e){if(1&n&&(d.ynx(0),d._UZ(1,"img",20),d.BQk()),2&n){const t=e.$implicit;d.xp6(1),d.MGl("src","https://image.tmdb.org/t/p/original/",t.poster_path,"",d.LSH)("routerLink","/landing/movie/",t.id,"")}}function FS(n,e){if(1&n&&(d.ynx(0),d._UZ(1,"img",20),d.BQk()),2&n){const t=e.$implicit;d.xp6(1),d.MGl("src","https://image.tmdb.org/t/p/original/",t.poster_path,"",d.LSH)("routerLink","/landing/movie/",t.id,"")}}function LS(n,e){if(1&n&&(d.ynx(0),d._UZ(1,"img",20),d.BQk()),2&n){const t=e.$implicit;d.xp6(1),d.MGl("src","https://image.tmdb.org/t/p/original/",t.poster_path,"",d.LSH)("routerLink","/landing/movie/",t.id,"")}}function US(n,e){if(1&n&&(d.ynx(0),d._UZ(1,"img",20),d.BQk()),2&n){const t=e.$implicit;d.xp6(1),d.MGl("src","https://image.tmdb.org/t/p/original/",t.poster_path,"",d.LSH)("routerLink","/landing/movie/",t.id,"")}}class Ud{constructor(e){this.service=e,this.bannerMoviesData=[],this.trendingMoviesData=[],this.actionMoviesData=[],this.comedyMoviesData=[],this.adventureMoviesData=[]}ngOnInit(){this.bannerMovieDataRequest(),this.trendingDataRequest(),this.actionDataRequest(),this.adventureDataRequest(),this.comedyDataRequest()}bannerMovieDataRequest(){this.service.bannerApiData().subscribe(e=>{this.bannerMoviesData=e.results})}trendingDataRequest(){this.service.trendingMovieApiData().subscribe(e=>{this.trendingMoviesData=e.results})}actionDataRequest(){this.service.trendingMovieApiData().subscribe(e=>{this.actionMoviesData=e.results})}comedyDataRequest(){this.service.fetchComedyMovies().subscribe(e=>{this.comedyMoviesData=e.results})}adventureDataRequest(){this.service.fetchAdventureMovies().subscribe(e=>{this.adventureMoviesData=e.results})}}Ud.\u0275fac=function(e){return new(e||Ud)(d.Y36(Ka))},Ud.\u0275cmp=d.Xpm({type:Ud,selectors:[["app-home"]],decls:37,vars:5,consts:[[1,"contain-fluid"],["id","carouselExampleDark",1,"carousel","carousel-dark","slide"],[1,"carousel-indicators"],["type","button","data-bs-target","#carouselExampleDark","data-bs-slide-to","0","aria-current","true","aria-label","Slide 1",1,"active"],["type","button","data-bs-target","#carouselExampleDark","data-bs-slide-to","1","aria-label","Slide 2"],["type","button","data-bs-target","#carouselExampleDark","data-bs-slide-to","2","aria-label","Slide 3"],[1,"carousel-inner"],["class","carousel-item active","data-bs-interval","10000",3,"ngClass",4,"ngFor","ngForOf"],["type","button","data-bs-target","#carouselExampleDark","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleDark","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"contain","mt-3","mb-5","p-4"],[1,"row"],[1,"row-poster","mt-3","p-2"],[4,"ngFor","ngForOf"],["data-bs-interval","10000",1,"carousel-item","active",3,"ngClass"],["alt","...",1,"d-block","w-100",3,"src"],[1,"carousel-caption","d-none","d-md-block"],["alt","...",1,"row-image","large-poster",3,"src","routerLink"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2),d._UZ(3,"button",3)(4,"button",4)(5,"button",5),d.qZA(),d.TgZ(6,"div",6),d.YNc(7,OS,7,6,"div",7),d.qZA(),d.TgZ(8,"button",8),d._UZ(9,"span",9),d.TgZ(10,"span",10),d._uU(11,"Previous"),d.qZA()(),d.TgZ(12,"button",11),d._UZ(13,"span",12),d.TgZ(14,"span",10),d._uU(15,"Next"),d.qZA()()()(),d.TgZ(16,"div",13)(17,"div",14)(18,"h5"),d._uU(19,"Trending Movies"),d.qZA(),d.TgZ(20,"div",15),d.YNc(21,kS,2,2,"ng-container",16),d.qZA()(),d.TgZ(22,"div",14)(23,"h5"),d._uU(24,"Comedy Movies"),d.qZA(),d.TgZ(25,"div",15),d.YNc(26,FS,2,2,"ng-container",16),d.qZA()(),d.TgZ(27,"div",14)(28,"h5"),d._uU(29,"Action Movies"),d.qZA(),d.TgZ(30,"div",15),d.YNc(31,LS,2,2,"ng-container",16),d.qZA()(),d.TgZ(32,"div",14)(33,"h5"),d._uU(34,"Adventure Movies"),d.qZA(),d.TgZ(35,"div",15),d.YNc(36,US,2,2,"ng-container",16),d.qZA()()()),2&e&&(d.xp6(7),d.Q6J("ngForOf",t.bannerMoviesData),d.xp6(14),d.Q6J("ngForOf",t.trendingMoviesData),d.xp6(5),d.Q6J("ngForOf",t.comedyMoviesData),d.xp6(5),d.Q6J("ngForOf",t.actionMoviesData),d.xp6(5),d.Q6J("ngForOf",t.adventureMoviesData))},dependencies:[kt,$i,qa],styles:[".carousel-inner[_ngcontent-%COMP%]{height:700px}.carousel-inner[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:700px;object-fit:cover}.carousel-inner[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e50914;font-weight:700;font-size:30px}.carousel-inner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.row-poster[_ngcontent-%COMP%]{display:flex}.row-image[_ngcontent-%COMP%]{max-height:200px;object-fit:contain;width:100%;box-sizing:border-box;transition:transform .25s ease-in,border .25s ease-in;margin-right:7px;border:3px solid #000}.row[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff}.row-image[_ngcontent-%COMP%]:hover{transform:scale(1.3);cursor:pointer;border:3px solid #E50914}.large-poster[_ngcontent-%COMP%]{max-height:300px}.row-poster[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]});var fe=U(5861);function MC(n,e,t){return t?MC(n,e).pipe(re(t)):new Cr.y(r=>{const i=(...l)=>r.next(1===l.length?l[0]:l),a=n(i);return(0,Kr.m)(e)?()=>e(i,a):void 0})}var Vd=U(6451),RC=U(5032);function uv(n){return(0,Nn.e)((e,t)=>{(0,Ds.Xf)(n).subscribe((0,qe.x)(t,()=>t.complete(),RC.Z)),!t.closed&&e.subscribe(t)})}const BS={connector:()=>new qr.x};function PC(n,e=BS){const{connector:t}=e;return(0,Nn.e)((r,i)=>{const a=t();(0,Ds.Xf)(n(function VS(n){return new Cr.y(e=>n.subscribe(e))}(a))).subscribe(i),i.add(r.subscribe(a))})}function Bf(...n){const e=(0,Qs.jO)(n);return(0,Nn.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),f=!1;for(let m=0;m<i;m++)(0,Ds.Xf)(n[m]).subscribe((0,qe.x)(r,v=>{a[m]=v,!f&&!l[m]&&(l[m]=!0,(f=l.every(T.y))&&(l=null))},RC.Z));t.subscribe((0,qe.x)(r,m=>{if(f){const v=[m,...a];r.next(e?e(...v):v)}}))})}function lm(n,e=T.y){return n=n??$S,(0,Nn.e)((t,r)=>{let i,a=!0;t.subscribe((0,qe.x)(r,l=>{const f=e(l);(a||!n(i,f))&&(a=!1,i=f,r.next(l))}))})}function $S(n,e){return n===e}const{isArray:HN}=Array;function NC(n){return 1===n.length&&HN(n[0])?n[0]:n}function jf(...n){const e=(0,Qs.jO)(n);return e?(0,Zr.z)(jf(...n),re(e)):(0,Nn.e)((t,r)=>{Ht([t,...NC(n)])(r)})}function nl(n){return(0,Nn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,qe.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}const $N=["youtubeContainer"];let kC=(()=>{class n{get videoId(){return this._videoId.value}set videoId(t){this._videoId.next(t)}get height(){return this._height.value}set height(t){this._height.next(t||390)}get width(){return this._width.value}set width(t){this._width.next(t||640)}set startSeconds(t){this._startSeconds.next(t)}set endSeconds(t){this._endSeconds.next(t)}set suggestedQuality(t){this._suggestedQuality.next(t)}get playerVars(){return this._playerVars.value}set playerVars(t){this._playerVars.next(t)}get disableCookies(){return this._disableCookies.value}set disableCookies(t){this._disableCookies.next(!!t)}constructor(t,r){this._ngZone=t,this._youtubeContainer=new qr.x,this._destroyed=new qr.x,this._playerChanges=new gn(void 0),this._videoId=new gn(void 0),this._height=new gn(390),this._width=new gn(640),this._startSeconds=new gn(void 0),this._endSeconds=new gn(void 0),this._suggestedQuality=new gn(void 0),this._playerVars=new gn(void 0),this._disableCookies=new gn(!1),this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=function Vl(n){return n===Pi}(r)}ngOnInit(){if(!this._isBrowser)return;let t=ut(!0);if(!window.YT||!window.YT.Player){const a=new qr.x;this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback&&this._existingApiReadyCallback(),this._ngZone.run(()=>a.next(!0))},t=a.pipe(Va(1),bo(!1))}const r=this._disableCookies.pipe((0,x.U)(a=>a?"https://www.youtube-nocookie.com":void 0)),i=function $f(n,e,t,r,i,a,l,f){const m=at([e,t,l]).pipe(Bf(at([i,a])),(0,x.U)(([v,I])=>{const[S,P,V]=v,[z,ce]=I;return S?{videoId:S,playerVars:V,width:z,height:ce,host:P}:void 0}));return at([n,m,ut(f)]).pipe(function Oi(n){return(0,Zr.z)(jf(n),nl(([e,t])=>!t),(0,x.U)(([e])=>e))}(r),To(vc,void 0),lm())}(this._youtubeContainer,this._videoId,r,t,this._width,this._height,this._playerVars,this._ngZone).pipe((0,si.b)(a=>{this._playerChanges.next(a)}),function ca(n){return(0,Ci.z)(e=>e?dm(e)?ut(e):new Cr.y(t=>{let r=!1,i=!1;const a=l=>{i=!0,r||(l.target.removeEventListener("onReady",a),t.next(l.target))};return e.addEventListener("onReady",a),()=>{r=!0,i||n(e)}}).pipe(Va(1),bo(void 0)):ut(void 0))}(a=>{dm(a)||a.destroy()}),uv(this._destroyed),function HS(n){return n?e=>PC(n)(e):e=>function jS(n,e){const t=(0,Kr.m)(n)?n:()=>n;return(0,Kr.m)(e)?PC(e,{connector:t}):r=>new gd(r,t)}(new qr.x)(e)}());i.subscribe(a=>{this._player=a,a&&this._pendingPlayerState&&this._initializePlayer(a,this._pendingPlayerState),this._pendingPlayerState=void 0}),function lv(n,e,t){at([n,e,t]).subscribe(([r,i,a])=>r&&r.setSize(i,a))}(i,this._width,this._height),function GS(n,e){at([n,e]).subscribe(([t,r])=>t&&r&&t.setPlaybackQuality(r))}(i,this._suggestedQuality),function cm(n,e,t,r,i,a){const l=at([t,r]).pipe((0,x.U)(([I,S])=>({startSeconds:I,endSeconds:S}))),f=l.pipe(rl(n,I=>!!I&&!function eo(n){const e=n.getPlayerState();return e!==YT.PlayerState.UNSTARTED&&e!==YT.PlayerState.CUED}(I))),m=e.pipe(rl(n,(I,S)=>!!I&&I.videoId!==S)),v=n.pipe(rl(at([e,l]),([I,S],P)=>!(!P||I==P.videoId&&!S.startSeconds&&!S.endSeconds)));(0,Vd.T)(v,m,f).pipe(Bf(at([n,e,l,i])),(0,x.U)(([I,S])=>S),uv(a)).subscribe(([I,S,P,V])=>{!S||!I||(I.videoId=S,I.cueVideoById({videoId:S,suggestedQuality:V,...P}))})}(i,this._videoId,this._startSeconds,this._endSeconds,this._suggestedQuality,this._destroyed),i.connect()}ngAfterViewInit(){this._youtubeContainer.next(this.youtubeContainer.nativeElement)}ngOnDestroy(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._videoId.complete(),this._height.complete(),this._width.complete(),this._startSeconds.complete(),this._endSeconds.complete(),this._suggestedQuality.complete(),this._youtubeContainer.complete(),this._playerVars.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(t,r){this._player?this._player.seekTo(t,r):this._getPendingState().seek={seconds:t,allowSeekAhead:r}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(t){this._player?this._player.setVolume(t):this._getPendingState().volume=t}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(t){if(this._player)return this._player.setPlaybackRate(t);this._getPendingState().playbackRate=t}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_initializePlayer(t,r){const{playbackState:i,playbackRate:a,volume:l,muted:f,seek:m}=r;switch(i){case YT.PlayerState.PLAYING:t.playVideo();break;case YT.PlayerState.PAUSED:t.pauseVideo();break;case YT.PlayerState.CUED:t.stopVideo()}null!=a&&t.setPlaybackRate(a),null!=l&&t.setVolume(l),null!=f&&(f?t.mute():t.unMute()),null!=m&&t.seekTo(m.seconds,m.allowSeekAhead)}_getLazyEmitter(t){return this._playerChanges.pipe(zn(r=>r?MC(i=>{r.addEventListener(t,i)},i=>{try{r.removeEventListener&&r.removeEventListener(t,i)}catch{}}):ut()),r=>new Cr.y(i=>r.subscribe({next:a=>this._ngZone.run(()=>i.next(a)),error:a=>i.error(a),complete:()=>i.complete()})),uv(this._destroyed))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.R0b),d.Y36(d.Lbi))},n.\u0275cmp=d.Xpm({type:n,selectors:[["youtube-player"]],viewQuery:function(t,r){if(1&t&&d.Gf($N,5),2&t){let i;d.iGM(i=d.CRH())&&(r.youtubeContainer=i.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:"disableCookies",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(t,r){1&t&&d._UZ(0,"div",null,0)},encapsulation:2,changeDetection:0}),n})();function vc(n,[e,t,r]){if(n&&t&&(n.playerVars!==t.playerVars||n.host!==t.host))n.destroy();else{if(!t)return void(n&&n.destroy());if(n)return n}const i=r.runOutsideAngular(()=>new YT.Player(e,t));return i.videoId=t.videoId,i.playerVars=t.playerVars,i.host=t.host,i}function dm(n){return"getPlayerStatus"in n}function rl(n,e){return(0,Zr.z)(Bf(n),Ei(([t,r])=>e(r,t)),(0,x.U)(([t])=>t))}let Bd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function jd(n,e){if(1&n&&(d.TgZ(0,"div",5),d._UZ(1,"img",6),d.TgZ(2,"div",7)(3,"span"),d._uU(4),d.qZA(),d.TgZ(5,"div",8)(6,"button",9),d._uU(7,"\u25b6 Play"),d.qZA(),d.TgZ(8,"button",9)(9,"div",10),d._UZ(10,"img",11),d.qZA()(),d.TgZ(11,"button",9)(12,"div",10),d._UZ(13,"img",12),d.qZA()()()()()),2&n){const t=d.oxw();d.xp6(1),d.MGl("src","https://image.tmdb.org/t/p/original/",t.movieDetails.backdrop_path,"",d.LSH),d.xp6(3),d.Oqu(t.movieDetails.original_title)}}function Hd(n,e){if(1&n&&(d.TgZ(0,"span"),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Oqu(t.getCastStringOneLineTop5())}}function $d(n,e){if(1&n&&(d.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"span",16),d._uU(4),d.ALo(5,"number"),d.qZA(),d.TgZ(6,"span",17),d._uU(7),d.qZA(),d.TgZ(8,"span",18),d._uU(9),d.qZA(),d.TgZ(10,"span",19),d._uU(11),d.qZA()(),d.TgZ(12,"p"),d._uU(13),d.qZA()(),d.TgZ(14,"div",20)(15,"div",21)(16,"span",22),d._uU(17,"Cast: \xa0"),d.qZA(),d.YNc(18,Hd,2,1,"span",23),d.qZA(),d.TgZ(19,"div")(20,"span",22),d._uU(21,"Genres: \xa0"),d.qZA(),d.TgZ(22,"span"),d._uU(23),d.qZA()()()()),2&n){const t=d.oxw();d.xp6(4),d.hij("",d.xi3(5,7,t.movieDetails.vote_average,".0-1"),"/10 (user score) \xa0"),d.xp6(3),d.Oqu(t.getReleaseDateYearString(t.movieDetails.release_date)),d.xp6(2),d.hij("\xa0 \u25cf ",t.movieDetails.runtime,"m"),d.xp6(2),d.Oqu(t.getOriginalLanguageUpperCase(t.movieDetails.original_language)),d.xp6(2),d.hij(" ",t.movieDetails.overview," "),d.xp6(5),d.Q6J("ngIf",t.movieCast),d.xp6(5),d.Oqu(t.getGenresStringOneLine(t.movieDetails.genres))}}function Gd(n,e){if(1&n&&(d.TgZ(0,"div",27)(1,"div",28)(2,"h3",29),d._uU(3),d.qZA(),d.TgZ(4,"h3",30),d._uU(5),d.qZA()(),d.TgZ(6,"h3",31),d._uU(7),d.qZA(),d._UZ(8,"youtube-player",32)(9,"hr"),d.qZA()),2&n){const t=d.oxw().$implicit,r=d.oxw(2);d.xp6(3),d.Oqu(t.name),d.xp6(2),d.hij("(",r.getPublishedDateString(t.published_at),")"),d.xp6(2),d.Oqu(t.type),d.xp6(1),d.s9C("videoId",t.key),d.Q6J("width",400)("height",200)}}function zd(n,e){if(1&n&&(d.ynx(0),d.YNc(1,Gd,10,6,"div",26),d.BQk()),2&n){const t=e.index;d.xp6(1),d.Q6J("ngIf",t<5)}}function qd(n,e){if(1&n&&(d.TgZ(0,"div",24),d.YNc(1,zd,2,1,"ng-container",25),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngForOf",t.movieVideos.results)}}class Wd{constructor(e,t){this.service=e,this.route=t,this.movieId=0,this.movieDetails=void 0,this.movieCast=void 0,this.movieVideos=void 0}ngOnInit(){var e=this;return(0,fe.Z)(function*(){e.routeParams=e.route.params.subscribe(t=>{e.movieId=+t.id}),yield e.getMovieDetail(e.movieId),yield e.getMovieCast(e.movieId),yield e.getMovieVideos(e.movieId)})()}getMovieDetail(e){var t=this;return(0,fe.Z)(function*(){const r=yield t.service.getMovieDetails({movie_id:e}).toPromise().catch(i=>{});r&&(t.movieDetails=r)})()}getMovieCast(e){var t=this;return(0,fe.Z)(function*(){const r=yield t.service.getMovieCast({movie_id:e}).toPromise().catch(i=>{});r&&(t.movieCast=r)})()}getMovieVideos(e){var t=this;return(0,fe.Z)(function*(){const r=yield t.service.getMovieVideos({movie_id:e}).toPromise().catch(i=>{});r&&(t.movieVideos=r)})()}getReleaseDateYearString(e){return e.substring(0,4)}getOriginalLanguageUpperCase(e){return e.toUpperCase()}getCastStringOneLineTop5(){let e="",t=0;for(const r of this.movieCast.cast)if(t++,e+=`${r.name}, `,5===t)break;return e.length>0&&(e=e.substring(0,e.length-2)),e}getGenresStringOneLine(e){let t="";for(const r of e)t+=`${r.name}, `;return t.length>0&&(t=t.substring(0,t.length-2)),t}getPublishedDateString(e){return new Date(e).toLocaleDateString()}ngOnDestroy(){this.routeParams&&this.routeParams.unsubscribe()}}Wd.\u0275fac=function(e){return new(e||Wd)(d.Y36(Ka),d.Y36(Ed))},Wd.\u0275cmp=d.Xpm({type:Wd,selectors:[["app-movie-detail"]],decls:8,vars:3,consts:[[1,"contain","mainContainer"],["class","imageContainer",4,"ngIf"],["class","infoContainer",4,"ngIf"],[1,"mediaContainer"],["class","mediaVideosContainer",4,"ngIf"],[1,"imageContainer"],["alt","",3,"src"],[1,"movieTitleContainer"],[1,"buttonContainer"],["type","button"],[2,"display","flex","justify-content","center","align-items","center"],["src","assets/white-plus-sign.png","alt",""],["src","assets/white-like-sign.png","alt",""],[1,"infoContainer"],[1,"leftSide"],[1,"subHeaderContainer"],[1,"voteAverage"],[1,"releaseDate"],[1,"runtime"],[1,"originalLanguage"],[1,"rightSide"],[1,"mb-3"],[1,"infoSpanCustom1"],[4,"ngIf"],[1,"mediaVideosContainer"],[4,"ngFor","ngForOf"],["class","mb-2 videoGroup",4,"ngIf"],[1,"mb-2","videoGroup"],[1,"videoTitleContainer"],[1,"videoTitle"],[1,"publishedDate"],[1,"videoType"],[3,"width","height","videoId"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.YNc(1,jd,14,2,"div",1),d.YNc(2,$d,24,10,"div",2),d.TgZ(3,"div",3)(4,"h2"),d._uU(5,"Media"),d.qZA(),d._UZ(6,"hr"),d.YNc(7,qd,2,1,"div",4),d.qZA()()),2&e&&(d.xp6(1),d.Q6J("ngIf",t.movieDetails),d.xp6(1),d.Q6J("ngIf",t.movieDetails),d.xp6(5),d.Q6J("ngIf",t.movieVideos))},dependencies:[$i,Gi,kC,qh],styles:[".mainContainer[_ngcontent-%COMP%]{background-color:#181818;margin-top:5rem;margin-left:2rem;margin-right:2rem;border-radius:15px;padding-bottom:2rem}.imageContainer[_ngcontent-%COMP%]{width:100%;height:800px;position:relative}.imageContainer[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;object-fit:cover;object-position:50% 50%;border-radius:15px 15px 0 0}.movieTitleContainer[_ngcontent-%COMP%]{position:absolute;bottom:2.5rem;left:2.5rem;width:350px;text-align:center;display:flex;flex-direction:column;justify-content:center;align-items:center}.movieTitleContainer[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:2.5rem;color:#fff;font-weight:700;animation:_ngcontent-%COMP%_titleAnimation 4s ease-in infinite;text-shadow:1px 1px 2px #E50914}.movieTitleContainer[_ngcontent-%COMP%]   .buttonContainer[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;width:100%;margin-top:1rem}.buttonContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-of-type(1){padding:.5rem 2rem;background-color:#fff;font-weight:700;border-radius:8px;border:none;margin-right:8px;transition:background-color .15s ease-in}.buttonContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-of-type(1):hover{background-color:#e6e6e6}.buttonContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-of-type(2){padding:8.5px;width:40px;height:40px;background-color:#2a2a2a99;border-radius:50%;border:2.5px solid hsla(0,0%,100%,.5);margin-right:8px;transition:border .15s ease-in}.buttonContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-of-type(2):hover{border:2.5px solid #fff}.buttonContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-of-type(3){padding:8.5px;width:40px;height:40px;background-color:#2a2a2a99;border-radius:50%;border:2.5px solid hsla(0,0%,100%,.5);margin-right:8px;transition:border .15s ease-in}.buttonContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-of-type(3):hover{border:2.5px solid #fff}.infoContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:2rem;padding-left:2.5rem;padding-right:2.5rem;color:#fff;font-size:14px}.subHeaderContainer[_ngcontent-%COMP%]{margin-bottom:1rem}.leftSide[_ngcontent-%COMP%]{padding-right:1rem;width:65%}.voteAverage[_ngcontent-%COMP%]{color:#46d369}.originalLanguage[_ngcontent-%COMP%]{margin-left:10px;border:1px solid white;border-radius:4px;padding:0 4px}.rightSide[_ngcontent-%COMP%]{align-self:flex-start;width:35%}.infoSpanCustom1[_ngcontent-%COMP%]{color:#777;font-weight:700}.mediaContainer[_ngcontent-%COMP%]{margin-top:2rem;padding-left:2.5rem;padding-right:2.5rem}.mediaContainer[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{color:#fff}.mediaContainer[_ngcontent-%COMP%] > hr[_ngcontent-%COMP%]{border:none;border-top:2px solid gray}.mediaVideosContainer[_ngcontent-%COMP%]{padding-left:1rem;display:flex;justify-content:flex-start;align-items:center;flex-wrap:wrap}.mediaVideosContainer[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:none;border-top:2px solid gray}.videoGroup[_ngcontent-%COMP%]{margin-right:2rem;display:flex;flex-direction:column;justify-content:center;align-items:flex-start}.videoTitleContainer[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;color:#fff}.videoTitle[_ngcontent-%COMP%]{font-size:20px;margin-right:5px}.publishedDate[_ngcontent-%COMP%]{font-size:14px;color:#d0d0d0;margin-right:8px}.videoType[_ngcontent-%COMP%]{border:1px solid white;border-radius:4px;padding:0 4px;font-size:13px;display:inline-block;color:#fff}@keyframes _ngcontent-%COMP%_titleAnimation{0%{text-shadow:1px 1px 2px #E50914}50%{text-shadow:1px 1px 20px #E50914}to{text-shadow:1px 1px 2px #E50914}}"]});let cv=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),il=(()=>{class n extends cv{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const Mo=new d.OlP("NgValueAccessor"),UC={provide:Mo,useExisting:(0,d.Gpc)(()=>Zd),multi:!0},zS=new d.OlP("CompositionEventMode");let Zd=(()=>{class n extends cv{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function VC(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(zS,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[d._Bn([UC]),d.qOj]}),n})();function sl(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function jC(n){return null!=n&&"number"==typeof n.length}const ai=new d.OlP("NgValidators"),da=new d.OlP("NgAsyncValidators"),qS=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class wc{static min(e){return function zf(n){return e=>{if(sl(e.value)||sl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function hm(n){return e=>{if(sl(e.value)||sl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function HC(n){return sl(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function qf(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Wf(n){return sl(n.value)||qS.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function hv(n){return e=>sl(e.value)||!jC(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function $C(n){return e=>jC(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function fm(n){if(!n)return Zf;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(sl(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return mv(e)}static composeAsync(e){return qC(e)}}function Zf(n){return null}function fv(n){return null!=n}function pm(n){return(0,d.QGY)(n)?(0,Bt.D)(n):n}function pv(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function GC(n,e){return e.map(t=>t(n))}function gv(n){return n.map(e=>function zC(n){return!n.validate}(e)?e:t=>e.validate(t))}function mv(n){if(!n)return null;const e=n.filter(fv);return 0==e.length?null:function(t){return pv(GC(t,e))}}function gm(n){return null!=n?mv(gv(n)):null}function qC(n){if(!n)return null;const e=n.filter(fv);return 0==e.length?null:function(t){return function FC(...n){const e=(0,Qs.jO)(n),{args:t,keys:r}=Eo(n),i=new Cr.y(a=>{const{length:l}=t;if(!l)return void a.complete();const f=new Array(l);let m=l,v=l;for(let I=0;I<l;I++){let S=!1;(0,Ds.Xf)(t[I]).subscribe((0,qe.x)(a,P=>{S||(S=!0,v--),f[I]=P},()=>m--,void 0,()=>{(!m||!S)&&(v||a.next(r?Oe(r,f):f),a.complete())}))}});return e?i.pipe(re(e)):i}(GC(t,e).map(pm)).pipe((0,x.U)(pv))}}function _v(n){return null!=n?qC(gv(n)):null}function WC(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function mm(n){return n._rawValidators}function Kf(n){return n._rawAsyncValidators}function _m(n){return n?Array.isArray(n)?n:[n]:[]}function Yf(n,e){return Array.isArray(n)?n.includes(e):n===e}function yv(n,e){const t=_m(e);return _m(n).forEach(i=>{Yf(t,i)||t.push(i)}),t}function vv(n,e){return _m(e).filter(t=>!Yf(n,t))}class wv{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gm(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_v(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ki extends wv{get formDirective(){return null}get path(){return null}}class Ya extends wv{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ev{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ym=(()=>{class n extends Ev{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ya,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),vm=(()=>{class n extends Ev{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ki,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();const Kd="VALID",Qa="INVALID",Yd="PENDING",Xf="DISABLED";function Em(n){return(Jf(n)?n.validators:n)||null}function Cm(n,e){return(Jf(e)?e.asyncValidators:n)||null}function Jf(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Im(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")}function Ro(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})}class bm{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Kd}get invalid(){return this.status===Qa}get pending(){return this.status==Yd}get disabled(){return this.status===Xf}get enabled(){return this.status!==Xf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(yv(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(yv(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(vv(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(vv(e,this._rawAsyncValidators))}hasValidator(e){return Yf(this._rawValidators,e)}hasAsyncValidator(e){return Yf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Yd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Xf,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Kd,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Kd||this.status===Yd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xf:Kd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Yd,this._hasOwnPendingAsyncValidator=!0;const t=pm(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?Xf:this.errors?Qa:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yd)?Yd:this._anyControlsHaveStatus(Qa)?Qa:Kd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Jf(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function YS(n){return Array.isArray(n)?gm(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function WN(n){return Array.isArray(n)?_v(n):n||null}(this._rawAsyncValidators)}}class Qd extends bm{constructor(e,t,r){super(Em(t),Cm(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Ro(this,0,e),Object.keys(e).forEach(r=>{Im(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class to extends Qd{}const Xd=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Tv}),Tv="always";function ep(n,e,t=Tv){Sv(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function XS(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Av(n,e)})}(n,e),function Sm(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function QC(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Av(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function tp(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Tm(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),np(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Jd(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Sv(n,e){const t=mm(n);null!==e.validator?n.setValidators(WC(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Kf(n);null!==e.asyncValidator?n.setAsyncValidators(WC(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Jd(e._rawValidators,i),Jd(e._rawAsyncValidators,i)}function np(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=mm(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=Kf(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return Jd(e._rawValidators,r),Jd(e._rawAsyncValidators,r),t}function Av(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function nI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function rI(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const th=class extends bm{constructor(e=null,t,r){super(Em(t),Cm(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Jf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=rI(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){nI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){nI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){rI(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let ip=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Nv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Mm=new d.OlP("NgModelWithFormControlWarning"),uA={provide:ki,useExisting:(0,d.Gpc)(()=>Po)};let Po=(()=>{class n extends ki{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(np(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return ep(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Tm(t.control||null,t,!1),function tI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Mv(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Tm(r||null,t),(n=>n instanceof th)(i)&&(ep(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function XC(n,e){Sv(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function JC(n,e){return np(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Sv(this.form,this),this._oldForm&&np(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ai,10),d.Y36(da,10),d.Y36(Xd,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([uA]),d.qOj,d.TTD]}),n})();const tO={provide:Ya,useExisting:(0,d.Gpc)(()=>At)};let At=(()=>{class n extends Ya{set isDisabled(t){}constructor(t,r,i,a,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function xm(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Zd?t=a:function eI(n){return Object.getPrototypeOf(n.constructor)===il}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){this._added||this._setUpControl(),function Am(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Dm(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(ki,13),d.Y36(ai,10),d.Y36(da,10),d.Y36(Mo,10),d.Y36(Mm,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([tO]),d.qOj,d.TTD]}),n})(),CI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Nv]}),n})();class jv extends bm{constructor(e,t,r){super(Em(t),Cm(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Ro(this,0,e),e.forEach((r,i)=>{Im(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function Hv(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let II=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let a={};return Hv(r)?a=r:null!==r&&(a.validators=r.validator,a.asyncValidators=r.asyncValidator),new Qd(i,a)}record(t,r=null){const i=this._reduceControls(t);return new to(i,r)}control(t,r,i){let a={};return this.useNonNullable?(Hv(r)?a=r:(a.validators=r,a.asyncValidators=i),new th(t,{...a,nonNullable:!0})):new th(t,r,i)}array(t,r,i){const a=t.map(l=>this._createControl(l));return new jv(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof th||t instanceof bm?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aO=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Mm,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Xd,useValue:t.callSetDisabledState??Tv}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[CI]}),n})();function bI(n,e){if(1&n&&(d.TgZ(0,"div",9)(1,"div",10)(2,"div",11),d._UZ(3,"img",12),d.qZA(),d.TgZ(4,"div",13)(5,"h5"),d._uU(6),d.qZA()()()()),2&n){const t=e.$implicit;d.xp6(1),d.MGl("routerLink","/landing/movie/",t.id,""),d.xp6(2),d.MGl("src","https://image.tmdb.org/t/p/original/",t.poster_path,"",d.LSH),d.xp6(3),d.Oqu(t.title)}}class ul{constructor(e){this.service=e,this.searchForm=new Qd({movieName:new th(null)})}submitForm(){this.service.getSearchMovie(this.searchForm.value).subscribe(e=>{console.log(e,"searchResult#"),this.searchResult=e.results})}}ul.\u0275fac=function(e){return new(e||ul)(d.Y36(Ka))},ul.\u0275cmp=d.Xpm({type:ul,selectors:[["app-search"]],decls:10,vars:2,consts:[[1,"contain","mt-5","p-5"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"mb-3","col-lg-10"],["type","text","formControlName","movieName","placeholder","Search movie here...",1,"form-control"],[1,"col-lg-2"],[1,"btn","btn-md"],[1,"row","mt-5"],["class","col-lg-4 matchEntryContainer",4,"ngFor","ngForOf"],[1,"col-lg-4","matchEntryContainer"],[1,"row",3,"routerLink"],[1,"col-lg-3"],[3,"src"],[1,"col-lg-9"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"form",1),d.NdJ("ngSubmit",function(){return t.submitForm()}),d.TgZ(2,"div",2)(3,"div",3),d._UZ(4,"input",4),d.qZA(),d.TgZ(5,"div",5)(6,"button",6),d._uU(7," Search "),d.qZA()()()()(),d.TgZ(8,"div",7),d.YNc(9,bI,7,3,"div",8),d.qZA()),2&e&&(d.xp6(1),d.Q6J("formGroup",t.searchForm),d.xp6(8),d.Q6J("ngForOf",t.searchResult))},dependencies:[$i,qa,ip,Zd,ym,vm,Po,At],styles:["button[_ngcontent-%COMP%], button[_ngcontent-%COMP%]:hover{color:#fff;background-color:#e50914}img[_ngcontent-%COMP%]{width:100%}h5[_ngcontent-%COMP%]{color:#fff}.matchEntryContainer[_ngcontent-%COMP%]{cursor:pointer}"]});var mA=U(2722),F=U(2090),Fi=U(9681),Ki=U(1877),No=U(4859),$v=U(4986),_n=U(2122);function Gv(){return(0,Nn.e)((n,e)=>{let t,r=!1;n.subscribe((0,qe.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var yt,li=U(2011),Om=(U(9568),U(3942)),_A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ja={},zv=zv||{},$t=_A||self;function km(){}function cp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function dp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var qv="closure_uid_"+(1e9*Math.random()>>>0),Wv=0;function yA(n,e,t){return n.call.apply(n.bind,arguments)}function TI(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Di(n,e,t){return(Di=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yA:TI).apply(null,arguments)}function Fm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ti(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function ll(){this.s=this.s,this.o=this.o}ll.prototype.s=!1,ll.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function DI(n){Object.prototype.hasOwnProperty.call(n,qv)&&n[qv]||(n[qv]=++Wv)}(this)},ll.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const SI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Lm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function AI(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(cp(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function Li(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Li.prototype.h=function(){this.defaultPrevented=!0};var vA=function(){if(!$t.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{$t.addEventListener("test",km,e),$t.removeEventListener("test",km,e)}catch{}return n}();function Um(n){return/^[\s\xa0]*$/.test(n)}var xI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Kv(n,e){return n<e?-1:n>e?1:0}function Vm(){var n=$t.navigator;return n&&(n=n.userAgent)?n:""}function pa(n){return-1!=Vm().indexOf(n)}function Bm(n){return Bm[" "](n),n}Bm[" "]=km;var ih,n,wA=pa("Opera"),rh=pa("Trident")||pa("MSIE"),Yv=pa("Edge"),Qv=Yv||rh,RI=pa("Gecko")&&!(-1!=Vm().toLowerCase().indexOf("webkit")&&!pa("Edge"))&&!(pa("Trident")||pa("MSIE"))&&!pa("Edge"),EA=-1!=Vm().toLowerCase().indexOf("webkit")&&!pa("Edge");function jm(){var n=$t.document;return n?n.documentMode:void 0}e:{var Hm="",hp=(n=Vm(),RI?/rv:([^\);]+)(\)|;)/.exec(n):Yv?/Edge\/([\d\.]+)/.exec(n):rh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):EA?/WebKit\/(\S+)/.exec(n):wA?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(hp&&(Hm=hp?hp[1]:""),rh){var Xv=jm();if(null!=Xv&&Xv>parseFloat(Hm)){ih=String(Xv);break e}}ih=Hm}var CA={};var sh=$t.document&&rh&&(jm()||parseInt(ih,10))||void 0;function oh(n,e){if(Li.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(RI){e:{try{Bm(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:IA[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&oh.X.h.call(this)}}Ti(oh,Li);var IA={2:"touch",3:"pen",4:"mouse"};oh.prototype.h=function(){oh.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var $m="closure_listenable_"+(1e6*Math.random()|0),PI=0;function n0(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++PI,this.ba=this.ea=!1}function Gm(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function fp(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function NI(n){const e={};for(const t in n)e[t]=n[t];return e}const r0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zm(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<r0.length;a++)t=r0[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function pp(n){this.src=n,this.g={},this.h=0}function qm(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=SI(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Gm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Wm(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}pp.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Wm(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new n0(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var Zm="closure_lm_"+(1e6*Math.random()|0),s0={};function OI(n,e,t,r,i){if(r&&r.once)return o0(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)OI(n,e[a],t,r,i);return null}return t=u0(t),n&&n[$m]?n.N(e,t,dp(r)?!!r.capture:!!r,i):kI(n,e,t,!1,r,i)}function kI(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=dp(i)?!!i.capture:!!i,f=LI(n);if(f||(n[Zm]=f=new pp(n)),(t=f.add(e,t,r,l,a)).proxy)return t;if(r=function bA(){const e=TA;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)vA||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(FI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function o0(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)o0(n,e[a],t,r,i);return null}return t=u0(t),n&&n[$m]?n.O(e,t,dp(r)?!!r.capture:!!r,i):kI(n,e,t,!0,r,i)}function DA(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)DA(n,e[a],t,r,i);else r=dp(r)?!!r.capture:!!r,t=u0(t),n&&n[$m]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Wm(a=n.g[e],t,r,i))&&(Gm(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=LI(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Wm(e,t,r,i)),(t=-1<n?e[n]:null)&&Km(t))}function Km(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[$m])qm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(FI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=LI(e))?(qm(t,n),0==t.h&&(t.src=null,e[Zm]=null)):Gm(n)}}}function FI(n){return n in s0?s0[n]:s0[n]="on"+n}function TA(n,e){if(n.ba)n=!0;else{e=new oh(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Km(n),n=t.call(r,e)}return n}function LI(n){return(n=n[Zm])instanceof pp?n:null}var a0="__closure_events_fn_"+(1e9*Math.random()>>>0);function u0(n){return"function"==typeof n?n:(n[a0]||(n[a0]=function(e){return n.handleEvent(e)}),n[a0])}function ci(){ll.call(this),this.i=new pp(this),this.P=this,this.I=null}function di(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Li(e,n);else if(e instanceof Li)e.target=e.target||n;else{var i=e;zm(e=new Li(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Ym(l,r,!0,e)&&i}if(i=Ym(l=e.g=n,r,!0,e)&&i,i=Ym(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Ym(l=e.g=t[a],r,!1,e)&&i}function Ym(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var f=l.listener,m=l.ha||l.src;l.ea&&qm(n.i,l),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}Ti(ci,ll),ci.prototype[$m]=!0,ci.prototype.removeEventListener=function(n,e,t,r){DA(this,n,e,t,r)},ci.prototype.M=function(){if(ci.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Gm(t[r]);delete n.g[e],n.h--}}this.I=null},ci.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ci.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var l0=$t.JSON.stringify;function SA(){var n=c0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ic,UI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new xA,n=>n.reset());class xA{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function MA(n){$t.setTimeout(()=>{throw n},0)}function VI(n,e){Ic||function BI(){var n=$t.Promise.resolve(void 0);Ic=function(){n.then(jI)}}(),Qm||(Ic(),Qm=!0),c0.add(n,e)}var Qm=!1,c0=new class AA{constructor(){this.h=this.g=null}add(e,t){const r=UI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function jI(){for(var n;n=SA();){try{n.h.call(n.g)}catch(t){MA(t)}var e=UI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Qm=!1}function gp(n,e){ci.call(this),this.h=n||1,this.g=e||$t,this.j=Di(this.lb,this),this.l=Date.now()}function Xm(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function d0(n,e,t){if("function"==typeof n)t&&(n=Di(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Di(n.handleEvent,n)}return 2147483647<Number(e)?-1:$t.setTimeout(n,e||0)}function RA(n){n.g=d0(()=>{n.g=null,n.i&&(n.i=!1,RA(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ti(gp,ci),(yt=gp.prototype).ca=!1,yt.R=null,yt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),di(this,"tick"),this.ca&&(Xm(this),this.start()))}},yt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},yt.M=function(){gp.X.M.call(this),Xm(this),delete this.g};class PA extends ll{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:RA(this)}M(){super.M(),this.g&&($t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ah(n){ll.call(this),this.h=n,this.g={}}Ti(ah,ll);var HI=[];function $I(n,e,t,r){Array.isArray(t)||(t&&(HI[0]=t.toString()),t=HI);for(var i=0;i<t.length;i++){var a=OI(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function GI(n){fp(n.g,function(e,t){this.g.hasOwnProperty(t)&&Km(e)},n),n.g={}}function cl(){this.g=!0}function Yi(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function f0(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return l0(t)}catch{return e}}(n,t)+(r?" "+r:"")})}ah.prototype.M=function(){ah.X.M.call(this),GI(this)},ah.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},cl.prototype.Aa=function(){this.g=!1},cl.prototype.info=function(){};var Oo={},zI=null;function Jm(){return zI=zI||new ci}function qI(n){Li.call(this,Oo.Pa,n)}function dl(n){const e=Jm();di(e,new qI(e))}function mp(n,e){Li.call(this,Oo.STAT_EVENT,n),this.stat=e}function Qi(n){const e=Jm();di(e,new mp(e,n))}function WI(n,e){Li.call(this,Oo.Qa,n),this.size=e}function uh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return $t.setTimeout(function(){n()},e)}Oo.Pa="serverreachability",Ti(qI,Li),Oo.STAT_EVENT="statevent",Ti(mp,Li),Oo.Qa="timingevent",Ti(WI,Li);var _p={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},e_={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function t_(){}function r_(){}t_.prototype.h=null;var p0,lh={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function yp(){Li.call(this,"d")}function vp(){Li.call(this,"c")}function i_(){}function wp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new ah(this),this.O=KI,this.T=new gp(n=Qv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new ZI}function ZI(){this.i=null,this.g="",this.h=!1}Ti(yp,Li),Ti(vp,Li),Ti(i_,t_),i_.prototype.g=function(){return new XMLHttpRequest},i_.prototype.i=function(){return{}},p0=new i_;var KI=45e3,Ep={},Cp={};function s_(n,e,t){n.K=1,n.v=a_(xs(e)),n.s=t,n.P=!0,g0(n,null)}function g0(n,e){n.F=Date.now(),ch(n),n.A=xs(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),nb(t.i,"t",r),n.C=0,t=n.l.H,n.h=new ZI,n.g=pb(n.l,t?e:null,!n.s),0<n.N&&(n.L=new PA(Di(n.La,n,n.g),n.N)),$I(n.S,n.g,"readystatechange",n.ib),e=n.H?NI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),dl(),function NA(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",f=a.split("&"),m=0;m<f.length;m++){var v=f[m].split("=");if(1<v.length){var I=v[0];v=v[1];var S=I.split("_");l=2<=S.length&&"type"==S[1]?l+(I+"=")+v+"&":l+(I+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function m0(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function YI(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=QI(n,t),i==Cp){4==e&&(n.o=4,Qi(14),r=!1),Yi(n.j,n.m,null,"[Incomplete Response]");break}if(i==Ep){n.o=4,Qi(15),Yi(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Yi(n.j,n.m,i,null),hl(n,i)}m0(n)&&i!=Cp&&i!=Ep&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Qi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),M0(e),e.K=!0,Qi(11))):(Yi(n.j,n.m,t,"[Invalid Chunked Response]"),br(n),bp(n))}function QI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Cp:(t=Number(e.substring(t,r)),isNaN(t)?Ep:(r+=1)+t>e.length?Cp:(e=e.substr(r,t),n.C=r+t,e))}function ch(n){n.V=Date.now()+n.O,XI(n,n.O)}function XI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=uh(Di(n.gb,n),e)}function Ip(n){n.B&&($t.clearTimeout(n.B),n.B=null)}function bp(n){0==n.l.G||n.I||KA(n.l,n)}function br(n){Ip(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Xm(n.T),GI(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function hl(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||C0(t.h,n)))if(!n.J&&C0(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;R0(t),mh(t)}_h(t),Qi(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=uh(Di(t.cb,t),6e3));if(1>=sb(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Tc(t,11)}else if((n.J||t.g==n)&&R0(t),!Um(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.T=v[0],v=v[1],2==t.G)if("c"==v[0]){t.I=v[1],t.ka=v[2];const I=v[3];null!=I&&(t.ma=I,t.j.info("VER="+t.ma));const S=v[4];null!=S&&(t.Ca=S,t.j.info("SVER="+t.Ca));const P=v[5];null!=P&&"number"==typeof P&&0<P&&(t.J=r=1.5*P,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const z=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var a=r.h;a.g||-1==z.indexOf("spdy")&&-1==z.indexOf("quic")&&-1==z.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(l_(a,a.h),a.h=null))}if(r.D){const ce=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;ce&&(r.za=ce,Un(r.F,r.D,ce))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=YA(r,r.H?r.ka:null,r.V),l.J){I0(r.h,l);var f=l,m=r.J;m&&f.setTimeout(m),f.B&&(Ip(f),ch(f)),r.g=l}else db(r);0<t.i.length&&h_(t)}else"stop"!=v[0]&&"close"!=v[0]||Tc(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Tc(t,7):ub(t):"noop"!=v[0]&&t.l&&t.l.wa(v),t.A=0)}dl()}catch{}}function LA(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(cp(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function FA(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(cp(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function kA(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(cp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(yt=wp.prototype).setTimeout=function(n){this.O=n},yt.ib=function(n){n=n.target;const e=this.L;e&&3==no(n)?e.l():this.La(n)},yt.La=function(n){try{if(n==this.g)e:{const I=no(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>I)&&(3!=I||Qv||this.g&&(this.h.h||this.g.fa()||qA(this.g)))){this.I||4!=I||7==e||dl(),Ip(this);var t=this.g.aa();this.Y=t;t:if(m0(this)){var r=qA(this.g);n="";var i=r.length,a=4==no(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){br(this),bp(this);var l="";break t}this.h.i=new $t.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function h0(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,I,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Um(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Qi(12),br(this),bp(this);break e}Yi(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,hl(this,t)}this.P?(YI(this,I,l),Qv&&this.i&&3==I&&($I(this.S,this.T,"tick",this.hb),this.T.start())):(Yi(this.j,this.m,l,null),hl(this,l)),4==I&&br(this),this.i&&!this.I&&(4==I?KA(this.l,this):(this.i=!1,ch(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Qi(12)):(this.o=0,Qi(13)),br(this),bp(this)}}}catch{}},yt.hb=function(){if(this.g){var n=no(this.g),e=this.g.fa();this.C<e.length&&(Ip(this),YI(this,n,e),this.i&&4!=n&&ch(this))}},yt.cancel=function(){this.I=!0,br(this)},yt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function OA(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(dl(),Qi(17)),br(this),this.o=2,bp(this)):XI(this,this.V-n)};var UA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof fl){this.h=void 0!==e?e:n.h,o_(this,n.j),this.s=n.s,this.g=n.g,dh(this,n.m),this.l=n.l,e=n.i;var t=new hh;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),eb(this,t),this.o=n.o}else n&&(t=String(n).match(UA))?(this.h=!!e,o_(this,t[1]||"",!0),this.s=Dp(t[2]||""),this.g=Dp(t[3]||"",!0),dh(this,t[4]),this.l=Dp(t[5]||"",!0),eb(this,t[6]||"",!0),this.o=Dp(t[7]||"")):(this.h=!!e,this.i=new hh(null,this.h))}function xs(n){return new fl(n)}function o_(n,e,t){n.j=t?Dp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function dh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function eb(n,e,t){e instanceof hh?(n.i=e,function E0(n,e){e&&!n.j&&(pl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(w0(this,r),nb(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Tp(e,v0)),n.i=new hh(e,n.h))}function Un(n,e,t){n.i.set(e,t)}function a_(n){return Un(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Dp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Tp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,_0),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function _0(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}fl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Tp(e,y0,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Tp(e,y0,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Tp(t,"/"==t.charAt(0)?u_:tb,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Tp(t,lO)),n.join("")};var y0=/[#\/\?@]/g,tb=/[#\?:]/g,u_=/[#\?]/g,v0=/[#\?@]/g,lO=/#/g;function hh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function pl(n){n.g||(n.g=new Map,n.h=0,n.i&&function JI(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function w0(n,e){pl(n),e=Dc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function bc(n,e){return pl(n),e=Dc(n,e),n.g.has(e)}function nb(n,e,t){w0(n,e),0<t.length&&(n.i=null,n.g.set(Dc(n,e),Lm(t)),n.h+=t.length)}function Dc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function rb(n){this.l=n||dO,n=$t.PerformanceNavigationTiming?0<(n=$t.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!($t.g&&$t.g.Ga&&$t.g.Ga()&&$t.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(yt=hh.prototype).add=function(n,e){pl(this),this.i=null,n=Dc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},yt.forEach=function(n,e){pl(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},yt.oa=function(){pl(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},yt.W=function(n){pl(this);let e=[];if("string"==typeof n)bc(this,n)&&(e=e.concat(this.g.get(Dc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},yt.set=function(n,e){return pl(this),this.i=null,bc(this,n=Dc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},yt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},yt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var dO=10;function ib(n){return!!n.h||!!n.g&&n.g.size>=n.j}function sb(n){return n.h?1:n.g?n.g.size:0}function C0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function l_(n,e){n.g?n.g.add(e):n.h=e}function I0(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function ob(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Lm(n.i)}function c_(){}function ab(){this.g=new c_}function VA(n,e,t){const r=t||"";try{LA(n,function(i,a){let l=i;dp(i)&&(l=l0(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Sp(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ap(n){this.l=n.ac||null,this.j=n.jb||!1}function xp(n,e){ci.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=d_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rb.prototype.cancel=function(){if(this.i=ob(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},c_.prototype.stringify=function(n){return $t.JSON.stringify(n,void 0)},c_.prototype.parse=function(n){return $t.JSON.parse(n,void 0)},Ti(Ap,t_),Ap.prototype.g=function(){return new xp(this.l,this.j)},Ap.prototype.i=function(n){return function(){return n}}({}),Ti(xp,ci);var d_=0;function b0(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function fh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Mp(n)}function Mp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(yt=xp.prototype).open=function(n,e){if(this.readyState!=d_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Mp(this)},yt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||$t).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},yt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fh(this)),this.readyState=d_},yt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Mp(this)),this.g&&(this.readyState=3,Mp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof $t.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;b0(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},yt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?fh(this):Mp(this),3==this.readyState&&b0(this)}},yt.Va=function(n){this.g&&(this.response=this.responseText=n,fh(this))},yt.Ua=function(n){this.g&&(this.response=n,fh(this))},yt.ga=function(){this.g&&fh(this)},yt.setRequestHeader=function(n,e){this.v.append(n,e)},yt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},yt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(xp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var jA=$t.JSON.parse;function Dr(n){ci.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=D0,this.K=this.L=!1}Ti(Dr,ci);var D0="",hO=/^https?$/i,fO=["POST","PUT"];function HA(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,$A(n),T0(n)}function $A(n){n.D||(n.D=!0,di(n,"complete"),di(n,"error"))}function GA(n){if(n.h&&typeof zv<"u"&&(!n.C[1]||4!=no(n)||2!=n.aa()))if(n.v&&4==no(n))d0(n.Ha,0,n);else if(di(n,"readystatechange"),4==no(n)){n.h=!1;try{const f=n.aa();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(UA)[1]||null;if(!i&&$t.self&&$t.self.location){var a=$t.self.location.protocol;i=a.substr(0,a.length-1)}r=!hO.test(i?i.toLowerCase():"")}t=r}if(t)di(n,"complete"),di(n,"success");else{n.m=6;try{var l=2<no(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",$A(n)}}finally{T0(n)}}}function T0(n,e){if(n.g){zA(n);const t=n.g,r=n.C[0]?km:null;n.g=null,n.C=null,e||di(n,"ready");try{t.onreadystatechange=r}catch{}}}function zA(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&($t.clearTimeout(n.A),n.A=null)}function no(n){return n.g?n.g.readyState:0}function qA(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case D0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function S0(n){let e="";return fp(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function ph(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=S0(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Un(n,e,t))}function gh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function A0(n){this.Ca=0,this.i=[],this.j=new cl,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=gh("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=gh("baseRetryDelayMs",5e3,n),this.bb=gh("retryDelaySeedMs",1e4,n),this.$a=gh("forwardChannelMaxRetries",2,n),this.ta=gh("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new rb(n&&n.concurrentRequestLimit),this.Fa=new ab,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ub(n){if(x0(n),3==n.G){var e=n.U++,t=xs(n.F);Un(t,"SID",n.I),Un(t,"RID",e),Un(t,"TYPE","terminate"),f_(n,t),(e=new wp(n,n.j,e,void 0)).K=2,e.v=a_(xs(t)),t=!1,$t.navigator&&$t.navigator.sendBeacon&&(t=$t.navigator.sendBeacon(e.v.toString(),"")),!t&&$t.Image&&((new Image).src=e.v,t=!0),t||(e.g=pb(e.l,null),e.g.da(e.v)),e.F=Date.now(),ch(e)}fb(n)}function mh(n){n.g&&(M0(n),n.g.cancel(),n.g=null)}function x0(n){mh(n),n.u&&($t.clearTimeout(n.u),n.u=null),R0(n),n.h.cancel(),n.m&&("number"==typeof n.m&&$t.clearTimeout(n.m),n.m=null)}function h_(n){ib(n.h)||n.m||(n.m=!0,VI(n.Ja,n),n.C=0)}function WA(n,e){var t;t=e?e.m:n.U++;const r=xs(n.F);Un(r,"SID",n.I),Un(r,"RID",t),Un(r,"AID",n.T),f_(n,r),n.o&&n.s&&ph(r,n.o,n.s),t=new wp(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=cb(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),l_(n.h,t),s_(t,r,e)}function f_(n,e){n.ia&&fp(n.ia,function(t,r){Un(e,r,t)}),n.l&&LA({},function(t,r){Un(e,r,t)})}function cb(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Di(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let f=!0;for(let m=0;m<t;m++){let v=i[m].h;const I=i[m].g;if(v-=a,0>v)a=Math.max(0,i[m].h-100),f=!1;else try{VA(I,l,"req"+v+"_")}catch{r&&r(I)}}if(f){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function db(n){n.g||n.u||(n.Z=1,VI(n.Ia,n),n.A=0)}function _h(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=uh(Di(n.Ia,n),hb(n,n.A)),n.A++,0))}function M0(n){null!=n.B&&($t.clearTimeout(n.B),n.B=null)}function ZA(n){n.g=new wp(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=xs(n.sa);Un(e,"RID","rpc"),Un(e,"SID",n.I),Un(e,"CI",n.L?"0":"1"),Un(e,"AID",n.T),Un(e,"TYPE","xmlhttp"),f_(n,e),n.o&&n.s&&ph(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=a_(xs(e)),t.s=null,t.P=!0,g0(t,n)}function R0(n){null!=n.v&&($t.clearTimeout(n.v),n.v=null)}function KA(n,e){var t=null;if(n.g==e){R0(n),M0(n),n.g=null;var r=2}else{if(!C0(n.h,e))return;t=e.D,I0(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;di(r=Jm(),new WI(r,t)),h_(n)}else db(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function lb(n,e){return!(sb(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=uh(Di(n.Ja,n,e),hb(n,n.C)),n.C++,0)))}(n,e)||2==r&&_h(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Tc(n,5);break;case 4:Tc(n,10);break;case 3:Tc(n,6);break;default:Tc(n,2)}}function hb(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Tc(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Di(n.kb,n);t||(t=new fl("//www.google.com/images/cleardot.gif"),$t.location&&"http"==$t.location.protocol||o_(t,"https"),a_(t)),function BA(n,e){const t=new cl;if($t.Image){const r=new Image;r.onload=Fm(Sp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Fm(Sp,t,r,"TestLoadImage: error",!1,e),r.onabort=Fm(Sp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Fm(Sp,t,r,"TestLoadImage: timeout",!1,e),$t.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Qi(2);n.G=0,n.l&&n.l.va(e),fb(n),x0(n)}function fb(n){if(n.G=0,n.la=[],n.l){const e=ob(n.h);(0!=e.length||0!=n.i.length)&&(AI(n.la,e),AI(n.la,n.i),n.h.i.length=0,Lm(n.i),n.i.length=0),n.l.ua()}}function YA(n,e,t){var r=t instanceof fl?xs(t):new fl(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),dh(r,r.m);else{var i=$t.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new fl(null,void 0);r&&o_(a,r),e&&(a.g=e),i&&dh(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&Un(r,t,e),Un(r,"VER",n.ma),f_(n,r),r}function pb(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Dr(t&&n.Da&&!n.ra?new Ap({jb:!0}):n.ra)).Ka(n.H),e}function P0(){}function Rp(){if(rh&&!(10<=Number(sh)))throw Error("Environmental error: no available transport.")}function ro(n,e){ci.call(this),this.g=new A0(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Um(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Um(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new gl(this)}function io(n){yp.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function gb(){vp.call(this),this.status=1}function gl(n){this.g=n}(yt=Dr.prototype).Ka=function(n){this.L=n},yt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():p0.g(),this.C=function n_(n){return n.h||(n.h=n.i())}(this.u?this.u:p0),this.g.onreadystatechange=Di(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void HA(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=$t.FormData&&n instanceof $t.FormData,!(0<=SI(fO,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{zA(this),0<this.B&&((this.K=function pO(n){return rh&&function Jv(){return function MI(n){var e=CA;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=xI(String(ih)).split("."),t=xI("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Kv(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Kv(0==i[2].length,0==a[2].length)||Kv(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Di(this.qa,this)):this.A=d0(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){HA(this,a)}},yt.qa=function(){typeof zv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,di(this,"timeout"),this.abort(8))},yt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,di(this,"complete"),di(this,"abort"),T0(this))},yt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),T0(this,!0)),Dr.X.M.call(this)},yt.Ha=function(){this.s||(this.F||this.v||this.l?GA(this):this.fb())},yt.fb=function(){GA(this)},yt.aa=function(){try{return 2<no(this)?this.g.status:-1}catch{return-1}},yt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},yt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),jA(e)}},yt.Ea=function(){return this.m},yt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(yt=A0.prototype).ma=8,yt.G=1,yt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new wp(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=NI(a),zm(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=cb(this,i,e),Un(t=xs(this.F),"RID",n),Un(t,"CVER",22),this.D&&Un(t,"X-HTTP-Session-Id",this.D),f_(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(S0(a)))+"&"+e:this.o&&ph(t,this.o,a)),l_(this.h,i),this.Ya&&Un(t,"TYPE","init"),this.O?(Un(t,"$req",e),Un(t,"SID","null"),i.Z=!0,s_(i,t,null)):s_(i,t,e),this.G=2}}else 3==this.G&&(n?WA(this,n):0==this.i.length||ib(this.h)||WA(this))},yt.Ia=function(){if(this.u=null,ZA(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=uh(Di(this.eb,this),n)}},yt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Qi(10),mh(this),ZA(this))},yt.cb=function(){null!=this.v&&(this.v=null,mh(this),_h(this),Qi(19))},yt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Qi(2)):(this.j.info("Failed to ping google.com"),Qi(1))},(yt=P0.prototype).xa=function(){},yt.wa=function(){},yt.va=function(){},yt.ua=function(){},yt.Ra=function(){},Rp.prototype.g=function(n,e){return new ro(n,e)},Ti(ro,ci),ro.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Qi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=YA(n,null,n.V),h_(n)},ro.prototype.close=function(){ub(this.g)},ro.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=l0(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&h_(e)},ro.prototype.M=function(){this.g.l=null,delete this.j,ub(this.g),delete this.g,ro.X.M.call(this)},Ti(io,yp),Ti(gb,vp),Ti(gl,P0),gl.prototype.xa=function(){di(this.g,"a")},gl.prototype.wa=function(n){di(this.g,new io(n))},gl.prototype.va=function(n){di(this.g,new gb)},gl.prototype.ua=function(){di(this.g,"b")},Rp.prototype.createWebChannel=Rp.prototype.g,ro.prototype.send=ro.prototype.u,ro.prototype.open=ro.prototype.m,ro.prototype.close=ro.prototype.close,_p.NO_ERROR=0,_p.TIMEOUT=8,_p.HTTP_ERROR=6,e_.COMPLETE="complete",r_.EventType=lh,lh.OPEN="a",lh.CLOSE="b",lh.ERROR="c",lh.MESSAGE="d",ci.prototype.listen=ci.prototype.N,Dr.prototype.listenOnce=Dr.prototype.O,Dr.prototype.getLastError=Dr.prototype.Oa,Dr.prototype.getLastErrorCode=Dr.prototype.Ea,Dr.prototype.getStatus=Dr.prototype.aa,Dr.prototype.getResponseJson=Dr.prototype.Sa,Dr.prototype.getResponseText=Dr.prototype.fa,Dr.prototype.send=Dr.prototype.da,Dr.prototype.setWithCredentials=Dr.prototype.Ka;var QA=Ja.createWebChannelTransport=function(){return new Rp},gO=Ja.getStatEventTarget=function(){return Jm()},ls=Ja.ErrorCode=_p,XA=Ja.EventType=e_,N0=Ja.Event=Oo,mb=Ja.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},JA=Ja.FetchXmlHttpFactory=Ap,yh=Ja.WebChannel=r_,_b=Ja.XhrIo=Dr;const O0="@firebase/firestore";class hi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hi.UNAUTHENTICATED=new hi(null),hi.GOOGLE_CREDENTIALS=new hi("google-credentials-uid"),hi.FIRST_PARTY=new hi("first-party-uid"),hi.MOCK_USER=new hi("mock-user");let Sc="9.17.1";const eu=new Ki.Yd("@firebase/firestore");function k0(){return eu.logLevel}function Ue(n,...e){if(eu.logLevel<=Ki.in.DEBUG){const t=e.map(p_);eu.debug(`Firestore (${Sc}): ${n}`,...t)}}function rr(n,...e){if(eu.logLevel<=Ki.in.ERROR){const t=e.map(p_);eu.error(`Firestore (${Sc}): ${n}`,...t)}}function cs(n,...e){if(eu.logLevel<=Ki.in.WARN){const t=e.map(p_);eu.warn(`Firestore (${Sc}): ${n}`,...t)}}function p_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${Sc}) INTERNAL ASSERTION FAILED: `+n;throw rr(e),new Error(e)}function ht(n,e){n||dt()}function et(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends F.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class vb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hi.UNAUTHENTICATED))}shutdown(){}}class mO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Eb{constructor(e){this.t=e,this.currentUser=hi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new Xr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Xr,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const v=l;e.enqueueRetryable((0,fe.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Xr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ht("string"==typeof r.accessToken),new vb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ht(null===e||"string"==typeof e),new hi(e)}}class tx{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=hi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ht(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Cb{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new tx(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(hi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F0{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,Ue("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ht("string"==typeof t.token),this.A=t.token,new nx(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ib(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class L0{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Ib(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Gt(n,e){return n<e?-1:n>e?1:0}function Ac(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Pp(n){return n+"\0"}class Rn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rn.fromMillis(Date.now())}static fromDate(e){return Rn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Rn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new Rn(0,0))}static max(){return new Dt(new Rn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Np{constructor(e,t,r){void 0===t?t=0:t>e.length&&dt(),void 0===r?r=e.length-t:r>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Np.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Np?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cn extends Np{construct(e,t,r){return new cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new cn(t)}static emptyPath(){return new cn([])}}const _O=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tr extends Np{construct(e,t,r){return new Tr(e,t,r)}static isValidIdentifier(e){return _O.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Tr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new ke(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new ke(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new ke(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new ke(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tr(t)}static emptyPath(){return new Tr([])}}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(cn.fromString(e))}static fromName(e){return new Xe(cn.fromString(e).popFirst(5))}static empty(){return new Xe(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new cn(e.slice()))}}class Op{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function U0(n){return n.fields.find(e=>2===e.kind)}function xc(n){return n.fields.filter(e=>2!==e.kind)}Op.UNKNOWN_ID=-1;class V0{constructor(e,t){this.fieldPath=e,this.kind=t}}class g_{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new g_(0,Ms.min())}}function sx(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(1e9===r?new Rn(t+1,0):new Rn(t,r));return new Ms(i,Xe.empty(),e)}function ox(n){return new Ms(n.readTime,n.key,-1)}class Ms{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ms(Dt.min(),Xe.empty(),-1)}static max(){return new Ms(Dt.max(),Xe.empty(),-1)}}function vh(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}const bb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Db{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function tu(n){return nu.apply(this,arguments)}function nu(){return nu=(0,fe.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==bb)throw n;Ue("LocalStore","Unexpectedly lost primary lease")}),nu.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,a=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++a,l&&a===i&&t()},m=>r(m))}),l=!0,a===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let m=0;m<a;m++){const v=m;t(e[v]).next(I=>{l[v]=I,++f,f===a&&r(l)},I=>i(I))}})}static doWhile(e,t){return new le((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class wh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Xr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Mc(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=Tb(r.target.error);this.P.reject(new Mc(e,i))}}static open(e,t,r,i){try{return new wh(t,e.transaction(i,r))}catch(a){throw new Mc(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new m_(t)}}class Rs{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Rs.D((0,F.z$)())&&rr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ue("SimpleDb","Removing database:",e),Eh(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,F.hl)())return!1;if(Rs.N())return!0;const e=(0,F.z$)(),t=Rs.D(e),r=0<t&&t<10,i=Rs.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,fe.Z)(function*(){return t.db||(Ue("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Mc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new ke(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new ke(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Mc(e,f))},a.onupgradeneeded=l=>{Ue("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Ue("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,fe.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.F(e);const m=wh.open(a.db,e,l?"readonly":"readwrite",r),v=i(m).next(I=>(m.V(),I)).catch(I=>(m.abort(I),le.reject(I))).toPromise();return v.catch(()=>{}),yield m.v,v}catch(m){const v=m,I="FirebaseError"!==v.name&&f<3;if(Ue("SimpleDb","Transaction failed with error:",v.message,"Retrying:",I),a.close(),!I)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ax{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Eh(this.q.delete())}}class Mc extends ke{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ga(n){return"IndexedDbTransactionError"===n.name}class m_{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Eh(r)}add(e){return Ue("SimpleDb","ADD",this.store.name,e,e),Eh(this.store.add(e))}get(e){return Eh(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ue("SimpleDb","DELETE",this.store.name,e),Eh(this.store.delete(e))}count(){return Ue("SimpleDb","COUNT",this.store.name),Eh(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new le((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){Ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,f)=>f.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=a=>{const l=Tb(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}H(e,t){const r=[];return new le((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const m=new ax(f),v=t(f.primaryKey,f.value,m);if(v instanceof le){const I=v.catch(S=>(m.done(),le.reject(S)));r.push(I)}m.isDone?i():null===m.G?f.continue():f.continue(m.G)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Eh(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Tb(r.target.error);t(i)}})}let ux=!1;function Tb(n){const e=Rs.D((0,F.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ux||(ux=!0,setTimeout(()=>{throw r},0)),r}}return n}class vO{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ue("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,fe.Z)(function*(){t.task=null;try{Ue("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){ga(r)?Ue("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield tu(r)}yield t.nt(6e4)}))}}class Sb{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,fe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return le.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ue("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(f=>{i-=f,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(f=>(Ue("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=ox(a);vh(l,r)>0&&(r=l)}),new Ms(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ps=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class lx{constructor(e,t,r,i,a,l,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.useFetchStreams=m}}class ml{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ml("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ml&&e.projectId===this.projectId&&e.database===this.database}}function Ab(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _l(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function B0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ch(n){return null==n}function kp(n){return 0===n&&1/n==-1/0}function xb(n){return"number"==typeof n&&Number.isInteger(n)&&!kp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Sr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Sr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Sr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sr.EMPTY_BYTE_STRING=new Sr("");const wO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ru(n){if(ht(!!n),"string"==typeof n){let e=0;const t=wO.exec(n);if(ht(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qn(n.seconds),nanos:qn(n.nanos)}}function qn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Rc(n){return"string"==typeof n?Sr.fromBase64String(n):Sr.fromUint8Array(n)}function j0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function cx(n){const e=n.mapValue.fields.__previous_value__;return j0(e)?cx(e):e}function __(n){const e=ru(n.mapValue.fields.__local_write_time__.timestampValue);return new Rn(e.seconds,e.nanos)}const yl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},y_={nullValue:"NULL_VALUE"};function Pc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?j0(n)?4:o(n)?9007199254740991:10:dt()}function iu(n,e){if(n===e)return!0;const t=Pc(n);if(t!==Pc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return __(n).isEqual(__(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=ru(r.timestampValue),l=ru(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Rc(n.bytesValue).isEqual(Rc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return qn(r.geoPointValue.latitude)===qn(i.geoPointValue.latitude)&&qn(r.geoPointValue.longitude)===qn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return qn(r.integerValue)===qn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=qn(r.doubleValue),l=qn(i.doubleValue);return a===l?kp(a)===kp(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Ac(n.arrayValue.values||[],e.arrayValue.values||[],iu);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Ab(a)!==Ab(l))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===l[f]||!iu(a[f],l[f])))return!1;return!0}(n,e);default:return dt()}var i}function v_(n,e){return void 0!==(n.values||[]).find(t=>iu(t,e))}function Nc(n,e){if(n===e)return 0;const t=Pc(n),r=Pc(e);if(t!==r)return Gt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=qn(i.integerValue||i.doubleValue),f=qn(a.integerValue||a.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return dx(n.timestampValue,e.timestampValue);case 4:return dx(__(n),__(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Rc(i),f=Rc(a);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),f=a.split("/");for(let m=0;m<l.length&&m<f.length;m++){const v=Gt(l[m],f[m]);if(0!==v)return v}return Gt(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Gt(qn(i.latitude),qn(a.latitude));return 0!==l?l:Gt(qn(i.longitude),qn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],f=a.values||[];for(let m=0;m<l.length&&m<f.length;++m){const v=Nc(l[m],f[m]);if(v)return v}return Gt(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===yl.mapValue&&a===yl.mapValue)return 0;if(i===yl.mapValue)return 1;if(a===yl.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),m=a.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let I=0;I<f.length&&I<v.length;++I){const S=Gt(f[I],v[I]);if(0!==S)return S;const P=Nc(l[f[I]],m[v[I]]);if(0!==P)return P}return Gt(f.length,v.length)}(n.mapValue,e.mapValue);default:throw dt()}}function dx(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=ru(n),r=ru(e),i=Gt(t.seconds,r.seconds);return 0!==i?i:Gt(t.nanos,r.nanos)}function Fp(n){return H0(n)}function H0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ru(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Rc(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=H0(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const f of i)l?l=!1:a+=",",a+=`${f}:${H0(r.fields[f])}`;return a+"}"}(n.mapValue):dt();var e}function Ih(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Rb(n){return!!n&&"integerValue"in n}function w_(n){return!!n&&"arrayValue"in n}function hx(n){return!!n&&"nullValue"in n}function fx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $0(n){return!!n&&"mapValue"in n}function s(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return _l(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=s(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=s(n.arrayValue.values[t]);return e}return Object.assign({},n)}function o(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function u(n){return"nullValue"in n?y_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ih(ml.empty(),Xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:dt()}function c(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ih(ml.empty(),Xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?yl:dt()}function h(n,e){const t=Nc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function p(n,e){const t=Nc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class y{constructor(e,t){this.position=e,this.inclusive=t}}function C(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Xe.comparator(Xe.fromName(l.referenceValue),t.key):Nc(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function b(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!iu(n.position[t],e.position[t]))return!1;return!0}class A{}class M extends A{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new qt(e,t,r):"array-contains"===t?new c2(e,r):"in"===t?new EO(e,r):"not-in"===t?new d2(e,r):"array-contains-any"===t?new h2(e,r):new M(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Wn(e,r):new Ar(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Nc(t,this.value)):null!==t&&Pc(this.value)===Pc(t)&&this.matchesComparison(Nc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class L extends A{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new L(e,t)}matches(e){return K(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function K(n){return"and"===n.op}function te(n){return"or"===n.op}function we(n){return Ge(n)&&K(n)}function Ge(n){for(const e of n.filters)if(e instanceof L)return!1;return!0}function Qe(n){if(n instanceof M)return n.field.canonicalString()+n.op.toString()+Fp(n.value);if(we(n))return n.filters.map(e=>Qe(e)).join(",");{const e=n.filters.map(t=>Qe(t)).join(",");return`${n.op}(${e})`}}function gt(n,e){return n instanceof M?(t=n,(r=e)instanceof M&&t.op===r.op&&t.field.isEqual(r.field)&&iu(t.value,r.value)):n instanceof L?function(t,r){return r instanceof L&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&gt(a,r.filters[l]),!0)}(n,e):void dt();var t,r}function Nt(n,e){const t=n.filters.concat(e);return L.create(t,n.op)}function Le(n){return n instanceof M?`${(e=n).field.canonicalString()} ${e.op} ${Fp(e.value)}`:n instanceof L?function(e){return e.op.toString()+" {"+e.getFilters().map(Le).join(" ,")+"}"}(n):"Filter";var e}class qt extends M{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Wn extends M{constructor(e,t){super(e,"in",t),this.keys=px(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ar extends M{constructor(e,t){super(e,"not-in",t),this.keys=px(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function px(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class c2 extends M{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return w_(t)&&v_(t.arrayValue,this.value)}}class EO extends M{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&v_(this.value.arrayValue,t)}}class d2 extends M{constructor(e,t){super(e,"not-in",t)}matches(e){if(v_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!v_(this.value.arrayValue,t)}}class h2 extends M{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!w_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>v_(this.value.arrayValue,r))}}class E_{constructor(e,t="asc"){this.field=e,this.dir=t}}function f2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Ur{constructor(e,t){this.comparator=e,this.root=t||Xi.EMPTY}insert(e,t){return new Ur(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xi.BLACK,null,null))}remove(e){return new Ur(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pb(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pb(this.root,e,this.comparator,!0)}}class Pb{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Xi.RED,this.left=i??Xi.EMPTY,this.right=a??Xi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Xi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Xi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Xi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}Xi.EMPTY=null,Xi.RED=!0,Xi.BLACK=!1,Xi.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Xi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class On{constructor(e){this.comparator=e,this.data=new Ur(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new CO(this.data.getIterator())}getIteratorFrom(e){return new CO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof On)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new On(this.comparator);return t.data=e,t}}class CO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function C_(n){return n.hasNext()?n.getNext():void 0}class so{constructor(e){this.fields=e,e.sort(Tr.comparator)}static empty(){return new so([])}unionWith(e){let t=new On(Tr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new so(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ac(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ji{constructor(e){this.value=e}static empty(){return new Ji({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!$0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=s(t)}setAll(e){let t=Tr.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=s(l):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());$0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return iu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];$0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){_l(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ji(s(this.value))}}function IO(n){const e=[];return _l(n.fields,(t,r)=>{const i=new Tr([t]);if($0(r)){const a=IO(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new so(e)}class ir{constructor(e,t,r,i,a,l,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new ir(e,0,Dt.min(),Dt.min(),Dt.min(),Ji.empty(),0)}static newFoundDocument(e,t,r,i){return new ir(e,1,t,Dt.min(),r,i,0)}static newNoDocument(e,t){return new ir(e,2,t,Dt.min(),Dt.min(),Ji.empty(),0)}static newUnknownDocument(e,t){return new ir(e,3,t,Dt.min(),Dt.min(),Ji.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ji.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ji.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ir(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class p2{constructor(e,t=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this.ft=null}}function gx(n,e=null,t=[],r=[],i=null,a=null,l=null){return new p2(n,e,t,r,i,a,l)}function Lp(n){const e=et(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Qe(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Ch(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fp(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fp(r)).join(",")),e.ft=t}return e.ft}function G0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!f2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gt(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!b(n.startAt,e.startAt)&&b(n.endAt,e.endAt)}function Nb(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ob(n,e){return n.filters.filter(t=>t instanceof M&&t.field.isEqual(e))}function bO(n,e,t){let r=y_,i=!0;for(const a of Ob(n,e)){let l=y_,f=!0;switch(a.op){case"<":case"<=":l=u(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=y_}h({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];h({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function DO(n,e,t){let r=yl,i=!0;for(const a of Ob(n,e)){let l=yl,f=!0;switch(a.op){case">=":case">":l=c(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=yl}p({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];p({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Oc{constructor(e,t=null,r=[],i=[],a=null,l="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=m,this.dt=null,this._t=null}}function TO(n,e,t,r,i,a,l,f){return new Oc(n,e,t,r,i,a,l,f)}function I_(n){return new Oc(n)}function SO(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function mx(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function kb(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function _x(n){return null!==n.collectionGroup}function Up(n){const e=et(n);if(null===e.dt){e.dt=[];const t=kb(e),r=mx(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new E_(t)),e.dt.push(new E_(Tr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.dt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new E_(Tr.keyField(),a))}}}return e.dt}function Ns(n){const e=et(n);if(!e._t)if("F"===e.limitType)e._t=gx(e.path,e.collectionGroup,Up(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Up(e))t.push(new E_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new y(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new y(e.startAt.position,e.startAt.inclusive):null;e._t=gx(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function yx(n,e){e.getFirstInequalityField(),kb(n);const t=n.filters.concat([e]);return new Oc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Fb(n,e,t){return new Oc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function z0(n,e){return G0(Ns(n),Ns(e))&&n.limitType===e.limitType}function AO(n){return`${Lp(Ns(n))}|lt:${n.limitType}`}function vx(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Le(r)).join(", ")}]`),Ch(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fp(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fp(r)).join(",")),`Target(${t})`}(Ns(n))}; limitType=${n.limitType})`}function q0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Xe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Up(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const f=C(i,a,l);return i.inclusive?f<=0:f<0}(t.startAt,Up(t),r)||t.endAt&&!function(i,a,l){const f=C(i,a,l);return i.inclusive?f>=0:f>0}(t.endAt,Up(t),r)));var t,r}function xO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function MO(n){return(e,t)=>{let r=!1;for(const i of Up(n)){const a=g2(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function g2(n,e,t){const r=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(i,a,l){const f=a.data.field(i),m=l.data.field(i);return null!==f&&null!==m?Nc(f,m):dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}function RO(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kp(e)?"-0":e}}function PO(n){return{integerValue:""+n}}function NO(n,e){return xb(e)?PO(e):RO(n,e)}class Lb{constructor(){this._=void 0}}function m2(n,e,t){return n instanceof b_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Vp?kO(n,e):n instanceof Bp?FO(n,e):function(r,i){const a=OO(r,i),l=LO(a)+LO(r.gt);return Rb(a)&&Rb(r.gt)?PO(l):RO(r.yt,l)}(n,e)}function _2(n,e,t){return n instanceof Vp?kO(n,e):n instanceof Bp?FO(n,e):t}function OO(n,e){return n instanceof D_?Rb(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class b_ extends Lb{}class Vp extends Lb{constructor(e){super(),this.elements=e}}function kO(n,e){const t=UO(e);for(const r of n.elements)t.some(i=>iu(i,r))||t.push(r);return{arrayValue:{values:t}}}class Bp extends Lb{constructor(e){super(),this.elements=e}}function FO(n,e){let t=UO(e);for(const r of n.elements)t=t.filter(i=>!iu(i,r));return{arrayValue:{values:t}}}class D_ extends Lb{constructor(e,t){super(),this.yt=e,this.gt=t}}function LO(n){return qn(n.integerValue||n.doubleValue)}function UO(n){return w_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class W0{constructor(e,t){this.field=e,this.transform=t}}class v2{constructor(e,t){this.version=e,this.transformResults=t}}class hr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hr}static exists(e){return new hr(void 0,e)}static updateTime(e){return new hr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ub(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Vb{}function VO(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new S_(n.key,hr.none()):new T_(n.key,n.data,hr.none());{const t=n.data,r=Ji.empty();let i=new On(Tr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new kc(n.key,r,new so(i.toArray()),hr.none())}}function w2(n,e,t){n instanceof T_?function(r,i,a){const l=r.value.clone(),f=HO(r.fieldTransforms,i,a.transformResults);l.setAll(f),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof kc?function(r,i,a){if(!Ub(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=HO(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(jO(r)),f.setAll(l),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Z0(n,e,t,r){return n instanceof T_?function(i,a,l,f){if(!Ub(i.precondition,a))return l;const m=i.value.clone(),v=$O(i.fieldTransforms,f,a);return m.setAll(v),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof kc?function(i,a,l,f){if(!Ub(i.precondition,a))return l;const m=$O(i.fieldTransforms,f,a),v=a.data;return v.setAll(jO(i)),v.setAll(m),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(I=>I.field))}(n,e,t,r):(l=t,Ub(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function E2(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=OO(r.transform,i||null);null!=a&&(null===t&&(t=Ji.empty()),t.set(r.field,a))}return t||null}function BO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ac(t,r,(i,a)=>function y2(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Vp&&r instanceof Vp||t instanceof Bp&&r instanceof Bp?Ac(t.elements,r.elements,iu):t instanceof D_&&r instanceof D_?iu(t.gt,r.gt):t instanceof b_&&r instanceof b_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class T_ extends Vb{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class kc extends Vb{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function jO(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function HO(n,e,t){const r=new Map;ht(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,_2(l,f,t[i]))}return r}function $O(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,m2(a,l,e))}return r}class S_ extends Vb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wx extends Vb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class C2{constructor(e){this.count=e}}var fi,yn;function GO(n){switch(n){default:return dt();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function zO(n){if(void 0===n)return rr("GRPC error has no .code"),he.UNKNOWN;switch(n){case fi.OK:return he.OK;case fi.CANCELLED:return he.CANCELLED;case fi.UNKNOWN:return he.UNKNOWN;case fi.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case fi.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case fi.INTERNAL:return he.INTERNAL;case fi.UNAVAILABLE:return he.UNAVAILABLE;case fi.UNAUTHENTICATED:return he.UNAUTHENTICATED;case fi.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case fi.NOT_FOUND:return he.NOT_FOUND;case fi.ALREADY_EXISTS:return he.ALREADY_EXISTS;case fi.PERMISSION_DENIED:return he.PERMISSION_DENIED;case fi.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case fi.ABORTED:return he.ABORTED;case fi.OUT_OF_RANGE:return he.OUT_OF_RANGE;case fi.UNIMPLEMENTED:return he.UNIMPLEMENTED;case fi.DATA_LOSS:return he.DATA_LOSS;default:return dt()}}(yn=fi||(fi={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";class bh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_l(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return B0(this.inner)}size(){return this.innerSize}}const I2=new Ur(Xe.comparator);function oo(){return I2}const qO=new Ur(Xe.comparator);function K0(...n){let e=qO;for(const t of n)e=e.insert(t.key,t);return e}function WO(n){let e=qO;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function vl(){return Y0()}function ZO(){return Y0()}function Y0(){return new bh(n=>n.toString(),(n,e)=>n.isEqual(e))}const b2=new Ur(Xe.comparator),D2=new On(Xe.comparator);function en(...n){let e=D2;for(const t of n)e=e.add(t);return e}const T2=new On(Gt);function Bb(){return T2}class Q0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,X0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Q0(Dt.min(),i,Bb(),oo(),en())}}class X0{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new X0(r,t,en(),en(),en())}}class jb{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class KO{constructor(e,t){this.targetId=e,this.Et=t}}class YO{constructor(e,t,r=Sr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class QO{constructor(){this.At=0,this.Rt=JO(),this.bt=Sr.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=en(),t=en(),r=en();return this.Rt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt()}}),new X0(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=JO()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class S2{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=oo(),this.qt=XO(),this.Ut=new On(Gt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.zt(i)&&t(i)})}Jt(e){const t=e.targetId,r=e.Et.count,i=this.Yt(t);if(i){const a=i.target;if(Nb(a))if(0===r){const l=new Xe(a.path);this.Qt(t,l,ir.newNoDocument(l,Dt.min()))}else ht(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((a,l)=>{const f=this.Yt(l);if(f){if(a.current&&Nb(f.target)){const m=new Xe(f.target.path);null!==this.Lt.get(m)||this.te(l,m)||this.Qt(l,m,ir.newNoDocument(m,e))}a.St&&(t.set(l,a.Ct()),a.xt())}});let r=en();this.qt.forEach((a,l)=>{let f=!0;l.forEachWhile(m=>{const v=this.Yt(m);return!v||2===v.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.Lt.forEach((a,l)=>l.setReadTime(e));const i=new Q0(e,t,this.Ut,this.Lt,r);return this.Lt=oo(),this.qt=XO(),this.Ut=new On(Gt),i}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new QO,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new On(Gt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new QO),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function XO(){return new Ur(Xe.comparator)}function JO(){return new Ur(Xe.comparator)}const A2={asc:"ASCENDING",desc:"DESCENDING"},x2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M2={and:"AND",or:"OR"};class R2{constructor(e,t){this.databaseId=e,this.wt=t}}function A_(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ek(n,e){return n.wt?e.toBase64():e.toUint8Array()}function P2(n,e){return A_(n,e.toTimestamp())}function Jr(n){return ht(!!n),Dt.fromTimestamp(function(e){const t=ru(e);return new Rn(t.seconds,t.nanos)}(n))}function Ex(n,e){return(t=n,new cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function tk(n){const e=cn.fromString(n);return ht(ck(e)),e}function J0(n,e){return Ex(n.databaseId,e.path)}function wl(n,e){const t=tk(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(rk(t))}function Cx(n,e){return Ex(n.databaseId,e)}function nk(n){const e=tk(n);return 4===e.length?cn.emptyPath():rk(e)}function ew(n){return new cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rk(n){return ht(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function ik(n,e,t){return{name:J0(n,e),fields:t.value.mapValue.fields}}function sk(n,e,t){const r=wl(n,e.name),i=Jr(e.updateTime),a=e.createTime?Jr(e.createTime):Dt.min(),l=new Ji({mapValue:{fields:e.fields}}),f=ir.newFoundDocument(r,i,a,l);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function tw(n,e){let t;if(e instanceof T_)t={update:ik(n,e.key,e.value)};else if(e instanceof S_)t={delete:J0(n,e.key)};else if(e instanceof kc)t={update:ik(n,e.key,e.data),updateMask:B2(e.fieldMask)};else{if(!(e instanceof wx))return dt();t={verify:J0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof b_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Vp)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Bp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof D_)return{fieldPath:a.field.canonicalString(),increment:l.gt};throw dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:P2(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:dt()),t;var i}function Ix(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?hr.updateTime(Jr(i.updateTime)):void 0!==i.exists?hr.exists(i.exists):hr.none():hr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let f=null;"setToServerValue"in l?(ht("REQUEST_TIME"===l.setToServerValue),f=new b_):"appendMissingElements"in l?f=new Vp(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new Bp(l.removeAllFromArray.values||[]):"increment"in l?f=new D_(a,l.increment):dt();const m=Tr.fromServerFormat(l.fieldPath);return new W0(m,f)}(n,i)):[];var i;if(e.update){const i=wl(n,e.update.name),a=new Ji({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new so((e.updateMask.fieldPaths||[]).map(v=>Tr.fromServerFormat(v)));return new kc(i,a,l,t,r)}return new T_(i,a,t,r)}if(e.delete){const i=wl(n,e.delete);return new S_(i,t)}if(e.verify){const i=wl(n,e.verify);return new wx(i,t)}return dt()}function ok(n,e){return{documents:[Cx(n,e.path)]}}function bx(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Cx(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Cx(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return lk(L.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:x_((I=v).field),direction:L2(I.dir)};var I})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(v=e.limit,n.wt||Ch(v)?v:{value:v});var v,f,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function ak(n){let e=nk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ht(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let a=[];t.where&&(a=function(I){const S=uk(I);return S instanceof L&&we(S)?S.getFilters():[S]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(I=>{return new E_(M_((S=I).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let f=null;t.limit&&(f=function(I){let S;return S="object"==typeof I?I.value:I,Ch(S)?null:S}(t.limit));let m=null;var I;t.startAt&&(m=new y((I=t.startAt).values||[],!!I.before));let v=null;return t.endAt&&(v=function(I){return new y(I.values||[],!I.before)}(t.endAt)),TO(e,i,l,a,f,"F",m,v)}function uk(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=M_(e.unaryFilter.field);return M.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=M_(e.unaryFilter.field);return M.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=M_(e.unaryFilter.field);return M.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=M_(e.unaryFilter.field);return M.create(a,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}(n):void 0!==n.fieldFilter?M.create(M_((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return L.create(e.compositeFilter.filters.map(t=>uk(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return dt()}}(e.compositeFilter.op))}(n):dt();var e}function L2(n){return A2[n]}function U2(n){return x2[n]}function V2(n){return M2[n]}function x_(n){return{fieldPath:n.canonicalString()}}function M_(n){return Tr.fromServerFormat(n.fieldPath)}function lk(n){return n instanceof M?function(e){if("=="===e.op){if(fx(e.value))return{unaryFilter:{field:x_(e.field),op:"IS_NAN"}};if(hx(e.value))return{unaryFilter:{field:x_(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(fx(e.value))return{unaryFilter:{field:x_(e.field),op:"IS_NOT_NAN"}};if(hx(e.value))return{unaryFilter:{field:x_(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:x_(e.field),op:U2(e.op),value:e.value}}}(n):n instanceof L?function(e){const t=e.getFilters().map(r=>lk(r));return 1===t.length?t[0]:{compositeFilter:{op:V2(e.op),filters:t}}}(n):dt()}function B2(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ck(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Os(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=dk(e)),e=j2(n.get(t),e);return dk(e)}function j2(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function dk(n){return n+"\x01\x01"}function El(n){const e=n.length;if(ht(e>=2),2===e)return ht("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),cn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&dt(),n.charAt(l+1)){case"\x01":const f=n.substring(a,l);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:dt()}a=l+2}return new cn(r)}const hk=["userId","batchId"];function Hb(n,e){return[n,Os(e)]}function fk(n,e,t){return[n,Os(e),t]}const H2={},$2=["prefixPath","collectionGroup","readTime","documentId"],G2=["prefixPath","collectionGroup","documentId"],z2=["collectionGroup","readTime","prefixPath","documentId"],q2=["canonicalId","targetId"],W2=["targetId","path"],Z2=["path","targetId"],K2=["collectionId","parent"],Y2=["indexId","uid"],Q2=["uid","sequenceNumber"],X2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],J2=["indexId","uid","orderedDocumentKey"],eB=["userId","collectionPath","documentId"],tB=["userId","collectionPath","largestBatchId"],nB=["userId","collectionGroup","largestBatchId"],pk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],rB=[...pk,"documentOverlays"],gk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mk=gk,iB=[...mk,"indexConfiguration","indexState","indexEntries"];class Dx extends Db{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Ui(n,e){const t=et(n);return Rs.M(t.se,e)}class Tx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&w2(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Z0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Z0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ZO();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(i.key)?null:f;const m=VO(l,f);null!==m&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),en())}isEqual(e){return this.batchId===e.batchId&&Ac(this.mutations,e.mutations,(t,r)=>BO(t,r))&&Ac(this.baseMutations,e.baseMutations,(t,r)=>BO(t,r))}}class Sx{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ht(e.mutations.length===r.length);let i=b2;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Sx(e,t,r,i)}}class Ax{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Dh{constructor(e,t,r,i,a=Dt.min(),l=Dt.min(),f=Sr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f}withSequenceNumber(e){return new Dh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Dh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Dh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class _k{constructor(e){this.ie=e}}function yk(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:$b(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:J0(i=n.ie,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:A_(i,a.version.toTimestamp()),createTime:A_(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:jp(e.version)};else{if(!e.isUnknownDocument())return dt();r.unknownDocument={path:t.path.toArray(),version:jp(e.version)}}var i,a;return r}function $b(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function jp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Hp(n){const e=new Rn(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function $p(n,e){const t=(e.baseMutations||[]).map(a=>Ix(n.ie,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>Ix(n.ie,a)),i=Rn.fromMillis(e.localWriteTimeMs);return new Tx(e.batchId,i,t,r)}function nw(n){const e=Hp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Hp(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var i;return void 0!==n.query.documents?(ht(1===(i=n.query).documents.length),r=Ns(I_(nk(i.documents[0])))):r=Ns(ak(n.query)),new Dh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Sr.fromBase64String(n.resumeToken))}function vk(n,e){const t=jp(e.snapshotVersion),r=jp(e.lastLimboFreeSnapshotVersion);let i;i=Nb(e.target)?ok(n.ie,e.target):bx(n.ie,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Lp(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function xx(n){const e=ak({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Fb(e,e.limit,"L"):e}function Mx(n,e){return new Ax(e.largestBatchId,Ix(n.ie,e.overlayMutation))}function wk(n,e){const t=e.path.lastSegment();return[n,Os(e.path.popLast()),t]}function Ek(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:jp(r.readTime),documentKey:Os(r.documentKey.path),largestBatchId:r.largestBatchId}}class oB{getBundleMetadata(e,t){return Ck(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Hp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Ck(e).put({bundleId:(r=t).id,createTime:jp(Jr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Ik(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:xx(i.bundledQuery),readTime:Hp(i.readTime)};var i})}saveNamedQuery(e,t){return Ik(e).put({name:(r=t).name,readTime:jp(Jr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Ck(n){return Ui(n,"bundles")}function Ik(n){return Ui(n,"namedQueries")}class Gb{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new Gb(e,t.uid||"")}getOverlay(e,t){return rw(e).get(wk(this.userId,t)).next(r=>r?Mx(this.yt,r):null)}getOverlays(e,t){const r=vl();return le.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const f=new Ax(t,l);i.push(this.oe(e,f))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Os(l.getCollectionPath())));const a=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(rw(e).Y("collectionPathOverlayIndex",f))}),le.waitFor(a)}getOverlaysForCollection(e,t,r){const i=vl(),a=Os(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return rw(e).W("collectionPathOverlayIndex",l).next(f=>{for(const m of f){const v=Mx(this.yt,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=vl();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return rw(e).Z({index:"collectionGroupOverlayIndex",range:f},(m,v,I)=>{const S=Mx(this.yt,v);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):I.done()}).next(()=>a)}oe(e,t){return rw(e).put(function(r,i,a){const[l,f,m]=wk(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:tw(r.ie,a.mutation)}}(this.yt,this.userId,t))}}function rw(n){return Ui(n,"documentOverlays")}class Gp{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(qn(e.integerValue));else if("doubleValue"in e){const r=qn(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),kp(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Rc(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?o(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):dt()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const i of Object.keys(r))this.de(i,t),this.ce(r[i],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const i of r)this.ce(i,t)}me(e,t){this.he(t,37),Xe.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function aB(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function bk(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=aB(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Gp.Ie=new Gp;class uB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const i=t.codePointAt(0);this.Ee(240|i>>>18),this.Ee(128|63&i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Pe()}Se(e){const t=this.De(e),r=bk(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}xe(e){const t=this.De(e),r=bk(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class lB{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class cB{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class iw{constructor(){this.$e=new uB,this.Be=new lB(this.$e),this.Le=new cB(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class zp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new zp(this.indexId,this.documentKey,this.arrayValue,r)}}function Th(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Dk(n.arrayValue,e.arrayValue),0!==t?t:(t=Dk(n.directionalValue,e.directionalValue),0!==t?t:Xe.comparator(n.documentKey,e.documentKey)))}function Dk(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class dB{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){ht(e.collectionGroup===this.collectionId);const t=U0(e);if(void 0!==t&&!this.We(t))return!1;const r=xc(e);let i=0,a=0;for(;i<r.length&&this.We(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Qe){const l=r[i];if(!this.ze(this.Qe,l)||!this.He(this.Ke[a++],l))return!1;++i}for(;i<r.length;++i)if(a>=this.Ke.length||!this.He(this.Ke[a++],r[i]))return!1;return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Tk(n){var e,t;if(ht(n instanceof M||n instanceof L),n instanceof M){if(n instanceof EO){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>M.create(n.field,"==",a)))||[];return L.create(i,"or")}return n}const r=n.filters.map(i=>Tk(i));return L.create(r,n.op)}function hB(n){if(0===n.getFilters().length)return[];const e=Nx(Tk(n));return ht(Sk(e)),Rx(e)||Px(e)?[e]:e.getFilters()}function Rx(n){return n instanceof M}function Px(n){return n instanceof L&&we(n)}function Sk(n){return Rx(n)||Px(n)||function(e){if(e instanceof L&&te(e)){for(const t of e.getFilters())if(!Rx(t)&&!Px(t))return!1;return!0}return!1}(n)}function Nx(n){if(ht(n instanceof M||n instanceof L),n instanceof M)return n;if(1===n.filters.length)return Nx(n.filters[0]);const e=n.filters.map(r=>Nx(r));let t=L.create(e,n.op);return t=zb(t),Sk(t)?t:(ht(t instanceof L),ht(K(t)),ht(t.filters.length>1),t.filters.reduce((r,i)=>Ox(r,i)))}function Ox(n,e){let t;return ht(n instanceof M||n instanceof L),ht(e instanceof M||e instanceof L),t=n instanceof M?e instanceof M?L.create([n,e],"and"):Ak(n,e):e instanceof M?Ak(e,n):function(r,i){if(ht(r.filters.length>0&&i.filters.length>0),K(r)&&K(i))return Nt(r,i.getFilters());const a=te(r)?r:i,l=te(r)?i:r,f=a.filters.map(m=>Ox(m,l));return L.create(f,"or")}(n,e),zb(t)}function Ak(n,e){if(K(e))return Nt(e,n.getFilters());{const t=e.filters.map(r=>Ox(n,r));return L.create(t,"or")}}function zb(n){if(ht(n instanceof M||n instanceof L),n instanceof M)return n;const e=n.getFilters();if(1===e.length)return zb(e[0]);if(Ge(n))return n;const t=e.map(i=>zb(i)),r=[];return t.forEach(i=>{i instanceof M?r.push(i):i instanceof L&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:L.create(r,n.op)}class fB{constructor(){this.Je=new kx}addToCollectionParentIndex(e,t){return this.Je.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Ms.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(Ms.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class kx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new On(cn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new On(cn.comparator)).toArray()}}const qb=new Uint8Array(0);class pB{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new kx,this.Xe=new bh(r=>Lp(r),(r,i)=>G0(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const a={collectionId:r,parent:Os(i)};return xk(e).put(a)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Pp(t),""],!1,!0);return xk(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(El(l.parent))}return r})}addFieldIndex(e,t){const r=Wb(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=ow(e);return a.next(f=>{l.put(Ek(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=Wb(e),i=ow(e),a=sw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=sw(e);let i=!0;const a=new Map;return le.forEach(this.Ze(t),l=>this.tn(e,l).next(f=>{i&&(i=!!f),a.set(l,f)})).next(()=>{if(i){let l=en();const f=[];return le.forEach(a,(m,v)=>{var I;Ue("IndexedDbIndexManager",`Using index ${I=m,`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(ft=>`${ft.fieldPath}:${ft.kind}`).join(",")}`} to execute ${Lp(t)}`);const S=function(ft,mt){const Ft=U0(mt);if(void 0===Ft)return null;for(const Wt of Ob(ft,Ft.fieldPath))switch(Wt.op){case"array-contains-any":return Wt.value.arrayValue.values||[];case"array-contains":return[Wt.value]}return null}(v,m),P=function(ft,mt){const Ft=new Map;for(const Wt of xc(mt))for(const Rr of Ob(ft,Wt.fieldPath))switch(Rr.op){case"==":case"in":Ft.set(Wt.fieldPath.canonicalString(),Rr.value);break;case"not-in":case"!=":return Ft.set(Wt.fieldPath.canonicalString(),Rr.value),Array.from(Ft.values())}return null}(v,m),V=function(ft,mt){const Ft=[];let Wt=!0;for(const Rr of xc(mt)){const cu=0===Rr.kind?bO(ft,Rr.fieldPath,ft.startAt):DO(ft,Rr.fieldPath,ft.startAt);Ft.push(cu.value),Wt&&(Wt=cu.inclusive)}return new y(Ft,Wt)}(v,m),z=function(ft,mt){const Ft=[];let Wt=!0;for(const Rr of xc(mt)){const cu=0===Rr.kind?DO(ft,Rr.fieldPath,ft.endAt):bO(ft,Rr.fieldPath,ft.endAt);Ft.push(cu.value),Wt&&(Wt=cu.inclusive)}return new y(Ft,Wt)}(v,m),ce=this.en(m,v,V),ve=this.en(m,v,z),tt=this.nn(m,v,P),wt=this.sn(m.indexId,S,ce,V.inclusive,ve,z.inclusive,tt);return le.forEach(wt,ft=>r.J(ft,t.limit).next(mt=>{mt.forEach(Ft=>{const Wt=Xe.fromSegments(Ft.documentKey);l.has(Wt)||(l=l.add(Wt),f.push(Wt))})}))}).next(()=>f)}return le.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:hB(L.create(e.filters,"and")).map(r=>gx(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,i,a,l,f){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),v=m/(null!=t?t.length:1),I=[];for(let S=0;S<m;++S){const P=t?this.rn(t[S/v]):qb,V=this.on(e,P,r[S%v],i),z=this.un(e,P,a[S%v],l),ce=f.map(ve=>this.on(e,P,ve,!0));I.push(...this.createRange(V,z,ce))}return I}on(e,t,r,i){const a=new zp(e,Xe.empty(),t,r);return i?a:a.Ue()}un(e,t,r,i){const a=new zp(e,Xe.empty(),t,r);return i?a.Ue():a}tn(e,t){const r=new dB(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const f of a)r.je(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;const i=this.Ze(t);return le.forEach(i,a=>this.tn(e,a).next(l=>{l?0!==r&&l.fields.length<function(f){let m=new On(Tr.comparator),v=!1;for(const I of f.filters)for(const S of I.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?v=!0:m=m.add(S.field));for(const I of f.orderBy)I.field.isKeyField()||(m=m.add(I.field));return m.size+(v?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}cn(e,t){const r=new iw;for(const i of xc(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);Gp.Ie.ue(a,l)}return r.Fe()}rn(e){const t=new iw;return Gp.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new iw;return Gp.Ie.ue(Ih(this.databaseId,t),r.qe(function(i){const a=xc(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let i=[];i.push(new iw);let a=0;for(const l of xc(e)){const f=r[a++];for(const m of i)if(this.hn(t,l.fieldPath)&&w_(f))i=this.ln(i,l,f);else{const v=m.qe(l.kind);Gp.Ie.ue(f,v)}}return this.fn(i)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const m=new iw;m.seed(f.Fe()),Gp.Ie.ue(l,m.qe(t.kind)),a.push(m)}return a}hn(e,t){return!!e.filters.find(r=>r instanceof M&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Wb(e),i=ow(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return le.forEach(a,f=>i.get([f.indexId,this.uid]).next(m=>{l.push(function(v,I){const S=I?new g_(I.sequenceNumber,new Ms(Hp(I.readTime),new Xe(El(I.documentKey)),I.largestBatchId)):g_.empty(),P=v.fields.map(([V,z])=>new V0(Tr.fromServerFormat(V),z));return new Op(v.indexId,v.collectionGroup,P,S)}(f,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Gt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Wb(e),a=ow(e);return this.dn(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>le.forEach(f,m=>a.put(Ek(m.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?le.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),le.forEach(f,m=>this._n(e,i,m).next(v=>{const I=this.wn(a,m);return v.isEqual(I)?le.resolve():this.mn(e,a,m,v,I)}))))})}gn(e,t,r,i){return sw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,i){return sw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const i=sw(e);let a=new On(Th);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(l,f)=>{a=a.add(new zp(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}wn(e,t){let r=new On(Th);const i=this.cn(t,e);if(null==i)return r;const a=U0(t);if(null!=a){const l=e.data.field(a.fieldPath);if(w_(l))for(const f of l.arrayValue.values||[])r=r.add(new zp(t.indexId,e.key,this.rn(f),i))}else r=r.add(new zp(t.indexId,e.key,qb,i));return r}mn(e,t,r,i,a){Ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,m,v,I,S){const P=f.getIterator(),V=m.getIterator();let z=C_(P),ce=C_(V);for(;z||ce;){let ve=!1,tt=!1;if(z&&ce){const wt=v(z,ce);wt<0?tt=!0:wt>0&&(ve=!0)}else null!=z?tt=!0:ve=!0;ve?(I(ce),ce=C_(V)):tt?(S(z),z=C_(P)):(z=C_(P),ce=C_(V))}}(i,a,Th,f=>{l.push(this.gn(e,t,r,f))},f=>{l.push(this.yn(e,t,r,f))}),le.waitFor(l)}dn(e){let t=1;return ow(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>Th(l,f)).filter((l,f,m)=>!f||0!==Th(l,m[f-1]));const i=[];i.push(e);for(const l of r){const f=Th(l,e),m=Th(l,t);if(0===f)i[0]=e.Ue();else if(f>0&&m<0)i.push(l),i.push(l.Ue());else if(m>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.pn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,qb,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,qb,[]]))}return a}pn(e,t){return Th(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Mk)}getMinOffset(e,t){return le.mapArray(this.Ze(t),r=>this.tn(e,r).next(i=>i||dt())).next(Mk)}}function xk(n){return Ui(n,"collectionParents")}function sw(n){return Ui(n,"indexEntries")}function Wb(n){return Ui(n,"indexConfiguration")}function ow(n){return Ui(n,"indexState")}function Mk(n){ht(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;vh(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ms(e.readTime,e.documentKey,t)}const Rk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ao{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ao(e,ao.DEFAULT_COLLECTION_PERCENTILE,ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Pk(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let f=0;const m=r.Z({range:l},(I,S,P)=>(f++,P.delete()));a.push(m.next(()=>{ht(1===f)}));const v=[];for(const I of t.mutations){const S=fk(e,I.key.path,t.batchId);a.push(i.delete(S)),v.push(I.key)}return le.waitFor(a).next(()=>v)}function Zb(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}ao.DEFAULT_COLLECTION_PERCENTILE=10,ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ao.DEFAULT=new ao(41943040,ao.DEFAULT_COLLECTION_PERCENTILE,ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ao.DISABLED=new ao(-1,0,0);class Kb{constructor(e,t,r,i){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static re(e,t,r,i){ht(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new Kb(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Sh(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=R_(e),l=Sh(e);return l.add({}).next(f=>{ht("number"==typeof f);const m=new Tx(f,t,r,i),v=function(P,V,z){const ce=z.baseMutations.map(tt=>tw(P.ie,tt)),ve=z.mutations.map(tt=>tw(P.ie,tt));return{userId:V,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:ce,mutations:ve}}(this.yt,this.userId,m),I=[];let S=new On((P,V)=>Gt(P.canonicalString(),V.canonicalString()));for(const P of i){const V=fk(this.userId,P.key.path,f);S=S.add(P.key.path.popLast()),I.push(l.put(v)),I.push(a.put(V,H2))}return S.forEach(P=>{I.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.In[f]=m.keys()}),le.waitFor(I).next(()=>m)})}lookupMutationBatch(e,t){return Sh(e).get(t).next(r=>r?(ht(r.userId===this.userId),$p(this.yt,r)):null)}Tn(e,t){return this.In[t]?le.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Sh(e).Z({index:"userMutationsIndex",range:i},(l,f,m)=>{f.userId===this.userId&&(ht(f.batchId>=r),a=$p(this.yt,f)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Sh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Sh(e).W("userMutationsIndex",t).next(r=>r.map(i=>$p(this.yt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Hb(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return R_(e).Z({range:i},(l,f,m)=>{const[v,I,S]=l,P=El(I);if(v===this.userId&&t.path.isEqual(P))return Sh(e).get(S).next(V=>{if(!V)throw dt();ht(V.userId===this.userId),a.push($p(this.yt,V))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new On(Gt);const i=[];return t.forEach(a=>{const l=Hb(this.userId,a.path),f=IDBKeyRange.lowerBound(l),m=R_(e).Z({range:f},(v,I,S)=>{const[P,V,z]=v,ce=El(V);P===this.userId&&a.path.isEqual(ce)?r=r.add(z):S.done()});i.push(m)}),le.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Hb(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new On(Gt);return R_(e).Z({range:l},(m,v,I)=>{const[S,P,V]=m,z=El(P);S===this.userId&&r.isPrefixOf(z)?z.length===i&&(f=f.add(V)):I.done()}).next(()=>this.En(e,f))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Sh(e).get(a).next(l=>{if(null===l)throw dt();ht(l.userId===this.userId),r.push($p(this.yt,l))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Pk(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return R_(e).Z({range:r},(a,l,f)=>{if(a[0]===this.userId){const m=El(a[1]);i.push(m)}else f.done()}).next(()=>{ht(0===i.length)})})}containsKey(e,t){return Nk(e,this.userId,t)}Rn(e){return Ok(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Nk(n,e,t){const r=Hb(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return R_(n).Z({range:a,X:!0},(f,m,v)=>{const[I,S,P]=f;I===e&&S===i&&(l=!0),v.done()}).next(()=>l)}function Sh(n){return Ui(n,"mutations")}function R_(n){return Ui(n,"documentMutations")}function Ok(n){return Ui(n,"mutationQueues")}class qp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new qp(0)}static vn(){return new qp(-1)}}class gB{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new qp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Dt.fromTimestamp(new Rn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>P_(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(ht(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return P_(e).Z((l,f)=>{const m=nw(f);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>le.waitFor(a)).next(()=>i)}forEachTarget(e,t){return P_(e).Z((r,i)=>{const a=nw(i);t(a)})}Vn(e){return kk(e).get("targetGlobalKey").next(t=>(ht(null!==t),t))}Sn(e,t){return kk(e).put("targetGlobalKey",t)}Dn(e,t){return P_(e).put(vk(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Lp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return P_(e).Z({range:i,index:"queryTargetsIndex"},(l,f,m)=>{const v=nw(f);G0(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Ah(e);return t.forEach(l=>{const f=Os(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ah(e);return le.forEach(t,a=>{const l=Os(a.path);return le.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Ah(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ah(e);let a=en();return i.Z({range:r,X:!0},(l,f,m)=>{const v=El(l[1]),I=new Xe(v);a=a.add(I)}).next(()=>a)}containsKey(e,t){const r=Os(t.path),i=IDBKeyRange.bound([r],[Pp(r)],!1,!0);let a=0;return Ah(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,f],m,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}ne(e,t){return P_(e).get(t).next(r=>r?nw(r):null)}}function P_(n){return Ui(n,"targets")}function kk(n){return Ui(n,"targetGlobal")}function Ah(n){return Ui(n,"targetDocuments")}function Fk([n,e],[t,r]){const i=Gt(n,t);return 0===i?Gt(e,r):i}class mB{constructor(e){this.xn=e,this.buffer=new On(Fk),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Fk(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _B{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,fe.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){ga(r)?Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield tu(r)}yield t.Fn(3e5)}))}}class yB{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(Ps.at);const r=new mB(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(Rk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rk):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,i,a,l,f,m,v;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,f=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),k0()<=Ki.in.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-I}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${a} targets in `+(m-f)+`ms\n\tRemoved ${S} documents in `+(v-m)+`ms\nTotal Duration: ${v-I}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class vB{constructor(e,t){this.db=e,this.garbageCollector=new yB(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return Yb(e,r)}removeReference(e,t,r){return Yb(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Yb(e,t)}Gn(e,t){return function(r,i){let a=!1;return Ok(r).tt(l=>Nk(r,l,i).next(f=>(f&&(a=!0),le.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,f)=>{if(f<=t){const m=this.Gn(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Dt.min()),Ah(e).delete([0,Os(l.path)])))});i.push(m)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Yb(e,t)}Kn(e,t){const r=Ah(e);let i,a=Ps.at;return r.Z({index:"documentTargetsIndex"},([l,f],{path:m,sequenceNumber:v})=>{0===l?(a!==Ps.at&&t(new Xe(El(i)),a),a=v,i=m):a=Ps.at}).next(()=>{a!==Ps.at&&t(new Xe(El(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Yb(n,e){return Ah(n).put((r=n.currentSequenceNumber,{targetId:0,path:Os(e.path),sequenceNumber:r}));var r}class Lk{constructor(){this.changes=new bh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ir.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wB{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wp(e).put(r)}removeEntry(e,t,r){return Wp(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],$b(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=ir.newInvalidDocument(t);return Wp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(aw(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:ir.newInvalidDocument(t)};return Wp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(aw(t))},(i,a)=>{r={document:this.jn(t,a),size:Zb(a)}}).next(()=>r)}getEntries(e,t){let r=oo();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=oo(),i=new Ur(Xe.comparator);return this.zn(e,t,(a,l)=>{const f=this.jn(a,l);r=r.insert(a,f),i=i.insert(a,Zb(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return le.resolve();let i=new On(jk);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(aw(i.first()),aw(i.last())),l=i.getIterator();let f=l.getNext();return Wp(e).Z({index:"documentKeyIndex",range:a},(m,v,I)=>{const S=Xe.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&jk(f,S)<0;)r(f,null),f=l.getNext();f&&f.isEqual(S)&&(r(f,v),f=l.hasNext()?l.getNext():null),f?I.j(aw(f)):I.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,l=[a.popLast().toArray(),a.lastSegment(),$b(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wp(e).W(IDBKeyRange.bound(l,f,!0)).next(m=>{let v=oo();for(const I of m){const S=this.jn(Xe.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);S.isFoundDocument()&&(q0(t,S)||i.has(S.key))&&(v=v.insert(S.key,S))}return v})}getAllFromCollectionGroup(e,t,r,i){let a=oo();const l=Bk(t,r),f=Bk(t,Ms.max());return Wp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(m,v,I)=>{const S=this.jn(Xe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&I.done()}).next(()=>a)}newChangeBuffer(e){return new EB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Vk(e).get("remoteDocumentGlobalKey").next(t=>(ht(!!t),t))}Qn(e,t){return Vk(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function sB(n,e){let t;if(e.document)t=sk(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Xe.fromSegments(e.noDocument.path),i=Hp(e.noDocument.readTime);t=ir.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const r=Xe.fromSegments(e.unknownDocument.path),i=Hp(e.unknownDocument.version);t=ir.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Rn(r[0],r[1]);return Dt.fromTimestamp(i)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return ir.newInvalidDocument(e)}}function Uk(n){return new wB(n)}class EB extends Lk{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new bh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new On((a,l)=>Gt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const f=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,f.readTime)),l.isValidDocument()){const m=yk(this.Yn.yt,l);i=i.add(a.path.popLast());const v=Zb(m);r+=v-f.size,t.push(this.Yn.addEntry(e,a,m))}else if(r-=f.size,this.trackRemovals){const m=yk(this.Yn.yt,l.convertToNoDocument(Dt.min()));t.push(this.Yn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function Vk(n){return Ui(n,"remoteDocumentGlobal")}function Wp(n){return Ui(n,"remoteDocumentsV14")}function aw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Bk(n,e){const t=e.documentKey.path.toArray();return[n,$b(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function jk(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Gt(t[a],r[a]),i)return i;return i=Gt(t.length,r.length),i||(i=Gt(t[t.length-2],r[r.length-2]),i||Gt(t[t.length-1],r[r.length-1]))}class CB{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Hk{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Z0(r.mutation,i,so.empty(),Rn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,en()).next(()=>r))}getLocalViewOfDocuments(e,t,r=en()){const i=vl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=K0();return a.forEach((f,m)=>{l=l.insert(f,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=vl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,en()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let a=oo();const l=Y0(),f=Y0();return t.forEach((m,v)=>{const I=r.get(v.key);i.has(v.key)&&(void 0===I||I.mutation instanceof kc)?a=a.insert(v.key,v):void 0!==I?(l.set(v.key,I.mutation.getFieldMask()),Z0(I.mutation,v,I.mutation.getFieldMask(),Rn.now())):l.set(v.key,so.empty())}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((v,I)=>l.set(v,I)),t.forEach((v,I)=>{var S;return f.set(v,new CB(I,null!==(S=l.get(v))&&void 0!==S?S:null))}),f))}recalculateAndSaveOverlays(e,t){const r=Y0();let i=new Ur((l,f)=>l-f),a=en();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let I=r.get(m)||so.empty();I=f.applyToLocalView(v,I),r.set(m,I);const S=(i.get(f.batchId)||en()).add(m);i=i.insert(f.batchId,S)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,I=m.value,S=ZO();I.forEach(P=>{if(!a.has(P)){const V=VO(t.get(P),r.get(P));null!==V&&S.set(P,V),a=a.add(P)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,S))}return le.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Xe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):_x(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):le.resolve(vl());let f=-1,m=a;return l.next(v=>le.forEach(v,(I,S)=>(f<S.largestBatchId&&(f=S.largestBatchId),a.get(I)?le.resolve():this.remoteDocumentCache.getEntry(e,I).next(P=>{m=m.insert(I,P)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,m,v,en())).next(I=>({batchId:f,changes:WO(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xe(t)).next(r=>{let i=K0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=K0();return this.indexManager.getCollectionParents(e,i).next(l=>le.forEach(l,f=>{const m=(v=t,I=f.child(i),new Oc(I,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,I;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((I,S)=>{a=a.insert(I,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,m)=>{const v=m.getKey();null===a.get(v)&&(a=a.insert(v,ir.newInvalidDocument(v)))});let l=K0();return a.forEach((f,m)=>{const v=i.get(f);void 0!==v&&Z0(v.mutation,m,so.empty(),Rn.now()),q0(t,m)&&(l=l.insert(f,m))}),l})}}class IB{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return le.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Jr(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:xx(r.bundledQuery),readTime:Jr(r.readTime)}),le.resolve();var r}}class bB{constructor(){this.overlays=new Ur(Xe.comparator),this.es=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=vl();return le.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.oe(e,t,a)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=vl(),a=t.length+1,l=new Xe(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Ur((v,I)=>v-I);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let I=a.get(v.largestBatchId);null===I&&(I=vl(),a=a.insert(v.largestBatchId,I)),I.set(v.getKey(),v)}}const f=vl(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,I)=>f.set(v,I)),!(f.size()>=i)););return le.resolve(f)}oe(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Ax(t,r));let a=this.es.get(t);void 0===a&&(a=en(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class Fx{constructor(){this.ns=new On(Vi.ss),this.rs=new On(Vi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Vi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Vi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Xe(new cn([])),r=new Vi(t,e),i=new Vi(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Xe(new cn([])),r=new Vi(t,e),i=new Vi(t,e+1);let a=en();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Vi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Vi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Xe.comparator(e.key,t.key)||Gt(e._s,t._s)}static os(e,t){return Gt(e._s,t._s)||Xe.comparator(e.key,t.key)}}class DB{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new On(Vi.ss)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new Tx(a,t,r,i);this.mutationQueue.push(l);for(const f of i)this.gs=this.gs.add(new Vi(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return le.resolve(l)}lookupMutationBatch(e,t){return le.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return le.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Vi(t,0),i=new Vi(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const f=this.ys(l._s);a.push(f)}),le.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new On(Gt);return t.forEach(i=>{const a=new Vi(i,0),l=new Vi(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],f=>{r=r.add(f._s)})}),le.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Xe.isDocumentKey(a)||(a=a.child(""));const l=new Vi(new Xe(a),0);let f=new On(Gt);return this.gs.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(m._s)),!0)},l),le.resolve(this.Is(f))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){ht(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return le.forEach(t.mutations,i=>{const a=new Vi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Vi(t,0),i=this.gs.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class TB{constructor(e){this.Es=e,this.docs=new Ur(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():ir.newInvalidDocument(t))}getEntries(e,t){let r=oo();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():ir.newInvalidDocument(i))}),le.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=oo();const l=t.path,f=new Xe(l.child("")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:v,value:{document:I}}=m.getNext();if(!l.isPrefixOf(v.path))break;v.path.length>l.length+1||vh(ox(I),r)<=0||(i.has(I.key)||q0(t,I))&&(a=a.insert(I.key,I.mutableCopy()))}return le.resolve(a)}getAllFromCollectionGroup(e,t,r,i){dt()}As(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new SB(this)}getSize(e){return le.resolve(this.size)}}class SB extends Lk{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class AB{constructor(e){this.persistence=e,this.Rs=new bh(t=>Lp(t),G0),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Fx,this.targetCount=0,this.vs=qp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),le.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new qp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Dn(t),le.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),le.waitFor(a).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),le.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.Ps.containsKey(t))}}class $k{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ps(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new AB(this),this.indexManager=new fB,this.remoteDocumentCache=new TB(r=>this.referenceDelegate.xs(r)),this.yt=new _k(t),this.Ns=new IB(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bB,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new DB(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ue("MemoryPersistence","Starting transaction:",e);const i=new xB(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return le.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class xB extends Db{constructor(e){super(),this.currentSequenceNumber=e}}class Qb{constructor(e){this.persistence=e,this.Fs=new Fx,this.$s=null}static Bs(e){return new Qb(e)}get Ls(){if(this.$s)return this.$s;throw dt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),le.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Ls,r=>{const i=Xe.fromPath(r);return this.qs(e,i).next(a=>{a||t.removeEntry(i,Dt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return le.or([()=>le.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class MB{constructor(e){this.yt=e}$(e,t,r,i){const a=new wh("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hk,{unique:!0}),f.createObjectStore("documentMutations"),Gk(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=le.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),Gk(e)),l=l.next(()=>function(f){const m=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,m){return m.store("mutations").W().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hk,{unique:!0});const I=m.store("mutations"),S=v.map(P=>I.put(P));return le.waitFor(S)})}(e,a))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Us(a))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:eB});m.createIndex("collectionPathOverlayIndex",tB,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",nB,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:$2});m.createIndex("documentKeyIndex",G2),m.createIndex("collectionGroupIndex",z2)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:Y2}).createIndex("sequenceNumberIndex",Q2,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:X2}).createIndex("documentKeyIndex",J2,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Zb(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>le.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(f=>le.forEach(f,m=>{ht(m.userId===a.userId);const v=$p(this.yt,m);return Pk(e,a.userId,v).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,f)=>{const m=new cn(l),v=[0,Os(m)];a.push(t.get(v).next(I=>I?le.resolve():t.put({targetId:0,path:Os(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:K2});const r=t.store("collectionParents"),i=new kx,a=l=>{if(i.add(l)){const f=l.lastSegment(),m=l.popLast();return r.put({collectionId:f,parent:Os(m)})}};return t.store("remoteDocuments").Z({X:!0},(l,f)=>{const m=new cn(l);return a(m.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,f,m],v)=>{const I=El(f);return a(I.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=nw(i),l=vk(this.yt,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const f=t.store("remoteDocumentsV14"),m=(v=l,v.document?new Xe(cn.fromString(v.document.name).popFirst(5)):v.noDocument?Xe.fromSegments(v.noDocument.path):v.unknownDocument?Xe.fromSegments(v.unknownDocument.path):dt()).path.toArray();var v;const I={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(I))}).next(()=>le.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=Uk(this.yt),a=new $k(Qb.Bs,this.yt.ie);return r.W().next(l=>{const f=new Map;return l.forEach(m=>{var v;let I=null!==(v=f.get(m.userId))&&void 0!==v?v:en();$p(this.yt,m).keys().forEach(S=>I=I.add(S)),f.set(m.userId,I)}),le.forEach(f,(m,v)=>{const I=new hi(v),S=Gb.re(this.yt,I),P=a.getIndexManager(I),V=Kb.re(I,this.yt,P,a.referenceDelegate);return new Hk(i,V,S,P).recalculateAndSaveOverlaysForDocumentKeys(new Dx(t,Ps.at),m).next()})})}}function Gk(n){n.createObjectStore("targetDocuments",{keyPath:W2}).createIndex("documentTargetsIndex",Z2,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",q2,{unique:!0}),n.createObjectStore("targetGlobal")}const Lx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ux{constructor(e,t,r,i,a,l,f,m,v,I,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=f,this.Js=v,this.Ys=I,this.Xs=S,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=P=>Promise.resolve(),!Ux.C())throw new ke(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vB(this,i),this.ii=t+"main",this.yt=new _k(m),this.ri=new Rs(this.ii,this.Xs,new MB(this.yt)),this.Cs=new gB(this.referenceDelegate,this.yt),this.remoteDocumentCache=Uk(this.yt),this.Ns=new oB,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===I&&rr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(he.FAILED_PRECONDITION,Lx);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ps(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,fe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,fe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,fe.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Xb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(ga(e))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return uw(e).get("owner").next(t=>le.resolve(this.mi(t)))}gi(e){return Xb(e).delete(this.clientId)}yi(){var e=this;return(0,fe.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ui(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),f=a.filter(m=>-1===l.indexOf(m));return le.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?le.resolve(!0):uw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new ke(he.FAILED_PRECONDITION,Lx);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xb(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,fe.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Dx(t,Ps.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Xb(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Kb.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new pB(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return Gb.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ue("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?iB:14===l?mk:13===l?gk:12===l?rB:11===l?pk:void dt();var l;let f;return this.ri.runTransaction(e,i,a,m=>(f=new Dx(m,this.Ss?this.Ss.next():Ps.at),"readwrite-primary"===t?this.fi(f).next(v=>!!v||this.di(f)).next(v=>{if(!v)throw rr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new ke(he.FAILED_PRECONDITION,bb);return r(f)}).next(v=>this.wi(f).next(()=>v)):this.Vi(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}Vi(e){return uw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(he.FAILED_PRECONDITION,Lx)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return uw(e).put("owner",t)}static C(){return Rs.C()}_i(e){const t=uw(e);return t.get("owner").next(r=>this.mi(r)?(Ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(rr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return rr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){rr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function uw(n){return Ui(n,"owner")}function Xb(n){return Ui(n,"clientMetadata")}function Vx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Bx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=en(),i=en();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Bx(e,t.fromCache,r,i)}}class zk{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(SO(t))return le.resolve(null);let r=Ns(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Fb(t,null,"F"),r=Ns(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=en(...a);return this.Ni.getDocuments(e,l).next(f=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.Fi(t,f);return this.$i(t,v,l,m.readTime)?this.ki(e,Fb(t,null,"F")):this.Bi(e,v,t,m)}))})))}Oi(e,t,r,i){return SO(t)||i.isEqual(Dt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Mi(e,t):(k0()<=Ki.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),vx(t)),this.Bi(e,l,t,sx(i,-1)))})}Fi(e,t){let r=new On(MO(e));return t.forEach((i,a)=>{q0(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return k0()<=Ki.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",vx(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ms.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class RB{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.yt=i,this.qi=new Ur(Gt),this.Ui=new bh(a=>Lp(a),G0),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hk(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function qk(n,e,t,r){return new RB(n,e,t,r)}function Wk(n,e){return jx.apply(this,arguments)}function jx(){return jx=(0,fe.Z)(function*(n,e){const t=et(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],f=[];let m=en();for(const v of i){l.push(v.batchId);for(const I of v.mutations)m=m.add(I.key)}for(const v of a){f.push(v.batchId);for(const I of v.mutations)m=m.add(I.key)}return t.localDocuments.getDocuments(r,m).next(v=>({ji:v,removedBatchIds:l,addedBatchIds:f}))})})}),jx.apply(this,arguments)}function PB(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,f,m,v){const I=m.batch,S=I.keys();let P=le.resolve();return S.forEach(V=>{P=P.next(()=>v.getEntry(f,V)).next(z=>{const ce=m.docVersions.get(V);ht(null!==ce),z.version.compareTo(ce)<0&&(I.applyToRemoteDocument(z,m),z.isValidDocument()&&(z.setReadTime(m.commitVersion),v.addEntry(z)))})}),P.next(()=>l.mutationQueue.removeMutationBatch(f,I))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=en();for(let m=0;m<l.mutationResults.length;++m)l.mutationResults[m].transformResults.length>0&&(f=f.add(l.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Zk(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function NB(n,e){const t=et(n),r=e.snapshotVersion;let i=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.qi;const f=[];e.targetChanges.forEach((I,S)=>{const P=i.get(S);if(!P)return;f.push(t.Cs.removeMatchingKeys(a,I.removedDocuments,S).next(()=>t.Cs.addMatchingKeys(a,I.addedDocuments,S)));let V=P.withSequenceNumber(a.currentSequenceNumber);var z,ce,ve;e.targetMismatches.has(S)?V=V.withResumeToken(Sr.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):I.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(I.resumeToken,r)),i=i.insert(S,V),ce=V,ve=I,(0===(z=P).resumeToken.approximateByteSize()||ce.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8||ve.addedDocuments.size+ve.modifiedDocuments.size+ve.removedDocuments.size>0)&&f.push(t.Cs.updateTargetData(a,V))});let m=oo(),v=en();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,I))}),f.push(Kk(a,l,e.documentUpdates).next(I=>{m=I.Wi,v=I.zi})),!r.isEqual(Dt.min())){const I=t.Cs.getLastRemoteSnapshotVersion(a).next(S=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(I)}return le.waitFor(f).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,v)).next(()=>m)}).then(a=>(t.qi=i,a))}function Kk(n,e,t){let r=en(),i=en();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=oo();return t.forEach((f,m)=>{const v=a.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(Dt.min())?(e.removeEntry(f,m.readTime),l=l.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),l=l.insert(f,m)):Ue("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)}),{Wi:l,zi:i}})}function OB(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function N_(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,le.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new Dh(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function O_(n,e,t){return Hx.apply(this,arguments)}function Hx(){return Hx=(0,fe.Z)(function*(n,e,t){const r=et(n),i=r.qi.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!ga(l))throw l;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}),Hx.apply(this,arguments)}function Jb(n,e,t){const r=et(n);let i=Dt.min(),a=en();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,m,v){const I=et(f),S=I.Ui.get(v);return void 0!==S?le.resolve(I.qi.get(S)):I.Cs.getTargetData(m,v)}(r,l,Ns(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,f.targetId).next(m=>{a=m})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Dt.min(),t?a:en())).next(f=>(Xk(r,xO(e),f),{documents:f,Hi:a})))}function Yk(n,e){const t=et(n),r=et(t.Cs),i=t.qi.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ne(a,e).next(l=>l?l.target:null))}function Qk(n,e){const t=et(n),r=t.Ki.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,sx(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Xk(t,e,i),i))}function Xk(n,e,t){let r=n.Ki.get(e)||Dt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function $x(){return $x=(0,fe.Z)(function*(n,e,t,r){const i=et(n);let a=en(),l=oo();for(const v of t){const I=e.Ji(v.metadata.name);v.document&&(a=a.add(I));const S=e.Yi(v);S.setReadTime(e.Xi(v.metadata.readTime)),l=l.insert(I,S)}const f=i.Gi.newChangeBuffer({trackRemovals:!0}),m=yield N_(i,(v=r,Ns(I_(cn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>Kk(v,f,l).next(I=>(f.apply(v),I)).next(I=>i.Cs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Cs.addMatchingKeys(v,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,I.Wi,I.zi)).next(()=>I.Wi)))}),$x.apply(this,arguments)}function FB(n,e){return Gx.apply(this,arguments)}function Gx(){return Gx=(0,fe.Z)(function*(n,e,t=en()){const r=yield N_(n,Ns(xx(e.bundledQuery))),i=et(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Jr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const f=r.withResumeToken(Sr.EMPTY_BYTE_STRING,l);return i.qi=i.qi.insert(f.targetId,f),i.Cs.updateTargetData(a,f).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),Gx.apply(this,arguments)}function Jk(n,e){return`firestore_clients_${n}_${e}`}function e1(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function zx(n,e){return`firestore_targets_${n}_${e}`}class eD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new ke(i.error.code,i.error.message))),l?new eD(e,t,i.state,a):(rr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new ke(r.error.code,r.error.message))),a?new lw(e,r.state,i):(rr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Bb();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=xb(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new tD(e,a):(rr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class qx{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new qx(t.clientId,t.onlineState):(rr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Wx{constructor(){this.activeTargetIds=Bb()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Zx{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Ur(Gt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=Jk(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Wx),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,fe.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(Jk(e.persistenceKey,i));if(a){const l=tD.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(zx(this.persistenceKey,e));if(r){const i=lw.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(zx(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ue("SharedClientState","READ",e,t),t}setItem(e,t){Ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void rr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,fe.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=Ps.at;if(null!=a)try{const f=JSON.parse(a);ht("number"==typeof f),l=f}catch(f){rr("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==Ps.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new eD(this.currentUser,e,t,r),a=e1(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=e1(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=zx(this.persistenceKey,e),a=new lw(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return tD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return eD.Zi(new hi(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return lw.Zi(i,t)}yr(e){return qx.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,fe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],f=[];return a.forEach(m=>{i.has(m)||l.push(m)}),i.forEach(m=>{a.has(m)||f.push(m)}),this.syncEngine.Br(l,f).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Bb();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class t1{constructor(){this.Lr=new Wx,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Wx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class LB{Ur(e){}shutdown(){}}class n1{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const UB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class VB{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class BB extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const l=this.ho(e,t);Ue("RestConnection","Sending: ",l,r);const f={};return this.lo(f,i,a),this.fo(e,l,f,r).then(m=>(Ue("RestConnection","Received: ",m),m),m=>{throw cs("RestConnection",`${e} failed with error: `,m,"url: ",l,"request:",r),m})}_o(e,t,r,i,a,l){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Sc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${UB[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const f=new _b;f.setWithCredentials(!0),f.listenOnce(XA.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case ls.NO_ERROR:const v=f.getResponseJson();Ue("Connection","XHR received:",JSON.stringify(v)),a(v);break;case ls.TIMEOUT:Ue("Connection",'RPC "'+e+'" timed out'),l(new ke(he.DEADLINE_EXCEEDED,"Request time out"));break;case ls.HTTP_ERROR:const I=f.getStatus();if(Ue("Connection",'RPC "'+e+'" failed with status:',I,"response text:",f.getResponseText()),I>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const P=S?.error;if(P&&P.status&&P.message){const V=function(z){const ce=z.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(ce)>=0?ce:he.UNKNOWN}(P.status);l(new ke(V,P.message))}else l(new ke(he.UNKNOWN,"Server responded with status "+f.getStatus()))}else l(new ke(he.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{Ue("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);f.send(t,"POST",m,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=QA(),l=gO(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new JA({})),this.lo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const m=i.join("");Ue("Connection","Creating WebChannel: "+m,f);const v=a.createWebChannel(m,f);let I=!1,S=!1;const P=new VB({Hr:z=>{S?Ue("Connection","Not sending because WebChannel is closed:",z):(I||(Ue("Connection","Opening WebChannel transport."),v.open(),I=!0),Ue("Connection","WebChannel sending:",z),v.send(z))},Jr:()=>v.close()}),V=(z,ce,ve)=>{z.listen(ce,tt=>{try{ve(tt)}catch(wt){setTimeout(()=>{throw wt},0)}})};return V(v,yh.EventType.OPEN,()=>{S||Ue("Connection","WebChannel transport opened.")}),V(v,yh.EventType.CLOSE,()=>{S||(S=!0,Ue("Connection","WebChannel transport closed"),P.io())}),V(v,yh.EventType.ERROR,z=>{S||(S=!0,cs("Connection","WebChannel transport errored:",z),P.io(new ke(he.UNAVAILABLE,"The operation could not be completed")))}),V(v,yh.EventType.MESSAGE,z=>{var ce;if(!S){const ve=z.data[0];ht(!!ve);const wt=ve.error||(null===(ce=ve[0])||void 0===ce?void 0:ce.error);if(wt){Ue("Connection","WebChannel received error:",wt);const ft=wt.status;let mt=function(Wt){const Rr=fi[Wt];if(void 0!==Rr)return zO(Rr)}(ft),Ft=wt.message;void 0===mt&&(mt=he.INTERNAL,Ft="Unknown error status: "+ft+" with message "+wt.message),S=!0,P.io(new ke(mt,Ft)),v.close()}else Ue("Connection","WebChannel received:",ve),P.ro(ve)}}),V(l,N0.STAT_EVENT,z=>{z.stat===mb.PROXY?Ue("Connection","Detected buffering proxy"):z.stat===mb.NOPROXY&&Ue("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.so()},0),P}}function r1(){return typeof window<"u"?window:null}function nD(){return typeof document<"u"?document:null}function cw(n){return new R2(n,!0)}class Kx{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class i1{constructor(e,t,r,i,a,l,f,m){this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Kx(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,fe.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,fe.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,fe.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(rr(t.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new ke(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,fe.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jB extends i1{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.yt=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function O2(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:dt(),i=e.targetChange.targetIds||[],a=function(m,v){return m.wt?(ht(void 0===v||"string"==typeof v),Sr.fromBase64String(v||"")):(ht(void 0===v||v instanceof Uint8Array),Sr.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(m){const v=void 0===m.code?he.UNKNOWN:zO(m.code);return new ke(v,m.message||"")}(l);t=new YO(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=wl(n,r.document.name),a=Jr(r.document.updateTime),l=r.document.createTime?Jr(r.document.createTime):Dt.min(),f=new Ji({mapValue:{fields:r.document.fields}}),m=ir.newFoundDocument(i,a,l,f);t=new jb(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=wl(n,r.document),a=r.readTime?Jr(r.readTime):Dt.min(),l=ir.newNoDocument(i,a);t=new jb([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=wl(n,r.document);t=new jb([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return dt();{const r=e.filter,a=new C2(r.count||0);t=new KO(r.targetId,a)}}var m;return t}(this.yt,e),r=function(i){if(!("targetChange"in i))return Dt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Dt.min():a.readTime?Jr(a.readTime):Dt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=ew(this.yt),t.addTarget=function(i,a){let l;const f=a.target;return l=Nb(f)?{documents:ok(i,f)}:{query:bx(i,f)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=ek(i,a.resumeToken):a.snapshotVersion.compareTo(Dt.min())>0&&(l.readTime=A_(i,a.snapshotVersion.toTimestamp())),l}(this.yt,e);const r=function F2(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=ew(this.yt),t.removeTarget=e,this.Bo(t)}}class HB extends i1{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.yt=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(ht(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function k2(n,e){return n&&n.length>0?(ht(void 0!==e),n.map(t=>function(r,i){let a=Jr(r.updateTime?r.updateTime:i);return a.isEqual(Dt.min())&&(a=Jr(i)),new v2(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Jr(e.commitTime);return this.listener.Zo(r,t)}return ht(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=ew(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>tw(this.yt,r))};this.Bo(t)}}class $B extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new ke(he.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ke(he.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection._o(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ke(he.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class zB{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(rr(t),this.ou=!1):Ue("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class qB{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur(f=>{r.enqueueAndForget((0,fe.Z)(function*(){var m;Fc(l)&&(Ue("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,fe.Z)(function*(v){const I=et(v);I._u.add(4),yield k_(I),I.gu.set("Unknown"),I._u.delete(4),yield dw(I)}),function(v){return m.apply(this,arguments)})(l))}))}),this.gu=new zB(r,i)}}function dw(n){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,fe.Z)(function*(n){if(Fc(n))for(const e of n.wu)yield e(!0)}),Qx.apply(this,arguments)}function k_(n){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,fe.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Xx.apply(this,arguments)}function rD(n,e){const t=et(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),tM(t)?eM(t):L_(t).ko()&&Jx(t,e))}function hw(n,e){const t=et(n),r=L_(t);t.du.delete(e),r.ko()&&s1(t,e),0===t.du.size&&(r.ko()?r.Fo():Fc(t)&&t.gu.set("Unknown"))}function Jx(n,e){n.yu.Ot(e.targetId),L_(n).zo(e)}function s1(n,e){n.yu.Ot(e),L_(n).Ho(e)}function eM(n){n.yu=new S2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),L_(n).start(),n.gu.uu()}function tM(n){return Fc(n)&&!L_(n).No()&&n.du.size>0}function Fc(n){return 0===et(n)._u.size}function o1(n){n.yu=void 0}function WB(n){return nM.apply(this,arguments)}function nM(){return nM=(0,fe.Z)(function*(n){n.du.forEach((e,t)=>{Jx(n,e)})}),nM.apply(this,arguments)}function ZB(n,e){return rM.apply(this,arguments)}function rM(){return rM=(0,fe.Z)(function*(n,e){o1(n),tM(n)?(n.gu.hu(e),eM(n)):n.gu.set("Unknown")}),rM.apply(this,arguments)}function KB(n,e,t){return iM.apply(this,arguments)}function iM(){return iM=(0,fe.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof YO&&2===e.state&&e.cause)try{yield(r=(0,fe.Z)(function*(i,a){const l=a.cause;for(const f of a.targetIds)i.du.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.du.delete(f),i.yu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield iD(n,r)}else if(e instanceof jb?n.yu.Kt(e):e instanceof KO?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(Dt.min()))try{const r=yield Zk(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.yu.Zt(a);return l.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.du.get(m);v&&i.du.set(m,v.withResumeToken(f.resumeToken,a))}}),l.targetMismatches.forEach(f=>{const m=i.du.get(f);if(!m)return;i.du.set(f,m.withResumeToken(Sr.EMPTY_BYTE_STRING,m.snapshotVersion)),s1(i,f);const v=new Dh(m.target,f,1,m.sequenceNumber);Jx(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ue("RemoteStore","Failed to raise snapshot:",r),yield iD(n,r)}var r}),iM.apply(this,arguments)}function iD(n,e,t){return sM.apply(this,arguments)}function sM(){return sM=(0,fe.Z)(function*(n,e,t){if(!ga(e))throw e;n._u.add(1),yield k_(n),n.gu.set("Offline"),t||(t=()=>Zk(n.localStore)),n.asyncQueue.enqueueRetryable((0,fe.Z)(function*(){Ue("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield dw(n)}))}),sM.apply(this,arguments)}function a1(n,e){return e().catch(t=>iD(n,t,e))}function F_(n){return oM.apply(this,arguments)}function oM(){return oM=(0,fe.Z)(function*(n){const e=et(n),t=xh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;YB(e);)try{const i=yield OB(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,QB(e,i)}catch(i){yield iD(e,i)}u1(e)&&l1(e)}),oM.apply(this,arguments)}function YB(n){return Fc(n)&&n.fu.length<10}function QB(n,e){n.fu.push(e);const t=xh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function u1(n){return Fc(n)&&!xh(n).No()&&n.fu.length>0}function l1(n){xh(n).start()}function XB(n){return aM.apply(this,arguments)}function aM(){return aM=(0,fe.Z)(function*(n){xh(n).eu()}),aM.apply(this,arguments)}function JB(n){return uM.apply(this,arguments)}function uM(){return uM=(0,fe.Z)(function*(n){const e=xh(n);for(const t of n.fu)e.Xo(t.mutations)}),uM.apply(this,arguments)}function ej(n,e,t){return lM.apply(this,arguments)}function lM(){return lM=(0,fe.Z)(function*(n,e,t){const r=n.fu.shift(),i=Sx.from(r,e,t);yield a1(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield F_(n)}),lM.apply(this,arguments)}function tj(n,e){return cM.apply(this,arguments)}function cM(){return cM=(0,fe.Z)(function*(n,e){var t;e&&xh(n).Yo&&(yield(t=(0,fe.Z)(function*(r,i){if(GO(a=i.code)&&a!==he.ABORTED){const l=r.fu.shift();xh(r).Mo(),yield a1(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield F_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),u1(n)&&l1(n)}),cM.apply(this,arguments)}function c1(n,e){return dM.apply(this,arguments)}function dM(){return dM=(0,fe.Z)(function*(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const r=Fc(t);t._u.add(3),yield k_(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield dw(t)}),dM.apply(this,arguments)}function hM(n,e){return fM.apply(this,arguments)}function fM(){return fM=(0,fe.Z)(function*(n,e){const t=et(n);e?(t._u.delete(2),yield dw(t)):e||(t._u.add(2),yield k_(t),t.gu.set("Unknown"))}),fM.apply(this,arguments)}function L_(n){return n.pu||(n.pu=function(e,t,r){const i=et(e);return i.su(),new jB(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:WB.bind(null,n),Zr:ZB.bind(null,n),Wo:KB.bind(null,n)}),n.wu.push(function(){var e=(0,fe.Z)(function*(t){t?(n.pu.Mo(),tM(n)?eM(n):n.gu.set("Unknown")):(yield n.pu.stop(),o1(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function xh(n){return n.Iu||(n.Iu=function(e,t,r){const i=et(e);return i.su(),new HB(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:XB.bind(null,n),Zr:tj.bind(null,n),tu:JB.bind(null,n),Zo:ej.bind(null,n)}),n.wu.push(function(){var e=(0,fe.Z)(function*(t){t?(n.Iu.Mo(),yield F_(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ue("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class pM{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,f=new pM(e,t,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function U_(n,e){if(rr("AsyncQueue",`${e}: ${n}`),ga(n))return new ke(he.UNAVAILABLE,`${e}: ${n}`);throw n}class V_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=K0(),this.sortedSet=new Ur(this.comparator)}static emptySet(e){return new V_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof V_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new V_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class d1{constructor(){this.Tu=new Ur(Xe.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):dt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class B_{constructor(e,t,r,i,a,l,f,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new B_(e,t,V_.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&z0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class nj{constructor(){this.Au=void 0,this.listeners=[]}}class rj{constructor(){this.queries=new bh(e=>AO(e),z0),this.onlineState="Unknown",this.Ru=new Set}}function gM(n,e){return mM.apply(this,arguments)}function mM(){return mM=(0,fe.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new nj),i)try{a.Au=yield t.onListen(r)}catch(l){const f=U_(l,`Initialization of query '${vx(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&vM(t)}),mM.apply(this,arguments)}function _M(n,e){return yM.apply(this,arguments)}function yM(){return yM=(0,fe.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),yM.apply(this,arguments)}function ij(n,e){const t=et(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.Pu(i)&&(r=!0);l.Au=i}}r&&vM(t)}function sj(n,e,t){const r=et(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function vM(n){n.Ru.forEach(e=>{e.next()})}class wM{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new B_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=B_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class oj{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class h1{constructor(e){this.yt=e}Ji(e){return wl(this.yt,e)}Yi(e){return e.metadata.exists?sk(this.yt,e.document,!1):ir.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Jr(e)}}class aj{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=f1(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=cn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new h1(this.yt);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||en()).add(a);t.set(l,f)}}return t}complete(){var e=this;return(0,fe.Z)(function*(){const t=yield function kB(n,e,t,r){return $x.apply(this,arguments)}(e.localStore,new h1(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield FB(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function f1(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class p1{constructor(e){this.key=e}}class g1{constructor(e){this.key=e}}class m1{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=en(),this.mutatedKeys=en(),this.Gu=MO(e),this.Qu=new V_(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new d1,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,S)=>{const P=i.get(I),V=q0(this.query,S)?S:null,z=!!P&&this.mutatedKeys.has(P.key),ce=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let ve=!1;P&&V?P.data.isEqual(V.data)?z!==ce&&(r.track({type:3,doc:V}),ve=!0):this.Hu(P,V)||(r.track({type:2,doc:V}),ve=!0,(m&&this.Gu(V,m)>0||v&&this.Gu(V,v)<0)&&(f=!0)):!P&&V?(r.track({type:0,doc:V}),ve=!0):P&&!V&&(r.track({type:1,doc:P}),ve=!0,(m||v)&&(f=!0)),ve&&(V?(l=l.add(V),a=ce?a.add(I):a.delete(I)):(l=l.delete(I),a=a.delete(I)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const I="F"===this.query.limitType?l.last():l.first();l=l.delete(I.key),a=a.delete(I.key),r.track({type:1,doc:I})}return{Qu:l,zu:r,$i:f,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((v,I)=>function(S,P){const V=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return V(S)-V(P)}(v.type,I.type)||this.Gu(v.doc,I.doc)),this.Ju(r);const l=t?this.Yu():[],f=0===this.Ku.size&&this.current?1:0,m=f!==this.Uu;return this.Uu=f,0!==a.length||m?{snapshot:new B_(this.query,e.Qu,i,a,e.mutatedKeys,0===f,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new d1,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=en(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new g1(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new p1(r))}),t}tc(e){this.qu=e.Hi,this.Ku=en();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return B_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class uj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class lj{constructor(e){this.key=e,this.nc=!1}}class cj{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new bh(f=>AO(f),z0),this.rc=new Map,this.oc=new Set,this.uc=new Ur(Xe.comparator),this.cc=new Map,this.ac=new Fx,this.hc={},this.lc=new Map,this.fc=qp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function dj(n,e){return EM.apply(this,arguments)}function EM(){return EM=(0,fe.Z)(function*(n,e){const t=GM(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const l=yield N_(t.localStore,Ns(e));t.isPrimaryClient&&rD(t.remoteStore,l);const f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield CM(t,e,r,"current"===f,l.resumeToken)}return i}),EM.apply(this,arguments)}function CM(n,e,t,r,i){return IM.apply(this,arguments)}function IM(){return IM=(0,fe.Z)(function*(n,e,t,r,i){n._c=(S,P,V)=>{return(z=(0,fe.Z)(function*(ce,ve,tt,wt){let ft=ve.view.Wu(tt);ft.$i&&(ft=yield Jb(ce.localStore,ve.query,!1).then(({documents:Wt})=>ve.view.Wu(Wt,ft)));const mt=wt&&wt.targetChanges.get(ve.targetId),Ft=ve.view.applyChanges(ft,ce.isPrimaryClient,mt);return NM(ce,ve.targetId,Ft.Xu),Ft.snapshot}),function(ce,ve,tt,wt){return z.apply(this,arguments)})(n,S,P,V);var z};const a=yield Jb(n.localStore,e,!0),l=new m1(e,a.Hi),f=l.Wu(a.documents),m=X0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=l.applyChanges(f,n.isPrimaryClient,m);NM(n,t,v.Xu);const I=new uj(e,t,l);return n.ic.set(e,I),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),v.snapshot}),IM.apply(this,arguments)}function hj(n,e){return bM.apply(this,arguments)}function bM(){return bM=(0,fe.Z)(function*(n,e){const t=et(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!z0(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield O_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),hw(t.remoteStore,r.targetId),j_(t,r.targetId)}).catch(tu))):(j_(t,r.targetId),yield O_(t.localStore,r.targetId,!0))}),bM.apply(this,arguments)}function DM(){return DM=(0,fe.Z)(function*(n,e,t){const r=zM(n);try{const i=yield function(a,l){const f=et(a),m=Rn.now(),v=l.reduce((P,V)=>P.add(V.key),en());let I,S;return f.persistence.runTransaction("Locally write mutations","readwrite",P=>{let V=oo(),z=en();return f.Gi.getEntries(P,v).next(ce=>{V=ce,V.forEach((ve,tt)=>{tt.isValidDocument()||(z=z.add(ve))})}).next(()=>f.localDocuments.getOverlayedDocuments(P,V)).next(ce=>{I=ce;const ve=[];for(const tt of l){const wt=E2(tt,I.get(tt.key).overlayedDocument);null!=wt&&ve.push(new kc(tt.key,wt,IO(wt.value.mapValue),hr.exists(!0)))}return f.mutationQueue.addMutationBatch(P,m,ve,l)}).next(ce=>{S=ce;const ve=ce.applyToLocalDocumentSet(I,z);return f.documentOverlayCache.saveOverlays(P,ce.batchId,ve)})}).then(()=>({batchId:S.batchId,changes:WO(I)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,f){let m=a.hc[a.currentUser.toKey()];m||(m=new Ur(Gt)),m=m.insert(l,f),a.hc[a.currentUser.toKey()]=m}(r,i.batchId,t),yield Lc(r,i.changes),yield F_(r.remoteStore)}catch(i){const a=U_(i,"Failed to persist write");t.reject(a)}}),DM.apply(this,arguments)}function _1(n,e){return TM.apply(this,arguments)}function TM(){return TM=(0,fe.Z)(function*(n,e){const t=et(n);try{const r=yield NB(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.cc.get(a);l&&(ht(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?ht(l.nc):i.removedDocuments.size>0&&(ht(l.nc),l.nc=!1))}),yield Lc(t,r,e)}catch(r){yield tu(r)}}),TM.apply(this,arguments)}function y1(n,e,t){const r=et(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,l)=>{const f=l.view.bu(e);f.snapshot&&i.push(f.snapshot)}),function(a,l){const f=et(a);f.onlineState=l;let m=!1;f.queries.forEach((v,I)=>{for(const S of I.listeners)S.bu(l)&&(m=!0)}),m&&vM(f)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function pj(n,e,t){return SM.apply(this,arguments)}function SM(){return SM=(0,fe.Z)(function*(n,e,t){const r=et(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let l=new Ur(Xe.comparator);l=l.insert(a,ir.newNoDocument(a,Dt.min()));const f=en().add(a),m=new Q0(Dt.min(),new Map,new On(Gt),l,f);yield _1(r,m),r.uc=r.uc.remove(a),r.cc.delete(e),OM(r)}else yield O_(r.localStore,e,!1).then(()=>j_(r,e,t)).catch(tu)}),SM.apply(this,arguments)}function gj(n,e){return AM.apply(this,arguments)}function AM(){return AM=(0,fe.Z)(function*(n,e){const t=et(n),r=e.batch.batchId;try{const i=yield PB(t.localStore,e);PM(t,r,null),RM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Lc(t,i)}catch(i){yield tu(i)}}),AM.apply(this,arguments)}function mj(n,e,t){return xM.apply(this,arguments)}function xM(){return xM=(0,fe.Z)(function*(n,e,t){const r=et(n);try{const i=yield function(a,l){const f=et(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,l).next(I=>(ht(null!==I),v=I.keys(),f.mutationQueue.removeMutationBatch(m,I))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);PM(r,e,t),RM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Lc(r,i)}catch(i){yield tu(i)}}),xM.apply(this,arguments)}function MM(){return MM=(0,fe.Z)(function*(n,e){const t=et(n);Fc(t.remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=et(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=U_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),MM.apply(this,arguments)}function RM(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function PM(n,e,t){const r=et(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function j_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||v1(n,r)})}function v1(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(hw(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),OM(n))}function NM(n,e,t){for(const r of t)r instanceof p1?(n.ac.addReference(r.key,e),yj(n,r)):r instanceof g1?(Ue("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||v1(n,r.key)):dt()}function yj(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ue("SyncEngine","New document in limbo: "+t),n.oc.add(r),OM(n))}function OM(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Xe(cn.fromString(e)),r=n.fc.next();n.cc.set(r,new lj(t)),n.uc=n.uc.insert(t,r),rD(n.remoteStore,new Dh(Ns(I_(t.path)),r,2,Ps.at))}}function Lc(n,e,t){return kM.apply(this,arguments)}function kM(){return kM=(0,fe.Z)(function*(n,e,t){const r=et(n),i=[],a=[],l=[];var f;r.ic.isEmpty()||(r.ic.forEach((f,m)=>{l.push(r._c(m,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const I=Bx.Ci(m.targetId,v);a.push(I)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(f=(0,fe.Z)(function*(m,v){const I=et(m);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>le.forEach(v,P=>le.forEach(P.Si,V=>I.persistence.referenceDelegate.addReference(S,P.targetId,V)).next(()=>le.forEach(P.Di,V=>I.persistence.referenceDelegate.removeReference(S,P.targetId,V)))))}catch(S){if(!ga(S))throw S;Ue("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const P=S.targetId;if(!S.fromCache){const V=I.qi.get(P),ce=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);I.qi=I.qi.insert(P,ce)}}}),function(m,v){return f.apply(this,arguments)})(r.localStore,a))}),kM.apply(this,arguments)}function vj(n,e){return FM.apply(this,arguments)}function FM(){return FM=(0,fe.Z)(function*(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const r=yield Wk(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(f=>{f.reject(new ke(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Lc(t,r.ji)}var i}),FM.apply(this,arguments)}function wj(n,e){const t=et(n),r=t.cc.get(e);if(r&&r.nc)return en().add(r.key);{let i=en();const a=t.rc.get(e);if(!a)return i;for(const l of a){const f=t.ic.get(l);i=i.unionWith(f.view.ju)}return i}}function Ej(n,e){return LM.apply(this,arguments)}function LM(){return LM=(0,fe.Z)(function*(n,e){const t=et(n),r=yield Jb(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&NM(t,e.targetId,i.Xu),i}),LM.apply(this,arguments)}function Cj(n,e){return UM.apply(this,arguments)}function UM(){return UM=(0,fe.Z)(function*(n,e){const t=et(n);return Qk(t.localStore,e).then(r=>Lc(t,r))}),UM.apply(this,arguments)}function Ij(n,e,t,r){return VM.apply(this,arguments)}function VM(){return VM=(0,fe.Z)(function*(n,e,t,r){const i=et(n),a=yield function(l,f){const m=et(l),v=et(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",I=>v.Tn(I,f).next(S=>S?m.localDocuments.getDocuments(I,S):le.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield F_(i.remoteStore):"acknowledged"===t||"rejected"===t?(PM(i,e,r||null),RM(i,e),f=e,et(et(i.localStore).mutationQueue).An(f)):dt(),yield Lc(i,a)):Ue("SyncEngine","Cannot apply mutation batch with id: "+e)}),VM.apply(this,arguments)}function BM(){return BM=(0,fe.Z)(function*(n,e){const t=et(n);if(GM(t),zM(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield w1(t,r.toArray());t.dc=!0,yield hM(t.remoteStore,!0);for(const a of i)rD(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(j_(t,l),O_(t.localStore,l,!0))),hw(t.remoteStore,l)}),yield i,yield w1(t,r),function(a){const l=et(a);l.cc.forEach((f,m)=>{hw(l.remoteStore,m)}),l.ac.fs(),l.cc=new Map,l.uc=new Ur(Xe.comparator)}(t),t.dc=!1,yield hM(t.remoteStore,!1)}}),BM.apply(this,arguments)}function w1(n,e,t){return jM.apply(this,arguments)}function jM(){return jM=(0,fe.Z)(function*(n,e,t){const r=et(n),i=[],a=[];for(const l of e){let f;const m=r.rc.get(l);if(m&&0!==m.length){f=yield N_(r.localStore,Ns(m[0]));for(const v of m){const I=r.ic.get(v),S=yield Ej(r,I);S.snapshot&&a.push(S.snapshot)}}else{const v=yield Yk(r.localStore,l);f=yield N_(r.localStore,v),yield CM(r,E1(v),l,!1,f.resumeToken)}i.push(f)}return r.sc.Wo(a),i}),jM.apply(this,arguments)}function E1(n){return TO(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Dj(n){const e=et(n);return et(et(e.localStore).persistence).vi()}function Tj(n,e,t,r){return HM.apply(this,arguments)}function HM(){return HM=(0,fe.Z)(function*(n,e,t,r){const i=et(n);if(i.dc)return void Ue("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield Qk(i.localStore,xO(a[0])),f=Q0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Sr.EMPTY_BYTE_STRING);yield Lc(i,l,f);break}case"rejected":yield O_(i.localStore,e,!0),j_(i,e,r);break;default:dt()}}),HM.apply(this,arguments)}function Sj(n,e,t){return $M.apply(this,arguments)}function $M(){return $M=(0,fe.Z)(function*(n,e,t){const r=GM(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Ue("SyncEngine","Adding an already active target "+i);continue}const a=yield Yk(r.localStore,i),l=yield N_(r.localStore,a);yield CM(r,E1(a),l.targetId,!1,l.resumeToken),rD(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield O_(r.localStore,i,!1).then(()=>{hw(r.remoteStore,i),j_(r,i)}).catch(tu))}}),$M.apply(this,arguments)}function GM(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pj.bind(null,e),e.sc.Wo=ij.bind(null,e.eventManager),e.sc.wc=sj.bind(null,e.eventManager),e}function zM(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mj.bind(null,e),e}class C1{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,fe.Z)(function*(){t.yt=cw(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return qk(this.persistence,new zk,e.initialUser,this.yt)}yc(e){return new $k(Qb.Bs,this.yt)}gc(e){return new t1}terminate(){var e=this;return(0,fe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class I1 extends C1{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield zM(r.Ac.syncEngine),yield F_(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return qk(this.persistence,new zk,e.initialUser,this.yt)}Tc(e,t){return new _B(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new Sb(t,this.persistence);return new vO(e.asyncQueue,r)}yc(e){const t=Vx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ao.withCacheSize(this.cacheSizeBytes):ao.DEFAULT;return new Ux(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,r1(),nD(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new t1}}class xj extends I1{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof Zx&&(r.sharedClientState.syncEngine={Fr:Ij.bind(null,i),$r:Tj.bind(null,i),Br:Sj.bind(null,i),vi:Dj.bind(null,i),Mr:Cj.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,fe.Z)(function*(l){yield function bj(n,e){return BM.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}gc(e){const t=r1();if(!Zx.C(t))throw new ke(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Vx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Zx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class qM{initialize(e,t){var r=this;return(0,fe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>y1(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=vj.bind(null,r.syncEngine),yield hM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new rj}createDatastore(e){const t=cw(e.databaseInfo.databaseId),r=new BB(e.databaseInfo);return new $B(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>y1(this.syncEngine,f,0),l=n1.C()?new n1:new LB,new qB(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,f,m,v){const I=new cj(r,i,a,l,f,m);return v&&(I.dc=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,fe.Z)(function*(t){const r=et(t);Ue("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield k_(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function WM(n,e,t){if(!t)throw new ke(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function b1(n,e,t,r){if(!0===e&&!0===r)throw new ke(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function D1(n){if(!Xe.isDocumentKey(n))throw new ke(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function T1(n){if(Xe.isDocumentKey(n))throw new ke(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sD(n);throw new ke(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function S1(n,e){if(e<=0)throw new ke(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const A1=new Map;class x1{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,b1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ke(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x1(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new wb;switch(t.type){case"gapi":return new Cb(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ke(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=A1.get(e);t&&(Ue("ComponentProvider","Removing Datastore"),A1.delete(e),t.terminate())}(this),Promise.resolve()}}class sr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sr(this.firestore,e,this._key)}}class es{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new es(this.firestore,e,this._query)}}class Cl extends es{constructor(e,t,r){super(e,t,I_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sr(this.firestore,null,new Xe(e))}withConverter(e){return new Cl(this.firestore,e,this._path)}}function R1(n,e,...t){if(n=(0,F.m9)(n),WM("collection","path",e),n instanceof fw){const r=cn.fromString(e,...t);return T1(r),new Cl(n,null,r)}{if(!(n instanceof sr||n instanceof Cl))throw new ke(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return T1(r),new Cl(n.firestore,null,r)}}function oD(n,e,...t){if(n=(0,F.m9)(n),1===arguments.length&&(e=L0.R()),WM("doc","path",e),n instanceof fw){const r=cn.fromString(e,...t);return D1(r),new sr(n,null,new Xe(r))}{if(!(n instanceof sr||n instanceof Cl))throw new ke(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return D1(r),new sr(n.firestore,n instanceof Cl?n.converter:null,new Xe(r))}}function P1(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),(n instanceof sr||n instanceof Cl)&&(e instanceof sr||e instanceof Cl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ZM(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),n instanceof es&&e instanceof es&&n.firestore===e.firestore&&z0(n._query,e._query)&&n.converter===e.converter}function N1(n,e=10240){let t=0;return{read:()=>(0,fe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,fe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class aD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Rj{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Xr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,fe.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,fe.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new oj(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,fe.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,fe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Oj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,fe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,fe.Z)(function*(a,l){const f=et(a),m=ew(f.yt)+"/documents",v={documents:l.map(V=>J0(f.yt,V))},I=yield f._o("BatchGetDocuments",m,v,l.length),S=new Map;I.forEach(V=>{const z=function N2(n,e){return"found"in e?function(t,r){ht(!!r.found);const i=wl(t,r.found.name),a=Jr(r.found.updateTime),l=r.found.createTime?Jr(r.found.createTime):Dt.min(),f=new Ji({mapValue:{fields:r.found.fields}});return ir.newFoundDocument(i,a,l,f)}(n,e):"missing"in e?function(t,r){ht(!!r.missing),ht(!!r.readTime);const i=wl(t,r.missing),a=Jr(r.readTime);return ir.newNoDocument(i,a)}(n,e):dt()}(f.yt,V);S.set(z.key.toString(),z)});const P=[];return l.forEach(V=>{const z=S.get(V.toString());ht(!!z),P.push(z)}),P}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new S_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,fe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Xe.fromPath(i);e.mutations.push(new wx(a,e.precondition(a)))}),yield(r=(0,fe.Z)(function*(i,a){const l=et(i),f=ew(l.yt)+"/documents",m={writes:a.map(v=>tw(l.yt,v))};yield l.ao("Commit",f,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ke(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?hr.exists(!1):hr.updateTime(t):hr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new ke(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hr.updateTime(t)}return hr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class kj{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new Kx(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,fe.Z)(function*(){const t=new Oj(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Ch(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!GO(t)}return!1}}class Fj{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=hi.UNAUTHENTICATED,this.clientId=L0.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,fe.Z)(function*(f){Ue("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ue("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,fe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=U_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function O1(n,e){return KM.apply(this,arguments)}function KM(){return KM=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,fe.Z)(function*(a){r.isEqual(a)||(yield Wk(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),KM.apply(this,arguments)}function k1(n,e){return YM.apply(this,arguments)}function YM(){return YM=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield QM(n);Ue("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>c1(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>c1(e.remoteStore,a)),n.onlineComponents=e}),YM.apply(this,arguments)}function QM(n){return XM.apply(this,arguments)}function XM(){return XM=(0,fe.Z)(function*(n){return n.offlineComponents||(Ue("FirestoreClient","Using default OfflineComponentProvider"),yield O1(n,new C1)),n.offlineComponents}),XM.apply(this,arguments)}function uD(n){return JM.apply(this,arguments)}function JM(){return JM=(0,fe.Z)(function*(n){return n.onlineComponents||(Ue("FirestoreClient","Using default OnlineComponentProvider"),yield k1(n,new qM)),n.onlineComponents}),JM.apply(this,arguments)}function F1(n){return QM(n).then(e=>e.persistence)}function lD(n){return QM(n).then(e=>e.localStore)}function eR(n){return uD(n).then(e=>e.remoteStore)}function tR(n){return uD(n).then(e=>e.syncEngine)}function H_(n){return nR.apply(this,arguments)}function nR(){return nR=(0,fe.Z)(function*(n){const e=yield uD(n),t=e.eventManager;return t.onListen=dj.bind(null,e.syncEngine),t.onUnlisten=hj.bind(null,e.syncEngine),t}),nR.apply(this,arguments)}function U1(n,e,t={}){const r=new Xr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(i,a,l,f,m){const v=new aD({next:S=>{a.enqueueAndForget(()=>_M(i,I));const P=S.docs.has(l);!P&&S.fromCache?m.reject(new ke(he.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&f&&"server"===f.source?m.reject(new ke(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),I=new wM(I_(l.path),v,{includeMetadataChanges:!0,Nu:!0});return gM(i,I)}(yield H_(n),n.asyncQueue,e,t,r)})),r.promise}function V1(n,e,t={}){const r=new Xr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(i,a,l,f,m){const v=new aD({next:S=>{a.enqueueAndForget(()=>_M(i,I)),S.fromCache&&"server"===f.source?m.reject(new ke(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),I=new wM(l,v,{includeMetadataChanges:!0,Nu:!0});return gM(i,I)}(yield H_(n),n.asyncQueue,e,t,r)})),r.promise}class Gj{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Kx(this,"async_queue_retry"),this.Wc=()=>{const t=nD();t&&Ue("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=nD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=nD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Xr;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,fe.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!ga(t))throw t;Ue("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,rr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=pM.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.Uc.push(i),i}zc(){this.Kc&&dt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,fe.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function rR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class zj{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class or extends fw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Gj,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||B1(this),this._firestoreClient.terminate()}}function ei(n){return n._firestoreClient||B1(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function B1(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new lx(n._databaseId,a,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new Fj(n._authCredentials,n._appCheckCredentials,n._queue,r)}function j1(n,e,t){const r=new Xr;return n.asyncQueue.enqueue((0,fe.Z)(function*(){try{yield O1(n,t),yield k1(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===he.FAILED_PRECONDITION||l.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;cs("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function H1(n){if(n._initialized||n._terminated)throw new ke(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Il{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Il(Sr.fromBase64String(e))}catch(t){throw new ke(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Il(Sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Uc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zp{constructor(e){this._methodName=e}}class cD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const tH=/^__.*__$/;class nH{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new kc(e,this.data,this.fieldMask,t,this.fieldTransforms):new T_(e,this.data,t,this.fieldTransforms)}}class $1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new kc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function G1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class dD{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new dD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return pD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(G1(this.sa)&&tH.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class rH{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||cw(e)}da(e,t,r,i=!1){return new dD({sa:e,methodName:t,fa:r,path:Tr.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Kp(n){const e=n._freezeSettings(),t=cw(n._databaseId);return new rH(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hD(n,e,t,r,i,a={}){const l=n.da(a.merge||a.mergeFields?2:0,e,t,i);aR("Data must be an object, but it was:",l,r);const f=W1(r,l);let m,v;if(a.merge)m=new so(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const I=[];for(const S of a.mergeFields){const P=uR(e,S,t);if(!l.contains(P))throw new ke(he.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);K1(I,P)||I.push(P)}m=new so(I),v=l.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,v=l.fieldTransforms;return new nH(new Ji(f),m,v)}class pw extends Zp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pw}}function z1(n,e,t){return new dD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class iR extends Zp{_toFieldTransform(e){return new W0(e.path,new b_)}isEqual(e){return e instanceof iR}}class iH extends Zp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=z1(this,e,!0),r=this._a.map(a=>Yp(a,t)),i=new Vp(r);return new W0(e.path,i)}isEqual(e){return this===e}}class sH extends Zp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=z1(this,e,!0),r=this._a.map(a=>Yp(a,t)),i=new Bp(r);return new W0(e.path,i)}isEqual(e){return this===e}}class oH extends Zp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new D_(e.yt,NO(e.yt,this.wa));return new W0(e.path,t)}isEqual(e){return this===e}}function sR(n,e,t,r){const i=n.da(1,e,t);aR("Data must be an object, but it was:",i,r);const a=[],l=Ji.empty();_l(r,(m,v)=>{const I=fD(e,m,t);v=(0,F.m9)(v);const S=i.ca(I);if(v instanceof pw)a.push(I);else{const P=Yp(v,S);null!=P&&(a.push(I),l.set(I,P))}});const f=new so(a);return new $1(l,f,i.fieldTransforms)}function oR(n,e,t,r,i,a){const l=n.da(1,e,t),f=[uR(e,r,t)],m=[i];if(a.length%2!=0)throw new ke(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)f.push(uR(e,a[P])),m.push(a[P+1]);const v=[],I=Ji.empty();for(let P=f.length-1;P>=0;--P)if(!K1(v,f[P])){const V=f[P];let z=m[P];z=(0,F.m9)(z);const ce=l.ca(V);if(z instanceof pw)v.push(V);else{const ve=Yp(z,ce);null!=ve&&(v.push(V),I.set(V,ve))}}const S=new so(v);return new $1(I,S,l.fieldTransforms)}function q1(n,e,t,r=!1){return Yp(t,n.da(r?4:3,e))}function Yp(n,e){if(Z1(n=(0,F.m9)(n)))return aR("Unsupported field value:",e,n),W1(n,e);if(n instanceof Zp)return function(t,r){if(!G1(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let f=Yp(l,r.aa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,F.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return NO(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Rn.fromDate(t);return{timestampValue:A_(r.yt,i)}}if(t instanceof Rn){const i=new Rn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:A_(r.yt,i)}}if(t instanceof cD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Il)return{bytesValue:ek(r.yt,t._byteString)};if(t instanceof sr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ex(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${sD(t)}`)}(n,e)}function W1(n,e){const t={};return B0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_l(n,(r,i)=>{const a=Yp(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function Z1(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Rn||n instanceof cD||n instanceof Il||n instanceof sr||n instanceof Zp)}function aR(n,e,t){if(!Z1(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=sD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function uR(n,e,t){if((e=(0,F.m9)(e))instanceof Uc)return e._internalPath;if("string"==typeof e)return fD(n,e);throw pD("Field path arguments must be of type string or ",n,!1,void 0,t)}const aH=new RegExp("[~\\*/\\[\\]]");function fD(n,e,t){if(e.search(aH)>=0)throw pD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Uc(...e.split("."))._internalPath}catch{throw pD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function pD(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new ke(he.INVALID_ARGUMENT,f+n+m)}function K1(n,e){return n.some(t=>t.isEqual(e))}class gw{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new sr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new uH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class uH extends gw{data(){return super.data()}}function gD(n,e){return"string"==typeof e?fD(n,e):e instanceof Uc?e._internalPath:e._delegate._internalPath}function Y1(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ke(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lR{}class mw extends lR{}function Mh(n,e,...t){let r=[];e instanceof lR&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof $_).length,l=i.filter(f=>f instanceof _w).length;if(a>1||a>0&&l>0)throw new ke(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class _w extends mw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new _w(e,t,r)}_apply(e){const t=this._parse(e);return eF(e._query,t),new es(e.firestore,e.converter,yx(e._query,t))}_parse(e){const t=Kp(e.firestore);return function(i,a,l,f,m,v,I){let S;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new ke(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){J1(I,v);const P=[];for(const V of I)P.push(X1(f,i,V));S={arrayValue:{values:P}}}else S=X1(f,i,I)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||J1(I,v),S=q1(l,"where",I,"in"===v||"not-in"===v);return M.create(m,v,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class $_ extends lR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:L.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const f of l)eF(a,f),a=yx(a,f)}(e._query,t),new es(e.firestore,e.converter,yx(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class cR extends mw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new cR(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new ke(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ke(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new E_(i,a);return function(f,m){if(null===mx(f)){const v=kb(f);null!==v&&tF(0,v,m.field)}}(r,l),l}(e._query,this._field,this._direction);return new es(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Oc(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class mD extends mw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new mD(e,t,r)}_apply(e){return new es(e.firestore,e.converter,Fb(e._query,this._limit,this._limitType))}}class _D extends mw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new _D(e,t,r)}_apply(e){const t=Q1(e,this.type,this._docOrFields,this._inclusive);return new es(e.firestore,e.converter,(i=t,new Oc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class yD extends mw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new yD(e,t,r)}_apply(e){const t=Q1(e,this.type,this._docOrFields,this._inclusive);return new es(e.firestore,e.converter,(i=t,new Oc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Q1(n,e,t,r){if(t[0]=(0,F.m9)(t[0]),t[0]instanceof gw)return function(i,a,l,f,m){if(!f)throw new ke(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const I of Up(i))if(I.field.isKeyField())v.push(Ih(a,f.key));else{const S=f.data.field(I.field);if(j0(S))throw new ke(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=I.field.canonicalString();throw new ke(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}v.push(S)}return new y(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Kp(n.firestore);return function(a,l,f,m,v,I){const S=a.explicitOrderBy;if(v.length>S.length)throw new ke(he.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let V=0;V<v.length;V++){const z=v[V];if(S[V].field.isKeyField()){if("string"!=typeof z)throw new ke(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof z}`);if(!_x(a)&&-1!==z.indexOf("/"))throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${z}' contains a slash.`);const ce=a.path.child(cn.fromString(z));if(!Xe.isDocumentKey(ce))throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${ce}' is not because it contains an odd number of segments.`);const ve=new Xe(ce);P.push(Ih(l,ve))}else{const ce=q1(f,m,z);P.push(ce)}}return new y(P,I)}(n._query,n.firestore._databaseId,i,e,t,r)}}function X1(n,e,t){if("string"==typeof(t=(0,F.m9)(t))){if(""===t)throw new ke(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_x(e)&&-1!==t.indexOf("/"))throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(cn.fromString(t));if(!Xe.isDocumentKey(r))throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ih(n,new Xe(r))}if(t instanceof sr)return Ih(n,t._key);throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sD(t)}.`)}function J1(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ke(he.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function eF(n,e){if(e.isInequality()){const r=kb(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new ke(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=mx(n);null!==a&&tF(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ke(he.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function tF(n,e,t){if(!t.isEqual(e))throw new ke(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class dR{convertValue(e,t="none"){switch(Pc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){const r={};return _l(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new cD(qn(e.latitude),qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=cx(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(__(e));default:return null}}convertTimestamp(e){const t=ru(e);return new Rn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=cn.fromString(e);ht(ck(r));const i=new ml(r.get(1),r.get(3)),a=new Xe(r.popFirst(5));return i.isEqual(t)||rr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function vD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class _H extends dR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,t)}}class Qp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vc extends gw{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(gD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class yw extends Vc{data(e={}){return super.data(e)}}class Rh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Qp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new yw(this._firestore,this._userDataWriter,r.key,r,new Qp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new yw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Qp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new yw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Qp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==l.type&&(m=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:yH(l.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function yH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function rF(n,e){return n instanceof Vc&&e instanceof Vc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Rh&&e instanceof Rh&&n._firestore===e._firestore&&ZM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Ph extends dR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,t)}}function iF(n,e,t){n=dn(n,sr);const r=dn(n.firestore,or),i=vD(n.converter,e,t);return G_(r,[hD(Kp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,hr.none())])}function sF(n,e,t,...r){n=dn(n,sr);const i=dn(n.firestore,or),a=Kp(i);let l;return l="string"==typeof(e=(0,F.m9)(e))||e instanceof Uc?oR(a,"updateDoc",n._key,e,t,r):sR(a,"updateDoc",n._key,e),G_(i,[l.toMutation(n._key,hr.exists(!0))])}function oF(n,...e){var t,r,i;n=(0,F.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||rR(e[l])||(a=e[l],l++);const f={includeMetadataChanges:a.includeMetadataChanges};if(rR(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,v,I;if(n instanceof sr)v=dn(n.firestore,or),I=I_(n._key.path),m={next:S=>{e[l]&&e[l](hR(v,n,S))},error:e[l+1],complete:e[l+2]};else{const S=dn(n,es);v=dn(S.firestore,or),I=S._query;const P=new Ph(v);m={next:V=>{e[l]&&e[l](new Rh(v,P,S,V))},error:e[l+1],complete:e[l+2]},Y1(n._query)}return function(S,P,V,z){const ce=new aD(z),ve=new wM(P,ce,V);return S.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return gM(yield H_(S),ve)})),()=>{ce.bc(),S.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return _M(yield H_(S),ve)}))}}(ei(v),I,f,m)}function G_(n,e){return function(t,r){const i=new Xr;return t.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function fj(n,e,t){return DM.apply(this,arguments)}(yield tR(t),r,i)})),i.promise}(ei(n),e)}function hR(n,e,t){const r=t.docs.get(e._key),i=new Ph(n);return new Vc(n,i,e._key,r,new Qp(t.hasPendingWrites,t.fromCache),e.converter)}const AH={maxAttempts:5};class aF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Kp(e)}set(e,t,r){this._verifyNotCommitted();const i=Nh(e,this._firestore),a=vD(i.converter,t,r),l=hD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,hr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Nh(e,this._firestore);let l;return l="string"==typeof(t=(0,F.m9)(t))||t instanceof Uc?oR(this._dataReader,"WriteBatch.update",a._key,t,r,i):sR(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,hr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nh(e,this._firestore);return this._mutations=this._mutations.concat(new S_(t._key,hr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nh(n,e){if((n=(0,F.m9)(n)).firestore!==e)throw new ke(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class xH extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Kp(e)}get(e){const t=Nh(e,this._firestore),r=new _H(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return dt();const a=i[0];if(a.isFoundDocument())return new gw(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new gw(this._firestore,r,t._key,null,t.converter);throw dt()})}set(e,t,r){const i=Nh(e,this._firestore),a=vD(i.converter,t,r),l=hD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Nh(e,this._firestore);let l;return l="string"==typeof(t=(0,F.m9)(t))||t instanceof Uc?oR(this._dataReader,"Transaction.update",a._key,t,r,i):sR(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Nh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Nh(e,this._firestore),r=new Ph(this._firestore);return super.get(e).then(i=>new Vc(this._firestore,r,t._key,i._document,new Qp(!1,!1),t.converter))}}function fR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function lF(){if(typeof Uint8Array>"u")throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function cF(){if(!function Mb(){return typeof atob<"u"}())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Sc=Fi.SDK_VERSION,(0,Fi._registerComponent)(new No.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new or(new Eb(t.getProvider("auth-internal")),new F0(t.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ke(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ml(f.options.projectId,m)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Fi.registerVersion)(O0,"3.8.3",n),(0,Fi.registerVersion)(O0,"3.8.3","esm2017")}();class vw{constructor(e){this._delegate=e}static fromBase64String(e){return cF(),new vw(Il.fromBase64String(e))}static fromUint8Array(e){return lF(),new vw(Il.fromUint8Array(e))}toBase64(){return cF(),this._delegate.toBase64()}toUint8Array(){return lF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function pR(n){return function UH(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class VH{enableIndexedDbPersistence(e,t){return function Wj(n,e){H1(n=dn(n,or));const t=ei(n),r=n._freezeSettings(),i=new qM;return j1(t,i,new I1(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Zj(n){H1(n=dn(n,or));const e=ei(n),t=n._freezeSettings(),r=new qM;return j1(e,r,new xj(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Kj(n){if(n._initialized&&!n._terminated)throw new ke(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{yield(t=(0,fe.Z)(function*(r){if(!Rs.C())return Promise.resolve();const i=r+"main";yield Rs.delete(i)}),function(r){return t.apply(this,arguments)})(Vx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class dF{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ml||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&cs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function M1(n,e,t,r={}){var i;const a=(n=dn(n,fw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&cs("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,f;if("string"==typeof r.mockUserToken)l=r.mockUserToken,f=hi.MOCK_USER;else{l=(0,F.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ke(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new hi(m)}n._authCredentials=new mO(new vb(l,f))}}(this._delegate,e,t,r)}enableNetwork(){return function Qj(n){return function Lj(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield F1(n),t=yield eR(n);return e.setNetworkEnabled(!0),function(r){const i=et(r);return i._u.delete(0),dw(i)}(t)}))}(ei(n=dn(n,or)))}(this._delegate)}disableNetwork(){return function Xj(n){return function Uj(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield F1(n),t=yield eR(n);return e.setNetworkEnabled(!1),(r=(0,fe.Z)(function*(i){const a=et(i);a._u.add(0),yield k_(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ei(n=dn(n,or)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,b1("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Yj(n){return function(e){const t=new Xr;return e.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function _j(n,e){return MM.apply(this,arguments)}(yield tR(e),t)})),t.promise}(ei(n=dn(n,or)))}(this._delegate)}onSnapshotsInSync(e){return function SH(n,e){return function jj(n,e){const t=new aD(e);return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield H_(n),i=t,et(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield H_(n),i=t,void et(r).Ru.delete(i);var r,i}))}}(ei(n=dn(n,or)),rR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new z_(this,R1(this._delegate,e))}catch(t){throw ks(t,"collection()","Firestore.collection()")}}doc(e){try{return new ma(this,oD(this._delegate,e))}catch(t){throw ks(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Fs(this,function Mj(n,e){if(n=dn(n,fw),WM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new es(n,null,(t=e,new Oc(cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ks(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function MH(n,e,t){n=dn(n,or);const r=Object.assign(Object.assign({},AH),t);return function(i){if(i.maxAttempts<1)throw new ke(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const f=new Xr;return i.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){const m=yield function L1(n){return uD(n).then(e=>e.datastore)}(i);new kj(i.asyncQueue,m,l,a,f).run()})),f.promise}(ei(n),i=>e(new xH(n,i)),r)}(this._delegate,t=>e(new hF(this,t)))}batch(){return ei(this._delegate),new fF(new aF(this._delegate,e=>G_(this._delegate,e)))}loadBundle(e){return function Jj(n,e){const t=ei(n=dn(n,or)),r=new zj;return function Hj(n,e,t,r){const i=function(a,l){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return N1(m,v);if(m instanceof ArrayBuffer)return N1(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new Rj(m,l);var m}(t,cw(e));n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){!function Aj(n,e,t){const r=et(n);var i;(i=(0,fe.Z)(function*(a,l,f){try{const m=yield l.getMetadata();if(yield function(P,V){const z=et(P),ce=Jr(V.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",ve=>z.Ns.getBundleMetadata(ve,V.id)).then(ve=>!!ve&&ve.createTime.compareTo(ce)>=0)}(a.localStore,m))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(P=m).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);f._updateProgress(f1(m));const v=new aj(m,a.localStore,l.yt);let I=yield l.mc();for(;I;){const P=yield v.Fu(I);P&&f._updateProgress(P),I=yield l.mc()}const S=yield v.complete();return yield Lc(a,S.Lu,void 0),yield function(P,V){const z=et(P);return z.persistence.runTransaction("Save bundle","readwrite",ce=>z.Ns.saveBundleMetadata(ce,V))}(a.localStore,m),f._completeWith(S.progress),Promise.resolve(S.Bu)}catch(m){return cs("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var P}),function(a,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield tR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function eH(n,e){return function $j(n,e){return n.asyncQueue.enqueue((0,fe.Z)(function*(){return function(t,r){const i=et(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield lD(n),e)}))}(ei(n=dn(n,or)),e).then(t=>t?new es(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Fs(this,t):null)}}class wD extends dR{constructor(e){super(),this.firestore=e}convertBytes(e){return new vw(new Il(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ma.forKey(t,this.firestore,null)}}class hF{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new wD(e)}get(e){const t=Jp(e);return this._delegate.get(t).then(r=>new ww(this._firestore,new Vc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Jp(e);return r?(fR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Jp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Jp(e);return this._delegate.delete(t),this}}class fF{constructor(e){this._delegate=e}set(e,t,r){const i=Jp(e);return r?(fR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Jp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Jp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Xp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new yw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ew(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Xp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Xp(e,new wD(e),t),i.set(t,a)),a}}Xp.INSTANCES=new WeakMap;class ma{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ma(t,new sr(t._delegate,r,new Xe(e)))}static forKey(e,t,r){return new ma(t,new sr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new z_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new z_(this.firestore,R1(this._delegate,e))}catch(t){throw ks(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,F.m9)(e))instanceof sr&&P1(this._delegate,e)}set(e,t){t=fR("DocumentReference.set",t);try{return t?iF(this._delegate,e,t):iF(this._delegate,e)}catch(r){throw ks(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?sF(this._delegate,e):sF(this._delegate,e,t,...r)}catch(i){throw ks(i,"updateDoc()","DocumentReference.update()")}}delete(){return function DH(n){return G_(dn(n.firestore,or),[new S_(n._key,hr.none())])}(this._delegate)}onSnapshot(...e){const t=pF(e),r=gF(e,i=>new ww(this.firestore,new Vc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return oF(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function wH(n){n=dn(n,sr);const e=dn(n.firestore,or),t=ei(e),r=new Ph(e);return function Vj(n,e){const t=new Xr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(i,a,l){try{const f=yield function(m,v){const I=et(m);return I.persistence.runTransaction("read document","readonly",S=>I.localDocuments.getDocument(S,v))}(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new ke(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=U_(f,`Failed to get document '${a} from cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield lD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Vc(e,r,n._key,i,new Qp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function EH(n){n=dn(n,sr);const e=dn(n.firestore,or);return U1(ei(e),n._key,{source:"server"}).then(t=>hR(e,n,t))}(this._delegate):function vH(n){n=dn(n,sr);const e=dn(n.firestore,or);return U1(ei(e),n._key).then(t=>hR(e,n,t))}(this._delegate),t.then(r=>new ww(this.firestore,new Vc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ma(this.firestore,this._delegate.withConverter(e?Xp.getInstance(this.firestore,e):null))}}function ks(n,e,t){return n.message=n.message.replace(e,t),n}function pF(n){for(const e of n)if("object"==typeof e&&!pR(e))return e;return{}}function gF(n,e){var t,r;let i;return i=pR(n[0])?n[0]:pR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ww{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ma(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return rF(this._delegate,e._delegate)}}class Ew extends ww{data(e){const t=this._delegate.data(e);return function ex(n,e){n||dt()}(void 0!==t),t}}class Fs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wD(e)}where(e,t,r){try{return new Fs(this.firestore,Mh(this._delegate,function lH(n,e,t){const r=e,i=gD("where",n);return _w._create(i,r,t)}(e,t,r)))}catch(i){throw ks(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Fs(this.firestore,Mh(this._delegate,function cH(n,e="asc"){const t=e,r=gD("orderBy",n);return cR._create(r,t)}(e,t)))}catch(r){throw ks(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Fs(this.firestore,Mh(this._delegate,function dH(n){return S1("limit",n),mD._create("limit",n,"F")}(e)))}catch(t){throw ks(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Fs(this.firestore,Mh(this._delegate,function hH(n){return S1("limitToLast",n),mD._create("limitToLast",n,"L")}(e)))}catch(t){throw ks(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Fs(this.firestore,Mh(this._delegate,function fH(...n){return _D._create("startAt",n,!0)}(...e)))}catch(t){throw ks(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Fs(this.firestore,Mh(this._delegate,function pH(...n){return _D._create("startAfter",n,!1)}(...e)))}catch(t){throw ks(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Fs(this.firestore,Mh(this._delegate,function gH(...n){return yD._create("endBefore",n,!1)}(...e)))}catch(t){throw ks(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Fs(this.firestore,Mh(this._delegate,function mH(...n){return yD._create("endAt",n,!0)}(...e)))}catch(t){throw ks(t,"endAt()","Query.endAt()")}}isEqual(e){return ZM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function IH(n){n=dn(n,es);const e=dn(n.firestore,or),t=ei(e),r=new Ph(e);return function Bj(n,e){const t=new Xr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(i,a,l){try{const f=yield Jb(i,a,!0),m=new m1(a,f.Hi),v=m.Wu(f.documents),I=m.applyChanges(v,!1);l.resolve(I.snapshot)}catch(f){const m=U_(f,`Failed to execute query '${a} against cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield lD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Rh(e,r,n,i))}(this._delegate):"server"===e?.source?function bH(n){n=dn(n,es);const e=dn(n.firestore,or),t=ei(e),r=new Ph(e);return V1(t,n._query,{source:"server"}).then(i=>new Rh(e,r,n,i))}(this._delegate):function CH(n){n=dn(n,es);const e=dn(n.firestore,or),t=ei(e),r=new Ph(e);return Y1(n._query),V1(t,n._query).then(i=>new Rh(e,r,n,i))}(this._delegate),t.then(r=>new gR(this.firestore,new Rh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=pF(e),r=gF(e,i=>new gR(this.firestore,new Rh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return oF(this._delegate,t,r)}withConverter(e){return new Fs(this.firestore,this._delegate.withConverter(e?Xp.getInstance(this.firestore,e):null))}}class jH{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ew(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class gR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Fs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ew(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new jH(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ew(this._firestore,r))})}isEqual(e){return rF(this._delegate,e._delegate)}}class z_ extends Fs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ma(this.firestore,e):null}doc(e){try{return new ma(this.firestore,void 0===e?oD(this._delegate):oD(this._delegate,e))}catch(t){throw ks(t,"doc()","CollectionReference.doc()")}}add(e){return function TH(n,e){const t=dn(n.firestore,or),r=oD(n),i=vD(n.converter,e);return G_(t,[hD(Kp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,hr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ma(this.firestore,t))}isEqual(e){return P1(this._delegate,e._delegate)}withConverter(e){return new z_(this.firestore,this._delegate.withConverter(e?Xp.getInstance(this.firestore,e):null))}}function Jp(n){return dn(n,sr)}class mR{constructor(...e){this._delegate=new Uc(...e)}static documentId(){return new mR(Tr.keyField().canonicalString())}isEqual(e){return(e=(0,F.m9)(e))instanceof Uc&&this._delegate._internalPath.isEqual(e._internalPath)}}class eg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function PH(){return new iR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new eg(e)}static delete(){const e=function RH(){return new pw("deleteField")}();return e._methodName="FieldValue.delete",new eg(e)}static arrayUnion(...e){const t=function NH(...n){return new iH("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new eg(t)}static arrayRemove(...e){const t=function OH(...n){return new sH("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new eg(t)}static increment(e){const t=function kH(n){return new oH("increment",n)}(e);return t._methodName="FieldValue.increment",new eg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const HH={Firestore:dF,GeoPoint:cD,Timestamp:Rn,Blob:vw,Transaction:hF,WriteBatch:fF,DocumentReference:ma,DocumentSnapshot:ww,Query:Fs,QueryDocumentSnapshot:Ew,QuerySnapshot:gR,CollectionReference:z_,FieldPath:mR,FieldValue:eg,setLogLevel:function BH(n){!function yb(n){eu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function GH(n){(function $H(n,e){n.INTERNAL.registerComponent(new No.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},HH)))})(n,(e,t)=>new dF(e,t,new VH)),n.registerVersion("@firebase/firestore-compat","0.3.3")}(Om.Z);var ED=U(5363),zH=U(6063);class qH extends qr.x{constructor(e=1/0,t=1/0,r=zH.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let f=0;for(let m=1;m<r.length&&r[m]<=l;m+=2)f=m;f&&r.splice(0,f+1)}}}var mF=U(3099);function _F(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,mF.B)({connector:()=>new qH(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function yF(n,e){return(0,Kr.m)(e)?zn(()=>n,e):zn(()=>n)}var _R=U(9468);U(259);const vR=new Map,wF={activated:!1,tokenObservers:[]},QH={initialized:!1,enabled:!1};function ts(n){return vR.get(n)||Object.assign({},wF)}function ID(){return QH}class r${constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,fe.Z)(function*(){t.stop();try{t.pending=new F.BH,yield function i$(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new F.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ls=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function CF(n){if(!ts(n).activated)throw Ls.create("use-before-activation",{appName:n.name})}function CR(n,e){return IR.apply(this,arguments)}function IR(){return IR=(0,fe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,f;try{l=yield fetch(n,a)}catch(S){throw Ls.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==l.status)throw Ls.create("fetch-status-error",{httpStatus:l.status});try{f=yield l.json()}catch(S){throw Ls.create("fetch-parse-error",{originalErrorMessage:S?.message})}const m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Ls.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const v=1e3*Number(m[1]),I=Date.now();return{token:f.token,expireTimeMillis:I+v,issuedAtTimeMillis:I}}),IR.apply(this,arguments)}function u$(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Cw="firebase-app-check-store";let TD=null;function bF(){return TD||(TD=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ls.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Cw,{keyPath:"compositeKey"})}}catch(t){e(Ls.create("storage-open",{originalErrorMessage:t?.message}))}}),TD)}function bR(){return bR=(0,fe.Z)(function*(n,e){const r=(yield bF()).transaction(Cw,"readwrite"),a=r.objectStore(Cw).put({compositeKey:n,value:e});return new Promise((l,f)=>{a.onsuccess=m=>{l()},r.onerror=m=>{var v;f(Ls.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})}),bR.apply(this,arguments)}const Iw=new Ki.Yd("@firebase/app-check");function SR(n,e){return(0,F.hl)()?function h$(n,e){return function DF(n,e){return bR.apply(this,arguments)}(function SF(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Iw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function AF(){return ID().enabled}function xF(){return xR.apply(this,arguments)}function xR(){return xR=(0,fe.Z)(function*(){const n=ID();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),xR.apply(this,arguments)}const y$={error:"UNKNOWN_ERROR"};function v$(n){return F.US.encodeString(JSON.stringify(n),!1)}function SD(n){return MR.apply(this,arguments)}function MR(){return MR=(0,fe.Z)(function*(n,e=!1){const t=n.app;CF(t);const r=ts(t);let a,i=r.token;if(i&&!q_(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(q_(m)?i=m:yield SR(t,void 0))}if(!e&&i&&q_(i))return{token:i.token};let f,l=!1;if(AF()){r.exchangeTokenPromise||(r.exchangeTokenPromise=CR(u$(t,yield xF()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const m=yield r.exchangeTokenPromise;return yield SR(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield ts(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Iw.warn(m.message):Iw.error(m),a=m}return i?a?f=q_(i)?{token:i.token,internalError:a}:PF(a):(f={token:i.token},r.token=i,yield SR(t,i)):f=PF(a),l&&RF(t,f),f}),MR.apply(this,arguments)}function PR(n,e){const t=ts(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function MF(n){const{app:e}=n,t=ts(e);let r=t.tokenRefresher;r||(r=function w$(n){const{app:e}=n;return new r$((0,fe.Z)(function*(){let r;if(r=ts(e).token?yield SD(n,!0):yield SD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ts(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function RF(n,e){const t=ts(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function q_(n){return n.expireTimeMillis-Date.now()>0}function PF(n){return{token:v$(y$),error:n}}class E${constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ts(this.app);for(const t of e)PR(this.app,t.next);return Promise.resolve()}}const BF="app-check-internal";!function k$(){(0,Fi._registerComponent)(new No.wA("app-check",n=>function C$(n,e){return new E$(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(BF).initialize()})),(0,Fi._registerComponent)(new No.wA(BF,n=>function I$(n){return{getToken:e=>SD(n,e),addTokenListener:e=>function RR(n,e,t,r){const{app:i}=n,a=ts(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&q_(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),MF(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>MF(n))}(n,"INTERNAL",e),removeTokenListener:e=>PR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Fi.registerVersion)("@firebase/app-check","0.6.3")}();class bw{constructor(){return(0,_n.vb)("app-check")}}typeof window<"u"&&window;var xD=U(9260);const LR=new d.OlP("angularfire2.auth.use-emulator"),UR=new d.OlP("angularfire2.auth.settings"),VR=new d.OlP("angularfire2.auth.tenant-id"),BR=new d.OlP("angularfire2.auth.langugage-code"),jR=new d.OlP("angularfire2.auth.use-device-language"),HR=new d.OlP("angularfire.auth.persistence"),$R=(n,e,t,r,i,a,l,f)=>(0,li.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),l)for(const[v,I]of Object.entries(l))m.settings[v]=I;return f&&m.setPersistence(f),m},[t,r,i,a,l,f]);let Dw=(()=>{class n{constructor(t,r,i,a,l,f,m,v,I,S,P,V){const z=new qr.x,ce=ut(void 0).pipe((0,ED.Q)(l.outsideAngular),zn(()=>a.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,9568)))),(0,x.U)(()=>(0,li.on)(t,a,r)),(0,x.U)(ve=>$R(ve,a,f,v,I,S,m,P)),_F({bufferSize:1,refCount:!1}));if(Wc(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ut(null);else{ce.pipe(oa()).subscribe();const tt=ce.pipe(zn(mt=>mt.getRedirectResult().then(Ft=>Ft,()=>null)),_n.iC,_F({bufferSize:1,refCount:!1})),wt=ce.pipe(zn(mt=>new Cr.y(Ft=>({unsubscribe:a.runOutsideAngular(()=>mt.onAuthStateChanged(Wt=>Ft.next(Wt),Wt=>Ft.error(Wt),()=>Ft.complete()))})))),ft=ce.pipe(zn(mt=>new Cr.y(Ft=>({unsubscribe:a.runOutsideAngular(()=>mt.onIdTokenChanged(Wt=>Ft.next(Wt),Wt=>Ft.error(Wt),()=>Ft.complete()))}))));this.authState=tt.pipe(yF(wt),(0,_R.R)(l.outsideAngular),(0,ED.Q)(l.insideAngular)),this.user=tt.pipe(yF(ft),(0,_R.R)(l.outsideAngular),(0,ED.Q)(l.insideAngular)),this.idToken=this.user.pipe(zn(mt=>mt?(0,Bt.D)(mt.getIdToken()):ut(null))),this.idTokenResult=this.user.pipe(zn(mt=>mt?(0,Bt.D)(mt.getIdTokenResult()):ut(null))),this.credential=(0,Vd.T)(tt,z,this.authState.pipe(Ei(mt=>!mt))).pipe((0,x.U)(mt=>mt?.user?mt:null),(0,_R.R)(l.outsideAngular),(0,ED.Q)(l.insideAngular))}return(0,li.pX)(this,ce,a,{spy:{apply:(ve,tt,wt)=>{(ve.startsWith("signIn")||ve.startsWith("createUser"))&&wt.then(ft=>z.next(ft))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(li.Dh),d.LFG(li.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(_n.HU),d.LFG(LR,8),d.LFG(UR,8),d.LFG(VR,8),d.LFG(BR,8),d.LFG(jR,8),d.LFG(HR,8),d.LFG(bw,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),j$=(()=>{class n{constructor(){xD.Z.registerVersion("angularfire",_n.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Dw]}),n})();function HF(n,e){return function H$(n,e=$v.z){return new Cr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function GR(n,e){return HF(n,e).pipe((0,x.U)(t=>({payload:t,type:"query"})))}function MD(n,e){return GR(n,e).pipe(bo(void 0),Gv(),(0,x.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const m=i.find(I=>I.doc.ref.isEqual(l.ref)),v=t?.payload.docs.find(I=>I.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),a}))}function $F(n,e,t){return MD(n,t).pipe(To((r,i)=>function G$(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function z$(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return zR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return zR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return zR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),lm(),(0,x.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function zR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function GF(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class zF{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=MD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,x.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(bo(void 0),Gv(),Ei(([r,i])=>i.length>0||!r),(0,x.U)(([r,i])=>i),_n.iC)}auditTrail(e){return this.stateChanges(e).pipe(To((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GF(e);return $F(this.query,t,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(e={}){return GR(this.query,this.afs.schedulers.outsideAngular).pipe((0,x.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),_n.iC)}get(e){return(0,Bt.D)(this.query.get(e)).pipe(_n.iC)}add(e){return this.ref.add(e)}doc(e){return new qF(this.ref.doc(e),this.afs)}}class qF{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=KF(r,t);return new zF(i,a,this.afs)}snapshotChanges(){return function $$(n,e){return HF(n,e).pipe(bo(void 0),Gv(),(0,x.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,x.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Bt.D)(this.ref.get(e)).pipe(_n.iC)}}class q${constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?MD(this.query,this.afs.schedulers.outsideAngular).pipe((0,x.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ei(t=>t.length>0),_n.iC):MD(this.query,this.afs.schedulers.outsideAngular).pipe(_n.iC)}auditTrail(e){return this.stateChanges(e).pipe(To((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GF(e);return $F(this.query,t,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(e={}){return GR(this.query,this.afs.schedulers.outsideAngular).pipe((0,x.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),_n.iC)}get(e){return(0,Bt.D)(this.query.get(e)).pipe(_n.iC)}}const WF=new d.OlP("angularfire2.enableFirestorePersistence"),ZF=new d.OlP("angularfire2.firestore.persistenceSettings"),W$=new d.OlP("angularfire2.firestore.settings"),Z$=new d.OlP("angularfire2.firestore.use-emulator");function KF(n,e=(t=>t)){return{query:e(n),ref:n}}let YF=(()=>{class n{constructor(t,r,i,a,l,f,m,v,I,S,P,V,z,ce,ve,tt,wt){this.schedulers=m;const ft=(0,li.on)(t,f,r),mt=I;S&&$R(ft,f,P,z,ce,ve,V,tt),[this.firestore,this.persistenceEnabled$]=(0,li.cc)(`${ft.name}.firestore`,"AngularFirestore",ft.name,()=>{const Ft=f.runOutsideAngular(()=>ft.firestore());if(a&&Ft.settings(a),mt&&Ft.useEmulator(...mt),i&&!Wc(l)){const Wt=()=>{try{return(0,Bt.D)(Ft.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Rr){return typeof console<"u"&&console.warn(Rr),ut(!1)}};return[Ft,f.runOutsideAngular(Wt)]}return[Ft,ut(!1)]},[a,mt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=KF(i,r),f=this.schedulers.ngZone.run(()=>a);return new zF(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new q$(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new qF(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(li.Dh),d.LFG(li.xv,8),d.LFG(WF,8),d.LFG(W$,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(_n.HU),d.LFG(ZF,8),d.LFG(Z$,8),d.LFG(Dw,8),d.LFG(LR,8),d.LFG(UR,8),d.LFG(VR,8),d.LFG(BR,8),d.LFG(jR,8),d.LFG(HR,8),d.LFG(bw,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),K$=(()=>{class n{constructor(){xD.Z.registerVersion("angularfire",_n.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:WF,useValue:!0},{provide:ZF,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[YF]}),n})();class bl{constructor(e,t,r,i){this.afs=e,this.afAuth=t,this.router=r,this.ngZone=i,this.afAuth.authState.subscribe(a=>{a?(this.userData=a,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,t){return this.afAuth.signInWithEmailAndPassword(e,t)}SignUp(e,t){return this.afAuth.createUserWithEmailAndPassword(e,t)}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{window.alert("Verification email was sent!, check your inbox for more details.")})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(t=>{window.alert(t)})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null!==e&&!1!==e.emailVerified}GoogleAuth(){return this.AuthLogin(new mA.Q).then(e=>{this.router.navigate(["landing/home"])})}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(t=>{this.router.navigate(["landing/home"]),this.SetUserData(t.user)}).catch(t=>{window.alert(t)})}SetUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate([""])})}}function Y$(n,e){1&n&&(d.TgZ(0,"span"),d._uU(1,"Please enter a valid email."),d.qZA())}function Q$(n,e){if(1&n&&(d.TgZ(0,"div",15),d.YNc(1,Y$,2,0,"span",13),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",t.formLogin.controls.email.errors.required)}}function X$(n,e){1&n&&(d.TgZ(0,"span"),d._uU(1,"Please enter a valid password."),d.qZA())}function J$(n,e){if(1&n&&(d.TgZ(0,"div",15),d.YNc(1,X$,2,0,"span",13),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",t.formLogin.controls.password.errors.required)}}function eG(n,e){1&n&&(d.TgZ(0,"span",16),d._uU(1,"Sign up now."),d.qZA())}function tG(n,e){1&n&&(d.TgZ(0,"span"),d._uU(1,"Sign up now."),d.qZA())}bl.\u0275fac=function(e){return new(e||bl)(d.LFG(YF),d.LFG(Dw),d.LFG(Ii),d.LFG(d.R0b))},bl.\u0275prov=d.Yz7({token:bl,factory:bl.\u0275fac,providedIn:"root"});const QF=function(n){return{inputError:n}},nG=function(n){return{buttonDisabledForLoading:n}};class Tw{constructor(e,t,r){this.authService=e,this.formBuilder=t,this.router=r,this.formLoginSubmitted=!1,this.formLoginIsLoading=!1,this.formLogin=this.formBuilder.group({email:["",wc.required],password:["",wc.required]})}ngOnInit(){}callSignInService(){var e=this;return(0,fe.Z)(function*(){const t=e.formLogin.controls,r=yield e.authService.SignIn(t.email.value,t.password.value).catch(i=>{window.alert(i.message)});r&&(e.authService.SetUserData(r.user),e.authService.afAuth.authState.subscribe(i=>{i&&e.router.navigate(["landing/home"])})),e.formLoginIsLoading=!1,e.formLoginSubmitted=!1})()}logInProcess(){var e=this;return(0,fe.Z)(function*(){e.formLoginSubmitted=!0,!e.formLogin.invalid&&(e.formLoginIsLoading=!0,yield e.callSignInService())})()}keyUpProcess(e){this.formLoginSubmitted=!1}}Tw.\u0275fac=function(e){return new(e||Tw)(d.Y36(bl),d.Y36(II),d.Y36(Ii))},Tw.\u0275cmp=d.Xpm({type:Tw,selectors:[["app-login"]],decls:31,vars:17,consts:[[1,"loginContainer"],[1,"backgroundLogo"],["src","assets/background-service.jpg","alt",""],[1,"loginForm"],[3,"formGroup","submit"],["type","email","formControlName","email","placeholder","Email or phone number",1,"form-login-input",3,"readonly","ngClass","keydown"],["class","errorContainer",4,"ngIf"],["type","password","formControlName","password","placeholder","Password",1,"form-login-input",3,"readonly","ngClass"],["type","submit",3,"disabled","ngClass"],[1,"checkbox"],["type","checkbox"],[1,"mt-5","signUpContainer"],["routerLink","signup",4,"ngIf"],[4,"ngIf"],[1,"mt-2"],[1,"errorContainer"],["routerLink","signup"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"div",1),d._UZ(2,"img",2),d.qZA(),d.TgZ(3,"h1"),d._uU(4,"FZTH!"),d.qZA(),d.TgZ(5,"div",3)(6,"h2"),d._uU(7,"Sign In"),d.qZA(),d.TgZ(8,"form",4),d.NdJ("submit",function(){return t.logInProcess()}),d.TgZ(9,"input",5),d.NdJ("keydown",function(i){return t.keyUpProcess(i)}),d.qZA(),d.YNc(10,Q$,2,1,"div",6),d._UZ(11,"input",7),d.YNc(12,J$,2,1,"div",6),d.TgZ(13,"button",8),d._uU(14,"Sign In"),d.qZA(),d.TgZ(15,"div",9),d._UZ(16,"input",10),d.TgZ(17,"span"),d._uU(18,"Remember me"),d.qZA()(),d.TgZ(19,"div",11)(20,"span"),d._uU(21,"New to FZTH?"),d.qZA(),d.YNc(22,eG,2,0,"span",12),d.YNc(23,tG,2,0,"span",13),d.qZA(),d.TgZ(24,"p",14)(25,"span"),d._uU(26,"This page is protected by Google reCAPTCHA to"),d._UZ(27,"br"),d._uU(28," ensure you're not a bot."),d.qZA(),d.TgZ(29,"span"),d._uU(30,"\xa0Learn more"),d.qZA()()()()()),2&e&&(d.xp6(8),d.Q6J("formGroup",t.formLogin),d.xp6(1),d.Q6J("readonly",t.formLoginIsLoading)("ngClass",d.VKq(11,QF,t.formLogin.controls.email.errors&&t.formLoginSubmitted)),d.xp6(1),d.Q6J("ngIf",t.formLogin.controls.email.errors&&t.formLoginSubmitted),d.xp6(1),d.Q6J("readonly",t.formLoginIsLoading)("ngClass",d.VKq(13,QF,t.formLogin.controls.password.errors&&t.formLoginSubmitted)),d.xp6(1),d.Q6J("ngIf",t.formLogin.controls.password.errors&&t.formLoginSubmitted),d.xp6(1),d.Q6J("disabled",t.formLoginIsLoading)("ngClass",d.VKq(15,nG,t.formLoginIsLoading)),d.xp6(9),d.Q6J("ngIf",!t.formLoginIsLoading),d.xp6(1),d.Q6J("ngIf",t.formLoginIsLoading))},dependencies:[kt,Gi,qa,ip,Zd,ym,vm,Po,At],styles:[".loginContainer[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:flex-start;position:relative}.backgroundLogo[_ngcontent-%COMP%]{display:block;height:100%;overflow:hidden;position:absolute;object-fit:cover;width:100%;z-index:-1;opacity:.4;min-height:100vh}.backgroundLogo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.loginContainer[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{position:absolute;color:red;top:0;left:50px}.loginForm[_ngcontent-%COMP%]{background-color:#000000bf;border-radius:4px;box-sizing:border-box;display:flex;flex-direction:column;margin:0;padding:3.5rem 3.5rem 10rem;margin-top:5rem}.loginForm[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.loginForm[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{color:#fff;font-size:32px;font-weight:500;margin-bottom:28px}.loginForm[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0;border-radius:4px;color:#fff;height:50px;line-height:50px;padding:2px 20px 0;background-color:#333;box-sizing:border-box;outline:none;border:1px solid rgba(0,0,0,0);margin-bottom:1.5rem}.loginForm[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#8c8c8c;font-size:14px;left:10px;position:absolute;top:50%;transform:translateY(-50%)}.loginForm[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background-color:#484848}.loginForm[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:4px;font-size:16px;font-weight:500;margin:10px 0 0;background-color:#e50914;color:#fff;border:none;width:100%;padding-top:.5rem;padding-bottom:.5rem}.checkbox[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;align-self:flex-start}.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:20px;margin:0 10px 0 0!important}.checkbox[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#b3b3b3;font-size:13px;font-weight:400}.loginForm[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#8c8c8c;font-size:13px;margin-top:11px}.loginForm[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-of-type(2){background-color:transparent;border:none;color:#0071eb;cursor:pointer;display:inline;font-family:inherit;font-size:13px;padding:0}.signUpContainer[_ngcontent-%COMP%]{align-self:flex-start;color:#737373;font-size:16px;margin-top:16px}.signUpContainer[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-of-type(2){color:#fff;cursor:pointer;margin-left:5px}"]});class Sw{constructor(e){this.authService=e}ngOnInit(){document.addEventListener("scroll",()=>{document.documentElement.dataset.scroll=window.scrollY.toString()})}onWindowScroll(){let e=document.querySelector(".navbar");window.pageYOffset>e.clientHeight?e.classList.add("navbarCustomScroll"):e.classList.remove("navbarCustomScroll")}logOutProcess(){this.authService.SignOut()}}Sw.\u0275fac=function(e){return new(e||Sw)(d.Y36(bl))},Sw.\u0275cmp=d.Xpm({type:Sw,selectors:[["app-shell"]],hostBindings:function(e,t){1&e&&d.NdJ("scroll",function(i){return t.onWindowScroll(i)},!1,d.Jf7)},decls:22,vars:0,consts:[[1,"navbar","navbar-expand-lg","fixed-top",3,"scroll"],[1,"container-fluid"],["routerLink","/landing/home",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto"],[1,"nav-item"],["aria-current","page","routerLink","plan",1,"nav-link","active"],["aria-current","page","routerLink","home",1,"nav-link","active"],["routerLink","search",1,"nav-link"],[1,"nav-link",3,"click"],[1,"customContent"]],template:function(e,t){1&e&&(d.TgZ(0,"nav",0),d.NdJ("scroll",function(){return t.onWindowScroll()}),d.TgZ(1,"div",1)(2,"a",2),d._uU(3,"FZTH!"),d.qZA(),d.TgZ(4,"button",3),d._UZ(5,"span",4),d.qZA(),d.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),d._uU(10,"Choose your plan"),d.qZA()(),d.TgZ(11,"li",7)(12,"a",9),d._uU(13,"Home"),d.qZA()(),d.TgZ(14,"li",7)(15,"a",10),d._uU(16,"Search"),d.qZA()(),d.TgZ(17,"li",7)(18,"a",11),d.NdJ("click",function(){return t.logOutProcess()}),d._uU(19,"Log out"),d.qZA()()()()()(),d.TgZ(20,"div",12),d._UZ(21,"router-outlet"),d.qZA())},dependencies:[Yg,qa],styles:[".navbar[_ngcontent-%COMP%]{transition:background-color .25s ease-in,background-image .25s ease-in}.navbar[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{color:#e50914;font-weight:700}.navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#e50914}.navbarCustomScroll[_ngcontent-%COMP%]{background-color:#141414;background-image:linear-gradient(180deg,rgba(0,0,0,.7) 10%,transparent)}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:15px;margin-right:5px;transition:background-color .15s ease-in;cursor:pointer}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover:not(.nav-item:nth-of-type(1)){background-color:#640914}.nav-item[_ngcontent-%COMP%]:nth-of-type(1){background-color:#e50914;transition:box-shadow .15s ease-in,transform .15s ease-in!important}.nav-item[_ngcontent-%COMP%]:nth-of-type(1)>a{color:#fff!important}.nav-item[_ngcontent-%COMP%]:nth-of-type(1):hover{box-shadow:0 5px 10px 2px #46d3694d;transform:scale(1.05)}"]});class Dl{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return!0!==this.authService.isLoggedIn&&this.router.navigate([""]),!0}}function rG(n,e){1&n&&(d.TgZ(0,"span"),d._uU(1,"Please enter a valid email."),d.qZA())}function iG(n,e){if(1&n&&(d.TgZ(0,"div",13),d.YNc(1,rG,2,0,"span",11),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",t.formSignUp.controls.email.errors.required)}}function sG(n,e){1&n&&(d.TgZ(0,"span"),d._uU(1,"Please enter a valid password."),d.qZA())}function oG(n,e){if(1&n&&(d.TgZ(0,"div",13),d.YNc(1,sG,2,0,"span",11),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",t.formSignUp.controls.password.errors.required)}}function aG(n,e){1&n&&(d.TgZ(0,"span",14),d._uU(1,"Log In."),d.qZA())}function uG(n,e){1&n&&(d.TgZ(0,"span"),d._uU(1,"Log In."),d.qZA())}Dl.\u0275fac=function(e){return new(e||Dl)(d.LFG(bl),d.LFG(Ii))},Dl.\u0275prov=d.Yz7({token:Dl,factory:Dl.\u0275fac,providedIn:"root"});const XF=function(n){return{inputError:n}},lG=function(n){return{buttonDisabledForLoading:n}};class Aw{constructor(e,t,r){this.authService=e,this.formBuilder=t,this.router=r,this.formSignUpSubmitted=!1,this.formSignUpIsLoading=!1,this.formSignUp=this.formBuilder.group({email:["",wc.required],password:["",wc.required]})}ngOnInit(){}callSignUpService(){var e=this;return(0,fe.Z)(function*(){const t=e.formSignUp.controls,r=yield e.authService.SignUp(t.email.value,t.password.value).catch(i=>{window.alert(i.message)});r&&(e.authService.SendVerificationMail(),e.authService.SetUserData(r.user),e.authService.afAuth.authState.subscribe(i=>{i&&e.router.navigate([""])})),e.formSignUpIsLoading=!1,e.formSignUpSubmitted=!1})()}signUpProcess(){var e=this;return(0,fe.Z)(function*(){e.formSignUpSubmitted=!0,!e.formSignUp.invalid&&(e.formSignUpIsLoading=!0,yield e.callSignUpService(),e.formSignUpSubmitted=!1)})()}keyUpProcess(e){this.formSignUpSubmitted=!1}}Aw.\u0275fac=function(e){return new(e||Aw)(d.Y36(bl),d.Y36(II),d.Y36(Ii))},Aw.\u0275cmp=d.Xpm({type:Aw,selectors:[["app-sign-up"]],decls:27,vars:17,consts:[[1,"loginContainer"],[1,"backgroundLogo"],["src","assets/background-service.jpg","alt",""],[1,"loginForm"],[3,"formGroup"],["type","email","formControlName","email","placeholder","Email or phone number",1,"form-login-input",3,"readonly","ngClass"],["class","errorContainer",4,"ngIf"],["type","password","formControlName","password","placeholder","Password",1,"form-login-input",3,"readonly","ngClass"],["type","button",3,"disabled","ngClass","click"],[1,"mt-2","signUpContainer"],["routerLink","",4,"ngIf"],[4,"ngIf"],[1,"mt-5"],[1,"errorContainer"],["routerLink",""]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"div",1),d._UZ(2,"img",2),d.qZA(),d.TgZ(3,"h1"),d._uU(4,"FZTH!"),d.qZA(),d.TgZ(5,"div",3)(6,"h2"),d._uU(7,"Sign Up"),d.qZA(),d.TgZ(8,"form",4),d._UZ(9,"input",5),d.YNc(10,iG,2,1,"div",6),d._UZ(11,"input",7),d.YNc(12,oG,2,1,"div",6),d.TgZ(13,"button",8),d.NdJ("click",function(){return t.signUpProcess()}),d._uU(14,"Sign Up"),d.qZA(),d.TgZ(15,"div",9)(16,"span"),d._uU(17,"Already a member?"),d.qZA(),d.YNc(18,aG,2,0,"span",10),d.YNc(19,uG,2,0,"span",11),d.qZA(),d.TgZ(20,"p",12)(21,"span"),d._uU(22,"This page is protected by Google reCAPTCHA to"),d._UZ(23,"br"),d._uU(24," ensure you're not a bot."),d.qZA(),d.TgZ(25,"span"),d._uU(26,"\xa0Learn more"),d.qZA()()()()()),2&e&&(d.xp6(8),d.Q6J("formGroup",t.formSignUp),d.xp6(1),d.Q6J("readonly",t.formSignUpIsLoading)("ngClass",d.VKq(11,XF,t.formSignUp.controls.email.errors&&t.formSignUpSubmitted)),d.xp6(1),d.Q6J("ngIf",t.formSignUp.controls.email.errors&&t.formSignUpSubmitted),d.xp6(1),d.Q6J("readonly",t.formSignUpIsLoading)("ngClass",d.VKq(13,XF,t.formSignUp.controls.email.errors&&t.formSignUpSubmitted)),d.xp6(1),d.Q6J("ngIf",t.formSignUp.controls.password.errors&&t.formSignUpSubmitted),d.xp6(1),d.Q6J("disabled",t.formSignUpIsLoading)("ngClass",d.VKq(15,lG,t.formSignUpIsLoading)),d.xp6(5),d.Q6J("ngIf",!t.formSignUpIsLoading),d.xp6(1),d.Q6J("ngIf",t.formSignUpIsLoading))},dependencies:[kt,Gi,qa,ip,Zd,ym,vm,Po,At],styles:[".loginContainer[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:flex-start;position:relative}.backgroundLogo[_ngcontent-%COMP%]{display:block;height:100%;overflow:hidden;position:absolute;object-fit:cover;width:100%;z-index:-1;opacity:.4;min-height:100vh}.backgroundLogo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.loginContainer[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{position:absolute;color:red;top:0;left:50px}.loginForm[_ngcontent-%COMP%]{background-color:#000000bf;border-radius:4px;box-sizing:border-box;display:flex;flex-direction:column;margin:0;padding:3.5rem 3.5rem 10rem;margin-top:5rem}.loginForm[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.loginForm[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{color:#fff;font-size:32px;font-weight:500;margin-bottom:28px}.loginForm[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0;border-radius:4px;color:#fff;height:50px;line-height:50px;padding:2px 20px 0;background:#333;box-sizing:border-box;outline:none;border:1px solid rgba(0,0,0,0);margin-bottom:1.5rem}.loginForm[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#8c8c8c;font-size:14px;left:10px;position:absolute;top:50%;transform:translateY(-50%)}.loginForm[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background-color:#484848}.loginForm[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:4px;font-size:16px;font-weight:500;margin:10px 0 0;background-color:#e50914;color:#fff;border:none;width:100%;padding-top:.5rem;padding-bottom:.5rem}.loginForm[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#8c8c8c;font-size:13px;margin-top:11px}.loginForm[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-of-type(2){background-color:transparent;border:none;color:#0071eb;cursor:pointer;display:inline;font-family:inherit;font-size:13px;padding:0}.signUpContainer[_ngcontent-%COMP%]{align-self:flex-start;color:#737373;font-size:16px;margin-top:16px}.signUpContainer[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-of-type(2){color:#fff;cursor:pointer;margin-left:5px}"]});class xw{}xw.\u0275fac=function(e){return new(e||xw)},xw.\u0275cmp=d.Xpm({type:xw,selectors:[["app-plan"]],decls:61,vars:0,consts:[[1,"contain","p-5","planContainer"],[1,"info"],[1,"planGrid"],[1,"customPlanTable"],[1,"planDivHeader","active"],[1,"pointer","active"],[1,"planDivHeader"],[1,"pointer"],[1,"active"],[1,"checkMark","active"],[1,"footerInfo"],[1,"buttonContainer"],["type","button"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"div",1)(2,"h1"),d._uU(3,"Choose the plan that\u2019s right for you"),d.qZA(),d.TgZ(4,"ul")(5,"li"),d._uU(6,"Watch all you want. Ad-free"),d.qZA(),d.TgZ(7,"li"),d._uU(8,"Recommendations just for you."),d.qZA(),d.TgZ(9,"li"),d._uU(10,"Change or cancel your plan anytime."),d.qZA()()(),d.TgZ(11,"div",2)(12,"table",3)(13,"thead")(14,"tr"),d._UZ(15,"th"),d.TgZ(16,"th")(17,"div",4),d._uU(18," Basic "),d._UZ(19,"div",5),d.qZA()(),d.TgZ(20,"th")(21,"div",6),d._uU(22," Advanced "),d._UZ(23,"div",7),d.qZA()()()(),d.TgZ(24,"tbody")(25,"tr")(26,"td"),d._uU(27,"Monthly price"),d.qZA(),d.TgZ(28,"td",8),d._uU(29,"$7"),d.qZA(),d.TgZ(30,"td"),d._uU(31,"$10"),d.qZA()(),d.TgZ(32,"tr")(33,"td"),d._uU(34,"Video quality"),d.qZA(),d.TgZ(35,"td",8),d._uU(36,"Good"),d.qZA(),d.TgZ(37,"td"),d._uU(38,"Best"),d.qZA()(),d.TgZ(39,"tr")(40,"td"),d._uU(41,"Resolution"),d.qZA(),d.TgZ(42,"td",8),d._uU(43,"1080p"),d.qZA(),d.TgZ(44,"td"),d._uU(45,"4K+HDR"),d.qZA()(),d.TgZ(46,"tr")(47,"td"),d._uU(48,"Watch on your TV, computer, mobile phone and tablet"),d.qZA(),d.TgZ(49,"td",9),d._uU(50,"\u2713"),d.qZA(),d.TgZ(51,"td"),d._uU(52,"\u2713"),d.qZA()()()(),d.TgZ(53,"p",10),d._uU(54," HD (720p), Full HD (1080p), Ultra HD (4K) and HDR availability subject to your internet service and device capabilities. Not all content is available in all resolutions. See our "),d.TgZ(55,"span"),d._uU(56,"Terms of Use"),d.qZA(),d._uU(57," for more details. Only people who live with you may use your account. Watch on 4 different devices at the same time with Premium, 2 with Standard and 1 with Basic. "),d.qZA(),d.TgZ(58,"div",11)(59,"button",12),d._uU(60,"Next"),d.qZA()()()())},styles:['.planContainer[_ngcontent-%COMP%]{margin-top:4.5rem;flex-direction:column;background-color:#fff;height:90vh;display:flex;justify-content:flex-start;align-items:center}.planGrid[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.planContainer[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0}.planContainer[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none;color:#575757}.planContainer[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\2713  ";color:#e50914;font-size:20px}.customPlanTable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-of-type(1){min-width:350px;width:350px}.customPlanTable[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{border-bottom:1px solid #ccc}.customPlanTable[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.customPlanTable[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:20px;color:#333c}.customPlanTable[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-of-type(1){padding-left:10px}.customPlanTable[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(.customPlanTable   tbody[_ngcontent-%COMP%]    > tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-of-type(1)){text-align:center;color:#33333380}.customPlanTable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:35px}.planDivHeader[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;padding:18px;text-align:center;vertical-align:middle;display:table-cell;color:#fff;background-color:#e87075;cursor:pointer}.planDivHeader.active[_ngcontent-%COMP%]{background-color:#e50914}.pointer[_ngcontent-%COMP%]{position:absolute;bottom:-10px;left:41%;background-color:#e50914;width:20px;height:20px;transform:rotate(45deg);display:none}.pointer.active[_ngcontent-%COMP%]{display:block}.checkMark[_ngcontent-%COMP%]{font-size:30px}.footerInfo[_ngcontent-%COMP%]{color:#737373bf;font-size:13px;width:715px;margin-bottom:2rem}.footerInfo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#0071eb;cursor:pointer}.buttonContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.buttonContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:4px;font-size:24px;background-color:#f6121d;color:#fff;outline:none;padding:1rem 15rem;cursor:pointer;border:none;transition:background-color .15ms ease-in}.buttonContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f62c35}.active[_ngcontent-%COMP%]:not(.planDivHeader){color:#e50914!important}']});const cG=[{path:"",component:Tw},{path:"signup",component:Aw},{path:"landing",component:Sw,canActivate:[Dl],children:[{path:"plan",component:xw,canActivate:[Dl]},{path:"home",component:Ud,canActivate:[Dl]},{path:"search",component:ul,canActivate:[Dl]},{path:"movie/:id",component:Wd,canActivate:[Dl]}]}];class W_{}W_.\u0275fac=function(e){return new(e||W_)},W_.\u0275mod=d.oAB({type:W_}),W_.\u0275inj=d.cJS({imports:[hC.forRoot(cG),hC]});class Mw{constructor(){this.title="fzth"}}Mw.\u0275fac=function(e){return new(e||Mw)},Mw.\u0275cmp=d.Xpm({type:Mw,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&d._UZ(0,"router-outlet")},dependencies:[Yg]});const JF="firebasestorage.googleapis.com",eL="storageBucket";class xr extends F.ZR{constructor(e,t,r=0){super(qR(e),`Firebase Storage: ${t} (${qR(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return qR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Zn=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Zn||(Zn={})),Zn))();function qR(n){return"storage/"+n}function WR(){return new xr(Zn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function tL(){return new xr(Zn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function nL(){return new xr(Zn.CANCELED,"User canceled the upload/download.")}function rL(){return new xr(Zn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Z_(n){return new xr(Zn.INVALID_ARGUMENT,n)}function iL(){return new xr(Zn.APP_DELETED,"The Firebase app was deleted.")}function sL(n){return new xr(Zn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Rw(n,e){return new xr(Zn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Pw(n){throw new xr(Zn.INTERNAL_ERROR,"Internal error: "+n)}class ds{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ds.makeFromUrl(e,t)}catch{return new ds(e,"")}if(""===r.path)return r;throw function EG(n){return new xr(Zn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(mt){mt.path_=decodeURIComponent(mt.path)}const S=t.replace(/[.]/g,"\\."),ft=[{regex:f,indices:{bucket:1,path:3},postModify:function a(mt){"/"===mt.path.charAt(mt.path.length-1)&&(mt.path_=mt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===JF?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let mt=0;mt<ft.length;mt++){const Ft=ft[mt],Wt=Ft.regex.exec(e);if(Wt){let cu=Wt[Ft.indices.path];cu||(cu=""),r=new ds(Wt[Ft.indices.bucket],cu),Ft.postModify(r);break}}if(null==r)throw function wG(n){return new xr(Zn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class TG{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function RD(n){return"string"==typeof n||n instanceof String}function oL(n){return ZR()&&n instanceof Blob}function ZR(){return typeof Blob<"u"&&!(0,F.UG)()}function KR(n,e,t,r){if(r<e)throw Z_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Z_(`Invalid value for '${n}'. Expected ${t} or less.`)}function Bc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function aL(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Oh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Oh||(Oh={})),Oh))();function uL(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class PG{constructor(e,t,r,i,a,l,f,m,v,I,S,P=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=f,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=I,this.connectionFactory_=S,this.retry=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,z)=>{this.resolve_=V,this.reject_=z,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function xG(n){return void 0!==n}(m)?a():a(m)}catch(m){l(m)}else if(null!==f){const m=WR();m.serverResponse=f.getErrorText(),l(this.errorCallback_?this.errorCallback_(f,m):m)}else l(i.canceled?this.appDelete_?iL():nL():tL())};this.canceled_?t(0,new PD(!1,null,!0)):this.backoffId_=function SG(n,e,t){let r=1,i=null,a=null,l=!1,f=0;function m(){return 2===f}let v=!1;function I(...ve){v||(v=!0,e.apply(null,ve))}function S(ve){i=setTimeout(()=>{i=null,n(V,m())},ve)}function P(){a&&clearTimeout(a)}function V(ve,...tt){if(v)return void P();if(ve)return P(),void I.call(null,ve,...tt);if(m()||l)return P(),void I.call(null,ve,...tt);let ft;r<64&&(r*=2),1===f?(f=2,ft=0):ft=1e3*(r+Math.random()),S(ft)}let z=!1;function ce(ve){z||(z=!0,P(),!v&&(null!==i?(ve||(f=2),clearTimeout(i),S(0)):ve||(f=1)))}return S(0),a=setTimeout(()=>{l=!0,ce(!0)},t),ce}((r,i)=>{if(i)return void r(!1,new PD(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const f=a.getErrorCode()===Oh.NO_ERROR,m=a.getStatus();if(!f||uL(m,this.additionalRetryCodes_)&&this.retry){const I=a.getErrorCode()===Oh.ABORT;return void r(!1,new PD(!1,null,I))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new PD(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function AG(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class PD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function VG(...n){const e=function UG(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(ZR())return new Blob(n);throw new xr(Zn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ko={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class YR{constructor(e,t){this.data=e,this.contentType=t||null}}function QR(n,e){switch(n){case ko.RAW:return new YR(lL(e));case ko.BASE64:case ko.BASE64URL:return new YR(cL(n,e));case ko.DATA_URL:return new YR(function $G(n){const e=new dL(n);return e.base64?cL(ko.BASE64,e.rest):function HG(n){let e;try{e=decodeURIComponent(n)}catch{throw Rw(ko.DATA_URL,"Malformed data URL.")}return lL(e)}(e.rest)}(e),function GG(n){return new dL(n).contentType}(e))}throw WR()}function lL(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function cL(n,e){switch(n){case ko.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Rw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ko.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Rw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function jG(n){if(typeof atob>"u")throw function DG(n){return new xr(Zn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Rw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class dL{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Rw(ko.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function zG(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Tl{constructor(e,t){let r=0,i="";oL(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(oL(this.data_)){const i=function BG(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Tl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Tl(r,!0)}}static getBlob(...e){if(ZR()){const t=e.map(r=>r instanceof Tl?r.data_:r);return new Tl(VG.apply(null,t))}{const t=e.map(l=>RD(l)?QR(ko.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let f=0;f<l.length;f++)i[a++]=l[f]}),new Tl(i,!0)}}uploadData(){return this.data_}}function XR(n){let e;try{e=JSON.parse(n)}catch{return null}return function RG(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function hL(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function ZG(n,e){return e}class Us{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||ZG}}let ND=null;function Nw(){if(ND)return ND;const n=[];n.push(new Us("bucket")),n.push(new Us("generation")),n.push(new Us("metageneration")),n.push(new Us("name","fullPath",!0));const t=new Us("name");t.xform=function e(a,l){return function KG(n){return!RD(n)||n.length<2?n:hL(n)}(l)},n.push(t);const i=new Us("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Us("timeCreated")),n.push(new Us("updated")),n.push(new Us("md5Hash",null,!0)),n.push(new Us("cacheControl",null,!0)),n.push(new Us("contentDisposition",null,!0)),n.push(new Us("contentEncoding",null,!0)),n.push(new Us("contentLanguage",null,!0)),n.push(new Us("contentType",null,!0)),n.push(new Us("metadata","customMetadata",!0)),ND=n,ND}function fL(n,e,t){const r=XR(e);return null===r?null:function QG(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function YG(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new ds(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function JR(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const pL="prefixes";class Sl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Al(n){if(!n)throw WR()}function OD(n,e){return function t(r,i){const a=fL(n,i,e);return Al(null!==a),a}}function K_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function yG(){return new xr(Zn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function _G(){return new xr(Zn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function mG(n){return new xr(Zn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function vG(n){return new xr(Zn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Ow(n){const e=K_(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function gG(n){return new xr(Zn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function mL(n,e,t){const i=Bc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new Sl(i,"GET",OD(n,t),l);return f.errorHandler=Ow(e),f}function r3(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const f=Bc(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,I=new Sl(f,"GET",function t3(n,e){return function t(r,i){const a=function e3(n,e,t){const r=XR(t);return null===r?null:function JG(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[pL])for(const i of t[pL]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new ds(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new ds(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Al(null!==a),a}}(n,e.bucket),v);return I.urlParams=a,I.errorHandler=K_(e),I}function yL(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function a3(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class kD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function eP(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Al(!1)}return Al(!!t&&-1!==(e||["active"]).indexOf(t)),t}const d3={STATE_CHANGED:"state_changed"},Vs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function tP(n){switch(n){case"running":case"pausing":case"canceling":return Vs.RUNNING;case"paused":return Vs.PAUSED;case"success":return Vs.SUCCESS;case"canceled":return Vs.CANCELED;default:return Vs.ERROR}}class h3{constructor(e,t,r){if(function MG(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Y_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class f3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Oh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Oh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Oh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Pw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Pw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Pw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Pw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Pw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class p3 extends f3{initXhr(){this.xhr_.responseType="text"}}function su(){return new p3}class CL{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Nw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Zn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(uL(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=tL()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Zn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function u3(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=yL(e,r,i),f={name:l.fullPath},m=Bc(a,n.host,n._protocol),I={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=JR(l,t),z=new Sl(m,"POST",function V(ce){let ve;eP(ce);try{ve=ce.getResponseHeader("X-Goog-Upload-URL")}catch{Al(!1)}return Al(RD(ve)),ve},n.maxUploadRetryTime);return z.urlParams=f,z.headers=I,z.body=S,z.errorHandler=K_(e),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,su,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function l3(n,e,t,r){const m=new Sl(t,"POST",function a(v){const I=eP(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Al(!1)}S||Al(!1);const P=Number(S);return Al(!isNaN(P)),new kD(P,r.size(),"final"===I)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=K_(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,su,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new kD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function c3(n,e,t,r,i,a,l,f){const m=new kD(0,0);if(l?(m.current=l.current,m.total=l.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function IG(){return new xr(Zn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let I=v;i>0&&(I=Math.min(I,i));const S=m.current;let V="";V=0===I?"finalize":v===I?"upload, finalize":"upload";const z={"X-Goog-Upload-Command":V,"X-Goog-Upload-Offset":`${m.current}`},ce=r.slice(S,S+I);if(null===ce)throw rL();const ft=new Sl(t,"POST",function ve(mt,Ft){const Wt=eP(mt,["active","final"]),Rr=m.current+I,cu=r.size();let hN;return hN="final"===Wt?OD(e,a)(mt,Ft):null,new kD(Rr,cu,"final"===Wt,hN)},e.maxUploadRetryTime);return ft.headers=z,ft.body=ce.uploadData(),ft.progressCallback=f||null,ft.errorHandler=K_(n),ft}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const f=this._ref.storage._makeRequest(l,su,i,a,!1);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=mL(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,su,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function vL(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},m=function f(){let ft="";for(let mt=0;mt<2;mt++)ft+=Math.random().toString().slice(2);return ft}();l["Content-Type"]="multipart/related; boundary="+m;const v=yL(e,r,i),I=JR(v,t),V=Tl.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+I+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===V)throw rL();const z={name:v.fullPath},ce=Bc(a,n.host,n._protocol),tt=n.maxUploadRetryTime,wt=new Sl(ce,"POST",OD(n,t),tt);return wt.urlParams=z,wt.headers=l,wt.body=V.uploadData(),wt.errorHandler=K_(e),wt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,su,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=nL(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=tP(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new h3(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(tP(this._state)){case Vs.SUCCESS:Y_(this._resolve.bind(null,this.snapshot))();break;case Vs.CANCELED:case Vs.ERROR:Y_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(tP(this._state)){case Vs.RUNNING:case Vs.PAUSED:e.next&&Y_(e.next.bind(e,this.snapshot))();break;case Vs.SUCCESS:e.complete&&Y_(e.complete.bind(e))();break;default:e.error&&Y_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class tg{constructor(e,t){this._service=e,this._location=t instanceof ds?t:ds.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new tg(e,t)}get root(){const e=new ds(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hL(this._location.path)}get storage(){return this._service}get parent(){const e=function qG(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ds(this._location.bucket,e);return new tg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw sL(e)}}function bL(n,e,t){return nP.apply(this,arguments)}function nP(){return nP=(0,fe.Z)(function*(n,e,t){const i=yield DL(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield bL(n,e,i.nextPageToken))}),nP.apply(this,arguments)}function DL(n,e){null!=e&&"number"==typeof e.maxResults&&KR("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=r3(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,su)}function T3(n){n._throwIfRoot("getDownloadURL");const e=function i3(n,e,t){const i=Bc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new Sl(i,"GET",function n3(n,e){return function t(r,i){const a=fL(n,i,e);return Al(null!==a),function XG(n,e,t,r){const i=XR(e);if(null===i||!RD(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return Bc("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+aL({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return f.errorHandler=Ow(e),f}(n.storage,n._location,Nw());return n.storage.makeRequestWithTokens(e,su).then(t=>{if(null===t)throw function bG(){return new xr(Zn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function TL(n,e){const t=function WG(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ds(n._location.bucket,t);return new tg(n.storage,r)}function SL(n,e){if(n instanceof rP){const t=n;if(null==t._bucket)throw function CG(){return new xr(Zn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+eL+"' property when initializing the app?")}();const r=new tg(t,t._bucket);return null!=e?SL(r,e):r}return void 0!==e?TL(n,e):n}function M3(n,e){if(e&&function A3(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof rP)return function x3(n,e){return new tg(n,e)}(n,e);throw Z_("To use ref(service, url), the first argument must be a Storage instance.")}return SL(n,e)}function AL(n,e){const t=e?.[eL];return null==t?null:ds.makeFromBucketSpec(t,n)}class rP{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=JF,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ds.makeFromBucketSpec(i,this._host):AL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ds.makeFromBucketSpec(this._url,e):AL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){KR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){KR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,fe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,fe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new tg(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new TG(iL());{const l=function LG(n,e,t,r,i,a,l=!0){const f=aL(n.urlParams),m=n.url+f,v=Object.assign({},n.headers);return function kG(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function NG(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function OG(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,a),function FG(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new PG(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,fe.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const xL="@firebase/storage";function PL(n,e){return M3(n=(0,F.m9)(n),e)}function B3(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new rP(t,r,i,e,Fi.SDK_VERSION)}!function j3(){(0,Fi._registerComponent)(new No.wA("storage",B3,"PUBLIC").setMultipleInstances(!0)),(0,Fi.registerVersion)(xL,"0.11.1",""),(0,Fi.registerVersion)(xL,"0.11.1","esm2017")}();class FD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class OL{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new FD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new FD(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new FD(l,this,this._ref)):{next:t.next?l=>t.next(new FD(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class kL{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new jc(e,this._service))}get items(){return this._delegate.items.map(e=>new jc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class jc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function V3(n,e){return TL(n,e)}(this._delegate,e);return new jc(t,this.storage)}get root(){return new jc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new jc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new OL(function P3(n,e,t){return function E3(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new CL(n,new Tl(e),t)}(n=(0,F.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ko.RAW,r){this._throwIfRoot("putString");const i=QR(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new OL(new CL(this._delegate,new Tl(i.data,!0),a),this)}listAll(){return function F3(n){return function I3(n){const e={prefixes:[],items:[]};return bL(n,e).then(()=>e)}(n=(0,F.m9)(n))}(this._delegate).then(e=>new kL(e,this.storage))}list(e){return function k3(n,e){return DL(n=(0,F.m9)(n),e)}(this._delegate,e||void 0).then(t=>new kL(t,this.storage))}getMetadata(){return function N3(n){return function b3(n){n._throwIfRoot("getMetadata");const e=mL(n.storage,n._location,Nw());return n.storage.makeRequestWithTokens(e,su)}(n=(0,F.m9)(n))}(this._delegate)}updateMetadata(e){return function O3(n,e){return function D3(n,e){n._throwIfRoot("updateMetadata");const t=function s3(n,e,t,r){const a=Bc(e.fullServerUrl(),n.host,n._protocol),f=JR(t,r),v=n.maxOperationRetryTime,I=new Sl(a,"PATCH",OD(n,r),v);return I.headers={"Content-Type":"application/json; charset=utf-8"},I.body=f,I.errorHandler=Ow(e),I}(n.storage,n._location,e,Nw());return n.storage.makeRequestWithTokens(t,su)}(n=(0,F.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function L3(n){return T3(n=(0,F.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function U3(n){return function S3(n){n._throwIfRoot("deleteObject");const e=function o3(n,e){const r=Bc(e.fullServerUrl(),n.host,n._protocol),f=new Sl(r,"DELETE",function l(m,v){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=Ow(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,su)}(n=(0,F.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw sL(e)}}class FL{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(LL(e))throw Z_("ref() expected a child path but got a URL, use refFromURL instead.");return new jc(PL(this._delegate,e),this)}refFromURL(e){if(!LL(e))throw Z_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ds.makeFromUrl(e,this._delegate.host)}catch{throw Z_("refFromUrl() expected a valid full URL but got an invalid one.")}return new jc(PL(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function NL(n,e,t,r={}){!function R3(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,F.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function LL(n){return/^[A-Za-z]+:\/\//.test(n)}function z3(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new FL(t,r)}function UL(n){const e=function W3(n){return new Cr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function dG(n,e=$v.z){return(0,Nn.e)((t,r)=>{let i=null,a=null,l=null;const f=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function m(){const v=l+n,I=e.now();if(I<v)return i=this.schedule(void 0,v-I),void r.add(i);f()}t.subscribe((0,qe.x)(r,v=>{a=v,l=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,x.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function LD(n){return{getDownloadURL:()=>ut(void 0).pipe(_n.fc,zn(()=>n.getDownloadURL()),_n.iC),getMetadata:()=>ut(void 0).pipe(_n.fc,zn(()=>n.getMetadata()),_n.iC),delete:()=>(0,Bt.D)(n.delete()),child:e=>LD(n.child(e)),updateMetadata:e=>(0,Bt.D)(n.updateMetadata(e)),put:(e,t)=>UL(n.put(e,t)),putString:(e,t,r)=>UL(n.putString(e,t,r)),list:e=>(0,Bt.D)(n.list(e)),listAll:()=>(0,Bt.D)(n.listAll())}}!function q3(n){const e={TaskState:Vs,TaskEvent:d3,StringFormat:ko,Storage:FL,Reference:jc};n.INTERNAL.registerComponent(new No.wA("storage-compat",z3,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.1")}(Om.Z);const Z3=new d.OlP("angularfire2.storageBucket"),K3=new d.OlP("angularfire2.storage.maxUploadRetryTime"),Y3=new d.OlP("angularfire2.storage.maxOperationRetryTime"),Q3=new d.OlP("angularfire2.storage.use-emulator");let X3=(()=>{class n{constructor(t,r,i,a,l,f,m,v,I,S){const P=(0,li.on)(t,l,r);this.storage=(0,li.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const V=l.runOutsideAngular(()=>P.storage(i||void 0)),z=I;return z&&V.useEmulator(...z),m&&V.setMaxUploadRetryTime(m),v&&V.setMaxOperationRetryTime(v),V},[m,v])}ref(t){return LD(this.storage.ref(t))}refFromURL(t){return LD(this.storage.refFromURL(t))}upload(t,r,i){return LD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(li.Dh),d.LFG(li.xv,8),d.LFG(Z3,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(_n.HU),d.LFG(K3,8),d.LFG(Y3,8),d.LFG(Q3,8),d.LFG(bw,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),J3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),ez=(()=>{class n{constructor(){xD.Z.registerVersion("angularfire",_n.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[X3],imports:[J3]}),n})();const VL="@firebase/database";let iP="";function jL(n){iP=n}class tz{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,F.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,F.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class nz{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,F.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const HL=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new tz(e)}}catch{}return new nz},ng=HL("localStorage"),sP=HL("sessionStorage"),Q_=new Ki.Yd("@firebase/database"),$L=function(){let n=1;return function(){return n++}}(),GL=function(n){const e=(0,F.dS)(n),t=new F.gQ;t.update(e);const r=t.digest();return F.US.encodeByteArray(r)},kw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=kw.apply(null,r):e+="object"==typeof r?(0,F.Wl)(r):r,e+=" "}return e};let rg=null,zL=!0;const qL=function(n,e){(0,F.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Q_.logLevel=Ki.in.VERBOSE,rg=Q_.log.bind(Q_),e&&sP.set("logging_enabled",!0)):"function"==typeof n?rg=n:(rg=null,sP.remove("logging_enabled"))},Bi=function(...n){if(!0===zL&&(zL=!1,null===rg&&!0===sP.get("logging_enabled")&&qL(!0)),rg){const e=kw.apply(null,n);rg(e)}},Fw=function(n){return function(...e){Bi(n,...e)}},oP=function(...n){const e="FIREBASE INTERNAL ERROR: "+kw(...n);Q_.error(e)},xl=function(...n){const e=`FIREBASE FATAL ERROR: ${kw(...n)}`;throw Q_.error(e),new Error(e)},hs=function(...n){const e="FIREBASE WARNING: "+kw(...n);Q_.warn(e)},UD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},kh="[MIN_NAME]",Hc="[MAX_NAME]",ig=function(n,e){if(n===e)return 0;if(n===kh||e===Hc)return-1;if(e===kh||n===Hc)return 1;{const t=KL(n),r=KL(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},sz=function(n,e){return n===e?0:n<e?-1:1},Lw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Wl)(e))},aP=function(n){if("object"!=typeof n||null===n)return(0,F.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,F.Wl)(e[r]),t+=":",t+=aP(n[e[r]]);return t+="}",t},WL=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ji(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const ZL=function(n){(0,F.hu)(!UD(n),"Invalid JSON number");const r=1023;let i,a,l,f,m;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,l=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const I=v.join("");let S="";for(m=0;m<64;m+=8){let P=parseInt(I.substr(m,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},lz=new RegExp("^-?(0*)\\d{1,10}$"),KL=function(n){if(lz.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},X_=function(n){try{n()}catch(e){setTimeout(()=>{throw hs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Uw=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class fz{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){hs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class pz{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Bi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',hs(e)}}let Vw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const eU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,rU="websocket",iU="long_polling";class lP{constructor(e,t,r,i,a=!1,l="",f=!1,m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ng.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ng.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function sU(n,e,t){let r;if((0,F.hu)("string"==typeof e,"typeof type must == string"),(0,F.hu)("object"==typeof t,"typeof params must == object"),e===rU)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==iU)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function gz(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ji(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class mz{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,F.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,F.p$)(this.counters_)}}const cP={},dP={};function hP(n){const e=n.toString();return cP[e]||(cP[e]=new mz),cP[e]}class yz{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&X_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Fh{constructor(e,t,r,i,a,l,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fw(e),this.stats_=hP(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),sU(t,iU,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new yz(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new fP((...a)=>{const[l,f,m,v,I]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=f,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&eU.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Fh.forceAllow_=!0}static forceDisallow(){Fh.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!Fh.forceAllow_&&(Fh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,F.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,F.h$)(t),i=WL(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,F.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class fP{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=$L(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=fP.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(f){Bi("frame writing exception"),f.stack&&Bi(f.stack),Bi(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Bi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,F.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Bi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let BD=null;typeof MozWebSocket<"u"?BD=MozWebSocket:typeof WebSocket<"u"&&(BD=WebSocket);let J_=(()=>{class n{constructor(t,r,i,a,l,f,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fw(this.connId),this.stats_=hP(r),this.connURL=n.connectionURL_(r,f,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const f={v:"5"};return!(0,F.Yr)()&&typeof location<"u"&&location.hostname&&eU.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),l&&(f.p=l),sU(t,rU,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ng.set("previous_websocket_failure",!0);try{let i;if((0,F.Yr)()){i={headers:{"User-Agent":`Firebase/5/${iP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,f=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new BD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==BD&&!n.forceDisallow_}static previouslyFailed(){return ng.isInMemoryStorage||!0===ng.get("previous_websocket_failure")}markConnectionHealthy(){ng.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,F.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,F.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=WL(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),hU=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Fh,J_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=J_&&J_.isAvailable();let i=r&&!J_.previouslyFailed();if(t.webSocketOnly&&(r||hs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[J_];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class vU{constructor(e,t,r,i,a,l,f,m,v,I){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=f,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=I,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fw("c:"+this.id+":"),this.transportManager_=new hU(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Uw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Lw("t",e),r=Lw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Lw("t",e),r=Lw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Lw("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?oP("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):oP("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&hs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Uw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Uw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ng.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class wU{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class EU{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,F.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,F.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class jD extends EU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new jD}getInitialEvent(e){return(0,F.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class An{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function En(){return new An("")}function nn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Lh(n){return n.pieces_.length-n.pieceNum_}function Vn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new An(n.pieces_,e)}function gP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Bw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function bU(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new An(e,0)}function fr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof An)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new An(t,0)}function rn(n){return n.pieceNum_>=n.pieces_.length}function Bs(n,e){const t=nn(n),r=nn(e);if(null===t)return e;if(t===r)return Bs(Vn(n),Vn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Bz(n,e){const t=Bw(n,0),r=Bw(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=ig(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function mP(n,e){if(Lh(n)!==Lh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function _a(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Lh(n)>Lh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class jz{constructor(e,t){this.errorPrefix_=t,this.parts_=Bw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,F.ug)(this.parts_[r]);DU(this)}}function DU(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+sg(n))}function sg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class _P extends EU{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new _P}getInitialEvent(e){return(0,F.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const jw=1e3;let $D,og=(()=>{class n extends wU{constructor(t,r,i,a,l,f,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=Fw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=jw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");_P.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&jD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,F.Wl)(l)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new F.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const m=f.d;"ok"===f.s?r.resolve(m):r.reject(m)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const v=m.d,I=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==I&&this.removeListen_(i,a),t.onComplete&&t.onComplete(I,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,F.r3)(t,"w")){const i=(0,F.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();hs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,F.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,F.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,f=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const f={p:r,d:i};void 0!==l&&(f.h=l),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,F.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):oP("Unrecognized action received from server: "+(0,F.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=jw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=jw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=jw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,fe.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let m=!1,v=null;const I=function(){v?v.close():(m=!0,a())};t.realtime_={close:I,sendRequest:function(V){(0,F.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(V)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,z]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);m?Bi("getToken() completed but was canceled"):(Bi("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=z&&z.token,v=new vU(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ce=>{hs(ce+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(V){t.log_("Failed to get token: "+V),m||(t.repoInfo_.nodeAdmin&&hs(V),I())}}})()}interrupt(t){Bi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Bi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=jw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>aP(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new An(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Bi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Bi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,F.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+iP.replace(/\./g,"-")]=1,(0,F.uI)()?t["framework.cordova"]=1:(0,F.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=jD.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class an{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new an(e,t)}}class HD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new an(kh,e),i=new an(kh,t);return 0!==this.compare(r,i)}minPost(){return an.MIN}}class AU extends HD{static get __EMPTY_NODE(){return $D}static set __EMPTY_NODE(e){$D=e}compare(e,t){return ig(e.name,t.name)}isDefinedOn(e){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return an.MIN}maxPost(){return new an(Hc,$D)}makePost(e,t){return(0,F.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new an(e,$D)}toString(){return".key"}}const Ml=new AU;class GD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let vP,ou=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??uo.EMPTY_NODE,this.right=l??uo.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return uo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return uo.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class uo{constructor(e,t=uo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new uo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ou.BLACK,null,null))}remove(e){return new uo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ou.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new GD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new GD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new GD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new GD(this.root_,null,this.comparator_,!0,e)}}function Kz(n,e){return ig(n.name,e.name)}function yP(n,e){return ig(n,e)}uo.EMPTY_NODE=new class Zz{copy(e,t,r,i,a){return this}insert(e,t,r){return new ou(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const xU=function(n){return"number"==typeof n?"number:"+ZL(n):"string:"+n},MU=function(n){if(n.isLeafNode()){const e=n.val();(0,F.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,F.r3)(e,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===vP||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===vP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let RU,PU,NU,ey=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),MU(this.priorityNode_)}static set __childrenNodeConstructor(t){RU=t}static get __childrenNodeConstructor(){return RU}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return rn(t)?this:".priority"===nn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=nn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,F.hu)(".priority"!==i||1===Lh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Vn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+xU(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?ZL(this.value_):this.value_,this.lazyHash_=GL(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,F.hu)(a>=0,"Unknown leaf type: "+r),(0,F.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Kn=new class Jz extends HD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?ig(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return an.MIN}maxPost(){return new an(Hc,new ey("[PRIORITY-POST]",NU))}makePost(e,t){const r=PU(e);return new an(t,new ey("[PRIORITY-POST]",r))}toString(){return".priority"}},eq=Math.log(2);class tq{constructor(e){this.count=parseInt(Math.log(e+1)/eq,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const zD=function(n,e,t,r){n.sort(e);const i=function(m,v){const I=v-m;let S,P;if(0===I)return null;if(1===I)return S=n[m],P=t?t(S):S,new ou(P,S.node,ou.BLACK,null,null);{const V=parseInt(I/2,10)+m,z=i(m,V),ce=i(V+1,v);return S=n[V],P=t?t(S):S,new ou(P,S.node,ou.BLACK,z,ce)}},f=function(m){let v=null,I=null,S=n.length;const P=function(z,ce){const ve=S-z,tt=S;S-=z;const wt=i(ve+1,tt),ft=n[ve],mt=t?t(ft):ft;V(new ou(mt,ft.node,ce,null,wt))},V=function(z){v?(v.left=z,v=z):(I=z,v=z)};for(let z=0;z<m.count;++z){const ce=m.nextBitIsOne(),ve=Math.pow(2,m.count-(z+1));ce?P(ve,ou.BLACK):(P(ve,ou.BLACK),P(ve,ou.RED))}return I}(new tq(n.length));return new uo(r||e,f)};let wP;const ty={};class $c{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,F.hu)(ty&&Kn,"ChildrenNode.ts has not been loaded"),wP=wP||new $c({".priority":ty},{".priority":Kn}),wP}get(e){const t=(0,F.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof uo?t:null}hasIndex(e){return(0,F.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,F.hu)(e!==Ml,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(an.Wrap);let f,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();f=i?zD(r,e.getCompare()):ty;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const I=Object.assign({},this.indexes_);return I[m]=f,new $c(I,v)}addToIndexes(e,t){const r=(0,F.UI)(this.indexes_,(i,a)=>{const l=(0,F.DV)(this.indexSet_,a);if((0,F.hu)(l,"Missing index implementation for "+a),i===ty){if(l.isDefinedOn(e.node)){const f=[],m=t.getIterator(an.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&f.push(v),v=m.getNext();return f.push(e),zD(f,l.getCompare())}return ty}{const f=t.get(e.name);let m=i;return f&&(m=m.remove(new an(e.name,f))),m.insert(e,e.node)}});return new $c(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,F.UI)(this.indexes_,i=>{if(i===ty)return i;{const a=t.get(e.name);return a?i.remove(new an(e.name,a)):i}});return new $c(r,this.indexSet_)}}let Hw,Xt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&MU(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Hw||(Hw=new n(new uo(yP),null,$c.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Hw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Hw:r}}getChild(t){const r=nn(t);return null===r?this:this.getImmediateChild(r).getChild(Vn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,F.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new an(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?Hw:this.priorityNode_;return new n(a,f,l)}}updateChild(t,r){const i=nn(t);if(null===i)return r;{(0,F.hu)(".priority"!==nn(t)||1===Lh(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Vn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Kn,(f,m)=>{r[f]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):l=!1}),!t&&l&&a<2*i){const f=[];for(const m in r)f[m]=r[m];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+xU(this.getPriority().val())+":"),this.forEachChild(Kn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":GL(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new an(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new an(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new an(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,an.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,an.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===$w?-1:0}withIndex(t){if(t===Ml||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ml||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Kn),a=r.getIterator(Kn);let l=i.getNext(),f=a.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=a.getNext()}return null===l&&null===f}return!1}return!1}}resolveIndex_(t){return t===Ml?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const $w=new class nq extends Xt{constructor(){super(new uo(yP),Xt.EMPTY_NODE,$c.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Xt.EMPTY_NODE}isEmpty(){return!1}};function Mr(n,e=null){if(null===n)return Xt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,F.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ey(n,Mr(e));if(n instanceof Array){let t=Xt.EMPTY_NODE;return ji(n,(r,i)=>{if((0,F.r3)(n,r)&&"."!==r.substring(0,1)){const a=Mr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Mr(e))}{const t=[];let r=!1;if(ji(n,(l,f)=>{if("."!==l.substring(0,1)){const m=Mr(f);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new an(l,m)))}}),0===t.length)return Xt.EMPTY_NODE;const a=zD(t,Kz,l=>l.name,yP);if(r){const l=zD(t,Kn.getCompare());return new Xt(a,Mr(e),new $c({".priority":l},{".priority":Kn}))}return new Xt(a,Mr(e),$c.Default)}}Object.defineProperties(an,{MIN:{value:new an(kh,Xt.EMPTY_NODE)},MAX:{value:new an(Hc,$w)}}),AU.__EMPTY_NODE=Xt.EMPTY_NODE,ey.__childrenNodeConstructor=Xt,function Yz(n){vP=n}($w),function Xz(n){NU=n}($w),function Qz(n){PU=n}(Mr);class EP extends HD{constructor(e){super(),this.indexPath_=e,(0,F.hu)(!rn(e)&&".priority"!==nn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?ig(e.name,t.name):a}makePost(e,t){const r=Mr(e),i=Xt.EMPTY_NODE.updateChild(this.indexPath_,r);return new an(t,i)}maxPost(){const e=Xt.EMPTY_NODE.updateChild(this.indexPath_,$w);return new an(Hc,e)}toString(){return Bw(this.indexPath_,0).join("/")}}const CP=new class iq extends HD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?ig(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return an.MIN}maxPost(){return an.MAX}makePost(e,t){const r=Mr(e);return new an(t,r)}toString(){return".value"}};function OU(n){return{type:"value",snapshotNode:n}}function ny(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Gw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function zw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class IP{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,F.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(Gw(t,f)):(0,F.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?l.trackChildChange(ny(t,r)):l.trackChildChange(zw(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Kn,(i,a)=>{t.hasChild(i)||r.trackChildChange(Gw(i,a))}),t.isLeafNode()||t.forEachChild(Kn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(zw(i,a,l))}else r.trackChildChange(ny(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Xt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class qw{constructor(e){this.indexedFilter_=new IP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=qw.getStartPost_(e),this.endPost_=qw.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,l){return this.matches(new an(t,r))||(r=Xt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Xt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Xt.EMPTY_NODE);const a=this;return t.forEachChild(Kn,(l,f)=>{a.matches(new an(l,f))||(i=i.updateImmediateChild(l,Xt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class oq{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new qw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new an(t,r))||(r=Xt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Xt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Xt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const f=a.getNext();if(this.withinDirectionalStart(f)){if(!this.withinDirectionalEnd(f))break;i=i.updateImmediateChild(f.name,f.node),l++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(Xt.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;a.hasNext();){const f=a.getNext();l<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?l++:i=i.updateImmediateChild(f.name,Xt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(P,V)=>S(V,P)}else l=this.index_.getCompare();const f=e;(0,F.hu)(f.numChildren()===this.limit_,"");const m=new an(t,r),v=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),I=this.rangedFilter_.matches(m);if(f.hasChild(t)){const S=f.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=P&&(P.name===t||f.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const V=null==P?1:l(P,m);if(I&&!r.isEmpty()&&V>=0)return a?.trackChildChange(zw(t,r,S)),f.updateImmediateChild(t,r);{a?.trackChildChange(Gw(t,S));const ce=f.updateImmediateChild(t,Xt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(a?.trackChildChange(ny(P.name,P.node)),ce.updateImmediateChild(P.name,P.node)):ce}}return r.isEmpty()?e:I&&l(v,m)>=0?(null!=a&&(a.trackChildChange(Gw(v.name,v.node)),a.trackChildChange(ny(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(v.name,Xt.EMPTY_NODE)):e}}class qD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Kn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:kh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Hc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Kn}copy(){const e=new qD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function bP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function DP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function WD(n,e){const t=n.copy();return t.index_=e,t}function kU(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Kn?t="$priority":n.index_===CP?t="$value":n.index_===Ml?t="$key":((0,F.hu)(n.index_ instanceof EP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,F.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,F.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,F.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,F.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,F.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function FU(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Kn&&(e.i=n.index_.toString()),e}class ZD extends wU{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Fw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,F.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=ZD.getListenId_(e,r),f={};this.listens_[l]=f;const m=kU(e._queryParams);this.restRequest_(a+".json",m,(v,I)=>{let S=I;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,F.DV)(this.listens_,l)===f){let P;P=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(P,null)}})}unlisten(e,t){const r=ZD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=kU(e._queryParams),r=e._path.toString(),i=new F.BH;return this.restRequest_(r+".json",t,(a,l)=>{let f=l;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,F.xO)(t);this.log_("Sending REST request for "+l);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+l+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=(0,F.cI)(f.responseText)}catch{hs("Failed to parse JSON response for "+l+": "+f.responseText)}r(null,m)}else 401!==f.status&&404!==f.status&&hs("Got unsuccessful REST response for "+l+" Status: "+f.status),r(f.status);r=null}},f.open("GET",l,!0),f.send()})}}class hq{constructor(){this.rootNode_=Xt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function KD(){return{value:null,children:new Map}}function ry(n,e,t){if(rn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=nn(e);n.children.has(r)||n.children.set(r,KD()),ry(n.children.get(r),e=Vn(e),t)}}function TP(n,e){if(rn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Kn,(r,i)=>{ry(n,new An(r),i)}),TP(n,e)}}if(n.children.size>0){const t=nn(e);return e=Vn(e),n.children.has(t)&&TP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function SP(n,e,t){null!==n.value?t(e,n.value):function fq(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{SP(i,new An(e.toString()+"/"+r),t)})}class pq{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ji(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class _q{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new pq(e);const r=1e4+2e4*Math.random();Uw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ji(e,(i,a)=>{a>0&&(0,F.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Uw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ya=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ya||(ya={})),ya))();function MP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class YD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ya.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(rn(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new An(e));return new YD(En(),t,this.revert)}}return(0,F.hu)(nn(this.path)===e,"operationForChild called for unrelated child."),new YD(Vn(this.path),this.affectedTree,this.revert)}}class Ww{constructor(e,t){this.source=e,this.path=t,this.type=ya.LISTEN_COMPLETE}operationForChild(e){return rn(this.path)?new Ww(this.source,En()):new Ww(this.source,Vn(this.path))}}class ag{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ya.OVERWRITE}operationForChild(e){return rn(this.path)?new ag(this.source,En(),this.snap.getImmediateChild(e)):new ag(this.source,Vn(this.path),this.snap)}}class iy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ya.MERGE}operationForChild(e){if(rn(this.path)){const t=this.children.subtree(new An(e));return t.isEmpty()?null:t.value?new ag(this.source,En(),t.value):new iy(this.source,En(),t)}return(0,F.hu)(nn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new iy(this.source,Vn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Uh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(rn(e))return this.isFullyInitialized()&&!this.filtered_;const t=nn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class yq{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Zw(n,e,t,r,i,a){const l=r.filter(f=>f.type===t);l.sort((f,m)=>function Eq(n,e,t){if(null==e.childName||null==t.childName)throw(0,F.g5)("Should only compare child_ events.");const r=new an(e.childName,e.snapshotNode),i=new an(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,m)),l.forEach(f=>{const m=function wq(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(v=>{v.respondsTo(f.type)&&e.push(v.createEvent(m,n.query_))})})}function QD(n,e){return{eventCache:n,serverCache:e}}function Kw(n,e,t,r){return QD(new Uh(e,t,r),n.serverCache)}function UU(n,e,t,r){return QD(n.eventCache,new Uh(e,t,r))}function XD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ug(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let RP;class Yn{constructor(e,t=(()=>(RP||(RP=new uo(sz)),RP))()){this.value=e,this.children=t}static fromObject(e){let t=new Yn(null);return ji(e,(r,i)=>{t=t.set(new An(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:En(),value:this.value};if(rn(e))return null;{const r=nn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Vn(e),t);return null!=a?{path:fr(new An(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(rn(e))return this;{const t=nn(e),r=this.children.get(t);return null!==r?r.subtree(Vn(e)):new Yn(null)}}set(e,t){if(rn(e))return new Yn(t,this.children);{const r=nn(e),a=(this.children.get(r)||new Yn(null)).set(Vn(e),t),l=this.children.insert(r,a);return new Yn(this.value,l)}}remove(e){if(rn(e))return this.children.isEmpty()?new Yn(null):new Yn(null,this.children);{const t=nn(e),r=this.children.get(t);if(r){const i=r.remove(Vn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Yn(null):new Yn(this.value,a)}return this}}get(e){if(rn(e))return this.value;{const t=nn(e),r=this.children.get(t);return r?r.get(Vn(e)):null}}setTree(e,t){if(rn(e))return t;{const r=nn(e),a=(this.children.get(r)||new Yn(null)).setTree(Vn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Yn(this.value,l)}}fold(e){return this.fold_(En(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(fr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,En(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(rn(e))return null;{const a=nn(e),l=this.children.get(a);return l?l.findOnPath_(Vn(e),fr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,En(),t)}foreachOnPath_(e,t,r){if(rn(e))return this;{this.value&&r(t,this.value);const i=nn(e),a=this.children.get(i);return a?a.foreachOnPath_(Vn(e),fr(t,i),r):new Yn(null)}}foreach(e){this.foreach_(En(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(fr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class au{constructor(e){this.writeTree_=e}static empty(){return new au(new Yn(null))}}function Yw(n,e,t){if(rn(e))return new au(new Yn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Bs(i,e);return a=a.updateChild(l,t),new au(n.writeTree_.set(i,a))}{const i=new Yn(t),a=n.writeTree_.setTree(e,i);return new au(a)}}}function PP(n,e,t){let r=n;return ji(t,(i,a)=>{r=Yw(r,fr(e,i),a)}),r}function VU(n,e){if(rn(e))return au.empty();{const t=n.writeTree_.setTree(e,new Yn(null));return new au(t)}}function NP(n,e){return null!=lg(n,e)}function lg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Bs(t.path,e)):null}function BU(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Kn,(r,i)=>{e.push(new an(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new an(r,i.value))}),e}function Vh(n,e){if(rn(e))return n;{const t=lg(n,e);return new au(null!=t?new Yn(t):n.writeTree_.subtree(e))}}function OP(n){return n.writeTree_.isEmpty()}function sy(n,e){return jU(En(),n.writeTree_,e)}function jU(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,F.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=jU(fr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(fr(n,".priority"),r)),t}}function JD(n,e){return qU(e,n)}function Sq(n,e){if(n.snap)return _a(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&_a(fr(n.path,t),e))return!0;return!1}function xq(n){return n.visible}function HU(n,e,t){let r=au.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let f;if(a.snap)_a(t,l)?(f=Bs(t,l),r=Yw(r,f,a.snap)):_a(l,t)&&(f=Bs(l,t),r=Yw(r,En(),a.snap.getChild(f)));else{if(!a.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(_a(t,l))f=Bs(t,l),r=PP(r,f,a.children);else if(_a(l,t))if(f=Bs(l,t),rn(f))r=PP(r,En(),a.children);else{const m=(0,F.DV)(a.children,nn(f));if(m){const v=m.getChild(Vn(f));r=Yw(r,En(),v)}}}}}return r}function $U(n,e,t,r,i){if(r||i){const a=Vh(n.visibleWrites,e);return!i&&OP(a)?t:i||null!=t||NP(a,En())?sy(HU(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(_a(v.path,e)||_a(e,v.path))},e),t||Xt.EMPTY_NODE):null}{const a=lg(n.visibleWrites,e);if(null!=a)return a;{const l=Vh(n.visibleWrites,e);return OP(l)?t:null!=t||NP(l,En())?sy(l,t||Xt.EMPTY_NODE):null}}}function eT(n,e,t,r){return $U(n.writeTree,n.treePath,e,t,r)}function kP(n,e){return function Mq(n,e,t){let r=Xt.EMPTY_NODE;const i=lg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Kn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Vh(n.visibleWrites,e);return t.forEachChild(Kn,(l,f)=>{const m=sy(Vh(a,new An(l)),f);r=r.updateImmediateChild(l,m)}),BU(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return BU(Vh(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function GU(n,e,t,r){return function Rq(n,e,t,r,i){(0,F.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=fr(e,t);if(NP(n.visibleWrites,a))return null;{const l=Vh(n.visibleWrites,a);return OP(l)?i.getChild(t):sy(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function tT(n,e){return function Nq(n,e){return lg(n.visibleWrites,e)}(n.writeTree,fr(n.treePath,e))}function FP(n,e,t){return function Pq(n,e,t,r){const i=fr(e,t),a=lg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?sy(Vh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function zU(n,e){return qU(fr(n.treePath,e),n.writeTree)}function qU(n,e){return{treePath:n,writeTree:e}}class Lq{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,F.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,zw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Gw(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,ny(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,F.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,zw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const WU=new class Uq{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class LP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Uh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return FP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ug(this.viewCache_),a=function Fq(n,e,t,r,i,a){return function Oq(n,e,t,r,i,a,l){let f;const m=Vh(n.visibleWrites,e),v=lg(m,En());if(null!=v)f=v;else{if(null==t)return[];f=sy(m,t)}if(f=f.withIndex(l),f.isEmpty()||f.isLeafNode())return[];{const I=[],S=l.getCompare(),P=a?f.getReverseIteratorFrom(r,l):f.getIteratorFrom(r,l);let V=P.getNext();for(;V&&I.length<i;)0!==S(V,r)&&I.push(V),V=P.getNext();return I}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function ZU(n,e,t,r,i,a){const l=e.eventCache;if(null!=tT(r,t))return e;{let f,m;if(rn(t))if((0,F.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=ug(e),S=kP(r,v instanceof Xt?v:Xt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=eT(r,ug(e));f=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=nn(t);if(".priority"===v){(0,F.hu)(1===Lh(t),"Can't have a priority with additional path components");const I=l.getNode();m=e.serverCache.getNode();const S=GU(r,t,I,m);f=null!=S?n.filter.updatePriority(I,S):l.getNode()}else{const I=Vn(t);let S;if(l.isCompleteForChild(v)){m=e.serverCache.getNode();const P=GU(r,t,l.getNode(),m);S=null!=P?l.getNode().getImmediateChild(v).updateChild(I,P):l.getNode().getImmediateChild(v)}else S=FP(r,v,e.serverCache);f=null!=S?n.filter.updateChild(l.getNode(),v,S,I,i,a):l.getNode()}}return Kw(e,f,l.isFullyInitialized()||rn(t),n.filter.filtersNodes())}}function nT(n,e,t,r,i,a,l,f){const m=e.serverCache;let v;const I=l?n.filter:n.filter.getIndexedFilter();if(rn(t))v=I.updateFullNode(m.getNode(),r,null);else if(I.filtersNodes()&&!m.isFiltered()){const V=m.getNode().updateChild(t,r);v=I.updateFullNode(m.getNode(),V,null)}else{const V=nn(t);if(!m.isCompleteForPath(t)&&Lh(t)>1)return e;const z=Vn(t),ve=m.getNode().getImmediateChild(V).updateChild(z,r);v=".priority"===V?I.updatePriority(m.getNode(),ve):I.updateChild(m.getNode(),V,ve,z,WU,null)}const S=UU(e,v,m.isFullyInitialized()||rn(t),I.filtersNodes());return ZU(n,S,t,i,new LP(i,S,a),f)}function UP(n,e,t,r,i,a,l){const f=e.eventCache;let m,v;const I=new LP(i,e,a);if(rn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=Kw(e,v,!0,n.filter.filtersNodes());else{const S=nn(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=Kw(e,v,f.isFullyInitialized(),f.isFiltered());else{const P=Vn(t),V=f.getNode().getImmediateChild(S);let z;if(rn(P))z=r;else{const ce=I.getCompleteChild(S);z=null!=ce?".priority"===gP(P)&&ce.getChild(bU(P)).isEmpty()?ce:ce.updateChild(P,r):Xt.EMPTY_NODE}m=V.equals(z)?e:Kw(e,n.filter.updateChild(f.getNode(),S,z,P,I,l),f.isFullyInitialized(),n.filter.filtersNodes())}}return m}function KU(n,e){return n.eventCache.isCompleteForChild(e)}function YU(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function VP(n,e,t,r,i,a,l,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=rn(t)?r:new Yn(null).setTree(t,r);const I=e.serverCache.getNode();return v.children.inorderTraversal((S,P)=>{if(I.hasChild(S)){const z=YU(0,e.serverCache.getNode().getImmediateChild(S),P);m=nT(n,m,new An(S),z,i,a,l,f)}}),v.children.inorderTraversal((S,P)=>{const V=!e.serverCache.isCompleteForChild(S)&&null===P.value;if(!I.hasChild(S)&&!V){const ce=YU(0,e.serverCache.getNode().getImmediateChild(S),P);m=nT(n,m,new An(S),ce,i,a,l,f)}}),m}class Wq{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new IP(r.getIndex()),a=function aq(n){return n.loadsAllData()?new IP(n.getIndex()):n.hasLimit()?new oq(n):new qw(n)}(r);this.processor_=function Vq(n){return{filter:n}}(a);const l=t.serverCache,f=t.eventCache,m=i.updateFullNode(Xt.EMPTY_NODE,l.getNode(),null),v=a.updateFullNode(Xt.EMPTY_NODE,f.getNode(),null),I=new Uh(m,l.isFullyInitialized(),i.filtersNodes()),S=new Uh(v,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=QD(S,I),this.eventGenerator_=new yq(this.query_)}get query(){return this.query_}}function Yq(n,e){const t=ug(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!rn(e)&&!t.getImmediateChild(nn(e)).isEmpty())?t.getChild(e):null}function QU(n){return 0===n.eventRegistrations_.length}function XU(n,e,t){const r=[];if(t){(0,F.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function JU(n,e,t,r){e.type===ya.MERGE&&null!==e.source.queryId&&((0,F.hu)(ug(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(XD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function jq(n,e,t,r,i){const a=new Lq;let l,f;if(t.type===ya.OVERWRITE){const v=t;v.source.fromUser?l=UP(n,e,v.path,v.snap,r,i,a):((0,F.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered()&&!rn(v.path),l=nT(n,e,v.path,v.snap,r,i,f,a))}else if(t.type===ya.MERGE){const v=t;v.source.fromUser?l=function $q(n,e,t,r,i,a,l){let f=e;return r.foreach((m,v)=>{const I=fr(t,m);KU(e,nn(I))&&(f=UP(n,f,I,v,i,a,l))}),r.foreach((m,v)=>{const I=fr(t,m);KU(e,nn(I))||(f=UP(n,f,I,v,i,a,l))}),f}(n,e,v.path,v.children,r,i,a):((0,F.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered(),l=VP(n,e,v.path,v.children,r,i,f,a))}else if(t.type===ya.ACK_USER_WRITE){const v=t;l=v.revert?function qq(n,e,t,r,i,a){let l;if(null!=tT(r,t))return e;{const f=new LP(r,e,i),m=e.eventCache.getNode();let v;if(rn(t)||".priority"===nn(t)){let I;if(e.serverCache.isFullyInitialized())I=eT(r,ug(e));else{const S=e.serverCache.getNode();(0,F.hu)(S instanceof Xt,"serverChildren would be complete if leaf node"),I=kP(r,S)}v=n.filter.updateFullNode(m,I,a)}else{const I=nn(t);let S=FP(r,I,e.serverCache);null==S&&e.serverCache.isCompleteForChild(I)&&(S=m.getImmediateChild(I)),v=null!=S?n.filter.updateChild(m,I,S,Vn(t),f,a):e.eventCache.getNode().hasChild(I)?n.filter.updateChild(m,I,Xt.EMPTY_NODE,Vn(t),f,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=eT(r,ug(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=tT(r,En()),Kw(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function Gq(n,e,t,r,i,a,l){if(null!=tT(i,t))return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(rn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return nT(n,e,t,m.getNode().getChild(t),i,a,f,l);if(rn(t)){let v=new Yn(null);return m.getNode().forEachChild(Ml,(I,S)=>{v=v.set(new An(I),S)}),VP(n,e,t,v,i,a,f,l)}return e}{let v=new Yn(null);return r.foreach((I,S)=>{const P=fr(t,I);m.isCompleteForPath(P)&&(v=v.set(I,m.getNode().getChild(P)))}),VP(n,e,t,v,i,a,f,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==ya.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+t.type);l=function zq(n,e,t,r,i){const a=e.serverCache;return ZU(n,UU(e,a.getNode(),a.isFullyInitialized()||rn(t),a.isFiltered()),t,r,WU,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function Hq(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=XD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(OU(XD(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function Bq(n,e){(0,F.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,F.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,eV(n,a.changes,a.viewCache.eventCache.getNode(),null)}function eV(n,e,t,r){return function vq(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function sq(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),Zw(n,i,"child_removed",e,r,t),Zw(n,i,"child_added",e,r,t),Zw(n,i,"child_moved",a,r,t),Zw(n,i,"child_changed",e,r,t),Zw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let rT,sT;class tV{constructor(){this.views=new Map}}function BP(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,F.hu)(null!=a,"SyncTree gave us an op for an invalid query."),JU(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(JU(l,e,t,r));return a}}function nV(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let f=eT(t,i?r:null),m=!1;f?m=!0:r instanceof Xt?(f=kP(t,r),m=!1):(f=Xt.EMPTY_NODE,m=!1);const v=QD(new Uh(f,m,!1),new Uh(r,i,!1));return new Wq(e,v)}return l}function rV(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Bh(n,e){let t=null;for(const r of n.views.values())t=t||Yq(r,e);return t}function iV(n,e){return e._queryParams.loadsAllData()?iT(n):n.views.get(e._queryIdentifier)}function sV(n,e){return null!=iV(n,e)}function jh(n){return null!=iT(n)}function iT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let oW=1;class oV{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Yn(null),this.pendingWriteTree_=function kq(){return{visibleWrites:au.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function jP(n,e,t,r,i){return function Iq(n,e,t,r,i){(0,F.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Yw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?oy(n,new ag({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Hh(n,e,t=!1){const r=function Dq(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Tq(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,F.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const f=n.allWrites[l];f.visible&&(l>=t&&Sq(f,r.path)?i=!1:_a(r.path,f.path)&&(a=!0)),l--}return!!i&&(a?(function Aq(n){n.visibleWrites=HU(n.allWrites,xq,En()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=VU(n.visibleWrites,r.path):ji(r.children,m=>{n.visibleWrites=VU(n.visibleWrites,fr(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new Yn(null);return null!=r.snap?a=a.set(En(),!0):ji(r.children,l=>{a=a.set(new An(l),!0)}),oy(n,new YD(r.path,a,t))}return[]}function Qw(n,e,t){return oy(n,new ag({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function oT(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let f=[];if(l&&("default"===e._queryIdentifier||sV(l,e))){const m=function rW(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const f=jh(n);if("default"===i)for(const[m,v]of n.views.entries())l=l.concat(XU(v,t,r)),QU(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||a.push(v.query));else{const m=n.views.get(i);m&&(l=l.concat(XU(m,t,r)),QU(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return f&&!jh(n)&&a.push(new(function eW(){return(0,F.hu)(rT,"Reference.ts has not been loaded"),rT}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function tW(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const v=m.removed;if(f=m.events,!i){const I=-1!==v.findIndex(P=>P._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(P,V)=>jh(V));if(I&&!S){const P=n.syncPointTree_.subtree(a);if(!P.isEmpty()){const V=function fW(n){return n.fold((e,t,r)=>{if(t&&jh(t))return[iT(t)];{let i=[];return t&&(i=rV(t)),ji(r,(a,l)=>{i=i.concat(l)}),i}})}(P);for(let z=0;z<V.length;++z){const ce=V[z],ve=ce.query,tt=cV(n,ce);n.listenProvider_.startListening(Jw(ve),Xw(n,ve),tt.hashFn,tt.onComplete)}}}!S&&v.length>0&&!r&&(I?n.listenProvider_.stopListening(Jw(e),null):v.forEach(P=>{const V=n.queryToTagMap.get(uT(P));n.listenProvider_.stopListening(Jw(P),V)}))}!function pW(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=uT(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,v)}return f}function aV(n,e,t,r){const i=$P(n,r);if(null!=i){const a=GP(i),l=a.path,f=a.queryId,m=Bs(l,e);return zP(n,l,new ag(MP(f),m,t))}return[]}function HP(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(P,V)=>{const z=Bs(P,i);a=a||Bh(V,z),l=l||jh(V)});let m,f=n.syncPointTree_.get(i);f?(l=l||jh(f),a=a||Bh(f,En())):(f=new tV,n.syncPointTree_=n.syncPointTree_.set(i,f)),null!=a?m=!0:(m=!1,a=Xt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((V,z)=>{const ce=Bh(z,En());ce&&(a=a.updateImmediateChild(V,ce))}));const v=sV(f,e);if(!v&&!e._queryParams.loadsAllData()){const P=uT(e);(0,F.hu)(!n.queryToTagMap.has(P),"View does not exist, but we have a tag");const V=function gW(){return oW++}();n.queryToTagMap.set(P,V),n.tagToQueryMap.set(V,P)}let S=function nW(n,e,t,r,i,a){const l=nV(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function Qq(n,e){n.eventRegistrations_.push(e)}(l,t),function Xq(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Kn,(a,l)=>{r.push(ny(a,l))}),t.isFullyInitialized()&&r.push(OU(t.getNode())),eV(n,r,t.getNode(),e)}(l,t)}(f,e,t,JD(n.pendingWriteTree_,i),a,m);if(!v&&!l&&!r){const P=iV(f,e);S=S.concat(function mW(n,e,t){const r=e._path,i=Xw(n,e),a=cV(n,t),l=n.listenProvider_.startListening(Jw(e),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,F.hu)(!jh(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((v,I,S)=>{if(!rn(v)&&I&&jh(I))return[iT(I).query];{let P=[];return I&&(P=P.concat(rV(I).map(V=>V.query))),ji(S,(V,z)=>{P=P.concat(z)}),P}});for(let v=0;v<m.length;++v){const I=m[v];n.listenProvider_.stopListening(Jw(I),Xw(n,I))}}return l}(n,e,P))}return S}function aT(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,f)=>{const v=Bh(f,Bs(l,e));if(v)return v});return $U(i,e,a,t,!0)}function oy(n,e){return uV(e,n.syncPointTree_,null,JD(n.pendingWriteTree_,En()))}function uV(n,e,t,r){if(rn(n.path))return lV(n,e,t,r);{const i=e.get(En());null==t&&null!=i&&(t=Bh(i,En()));let a=[];const l=nn(n.path),f=n.operationForChild(l),m=e.children.get(l);if(m&&f){const v=t?t.getImmediateChild(l):null,I=zU(r,l);a=a.concat(uV(f,m,v,I))}return i&&(a=a.concat(BP(i,n,r,t))),a}}function lV(n,e,t,r){const i=e.get(En());null==t&&null!=i&&(t=Bh(i,En()));let a=[];return e.children.inorderTraversal((l,f)=>{const m=t?t.getImmediateChild(l):null,v=zU(r,l),I=n.operationForChild(l);I&&(a=a.concat(lV(I,f,m,v)))}),i&&(a=a.concat(BP(i,n,r,t))),a}function cV(n,e){const t=e.query,r=Xw(n,t);return{hashFn:()=>(function Zq(n){return n.viewCache_.serverCache.getNode()}(e)||Xt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function cW(n,e,t){const r=$P(n,t);if(r){const i=GP(r),a=i.path,l=i.queryId,f=Bs(a,e);return zP(n,a,new Ww(MP(l),f))}return[]}(n,t._path,r):function lW(n,e){return oy(n,new Ww({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function uz(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return oT(n,t,null,a)}}}}function Xw(n,e){const t=uT(e);return n.queryToTagMap.get(t)}function uT(n){return n._path.toString()+"$"+n._queryIdentifier}function $P(n,e){return n.tagToQueryMap.get(e)}function GP(n){const e=n.indexOf("$");return(0,F.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new An(n.substr(0,e))}}function zP(n,e,t){const r=n.syncPointTree_.get(e);return(0,F.hu)(r,"Missing sync point for query tag that we're tracking"),BP(r,t,JD(n.pendingWriteTree_,e),null)}function Jw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function sW(){return(0,F.hu)(sT,"Reference.ts has not been loaded"),sT}())(n._repo,n._path):n}class qP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new qP(t)}node(){return this.node_}}class WP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=fr(this.path_,e);return new WP(this.syncTree_,t)}node(){return aT(this.syncTree_,this.path_)}}const dV=function(n,e,t){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?yW(n[".sv"],e,t):"object"==typeof n[".sv"]?vW(n[".sv"],e):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},yW=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,F.hu)(!1,"Unexpected server value: "+n)},vW=function(n,e,t){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,F.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,F.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},hV=function(n,e,t,r){return KP(e,new WP(t,n),r)},ZP=function(n,e,t){return KP(n,new qP(e),t)};function KP(n,e,t){const r=n.getPriority().val(),i=dV(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,f=dV(l.getValue(),e,t);return f!==l.getValue()||i!==l.getPriority().val()?new ey(f,Mr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new ey(i))),l.forEachChild(Kn,(f,m)=>{const v=KP(m,e.getImmediateChild(f),t);v!==m&&(a=a.updateImmediateChild(f,v))}),a}}class YP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function lT(n,e){let t=e instanceof An?e:new An(e),r=n,i=nn(t);for(;null!==i;){const a=(0,F.DV)(r.node.children,i)||{children:{},childCount:0};r=new YP(i,r,a),t=Vn(t),i=nn(t)}return r}function cg(n){return n.node.value}function QP(n,e){n.node.value=e,XP(n)}function fV(n){return n.node.childCount>0}function cT(n,e){ji(n.node.children,(t,r)=>{e(new YP(t,n,r))})}function pV(n,e,t,r){t&&!r&&e(n),cT(n,i=>{pV(i,e,!0,r)}),t&&r&&e(n)}function eE(n){return new An(null===n.parent?n.name:eE(n.parent)+"/"+n.name)}function XP(n){null!==n.parent&&function CW(n,e,t){const r=function wW(n){return void 0===cg(n)&&!fV(n)}(t),i=(0,F.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,XP(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,XP(n))}(n.parent,n.name,n)}const IW=/[\[\].#$\/\u0000-\u001F\u007F]/,bW=/[\[\].#$\u0000-\u001F\u007F]/,JP=10485760,dT=function(n){return"string"==typeof n&&0!==n.length&&!IW.test(n)},gV=function(n){return"string"==typeof n&&0!==n.length&&!bW.test(n)},tE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!UD(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},Rl=function(n,e,t,r){r&&void 0===e||nE((0,F.gK)(n,"value"),e,t)},nE=function(n,e,t){const r=t instanceof An?new jz(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+sg(r));if("function"==typeof e)throw new Error(n+"contains a function "+sg(r)+" with contents = "+e.toString());if(UD(e))throw new Error(n+"contains "+e.toString()+" "+sg(r));if("string"==typeof e&&e.length>JP/3&&(0,F.ug)(e)>JP)throw new Error(n+"contains a string greater than "+JP+" utf8 bytes "+sg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(ji(e,(l,f)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!dT(l)))throw new Error(n+" contains an invalid key ("+l+") "+sg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Hz(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,F.ug)(e),DU(n)})(r,l),nE(n,f,r),function $z(n){const e=n.parts_.pop();n.byteLength_-=(0,F.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+sg(r)+" in addition to actual children.")}},mV=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,F.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];ji(e,(l,f)=>{const m=new An(l);if(nE(i,f,fr(t,m)),".priority"===gP(m)&&!tE(f))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Bw(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!dT(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Bz);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&_a(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},eN=function(n,e,t){if(!t||void 0!==e){if(UD(e))throw new Error((0,F.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!tE(e))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},rE=function(n,e,t,r){if(!(r&&void 0===t||dT(t)))throw new Error((0,F.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},iE=function(n,e,t,r){if(!(r&&void 0===t||gV(t)))throw new Error((0,F.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},va=function(n,e){if(".info"===nn(e))throw new Error(n+" failed = Can't modify data under /.info/")},_V=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!dT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gV(n)}(t))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class AW{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function hT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!mP(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function yV(n,e,t){hT(n,t),vV(n,r=>mP(r,e))}function Fo(n,e,t){hT(n,t),vV(n,r=>_a(r,e)||_a(e,r))}function vV(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(xW(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function xW(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();rg&&Bi("event: "+t.toString()),X_(r)}}}const wV="repo_interrupt";class RW{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new AW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=KD(),this.transactionQueueTree_=new YP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function EV(n){const t=n.infoData_.getNode(new An(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function sE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:EV(n)})}function CV(n,e,t,r,i){n.dataUpdateCount++;const a=new An(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,F.UI)(t,v=>Mr(v));l=function dW(n,e,t,r){const i=$P(n,r);if(i){const a=GP(i),l=a.path,f=a.queryId,m=Bs(l,e),v=Yn.fromObject(t);return zP(n,l,new iy(MP(f),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Mr(t);l=aV(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,F.UI)(t,v=>Mr(v));l=function uW(n,e,t){const r=Yn.fromObject(t);return oy(n,new iy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Mr(t);l=Qw(n.serverSyncTree_,a,m)}let f=a;l.length>0&&(f=uy(n,a)),Fo(n.eventQueue_,f,l)}function IV(n,e){tN(n,"connected",e),!1===e&&function FW(n){ay(n,"onDisconnectEvents");const e=sE(n),t=KD();SP(n.onDisconnect_,En(),(i,a)=>{const l=hV(i,a,n.serverSyncTree_,e);ry(t,i,l)});let r=[];SP(t,En(),(i,a)=>{r=r.concat(Qw(n.serverSyncTree_,i,a));const l=sN(n,i);uy(n,l)}),n.onDisconnect_=KD(),Fo(n.eventQueue_,En(),r)}(n)}function tN(n,e,t){const r=new An("/.info/"+e),i=Mr(t);n.infoData_.updateSnapshot(r,i);const a=Qw(n.infoSyncTree_,r,i);Fo(n.eventQueue_,r,a)}function fT(n){return n.nextWriteId_++}function nN(n,e,t,r,i){ay(n,"set",{path:e.toString(),value:t,priority:r});const a=sE(n),l=Mr(t,r),f=aT(n.serverSyncTree_,e),m=ZP(l,f,a),v=fT(n),I=jP(n.serverSyncTree_,e,m,v,!0);hT(n.eventQueue_,I),n.server_.put(e.toString(),l.val(!0),(P,V)=>{const z="ok"===P;z||hs("set at "+e+" failed: "+P);const ce=Hh(n.serverSyncTree_,v,!z);Fo(n.eventQueue_,e,ce),$h(0,i,P,V)});const S=sN(n,e);uy(n,S),Fo(n.eventQueue_,S,[])}function LW(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&TP(n.onDisconnect_,e),$h(0,t,r,i)})}function bV(n,e,t,r){const i=Mr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&ry(n.onDisconnect_,e,i),$h(0,r,a,l)})}function rN(n,e,t){let r;r=".info"===nn(e._path)?oT(n.infoSyncTree_,e,t):oT(n.serverSyncTree_,e,t),yV(n.eventQueue_,e._path,r)}function DV(n){n.persistentConnection_&&n.persistentConnection_.interrupt(wV)}function ay(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Bi(t,...e)}function $h(n,e,t,r){e&&X_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function iN(n,e,t){return aT(n.serverSyncTree_,e,t)||Xt.EMPTY_NODE}function pT(n,e=n.transactionQueueTree_){if(e||gT(n,e),cg(e)){const t=SV(n,e);(0,F.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function $W(n,e,t){const r=t.map(v=>v.currentWriteId),i=iN(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const I=t[v];(0,F.hu)(0===I.status,"tryToSendTransactionQueue_: items in queue should all be run."),I.status=1,I.retryCount++;const S=Bs(e,I.path);a=a.updateChild(S,I.currentOutputSnapshotRaw)}const f=a.val(!0),m=e;n.server_.put(m.toString(),f,v=>{ay(n,"transaction put response",{path:m.toString(),status:v});let I=[];if("ok"===v){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,I=I.concat(Hh(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();gT(n,lT(n.transactionQueueTree_,e)),pT(n,n.transactionQueueTree_),Fo(n.eventQueue_,e,I);for(let P=0;P<S.length;P++)X_(S[P])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{hs("transaction at "+m.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}uy(n,e)}},l)}(n,eE(e),t)}else fV(e)&&cT(e,t=>{pT(n,t)})}function uy(n,e){const t=TV(n,e),r=eE(t);return function GW(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],v=Bs(t,m.path);let S,I=!1;if((0,F.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)I=!0,S=m.abortReason,i=i.concat(Hh(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)I=!0,S="maxretry",i=i.concat(Hh(n.serverSyncTree_,m.currentWriteId,!0));else{const P=iN(n,m.path,l);m.currentInputSnapshot=P;const V=e[f].update(P.val());if(void 0!==V){nE("transaction failed: Data returned ",V,m.path);let z=Mr(V);"object"==typeof V&&null!=V&&(0,F.r3)(V,".priority")||(z=z.updatePriority(P.getPriority()));const ve=m.currentWriteId,tt=sE(n),wt=ZP(z,P,tt);m.currentOutputSnapshotRaw=z,m.currentOutputSnapshotResolved=wt,m.currentWriteId=fT(n),l.splice(l.indexOf(ve),1),i=i.concat(jP(n.serverSyncTree_,m.path,wt,m.currentWriteId,m.applyLocally)),i=i.concat(Hh(n.serverSyncTree_,ve,!0))}else I=!0,S="nodata",i=i.concat(Hh(n.serverSyncTree_,m.currentWriteId,!0))}Fo(n.eventQueue_,t,i),i=[],I&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===S?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(S),!1,null)))}gT(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)X_(r[f]);pT(n,n.transactionQueueTree_)}(n,SV(n,t),r),r}function TV(n,e){let t,r=n.transactionQueueTree_;for(t=nn(e);null!==t&&void 0===cg(r);)r=lT(r,t),t=nn(e=Vn(e));return r}function SV(n,e){const t=[];return AV(n,e,t),t.sort((r,i)=>r.order-i.order),t}function AV(n,e,t){const r=cg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);cT(e,i=>{AV(n,i,t)})}function gT(n,e){const t=cg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,QP(e,t.length>0?t:void 0)}cT(e,r=>{gT(n,r)})}function sN(n,e){const t=eE(TV(n,e)),r=lT(n.transactionQueueTree_,e);return function EW(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{oN(n,i)}),oN(n,r),pV(r,i=>{oN(n,i)}),t}function oN(n,e){const t=cg(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,F.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,F.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Hh(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?QP(e,void 0):t.length=a+1,Fo(n.eventQueue_,eE(e),i);for(let l=0;l<r.length;l++)X_(r[l])}}const aN=function(n,e){const t=WW(n),r=t.namespace;return"firebase.com"===t.domain&&xl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&xl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&hs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new lP(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new An(t.pathString)}},WW=function(n){let e="",t="",r="",i="",a="",l=!0,f="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(f=n.substring(0,v-1),n=n.substring(v+2));let I=n.indexOf("/");-1===I&&(I=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(I,S)),I<S&&(i=function zW(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(I,S)));const P=function qW(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):hs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(l="https"===f||"wss"===f,m=parseInt(e.substring(v+1),10)):v=e.length;const V=e.slice(0,v);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const z=e.indexOf(".");r=e.substring(0,z).toLowerCase(),t=e.substring(z+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:f,pathString:i,namespace:a}},xV="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ZW=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=xV.charAt(t%64),t=Math.floor(t/64);(0,F.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=xV.charAt(e[i]);return(0,F.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class MV{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Wl)(this.snapshot.exportVal())}}class RV{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class uN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class PV{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new F.BH;return LW(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){va("OnDisconnect.remove",this._path);const e=new F.BH;return bV(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){va("OnDisconnect.set",this._path),Rl("OnDisconnect.set",e,this._path,!1);const t=new F.BH;return bV(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){va("OnDisconnect.setWithPriority",this._path),Rl("OnDisconnect.setWithPriority",e,this._path,!1),eN("OnDisconnect.setWithPriority",t,!1);const r=new F.BH;return function UW(n,e,t,r,i){const a=Mr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,f)=>{"ok"===l&&ry(n.onDisconnect_,e,a),$h(0,i,l,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){va("OnDisconnect.update",this._path),mV("OnDisconnect.update",e,this._path,!1);const t=new F.BH;return function VW(n,e,t,r){if((0,F.xb)(t))return Bi("onDisconnect().update() called with empty data.  Don't do anything."),void $h(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&ji(t,(l,f)=>{const m=Mr(f);ry(n.onDisconnect_,fr(e,l),m)}),$h(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class lo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return rn(this._path)?null:gP(this._path)}get ref(){return new wa(this._repo,this._path)}get _queryIdentifier(){const e=FU(this._queryParams),t=aP(e);return"{}"===t?"default":t}get _queryObject(){return FU(this._queryParams)}isEqual(e){if(!((e=(0,F.m9)(e))instanceof lo))return!1;const t=this._repo===e._repo,r=mP(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Vz(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function mT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Gh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ml){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==kh)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Hc)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Kn){if(null!=e&&!tE(e)||null!=t&&!tE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof EP||n.getIndex()===CP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function _T(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class wa extends lo{constructor(e,t){super(e,t,new qD,!1)}get parent(){const e=bU(this._path);return null===e?null:new wa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class dg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new An(e),r=hg(this.ref,e);return new dg(this._node.getChild(t),r,Kn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new dg(i,hg(this.ref,r),Kn)))}hasChild(e){const t=new An(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function NV(n,e){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==e?hg(n._root,e):n._root}function OV(n,e){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const t=aN(e,n._repo.repoInfo_.nodeAdmin);_V("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&xl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),NV(n,t.path.toString())}function hg(n,e){return null===nn((n=(0,F.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),iE("child","path",t,!1)):iE("child","path",e,!1),new wa(n._repo,fr(n._path,e));var t}function lN(n,e){n=(0,F.m9)(n),va("set",n._path),Rl("set",e,n._path,!1);const t=new F.BH;return nN(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function JW(n,e){mV("update",e,n._path,!1);const t=new F.BH;return function kW(n,e,t,r){ay(n,"update",{path:e.toString(),value:t});let i=!0;const a=sE(n),l={};if(ji(t,(f,m)=>{i=!1,l[f]=hV(fr(e,f),Mr(m),n.serverSyncTree_,a)}),i)Bi("update() called with empty data.  Don't do anything."),$h(0,r,"ok",void 0);else{const f=fT(n),m=function aW(n,e,t,r){!function bq(n,e,t,r){(0,F.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=PP(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Yn.fromObject(t);return oy(n,new iy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,f);hT(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,I)=>{const S="ok"===v;S||hs("update at "+e+" failed: "+v);const P=Hh(n.serverSyncTree_,f,!S),V=P.length>0?uy(n,e):e;Fo(n.eventQueue_,V,P),$h(0,r,v,I)}),ji(t,v=>{const I=sN(n,fr(e,v));uy(n,I)}),Fo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function e6(n){n=(0,F.m9)(n);const e=new uN(()=>{}),t=new oE(e);return function OW(n,e,t){const r=function hW(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,I)=>{const S=Bs(v,t);r=r||Bh(I,S)});let i=n.syncPointTree_.get(t);i?r=r||Bh(i,En()):(i=new tV,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new Uh(r,!0,!1):null;return function Kq(n){return XD(n.viewCache_)}(nV(i,e,JD(n.pendingWriteTree_,e._path),a?l.getNode():Xt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Mr(i).withIndex(e._queryParams.getIndex());let l;if(HP(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=Qw(n.serverSyncTree_,e._path,a);else{const f=Xw(n.serverSyncTree_,e);l=aV(n.serverSyncTree_,e._path,a,f)}return Fo(n.eventQueue_,e._path,l),oT(n.serverSyncTree_,e,t,null,!0),a},i=>(ay(n,"get for query "+(0,F.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new dg(r,new wa(n._repo,n._path),n._queryParams.getIndex()))}class oE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new MV("value",this,new dg(e.snapshotNode,new wa(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new RV(this,e,t):null}matches(e){return e instanceof oE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class yT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new RV(this,e,t):null}createEvent(e,t){(0,F.hu)(null!=e.childName,"Child events should have a childName.");const r=hg(new wa(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new MV(e.type,this,new dg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof yT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function aE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,v=(I,S)=>{rN(n._repo,n,f),m(I,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const l=new uN(t,a||void 0),f="value"===e?new oE(l):new yT(e,l);return function BW(n,e,t){let r;r=".info"===nn(e._path)?HP(n.infoSyncTree_,e,t):HP(n.serverSyncTree_,e,t),yV(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>rN(n._repo,n,f)}function cN(n,e,t,r){return aE(n,"value",e,t,r)}function kV(n,e,t,r){return aE(n,"child_added",e,t,r)}function FV(n,e,t,r){return aE(n,"child_changed",e,t,r)}function LV(n,e,t,r){return aE(n,"child_moved",e,t,r)}function UV(n,e,t,r){return aE(n,"child_removed",e,t,r)}function VV(n,e,t){let r=null;const i=t?new uN(t):null;"value"===e?r=new oE(i):e&&(r=new yT(e,i)),rN(n._repo,n,r)}class uu{}class BV extends uu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Rl("endAt",this._value,e._path,!0);const t=DP(e._queryParams,this._value,this._key);if(_T(t),Gh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new lo(e._repo,e._path,t,e._orderByCalled)}}class n6 extends uu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Rl("endBefore",this._value,e._path,!1);const t=function dq(n,e,t){let r;return r=DP(n,e,n.index_===Ml||t?t:kh),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(_T(t),Gh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new lo(e._repo,e._path,t,e._orderByCalled)}}class jV extends uu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Rl("startAt",this._value,e._path,!0);const t=bP(e._queryParams,this._value,this._key);if(_T(t),Gh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new lo(e._repo,e._path,t,e._orderByCalled)}}class s6 extends uu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Rl("startAfter",this._value,e._path,!1);const t=function cq(n,e,t){let r;return r=bP(n,e,n.index_===Ml||t?t:Hc),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(_T(t),Gh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new lo(e._repo,e._path,t,e._orderByCalled)}}class a6 extends uu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new lo(e._repo,e._path,function uq(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class l6 extends uu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new lo(e._repo,e._path,function lq(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class d6 extends uu{constructor(e){super(),this._path=e}_apply(e){mT(e,"orderByChild");const t=new An(this._path);if(rn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new EP(t),i=WD(e._queryParams,r);return Gh(i),new lo(e._repo,e._path,i,!0)}}class f6 extends uu{_apply(e){mT(e,"orderByKey");const t=WD(e._queryParams,Ml);return Gh(t),new lo(e._repo,e._path,t,!0)}}class g6 extends uu{_apply(e){mT(e,"orderByPriority");const t=WD(e._queryParams,Kn);return Gh(t),new lo(e._repo,e._path,t,!0)}}class _6 extends uu{_apply(e){mT(e,"orderByValue");const t=WD(e._queryParams,CP);return Gh(t),new lo(e._repo,e._path,t,!0)}}class v6 extends uu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Rl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new BV(this._value,this._key)._apply(new jV(this._value,this._key)._apply(e))}}function lu(n,...e){let t=(0,F.m9)(n);for(const r of e)t=r._apply(t);return t}(function Jq(n){(0,F.hu)(!rT,"__referenceConstructor has already been defined"),rT=n})(wa),function iW(n){(0,F.hu)(!sT,"__referenceConstructor has already been defined"),sT=n}(wa);const dN={};function $V(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||xl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Bi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,l=aN(a,i),f=l.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${f.namespace}`,l=aN(a,i),f=l.repoInfo):m=!l.repoInfo.secure;const I=i&&m?new Vw(Vw.OWNER):new pz(n.name,n.options,e);_V("Invalid Firebase Database URL",l),rn(l.path)||xl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function b6(n,e,t,r){let i=dN[e.name];i||(i={},dN[e.name]=i);let a=i[n.toURLString()];return a&&xl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new RW(n,false,t,r),i[n.toURLString()]=a,a}(f,n,I,new fz(n.name,t));return new T6(S,n)}class T6{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function PW(n,e,t){if(n.stats_=hP(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new ZD(n.repoInfo_,(r,i,a,l)=>{CV(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>IV(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new og(n.repoInfo_,e,(r,i,a,l)=>{CV(n,r,i,a,l)},r=>{IV(n,r)},r=>{!function NW(n,e){ji(e,(t,r)=>{tN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function _z(n,e){const t=n.toString();return dP[t]||(dP[t]=e()),dP[t]}(n.repoInfo_,()=>new _q(n.stats_,n.server_)),n.infoData_=new hq,n.infoSyncTree_=new oV({startListening:(r,i,a,l)=>{let f=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(f=Qw(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),f},stopListening:()=>{}}),tN(n,"connected",!1),n.serverSyncTree_=new oV({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(f,m)=>{const v=l(f,m);Fo(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wa(this._repo,En())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function I6(n,e){const t=dN[e];(!t||t[n.key]!==n)&&xl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),DV(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&xl("Cannot call "+e+" on a deleted database.")}}function GV(){hU.IS_TRANSPORT_INITIALIZED&&hs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function S6(){GV(),Fh.forceDisallow()}function A6(){GV(),J_.forceDisallow(),Fh.forceAllow()}function R6(n,e){qL(n,e)}const N6={".sv":"timestamp"};class F6{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}og.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},og.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function P6(n){jL(Fi.SDK_VERSION),(0,Fi._registerComponent)(new No.wA("database",(e,{instanceIdentifier:t})=>$V(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Fi.registerVersion)(VL,"0.14.3",n),(0,Fi.registerVersion)(VL,"0.14.3","esm2017")}();const B6=new Ki.Yd("@firebase/database-compat"),qV=function(n){B6.warn("FIREBASE WARNING: "+n)};class $6{constructor(e){this._delegate=e}cancel(e){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,qV("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class G6{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class zh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),iE("DataSnapshot.child","path",e,!1),new zh(this._database,this._delegate.child(e))}hasChild(e){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),iE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new zh(this._database,t)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new Lo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ns{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",t,!1);const l=ns.getCancelAndContextArgs_("Query.on",r,i),f=(v,I)=>{t.call(l.context,new zh(this.database,v),I)};f.userCallback=t,f.context=l.context;const m=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return cN(this._delegate,f,m),t;case"child_added":return kV(this._delegate,f,m),t;case"child_removed":return UV(this._delegate,f,m),t;case"child_changed":return FV(this._delegate,f,m),t;case"child_moved":return LV(this._delegate,f,m),t;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,F.Wj)("Query.off","callback",t,!0),(0,F.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,VV(this._delegate,e,i)}else VV(this._delegate,e)}get(){return e6(this._delegate).then(e=>new zh(this.database,e))}once(e,t,r,i){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",t,!0);const a=ns.getCancelAndContextArgs_("Query.once",r,i),l=new F.BH,f=(v,I)=>{const S=new zh(this.database,v);t&&t.call(a.context,S,I),l.resolve(S)};f.userCallback=t,f.context=a.context;const m=v=>{a.cancel&&a.cancel.call(a.context,v),l.reject(v)};switch(e){case"value":cN(this._delegate,f,m,{onlyOnce:!0});break;case"child_added":kV(this._delegate,f,m,{onlyOnce:!0});break;case"child_removed":UV(this._delegate,f,m,{onlyOnce:!0});break;case"child_changed":FV(this._delegate,f,m,{onlyOnce:!0});break;case"child_moved":LV(this._delegate,f,m,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new ns(this.database,lu(this._delegate,function u6(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new a6(n)}(e)))}limitToLast(e){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new ns(this.database,lu(this._delegate,function c6(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new l6(n)}(e)))}orderByChild(e){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new ns(this.database,lu(this._delegate,function h6(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return iE("orderByChild","path",n,!1),new d6(n)}(e)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new ns(this.database,lu(this._delegate,function p6(){return new f6}()))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new ns(this.database,lu(this._delegate,function m6(){return new g6}()))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new ns(this.database,lu(this._delegate,function y6(){return new _6}()))}startAt(e=null,t){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new ns(this.database,lu(this._delegate,function i6(n=null,e){return rE("startAt","key",e,!0),new jV(n,e)}(e,t)))}startAfter(e=null,t){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new ns(this.database,lu(this._delegate,function o6(n,e){return rE("startAfter","key",e,!0),new s6(n,e)}(e,t)))}endAt(e=null,t){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new ns(this.database,lu(this._delegate,function t6(n,e){return rE("endAt","key",e,!0),new BV(n,e)}(e,t)))}endBefore(e=null,t){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new ns(this.database,lu(this._delegate,function r6(n,e){return rE("endBefore","key",e,!0),new n6(n,e)}(e,t)))}equalTo(e,t){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new ns(this.database,lu(this._delegate,function w6(n,e){return rE("equalTo","key",e,!0),new v6(n,e)}(e,t)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ns))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,F.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,F.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,F.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Lo(this.database,new wa(this._delegate._repo,this._delegate._path))}}class Lo extends ns{constructor(e,t){super(e,new lo(t._repo,t._path,new qD,!1)),this.database=e,this._delegate=t}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Lo(this.database,hg(this._delegate,e))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Lo(this.database,e):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new Lo(this.database,this._delegate.root)}set(e,t){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",t,!0);const r=lN(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,qV("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}va("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",t,!0);const r=JW(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function XW(n,e,t){if(va("setWithPriority",n._path),Rl("setWithPriority",e,n._path,!1),eN("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new F.BH;return nN(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",e,!0);const t=function YW(n){return va("remove",n._path),lN(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,F.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function L6(n,e,t){var r;if(n=(0,F.m9)(n),va("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new F.BH,f=cN(n,()=>{});return function HW(n,e,t,r,i,a){ay(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:$L(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=iN(n,e,void 0);l.currentInputSnapshot=f;const m=l.update(f.val());if(void 0===m)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{nE("transaction failed: Data returned ",m,l.path),l.status=0;const v=lT(n.transactionQueueTree_,e),I=cg(v)||[];let S;I.push(l),QP(v,I),"object"==typeof m&&null!==m&&(0,F.r3)(m,".priority")?(S=(0,F.DV)(m,".priority"),(0,F.hu)(tE(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(aT(n.serverSyncTree_,e)||Xt.EMPTY_NODE).getPriority().val();const P=sE(n),V=Mr(m,S),z=ZP(V,f,P);l.currentOutputSnapshotRaw=V,l.currentOutputSnapshotResolved=z,l.currentWriteId=fT(n);const ce=jP(n.serverSyncTree_,e,z,l.currentWriteId,l.applyLocally);Fo(n.eventQueue_,e,ce),pT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,I)=>{let S=null;m?a.reject(m):(S=new dg(I,new wa(n._repo,n._path),Kn),a.resolve(new F6(v,S)))},f,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new G6(a.committed,new zh(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",t,!0);const r=function QW(n,e){n=(0,F.m9)(n),va("setPriority",n._path),eN("setPriority",e,!1);const t=new F.BH;return nN(n._repo,fr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",t,!0);const r=function KW(n,e){n=(0,F.m9)(n),va("push",n._path),Rl("push",e,n._path,!0);const t=EV(n._repo),r=ZW(t),i=hg(n,r),a=hg(n,r);let l;return l=null!=e?lN(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Lo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Lo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return va("Reference.onDisconnect",this._delegate._path),new $6(new PV(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class uE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:S6,forceLongPolling:A6}}useEmulator(e,t,r={}){!function zV(n,e,t,r={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&xl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&xl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Vw(Vw.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,F.Sg)(r.mockUserToken,n.app.options.projectId);a=new Vw(l)}!function C6(n,e,t,r){n.repoInfo_=new lP(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,F.Dv)("database.ref",0,1,arguments.length),e instanceof Lo){const t=OV(this._delegate,e.toString());return new Lo(this,t)}{const t=NV(this._delegate,e);return new Lo(this,t)}}refFromURL(e){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const r=OV(this._delegate,e);return new Lo(this,r)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function x6(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),DV(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function M6(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function jW(n){n.persistentConnection_&&n.persistentConnection_.resume(wV)}(n._repo)}(this._delegate)}}uE.ServerValue={TIMESTAMP:function O6(){return N6}(),increment:n=>function k6(n){return{".sv":{increment:n}}}(n)};var q6=Object.freeze({__proto__:null,initStandalone:function z6({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){jL(t);const l=new No.zt("auth-internal",new No.H0("database-standalone"));return l.setComponent(new No.wA("auth-internal",()=>r,"PRIVATE")),{instance:new uE($V(n,l,void 0,e,a),n),namespace:i}}});const W6=uE.ServerValue;function WV(n){return null==n}function ZV(n){return"function"==typeof n.set}function KV(n,e){return ZV(e)?e:n.ref(e)}function YV(n,e){if(function K6(n){return"string"==typeof n}(n))return e.stringCase();if(ZV(n))return e.firebaseCase();if(function Y6(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function lE(n,e,t="on",r=$v.z){return new Cr.y(i=>{let a=null;return a=n[t](e,(l,f)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,x.U)(i=>{const{snapshot:a,prevKey:l}=i;let f=null;return a.exists()&&(f=a.key),{type:e,payload:a,prevKey:l,key:f}}),(0,mF.B)())}function QV(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function J6(n,e){const{payload:t,prevKey:r,key:i}=e,a=QV(n,i),l=function X6(n,e){if(WV(e))return 0;{const t=QV(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:f,key:m.key};return f=m.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,f),n}return n;default:return n}}function XV(n){return(WV(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function JV(n,e,t){return function Q6(n,e,t){return lE(n,"value","once",t).pipe(zn(r=>{const i=[ut(r)];return e.forEach(a=>i.push(lE(n,a,"on",t))),(0,Vd.T)(...i).pipe(To(J6,[]))}),lm())}(n,e=XV(e),t)}function e2(n,e,t){const r=(e=XV(e)).map(i=>lE(n,i,"on",t));return(0,Vd.T)(...r)}function t2(n,e){return function(r,i){return YV(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function r4(n){return function(t){return t?YV(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function n2(n,e){return function(){return lE(n,"value","on",e)}}!function Z6(n){n.INTERNAL.registerComponent(new No.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new uE(i,r)},"PUBLIC").setServiceProps({Reference:Lo,Query:ns,Database:uE,DataSnapshot:zh,enableLogging:R6,INTERNAL:q6,ServerValue:W6}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.3")}(Om.Z);const o4=new d.OlP("angularfire2.realtimeDatabaseURL"),a4=new d.OlP("angularfire2.database.use-emulator");let u4=(()=>{class n{constructor(t,r,i,a,l,f,m,v,I,S,P,V,z,ce,ve){this.schedulers=f;const tt=m,wt=(0,li.on)(t,l,r);v&&$R(wt,l,I,P,V,z,S,ce),this.database=(0,li.cc)(`${wt.name}.database.${i}`,"AngularFireDatabase",wt.name,()=>{const ft=l.runOutsideAngular(()=>wt.database(i||void 0));return tt&&ft.useEmulator(...tt),ft},[tt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>KV(this.database,t));let a=i;return r&&(a=r(i)),function i4(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:t2(r,"update"),set:t2(r,"set"),push:i=>r.push(i),remove:r4(r),snapshotChanges:i=>JV(n,i,t).pipe(_n.iC),stateChanges:i=>e2(n,i,t).pipe(_n.iC),auditTrail:i=>function e4(n,e,t){return function n4(n,e,t){return function t4(n,e){return lE(n,"value","on",e).pipe((0,x.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(Bf(e),(0,x.U)(([i,a])=>{const l=i.lastKeyToLoad,f=a.map(m=>m.key);return{actions:a,lastKeyToLoad:l,loadedKeys:f}}),nl(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,x.U)(i=>i.actions))}(n,e2(n,e).pipe(To((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(_n.iC),valueChanges:(i,a)=>JV(n,i,t).pipe((0,x.U)(f=>f.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),_n.iC)}}(a,this)}object(t){return function s4(n,e){return{query:n,snapshotChanges:()=>n2(n,e.schedulers.outsideAngular)().pipe(_n.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>n2(n,e.schedulers.outsideAngular)().pipe(_n.iC,(0,x.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>KV(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(li.Dh),d.LFG(li.xv,8),d.LFG(o4,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(_n.HU),d.LFG(a4,8),d.LFG(Dw,8),d.LFG(LR,8),d.LFG(UR,8),d.LFG(VR,8),d.LFG(BR,8),d.LFG(jR,8),d.LFG(HR,8),d.LFG(bw,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),l4=(()=>{class n{constructor(){xD.Z.registerVersion("angularfire",_n.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[u4]}),n})();class ly{}ly.\u0275fac=function(e){return new(e||ly)},ly.\u0275mod=d.oAB({type:ly,bootstrap:[Mw]}),ly.\u0275inj=d.cJS({providers:[Ka,bl],imports:[od,W_,Vf,aO,Bd,li.hO.initializeApp({apiKey:"AIzaSyAtCdDXS70hIg6mGBokCkKNF3eSF4jf3Ng",authDomain:"fzth-4074e.firebaseapp.com",projectId:"fzth-4074e",storageBucket:"fzth-4074e.appspot.com",messagingSenderId:"114340157767",appId:"1:114340157767:web:4e88145ae1773913ea1462",measurementId:"G-LWXNXN4QEM"}),j$,K$,ez,l4]}),Dg().bootstrapModule(ly).catch(n=>console.error(n))},9751:(Et,De,U)=>{U.d(De,{y:()=>de});var d=U(930),$=U(727),O=U(8822),ne=U(9635),ie=U(2416),oe=U(576),_e=U(2806);let de=(()=>{class Q{constructor(Se){Se&&(this._subscribe=Se)}lift(Se){const We=new Q;return We.source=this,We.operator=Se,We}subscribe(Se,We,lt){const me=function W(Q){return Q&&Q instanceof d.Lv||function Z(Q){return Q&&(0,oe.m)(Q.next)&&(0,oe.m)(Q.error)&&(0,oe.m)(Q.complete)}(Q)&&(0,$.Nn)(Q)}(Se)?Se:new d.Hp(Se,We,lt);return(0,_e.x)(()=>{const{operator:Ae,source:be}=this;me.add(Ae?Ae.call(me,be):be?this._subscribe(me):this._trySubscribe(me))}),me}_trySubscribe(Se){try{return this._subscribe(Se)}catch(We){Se.error(We)}}forEach(Se,We){return new(We=ge(We))((lt,me)=>{const Ae=new d.Hp({next:be=>{try{Se(be)}catch(Fe){me(Fe),Ae.unsubscribe()}},error:me,complete:lt});this.subscribe(Ae)})}_subscribe(Se){var We;return null===(We=this.source)||void 0===We?void 0:We.subscribe(Se)}[O.L](){return this}pipe(...Se){return(0,ne.U)(Se)(this)}toPromise(Se){return new(Se=ge(Se))((We,lt)=>{let me;this.subscribe(Ae=>me=Ae,Ae=>lt(Ae),()=>We(me))})}}return Q.create=He=>new Q(He),Q})();function ge(Q){var He;return null!==(He=Q??ie.v.Promise)&&void 0!==He?He:Promise}},7579:(Et,De,U)=>{U.d(De,{x:()=>_e});var d=U(9751),$=U(727);const ne=(0,U(3888).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=U(8737),oe=U(2806);let _e=(()=>{class ge extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const Q=new de(this,this);return Q.operator=W,Q}_throwIfClosed(){if(this.closed)throw new ne}next(W){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(W)}})}error(W){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:Q}=this;for(;Q.length;)Q.shift().error(W)}})}complete(){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:Q,isStopped:He,observers:Se}=this;return Q||He?$.Lc:(this.currentObservers=null,Se.push(W),new $.w0(()=>{this.currentObservers=null,(0,ie.P)(Se,W)}))}_checkFinalizedStatuses(W){const{hasError:Q,thrownError:He,isStopped:Se}=this;Q?W.error(He):Se&&W.complete()}asObservable(){const W=new d.y;return W.source=this,W}}return ge.create=(Z,W)=>new de(Z,W),ge})();class de extends _e{constructor(Z,W){super(),this.destination=Z,this.source=W}next(Z){var W,Q;null===(Q=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===Q||Q.call(W,Z)}error(Z){var W,Q;null===(Q=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===Q||Q.call(W,Z)}complete(){var Z,W;null===(W=null===(Z=this.destination)||void 0===Z?void 0:Z.complete)||void 0===W||W.call(Z)}_subscribe(Z){var W,Q;return null!==(Q=null===(W=this.source)||void 0===W?void 0:W.subscribe(Z))&&void 0!==Q?Q:$.Lc}}},930:(Et,De,U)=>{U.d(De,{Hp:()=>lt,Lv:()=>Q});var d=U(576),$=U(727),O=U(2416),ne=U(7849),ie=U(5032);const oe=ge("C",void 0,void 0);function ge(xe,Pe,Te){return{kind:xe,value:Pe,error:Te}}var Z=U(3410),W=U(2806);class Q extends $.w0{constructor(Pe){super(),this.isStopped=!1,Pe?(this.destination=Pe,(0,$.Nn)(Pe)&&Pe.add(this)):this.destination=Fe}static create(Pe,Te,je){return new lt(Pe,Te,je)}next(Pe){this.isStopped?be(function de(xe){return ge("N",xe,void 0)}(Pe),this):this._next(Pe)}error(Pe){this.isStopped?be(function _e(xe){return ge("E",void 0,xe)}(Pe),this):(this.isStopped=!0,this._error(Pe))}complete(){this.isStopped?be(oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Pe){this.destination.next(Pe)}_error(Pe){try{this.destination.error(Pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Se(xe,Pe){return He.call(xe,Pe)}class We{constructor(Pe){this.partialObserver=Pe}next(Pe){const{partialObserver:Te}=this;if(Te.next)try{Te.next(Pe)}catch(je){me(je)}}error(Pe){const{partialObserver:Te}=this;if(Te.error)try{Te.error(Pe)}catch(je){me(je)}else me(Pe)}complete(){const{partialObserver:Pe}=this;if(Pe.complete)try{Pe.complete()}catch(Te){me(Te)}}}class lt extends Q{constructor(Pe,Te,je){let J;if(super(),(0,d.m)(Pe)||!Pe)J={next:Pe??void 0,error:Te??void 0,complete:je??void 0};else{let ae;this&&O.v.useDeprecatedNextContext?(ae=Object.create(Pe),ae.unsubscribe=()=>this.unsubscribe(),J={next:Pe.next&&Se(Pe.next,ae),error:Pe.error&&Se(Pe.error,ae),complete:Pe.complete&&Se(Pe.complete,ae)}):J=Pe}this.destination=new We(J)}}function me(xe){O.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(xe):(0,ne.h)(xe)}function be(xe,Pe){const{onStoppedNotification:Te}=O.v;Te&&Z.z.setTimeout(()=>Te(xe,Pe))}const Fe={closed:!0,next:ie.Z,error:function Ae(xe){throw xe},complete:ie.Z}},727:(Et,De,U)=>{U.d(De,{Lc:()=>oe,w0:()=>ie,Nn:()=>_e});var d=U(576);const O=(0,U(3888).d)(ge=>function(W){ge(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((Q,He)=>`${He+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var ne=U(8737);class ie{constructor(Z){this.initialTeardown=Z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Z;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Se of W)Se.remove(this);else W.remove(this);const{initialTeardown:Q}=this;if((0,d.m)(Q))try{Q()}catch(Se){Z=Se instanceof O?Se.errors:[Se]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Se of He)try{de(Se)}catch(We){Z=Z??[],We instanceof O?Z=[...Z,...We.errors]:Z.push(We)}}if(Z)throw new O(Z)}}add(Z){var W;if(Z&&Z!==this)if(this.closed)de(Z);else{if(Z instanceof ie){if(Z.closed||Z._hasParent(this))return;Z._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(Z)}}_hasParent(Z){const{_parentage:W}=this;return W===Z||Array.isArray(W)&&W.includes(Z)}_addParent(Z){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(Z),W):W?[W,Z]:Z}_removeParent(Z){const{_parentage:W}=this;W===Z?this._parentage=null:Array.isArray(W)&&(0,ne.P)(W,Z)}remove(Z){const{_finalizers:W}=this;W&&(0,ne.P)(W,Z),Z instanceof ie&&Z._removeParent(this)}}ie.EMPTY=(()=>{const ge=new ie;return ge.closed=!0,ge})();const oe=ie.EMPTY;function _e(ge){return ge instanceof ie||ge&&"closed"in ge&&(0,d.m)(ge.remove)&&(0,d.m)(ge.add)&&(0,d.m)(ge.unsubscribe)}function de(ge){(0,d.m)(ge)?ge():ge.unsubscribe()}},2416:(Et,De,U)=>{U.d(De,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Et,De,U)=>{U.d(De,{E:()=>$});const $=new(U(9751).y)(ie=>ie.complete())},8996:(Et,De,U)=>{U.d(De,{D:()=>Pe});var d=U(8421),$=U(5363),O=U(9468),oe=U(9751),de=U(2202),ge=U(576),Z=U(9672);function Q(Te,je){if(!Te)throw new Error("Iterable cannot be null");return new oe.y(J=>{(0,Z.f)(J,je,()=>{const ae=Te[Symbol.asyncIterator]();(0,Z.f)(J,je,()=>{ae.next().then(Ee=>{Ee.done?J.complete():J.next(Ee.value)})},0,!0)})})}var He=U(3670),Se=U(8239),We=U(1144),lt=U(6495),me=U(2206),Ae=U(4532),be=U(3260);function Pe(Te,je){return je?function xe(Te,je){if(null!=Te){if((0,He.c)(Te))return function ne(Te,je){return(0,d.Xf)(Te).pipe((0,O.R)(je),(0,$.Q)(je))}(Te,je);if((0,We.z)(Te))return function _e(Te,je){return new oe.y(J=>{let ae=0;return je.schedule(function(){ae===Te.length?J.complete():(J.next(Te[ae++]),J.closed||this.schedule())})})}(Te,je);if((0,Se.t)(Te))return function ie(Te,je){return(0,d.Xf)(Te).pipe((0,O.R)(je),(0,$.Q)(je))}(Te,je);if((0,me.D)(Te))return Q(Te,je);if((0,lt.T)(Te))return function W(Te,je){return new oe.y(J=>{let ae;return(0,Z.f)(J,je,()=>{ae=Te[de.h](),(0,Z.f)(J,je,()=>{let Ee,Ke;try{({value:Ee,done:Ke}=ae.next())}catch(ze){return void J.error(ze)}Ke?J.complete():J.next(Ee)},0,!0)}),()=>(0,ge.m)(ae?.return)&&ae.return()})}(Te,je);if((0,be.L)(Te))return function Fe(Te,je){return Q((0,be.Q)(Te),je)}(Te,je)}throw(0,Ae.z)(Te)}(Te,je):(0,d.Xf)(Te)}},8421:(Et,De,U)=>{U.d(De,{Xf:()=>He});var d=U(655),$=U(1144),O=U(8239),ne=U(9751),ie=U(3670),oe=U(2206),_e=U(4532),de=U(6495),ge=U(3260),Z=U(576),W=U(7849),Q=U(8822);function He(xe){if(xe instanceof ne.y)return xe;if(null!=xe){if((0,ie.c)(xe))return function Se(xe){return new ne.y(Pe=>{const Te=xe[Q.L]();if((0,Z.m)(Te.subscribe))return Te.subscribe(Pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,$.z)(xe))return function We(xe){return new ne.y(Pe=>{for(let Te=0;Te<xe.length&&!Pe.closed;Te++)Pe.next(xe[Te]);Pe.complete()})}(xe);if((0,O.t)(xe))return function lt(xe){return new ne.y(Pe=>{xe.then(Te=>{Pe.closed||(Pe.next(Te),Pe.complete())},Te=>Pe.error(Te)).then(null,W.h)})}(xe);if((0,oe.D)(xe))return Ae(xe);if((0,de.T)(xe))return function me(xe){return new ne.y(Pe=>{for(const Te of xe)if(Pe.next(Te),Pe.closed)return;Pe.complete()})}(xe);if((0,ge.L)(xe))return function be(xe){return Ae((0,ge.Q)(xe))}(xe)}throw(0,_e.z)(xe)}function Ae(xe){return new ne.y(Pe=>{(function Fe(xe,Pe){var Te,je,J,ae;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Te=(0,d.KL)(xe);!(je=yield Te.next()).done;)if(Pe.next(je.value),Pe.closed)return}catch(Ee){J={error:Ee}}finally{try{je&&!je.done&&(ae=Te.return)&&(yield ae.call(Te))}finally{if(J)throw J.error}}Pe.complete()})})(xe,Pe).catch(Te=>Pe.error(Te))})}},6451:(Et,De,U)=>{U.d(De,{T:()=>oe});var d=U(8189),$=U(8421),O=U(515),ne=U(7669),ie=U(8996);function oe(..._e){const de=(0,ne.yG)(_e),ge=(0,ne._6)(_e,1/0),Z=_e;return Z.length?1===Z.length?(0,$.Xf)(Z[0]):(0,d.J)(ge)((0,ie.D)(Z,de)):O.E}},5403:(Et,De,U)=>{U.d(De,{x:()=>$});var d=U(930);function $(ne,ie,oe,_e,de){return new O(ne,ie,oe,_e,de)}class O extends d.Lv{constructor(ie,oe,_e,de,ge,Z){super(ie),this.onFinalize=ge,this.shouldUnsubscribe=Z,this._next=oe?function(W){try{oe(W)}catch(Q){ie.error(Q)}}:super._next,this._error=de?function(W){try{de(W)}catch(Q){ie.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=_e?function(){try{_e()}catch(W){ie.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:oe}=this;super.unsubscribe(),!oe&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(Et,De,U)=>{U.d(De,{U:()=>O});var d=U(4482),$=U(5403);function O(ne,ie){return(0,d.e)((oe,_e)=>{let de=0;oe.subscribe((0,$.x)(_e,ge=>{_e.next(ne.call(ie,ge,de++))}))})}},8189:(Et,De,U)=>{U.d(De,{J:()=>O});var d=U(5577),$=U(4671);function O(ne=1/0){return(0,d.z)($.y,ne)}},5577:(Et,De,U)=>{U.d(De,{z:()=>de});var d=U(4004),$=U(8421),O=U(4482),ne=U(9672),ie=U(5403),_e=U(576);function de(ge,Z,W=1/0){return(0,_e.m)(Z)?de((Q,He)=>(0,d.U)((Se,We)=>Z(Q,Se,He,We))((0,$.Xf)(ge(Q,He))),W):("number"==typeof Z&&(W=Z),(0,O.e)((Q,He)=>function oe(ge,Z,W,Q,He,Se,We,lt){const me=[];let Ae=0,be=0,Fe=!1;const xe=()=>{Fe&&!me.length&&!Ae&&Z.complete()},Pe=je=>Ae<Q?Te(je):me.push(je),Te=je=>{Se&&Z.next(je),Ae++;let J=!1;(0,$.Xf)(W(je,be++)).subscribe((0,ie.x)(Z,ae=>{He?.(ae),Se?Pe(ae):Z.next(ae)},()=>{J=!0},void 0,()=>{if(J)try{for(Ae--;me.length&&Ae<Q;){const ae=me.shift();We?(0,ne.f)(Z,We,()=>Te(ae)):Te(ae)}xe()}catch(ae){Z.error(ae)}}))};return ge.subscribe((0,ie.x)(Z,Pe,()=>{Fe=!0,xe()})),()=>{lt?.()}}(Q,He,ge,W)))}},5363:(Et,De,U)=>{U.d(De,{Q:()=>ne});var d=U(9672),$=U(4482),O=U(5403);function ne(ie,oe=0){return(0,$.e)((_e,de)=>{_e.subscribe((0,O.x)(de,ge=>(0,d.f)(de,ie,()=>de.next(ge),oe),()=>(0,d.f)(de,ie,()=>de.complete(),oe),ge=>(0,d.f)(de,ie,()=>de.error(ge),oe)))})}},3099:(Et,De,U)=>{U.d(De,{B:()=>ie});var d=U(8421),$=U(7579),O=U(930),ne=U(4482);function ie(_e={}){const{connector:de=(()=>new $.x),resetOnError:ge=!0,resetOnComplete:Z=!0,resetOnRefCountZero:W=!0}=_e;return Q=>{let He,Se,We,lt=0,me=!1,Ae=!1;const be=()=>{Se?.unsubscribe(),Se=void 0},Fe=()=>{be(),He=We=void 0,me=Ae=!1},xe=()=>{const Pe=He;Fe(),Pe?.unsubscribe()};return(0,ne.e)((Pe,Te)=>{lt++,!Ae&&!me&&be();const je=We=We??de();Te.add(()=>{lt--,0===lt&&!Ae&&!me&&(Se=oe(xe,W))}),je.subscribe(Te),!He&&lt>0&&(He=new O.Hp({next:J=>je.next(J),error:J=>{Ae=!0,be(),Se=oe(Fe,ge,J),je.error(J)},complete:()=>{me=!0,be(),Se=oe(Fe,Z),je.complete()}}),(0,d.Xf)(Pe).subscribe(He))})(Q)}}function oe(_e,de,...ge){if(!0===de)return void _e();if(!1===de)return;const Z=new O.Hp({next:()=>{Z.unsubscribe(),_e()}});return(0,d.Xf)(de(...ge)).subscribe(Z)}},9468:(Et,De,U)=>{U.d(De,{R:()=>$});var d=U(4482);function $(O,ne=0){return(0,d.e)((ie,oe)=>{oe.add(O.schedule(()=>ie.subscribe(oe),ne))})}},8505:(Et,De,U)=>{U.d(De,{b:()=>ie});var d=U(576),$=U(4482),O=U(5403),ne=U(4671);function ie(oe,_e,de){const ge=(0,d.m)(oe)||_e||de?{next:oe,error:_e,complete:de}:oe;return ge?(0,$.e)((Z,W)=>{var Q;null===(Q=ge.subscribe)||void 0===Q||Q.call(ge);let He=!0;Z.subscribe((0,O.x)(W,Se=>{var We;null===(We=ge.next)||void 0===We||We.call(ge,Se),W.next(Se)},()=>{var Se;He=!1,null===(Se=ge.complete)||void 0===Se||Se.call(ge),W.complete()},Se=>{var We;He=!1,null===(We=ge.error)||void 0===We||We.call(ge,Se),W.error(Se)},()=>{var Se,We;He&&(null===(Se=ge.unsubscribe)||void 0===Se||Se.call(ge)),null===(We=ge.finalize)||void 0===We||We.call(ge)}))}):ne.y}},4408:(Et,De,U)=>{U.d(De,{o:()=>ie});var d=U(727);class $ extends d.w0{constructor(_e,de){super()}schedule(_e,de=0){return this}}const O={setInterval(oe,_e,...de){const{delegate:ge}=O;return ge?.setInterval?ge.setInterval(oe,_e,...de):setInterval(oe,_e,...de)},clearInterval(oe){const{delegate:_e}=O;return(_e?.clearInterval||clearInterval)(oe)},delegate:void 0};var ne=U(8737);class ie extends ${constructor(_e,de){super(_e,de),this.scheduler=_e,this.work=de,this.pending=!1}schedule(_e,de=0){var ge;if(this.closed)return this;this.state=_e;const Z=this.id,W=this.scheduler;return null!=Z&&(this.id=this.recycleAsyncId(W,Z,de)),this.pending=!0,this.delay=de,this.id=null!==(ge=this.id)&&void 0!==ge?ge:this.requestAsyncId(W,this.id,de),this}requestAsyncId(_e,de,ge=0){return O.setInterval(_e.flush.bind(_e,this),ge)}recycleAsyncId(_e,de,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return de;null!=de&&O.clearInterval(de)}execute(_e,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(_e,de);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_e,de){let Z,ge=!1;try{this.work(_e)}catch(W){ge=!0,Z=W||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),Z}unsubscribe(){if(!this.closed){const{id:_e,scheduler:de}=this,{actions:ge}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ne.P)(ge,this),null!=_e&&(this.id=this.recycleAsyncId(de,_e,null)),this.delay=null,super.unsubscribe()}}}},7565:(Et,De,U)=>{U.d(De,{v:()=>O});var d=U(6063);class ${constructor(ie,oe=$.now){this.schedulerActionCtor=ie,this.now=oe}schedule(ie,oe=0,_e){return new this.schedulerActionCtor(this,ie).schedule(_e,oe)}}$.now=d.l.now;class O extends ${constructor(ie,oe=$.now){super(ie,oe),this.actions=[],this._active=!1}flush(ie){const{actions:oe}=this;if(this._active)return void oe.push(ie);let _e;this._active=!0;do{if(_e=ie.execute(ie.state,ie.delay))break}while(ie=oe.shift());if(this._active=!1,_e){for(;ie=oe.shift();)ie.unsubscribe();throw _e}}}},4986:(Et,De,U)=>{U.d(De,{z:()=>O});var d=U(4408);const O=new(U(7565).v)(d.o)},6063:(Et,De,U)=>{U.d(De,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(Et,De,U)=>{U.d(De,{z:()=>d});const d={setTimeout($,O,...ne){const{delegate:ie}=d;return ie?.setTimeout?ie.setTimeout($,O,...ne):setTimeout($,O,...ne)},clearTimeout($){const{delegate:O}=d;return(O?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(Et,De,U)=>{U.d(De,{h:()=>$});const $=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Et,De,U)=>{U.d(De,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Et,De,U)=>{U.d(De,{_6:()=>oe,jO:()=>ne,yG:()=>ie});var d=U(576);function O(_e){return _e[_e.length-1]}function ne(_e){return(0,d.m)(O(_e))?_e.pop():void 0}function ie(_e){return function $(_e){return _e&&(0,d.m)(_e.schedule)}(O(_e))?_e.pop():void 0}function oe(_e,de){return"number"==typeof O(_e)?_e.pop():de}},8737:(Et,De,U)=>{function d($,O){if($){const ne=$.indexOf(O);0<=ne&&$.splice(ne,1)}}U.d(De,{P:()=>d})},3888:(Et,De,U)=>{function d($){const ne=$(ie=>{Error.call(ie),ie.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}U.d(De,{d:()=>d})},2806:(Et,De,U)=>{U.d(De,{O:()=>ne,x:()=>O});var d=U(2416);let $=null;function O(ie){if(d.v.useDeprecatedSynchronousErrorHandling){const oe=!$;if(oe&&($={errorThrown:!1,error:null}),ie(),oe){const{errorThrown:_e,error:de}=$;if($=null,_e)throw de}}else ie()}function ne(ie){d.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=ie)}},9672:(Et,De,U)=>{function d($,O,ne,ie=0,oe=!1){const _e=O.schedule(function(){ne(),oe?$.add(this.schedule(null,ie)):this.unsubscribe()},ie);if($.add(_e),!oe)return _e}U.d(De,{f:()=>d})},4671:(Et,De,U)=>{function d($){return $}U.d(De,{y:()=>d})},1144:(Et,De,U)=>{U.d(De,{z:()=>d});const d=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(Et,De,U)=>{U.d(De,{D:()=>$});var d=U(576);function $(O){return Symbol.asyncIterator&&(0,d.m)(O?.[Symbol.asyncIterator])}},576:(Et,De,U)=>{function d($){return"function"==typeof $}U.d(De,{m:()=>d})},3670:(Et,De,U)=>{U.d(De,{c:()=>O});var d=U(8822),$=U(576);function O(ne){return(0,$.m)(ne[d.L])}},6495:(Et,De,U)=>{U.d(De,{T:()=>O});var d=U(2202),$=U(576);function O(ne){return(0,$.m)(ne?.[d.h])}},8239:(Et,De,U)=>{U.d(De,{t:()=>$});var d=U(576);function $(O){return(0,d.m)(O?.then)}},3260:(Et,De,U)=>{U.d(De,{L:()=>ne,Q:()=>O});var d=U(655),$=U(576);function O(ie){return(0,d.FC)(this,arguments,function*(){const _e=ie.getReader();try{for(;;){const{value:de,done:ge}=yield(0,d.qq)(_e.read());if(ge)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(de)}}finally{_e.releaseLock()}})}function ne(ie){return(0,$.m)(ie?.getReader)}},4482:(Et,De,U)=>{U.d(De,{A:()=>$,e:()=>O});var d=U(576);function $(ne){return(0,d.m)(ne?.lift)}function O(ne){return ie=>{if($(ie))return ie.lift(function(oe){try{return ne(oe,this)}catch(_e){this.error(_e)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Et,De,U)=>{function d(){}U.d(De,{Z:()=>d})},9635:(Et,De,U)=>{U.d(De,{U:()=>O,z:()=>$});var d=U(4671);function $(...ne){return O(ne)}function O(ne){return 0===ne.length?d.y:1===ne.length?ne[0]:function(oe){return ne.reduce((_e,de)=>de(_e),oe)}}},7849:(Et,De,U)=>{U.d(De,{h:()=>O});var d=U(2416),$=U(3410);function O(ne){$.z.setTimeout(()=>{const{onUnhandledError:ie}=d.v;if(!ie)throw ne;ie(ne)})}},4532:(Et,De,U)=>{function d($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(De,{z:()=>d})},655:(Et,De,U)=>{function ne(ue,pe){var Ce={};for(var Ne in ue)Object.prototype.hasOwnProperty.call(ue,Ne)&&pe.indexOf(Ne)<0&&(Ce[Ne]=ue[Ne]);if(null!=ue&&"function"==typeof Object.getOwnPropertySymbols){var Ve=0;for(Ne=Object.getOwnPropertySymbols(ue);Ve<Ne.length;Ve++)pe.indexOf(Ne[Ve])<0&&Object.prototype.propertyIsEnumerable.call(ue,Ne[Ve])&&(Ce[Ne[Ve]]=ue[Ne[Ve]])}return Ce}function Q(ue,pe,Ce,Ne){return new(Ce||(Ce=Promise))(function(Be,nt){function Ye(bt){try{Tt(Ne.next(bt))}catch(st){nt(st)}}function hn(bt){try{Tt(Ne.throw(bt))}catch(st){nt(st)}}function Tt(bt){bt.done?Be(bt.value):function Ve(Be){return Be instanceof Ce?Be:new Ce(function(nt){nt(Be)})}(bt.value).then(Ye,hn)}Tt((Ne=Ne.apply(ue,pe||[])).next())})}function xe(ue){return this instanceof xe?(this.v=ue,this):new xe(ue)}function Pe(ue,pe,Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ve,Ne=Ce.apply(ue,pe||[]),Be=[];return Ve={},nt("next"),nt("throw"),nt("return"),Ve[Symbol.asyncIterator]=function(){return this},Ve;function nt(sn){Ne[sn]&&(Ve[sn]=function(Dn){return new Promise(function(Cn,un){Be.push([sn,Dn,Cn,un])>1||Ye(sn,Dn)})})}function Ye(sn,Dn){try{!function hn(sn){sn.value instanceof xe?Promise.resolve(sn.value.v).then(Tt,bt):st(Be[0][2],sn)}(Ne[sn](Dn))}catch(Cn){st(Be[0][3],Cn)}}function Tt(sn){Ye("next",sn)}function bt(sn){Ye("throw",sn)}function st(sn,Dn){sn(Dn),Be.shift(),Be.length&&Ye(Be[0][0],Be[0][1])}}function je(ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ce,pe=ue[Symbol.asyncIterator];return pe?pe.call(ue):(ue=function lt(ue){var pe="function"==typeof Symbol&&Symbol.iterator,Ce=pe&&ue[pe],Ne=0;if(Ce)return Ce.call(ue);if(ue&&"number"==typeof ue.length)return{next:function(){return ue&&Ne>=ue.length&&(ue=void 0),{value:ue&&ue[Ne++],done:!ue}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ue),Ce={},Ne("next"),Ne("throw"),Ne("return"),Ce[Symbol.asyncIterator]=function(){return this},Ce);function Ne(Be){Ce[Be]=ue[Be]&&function(nt){return new Promise(function(Ye,hn){!function Ve(Be,nt,Ye,hn){Promise.resolve(hn).then(function(Tt){Be({value:Tt,done:Ye})},nt)}(Ye,hn,(nt=ue[Be](nt)).done,nt.value)})}}}U.d(De,{FC:()=>Pe,KL:()=>je,_T:()=>ne,mG:()=>Q,qq:()=>xe})},4650:(Et,De,U)=>{U.d(De,{$8M:()=>ad,$WT:()=>$n,$Z:()=>fC,AFp:()=>gh,ALo:()=>Xm,AaK:()=>de,BQk:()=>Wf,CRH:()=>m0,CZH:()=>ph,CqO:()=>fv,D6c:()=>Pc,EJc:()=>M0,F4k:()=>Zf,FYo:()=>xd,FiY:()=>Eo,Gf:()=>s_,GfV:()=>jE,Gpc:()=>W,JOm:()=>us,Jf7:()=>$y,LFG:()=>$e,LSH:()=>Ry,Lbi:()=>h_,Lck:()=>IA,MGl:()=>Kf,MMx:()=>fp,MR2:()=>LT,NdJ:()=>pm,OlP:()=>ln,Oqu:()=>xv,P3R:()=>ME,PXZ:()=>ke,Q6J:()=>ai,QGY:()=>fm,Qsj:()=>BE,R0b:()=>ls,RDi:()=>DT,Rgc:()=>Oo,SBq:()=>Xu,Sil:()=>Tc,Suo:()=>g0,TTD:()=>Go,TgZ:()=>wc,VKq:()=>di,X6Q:()=>cn,XFs:()=>ct,Xpm:()=>Uo,Xts:()=>Ny,Y36:()=>Nd,YKP:()=>oh,YNc:()=>BC,Yjl:()=>Bo,Yz7:()=>st,Z0I:()=>un,ZZ4:()=>Sr,_Bn:()=>t0,_UZ:()=>hm,_Vd:()=>Ad,_c5:()=>yl,_uU:()=>JS,aQg:()=>qn,c2e:()=>cb,cJS:()=>Dn,cg1:()=>sp,dDg:()=>k0,dqk:()=>Ot,eFA:()=>Eb,ekj:()=>Im,eoX:()=>yb,f3M:()=>rt,g9A:()=>x0,h0i:()=>sh,hGG:()=>y_,hij:()=>eh,iGM:()=>Cp,ifc:()=>Me,ip1:()=>S0,jDz:()=>r0,kL8:()=>Rm,lG2:()=>du,lqb:()=>fc,lri:()=>Sc,n5z:()=>Jl,oAB:()=>Vo,oxw:()=>gm,q4F:()=>HE,qLn:()=>Pf,qOj:()=>fe,qZA:()=>zf,rWj:()=>eu,s9C:()=>mm,sBO:()=>U0,s_b:()=>mp,soG:()=>_h,tb:()=>lb,tp0:()=>T,uIk:()=>dm,vHH:()=>me,vpe:()=>Yi,wAp:()=>At,xi3:()=>ah,xp6:()=>eC,ynx:()=>qf,z2F:()=>Pp,zSh:()=>Sd,zs3:()=>mc});var d=U(7579),$=U(727),O=U(9751),ne=U(6451),ie=U(3099);function oe(s){for(let o in s)if(s[o]===oe)return o;throw Error("Could not find renamed property on target object.")}function _e(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function de(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(de).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function ge(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Z=oe({__forward_ref__:oe});function W(s){return s.__forward_ref__=W,s.toString=function(){return de(this())},s}function Q(s){return He(s)?s():s}function He(s){return"function"==typeof s&&s.hasOwnProperty(Z)&&s.__forward_ref__===W}function Se(s){return s&&!!s.\u0275providers}const lt="https://g.co/ng/security#xss";class me extends Error{constructor(o,u){super(function Ae(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function be(s){return"string"==typeof s?s:null==s?"":String(s)}function je(s,o){throw new me(-201,!1)}function nt(s,o){null==s&&function Ye(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function st(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Dn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Cn(s){return Qn(s,pi)||Qn(s,vn)}function un(s){return null!==Cn(s)}function Qn(s,o){return s.hasOwnProperty(o)?s[o]:null}function Bn(s){return s&&(s.hasOwnProperty(Si)||s.hasOwnProperty(pr))?s[Si]:null}const pi=oe({\u0275prov:oe}),Si=oe({\u0275inj:oe}),vn=oe({ngInjectableDef:oe}),pr=oe({ngInjectorDef:oe});var ct=(()=>((ct=ct||{})[ct.Default=0]="Default",ct[ct.Host=1]="Host",ct[ct.Self=2]="Self",ct[ct.SkipSelf=4]="SkipSelf",ct[ct.Optional=8]="Optional",ct))();let gr;function Xn(s){const o=gr;return gr=s,o}function jn(s,o,u){const c=Cn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&ct.Optional?null:void 0!==o?o:void je(de(s))}const Ot=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Jn={},xn="__NG_DI_FLAG__",gi="ngTempTokenPath",Ai=/\n/gm,xi="__source";let Kt;function Br(s){const o=Kt;return Kt=s,o}function Hn(s,o=ct.Default){if(void 0===Kt)throw new me(-203,!1);return null===Kt?jn(s,void 0,o):Kt.get(s,o&ct.Optional?null:void 0,o)}function $e(s,o=ct.Default){return(function Pr(){return gr}()||Hn)(Q(s),o)}function rt(s,o=ct.Default){return $e(s,St(o))}function St(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function xt(s){const o=[];for(let u=0;u<s.length;u++){const c=Q(s[u]);if(Array.isArray(c)){if(0===c.length)throw new me(900,!1);let h,p=ct.Default;for(let y=0;y<c.length;y++){const C=c[y],b=q(C);"number"==typeof b?-1===b?h=C.token:p|=b:h=C}o.push($e(h,p))}else o.push($e(c))}return o}function Jt(s,o){return s[xn]=o,s.prototype[xn]=o,s}function q(s){return s[xn]}function j(s){return{toString:s}.toString()}var N=(()=>((N=N||{})[N.OnPush=0]="OnPush",N[N.Default=1]="Default",N))(),Me=(()=>{return(s=Me||(Me={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Me;var s})();const pt={},Ze=[],Ut=oe({\u0275cmp:oe}),vt=oe({\u0275dir:oe}),In=oe({\u0275pipe:oe}),mr=oe({\u0275mod:oe}),Lt=oe({\u0275fac:oe}),jr=oe({__NG_ELEMENT_ID__:oe});let Pl=0;function Uo(s){return j(()=>{const u=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===N.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Ze,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Me.Emulated,id:"c"+Pl++,styles:s.styles||Ze,_:null,setInput:null,schemas:s.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},p=s.dependencies,y=s.features;return h.inputs=kl(s.inputs,c),h.outputs=kl(s.outputs),y&&y.forEach(C=>C(h)),h.directiveDefs=p?()=>("function"==typeof p?p():p).map(Ol).filter(_r):null,h.pipeDefs=p?()=>("function"==typeof p?p():p).map(Nr).filter(_r):null,h})}function Ol(s){return on(s)||Mn(s)}function _r(s){return null!==s}function Vo(s){return j(()=>({type:s.type,bootstrap:s.bootstrap||Ze,declarations:s.declarations||Ze,imports:s.imports||Ze,exports:s.exports||Ze,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function kl(s,o){if(null==s)return pt;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),u[h]=c,o&&(o[h]=p)}return u}const du=Uo;function Bo(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function on(s){return s[Ut]||null}function Mn(s){return s[vt]||null}function Nr(s){return s[In]||null}function $n(s){const o=on(s)||Mn(s)||Nr(s);return null!==o&&o.standalone}function Hr(s,o){const u=s[mr]||null;if(!u&&!0===o)throw new Error(`Type ${de(s)} does not have '\u0275mod' property.`);return u}function yi(s){return Array.isArray(s)&&"object"==typeof s[1]}function vi(s){return Array.isArray(s)&&!0===s[1]}function ms(s){return 0!=(4&s.flags)}function Ia(s){return s.componentOffset>-1}function Ul(s){return 1==(1&s.flags)}function wr(s){return null!==s.template}function pg(s){return 0!=(256&s[2])}function ho(s,o){return s.hasOwnProperty(Lt)?s[Lt]:null}class $o{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Go(){return zo}function zo(s){return s.type.prototype.ngOnChanges&&(s.setInput=fo),wu}function wu(){const s=Eu(this),o=s?.current;if(o){const u=s.previous;if(u===pt)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function fo(s,o,u,c){const h=this.declaredInputs[u],p=Eu(s)||function Cu(s,o){return s[qo]=o}(s,{previous:pt,current:null}),y=p.current||(p.current={}),C=p.previous,b=C[h];y[h]=new $o(b&&b.currentValue,o,C===pt),s[c]=o}Go.ngInherit=!0;const qo="__ngSimpleChanges__";function Eu(s){return s[qo]||null}function kn(s){for(;Array.isArray(s);)s=s[0];return s}function js(s,o){return kn(o[s])}function Er(s,o){return kn(o[s.index])}function bu(s,o){return s.data[o]}function ur(s,o){const u=o[s];return yi(u)?u:u[0]}function go(s){return 64==(64&s[2])}function zi(s,o){return null==o?null:s[o]}function jl(s){s[18]=0}function mo(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const Vt={lFrame:wg(null),bindingsEnabled:!0};function Zc(){return Vt.bindingsEnabled}function ye(){return Vt.lFrame.lView}function tn(){return Vt.lFrame.tView}function lr(){let s=$l();for(;null!==s&&64===s.type;)s=s.parent;return s}function $l(){return Vt.lFrame.currentTNode}function qi(s,o){const u=Vt.lFrame;u.currentTNode=s,u.isParent=o}function Ko(){return Vt.lFrame.isParent}function Kc(){Vt.lFrame.isParent=!1}function kr(){const s=Vt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function vs(){return Vt.lFrame.bindingIndex++}function Gl(s,o){const u=Vt.lFrame;u.bindingIndex=u.bindingRootIndex=s,$s(o)}function $s(s){Vt.lFrame.currentDirectiveIndex=s}function tf(){return Vt.lFrame.currentQueryIndex}function zl(s){Vt.lFrame.currentQueryIndex=s}function Qc(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function nf(s,o,u){if(u&ct.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||u&ct.Host||(h=Qc(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const c=Vt.lFrame=vg();return c.currentTNode=o,c.lView=s,!0}function Su(s){const o=vg(),u=s[1];Vt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function vg(){const s=Vt.lFrame,o=null===s?null:s.child;return null===o?wg(s):o}function wg(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Eg(){const s=Vt.lFrame;return Vt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Xc=Eg;function Cg(){const s=Eg();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ri(){return Vt.lFrame.selectedIndex}function ws(s){Vt.lFrame.selectedIndex=s}function pn(){const s=Vt.lFrame;return bu(s.tView,s.selectedIndex)}function Ra(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:C,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:M}=p;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),C&&((s.contentHooks||(s.contentHooks=[])).push(u,C),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,C)),b&&(s.viewHooks||(s.viewHooks=[])).push(-u,b),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(u,M)}}function Pa(s,o,u){Jo(s,o,3,u)}function _o(s,o,u,c){(3&s[2])===u&&Jo(s,o,u,c)}function Gs(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Jo(s,o,u,c){const p=c??-1,y=o.length-1;let C=0;for(let b=void 0!==c?65535&s[18]:0;b<y;b++)if("number"==typeof o[b+1]){if(C=o[b],null!=c&&C>=c)break}else o[b]<0&&(s[18]+=65536),(C<p||-1==p)&&(af(s,u,o,b),s[18]=(4294901760&s[18])+b+2),b++}function af(s,o,u,c){const h=u[c]<0,p=u[c+1],C=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(C)}finally{}}}else try{p.call(C)}finally{}}class Au{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function xu(s,o,u){let c=0;for(;c<u.length;){const h=u[c];if("number"==typeof h){if(0!==h)break;c++;const p=u[c++],y=u[c++],C=u[c++];s.setAttribute(o,y,C,p)}else{const p=h,y=u[++c];Mu(p)?s.setProperty(o,p,y):s.setAttribute(o,p,y),c++}}return c}function ss(s){return 3===s||4===s||6===s}function Mu(s){return 64===s.charCodeAt(0)}function Wi(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||Ru(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function Ru(s,o,u,c,h){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const C=s[p++];if("number"==typeof C){if(C===o){y=-1;break}if(C>o){y=p-1;break}}}for(;p<s.length;){const C=s[p];if("number"==typeof C)break;if(C===u){if(null===c)return void(null!==h&&(s[p+1]=h));if(c===s[p+1])return void(s[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==h&&s.splice(p++,0,h)}function Wl(s){return-1!==s}function ea(s){return 32767&s}function yo(s,o){let u=function Zl(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let ta=!0;function qs(s){const o=ta;return ta=s,o}let Pu=0;const ii={};function Cs(s,o){const u=Yl(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,na(c.data,s),na(o,null),na(c.blueprint,null));const h=Nu(s,o),p=s.injectorIndex;if(Wl(h)){const y=ea(h),C=yo(h,o),b=C[1].data;for(let A=0;A<8;A++)o[p+A]=C[y+A]|b[y+A]}return o[p+8]=h,p}function na(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Yl(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Nu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){if(c=od(h),null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Ql(s,o,u){!function rd(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(jr)&&(c=u[jr]),null==c&&(c=u[jr]=Pu++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function id(s,o,u){if(u&ct.Optional||void 0!==s)return s;je()}function ku(s,o,u,c){if(u&ct.Optional&&void 0===c&&(c=null),!(u&(ct.Self|ct.Host))){const h=s[9],p=Xn(void 0);try{return h?h.get(o,c,u&ct.Optional):jn(o,c,u&ct.Optional)}finally{Xn(p)}}return id(c,0,u)}function Fu(s,o,u,c=ct.Default,h){if(null!==s){if(1024&o[2]){const y=function lf(s,o,u,c,h){let p=s,y=o;for(;null!==p&&null!==y&&1024&y[2]&&!(256&y[2]);){const C=Zi(p,y,u,c|ct.Self,ii);if(C!==ii)return C;let b=p.parent;if(!b){const A=y[21];if(A){const M=A.get(u,ii,c);if(M!==ii)return M}b=od(y),y=y[15]}p=b}return h}(s,o,u,c,ii);if(y!==ii)return y}const p=Zi(s,o,u,c,ii);if(p!==ii)return p}return ku(o,u,c,h)}function Zi(s,o,u,c,h){const p=function sd(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(jr)?s[jr]:void 0;return"number"==typeof o?o>=0?255&o:Dg:o}(u);if("function"==typeof p){if(!nf(o,s,c))return c&ct.Host?id(h,0,c):ku(o,u,c,h);try{const y=p(c);if(null!=y||c&ct.Optional)return y;je()}finally{Xc()}}else if("number"==typeof p){let y=null,C=Yl(s,o),b=-1,A=c&ct.Host?o[16][6]:null;for((-1===C||c&ct.SkipSelf)&&(b=-1===C?Nu(s,o):o[C+8],-1!==b&&wi(c,!1)?(y=o[1],C=ea(b),o=yo(b,o)):C=-1);-1!==C;){const M=o[1];if(Xl(p,C,M.data)){const L=uf(C,o,u,y,c,A);if(L!==ii)return L}b=o[C+8],-1!==b&&wi(c,o[1].data[C+8]===A)&&Xl(p,C,o)?(y=M,C=ea(b),o=yo(b,o)):C=-1}}return h}function uf(s,o,u,c,h,p){const y=o[1],C=y.data[s+8],M=wo(C,y,u,null==c?Ia(C)&&ta:c!=y&&0!=(3&C.type),h&ct.Host&&p===C);return null!==M?os(o,y,M,C):ii}function wo(s,o,u,c,h){const p=s.providerIndexes,y=o.data,C=1048575&p,b=s.directiveStart,M=p>>20,K=h?C+M:s.directiveEnd;for(let te=c?C:C+M;te<K;te++){const we=y[te];if(te<b&&u===we||te>=b&&we.type===u)return te}if(h){const te=y[b];if(te&&wr(te)&&te.type===u)return b}return null}function os(s,o,u,c){let h=s[u];const p=o.data;if(function Gr(s){return s instanceof Au}(h)){const y=h;y.resolving&&function xe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new me(-200,`Circular dependency in DI detected for ${s}${u}`)}(function Fe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():be(s)}(p[u]));const C=qs(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?Xn(y.injectImpl):null;nf(s,c,ct.Default);try{h=s[u]=y.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function td(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const y=zo(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==b&&Xn(b),qs(C),y.resolving=!1,Xc()}}return h}function Xl(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function wi(s,o){return!(s&ct.Self||s&ct.Host&&o)}class Is{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Fu(this._tNode,this._lView,o,St(c),u)}}function Dg(){return new Is(lr(),ye())}function Jl(s){return j(()=>{const o=s.prototype.constructor,u=o[Lt]||ra(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const p=h[Lt]||ra(h);if(p&&p!==u)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function ra(s){return He(s)?()=>{const o=ra(Q(s));return o&&o()}:ho(s)}function od(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function ad(s){return function Ou(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const p=u[h];if(ss(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(p===o)return u[h+1];h+=2}}}return null}(lr(),s)}const Lu="__parameters__";function Oa(s,o,u){return j(()=>{const c=function ld(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const y=new h(...p);return C.annotation=y,C;function C(b,A,M){const L=b.hasOwnProperty(Lu)?b[Lu]:Object.defineProperty(b,Lu,{value:[]})[Lu];for(;L.length<=M;)L.push(null);return(L[M]=L[M]||[]).push(y),b}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class ln{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=st({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function bs(s,o){s.forEach(u=>Array.isArray(u)?bs(u,o):o(u))}function ec(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function La(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function zr(s,o,u){let c=Bt(s,o);return c>=0?s[1|c]=u:(c=~c,function py(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function pd(s,o){const u=Bt(s,o);if(u>=0)return s[1|u]}function Bt(s,o){return function ut(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const p=c+(h-c>>1),y=s[p<<u];if(o===y)return p<<u;y>o?h=p:c=p+1}return~(h<<u)}(s,o,1)}const Eo=Jt(Oa("Optional"),8),T=Jt(Oa("SkipSelf"),4);var us=(()=>((us=us||{})[us.Important=1]="Important",us[us.DashCase=2]="DashCase",us))();const mf=new Map;let _f=0;const wf="__ngContext__";function Yr(s,o){yi(o)?(s[wf]=o[20],function yf(s){mf.set(s[20],s)}(o)):s[wf]=o}function Re(s,o){return undefined(s,o)}function _t(s){const o=s[3];return vi(o)?o[3]:o}function oi(s){return aa(s[13])}function As(s){return aa(s[4])}function aa(s){for(;null!==s&&!vi(s);)s=s[4];return s}function ja(s,o,u,c,h){if(null!=c){let p,y=!1;vi(c)?p=c:yi(c)&&(y=!0,c=c[0]);const C=kn(c);0===s&&null!==u?null==h?fE(o,u,C):vd(o,u,C,h||null,!0):1===s&&null!==u?vd(o,u,C,h||null,!0):2===s?function Zu(s,o,u){const c=qu(s,o);c&&function wT(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,C,y):3===s&&o.destroyNode(C),null!=p&&function _E(s,o,u,c,h){const p=u[7];p!==kn(u)&&ja(o,s,c,p,h);for(let C=10;C<u.length;C++){const b=u[C];ac(b[1],b,s,o,c,p)}}(o,s,p,u,h)}}function Gu(s,o,u){return s.createElement(o,u)}function Lg(s,o){const u=s[9],c=u.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,mo(h,-1)),u.splice(c,1)}function vy(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&Lg(h,c),o>0&&(s[u-1][4]=c[4]);const p=La(s,10+o);!function kg(s,o){ac(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=p[19];null!==y&&y.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function hE(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&ac(s,o,u,3,null,null),function oc(s){let o=s[13];if(!o)return bf(s[1],s);for(;o;){let u=null;if(yi(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)yi(o)&&bf(o[1],o),o=o[3];null===o&&(o=s),yi(o)&&bf(o[1],o),u=o&&o[4]}o=u}}(o)}}function bf(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function vT(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof Au)){const p=u[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const C=h[p[y]],b=p[y+1];try{b.call(C)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function Ug(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const y=u[p+3];y>=0?c[h=y]():c[h=-y].unsubscribe(),p+=2}else{const y=c[h=u[p+1]];u[p].call(y)}if(null!==c){for(let p=h+1;p<c.length;p++)(0,c[p])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&vi(o[3])){u!==o[3]&&Lg(u,o);const c=o[19];null!==c&&c.detachView(s)}!function _d(s){mf.delete(s[20])}(o)}}function zu(s,o,u){return function Vg(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];{const{componentOffset:h}=c;if(h>-1){const{encapsulation:p}=s.data[c.directiveStart+h];if(p===Me.None||p===Me.Emulated)return null}return Er(c,u)}}(s,o.parent,u)}function vd(s,o,u,c,h){s.insertBefore(o,u,c,h)}function fE(s,o,u){s.appendChild(o,u)}function pE(s,o,u,c,h){null!==c?vd(s,o,u,c,h):fE(s,o,u)}function qu(s,o){return s.parentNode(o)}let Dy,Gg,Cy=function Ey(s,o,u){return 40&s.type?Er(s,u):null};function jg(s,o,u,c){const h=zu(s,c,o),p=o[11],C=function wy(s,o,u){return Cy(s,o,u)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let b=0;b<u.length;b++)pE(p,h,u[b],C,!1);else pE(p,h,u,C,!1)}function Df(s,o){if(null!==o){const u=o.type;if(3&u)return Er(o,s);if(4&u)return Tf(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Df(s,c);{const h=s[o.index];return vi(h)?Tf(-1,h):kn(h)}}if(32&u)return Re(o,s)()||kn(s[o.index]);{const c=mE(s,o);return null!==c?Array.isArray(c)?c[0]:Df(_t(s[16]),c):Df(s,o.next)}}return null}function mE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Tf(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return Df(c,h)}return o[7]}function Iy(s,o,u,c,h,p,y){for(;null!=u;){const C=c[u.index],b=u.type;if(y&&0===o&&(C&&Yr(kn(C),c),u.flags|=2),32!=(32&u.flags))if(8&b)Iy(s,o,u.child,c,h,p,!1),ja(o,s,h,C,p);else if(32&b){const A=Re(u,c);let M;for(;M=A();)ja(o,s,h,M,p);ja(o,s,h,C,p)}else 16&b?by(s,o,c,u,h,p):ja(o,s,h,C,p);u=y?u.projectionNext:u.next}}function ac(s,o,u,c,h,p){Iy(u,c,s.firstChild,o,h,p,!1)}function by(s,o,u,c,h,p){const y=u[16],b=y[6].projection[c.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)ja(o,s,h,b[A],p);else Iy(s,o,b,y[3],h,p,!0)}function Hg(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function Ku(s,o,u){const{mergedAttrs:c,classes:h,styles:p}=u;null!==c&&xu(s,o,c),null!==h&&Hg(s,o,h),null!==p&&function ua(s,o,u){s.setAttribute(o,"style",u)}(s,o,p)}function DT(s){Dy=s}function Sy(s){return function Ty(){if(void 0===Gg&&(Gg=null,Ot.trustedTypes))try{Gg=Ot.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Gg}()?.createScriptURL(s)||s}class EE{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${lt})`}}function la(s){return s instanceof EE?s.changingThisBreaksApplicationSecurity:s}function lc(s,o){const u=function $a(s){return s instanceof EE&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${lt})`)}return u===o}const xy=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Qr=(()=>((Qr=Qr||{})[Qr.NONE=0]="NONE",Qr[Qr.HTML=1]="HTML",Qr[Qr.STYLE=2]="STYLE",Qr[Qr.SCRIPT=3]="SCRIPT",Qr[Qr.URL=4]="URL",Qr[Qr.RESOURCE_URL=5]="RESOURCE_URL",Qr))();function Ry(s){const o=Qu();return o?o.sanitize(Qr.URL,s)||"":lc(s,"URL")?la(s):function qg(s){return(s=String(s)).match(xy)?s:"unsafe:"+s}(be(s))}function AE(s){const o=Qu();if(o)return Sy(o.sanitize(Qr.RESOURCE_URL,s)||"");if(lc(s,"ResourceURL"))return Sy(la(s));throw new me(904,!1)}function ME(s,o,u){return function Mf(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?AE:Ry}(o,u)(s)}function Qu(){const s=ye();return s&&s[12]}const Ny=new ln("ENVIRONMENT_INITIALIZER"),RE=new ln("INJECTOR",-1),dc=new ln("INJECTOR_DEF_TYPES");class bd{get(o,u=Jn){if(u===Jn){const c=new Error(`NullInjectorError: No provider for ${de(o)}!`);throw c.name="NullInjectorError",c}return u}}function LT(s){return{\u0275providers:s}}function UT(...s){return{\u0275providers:Dd(0,s),\u0275fromNgModule:!0}}function Dd(s,...o){const u=[],c=new Set;let h;return bs(o,p=>{const y=p;Oy(y,u,[],c)&&(h||(h=[]),h.push(y))}),void 0!==h&&Td(h,u),u}function Td(s,o){for(let u=0;u<s.length;u++){const{providers:h}=s[u];ky(h,p=>{o.push(p)})}}function Oy(s,o,u,c){if(!(s=Q(s)))return!1;let h=null,p=Bn(s);const y=!p&&on(s);if(p||y){if(y&&!y.standalone)return!1;h=s}else{const b=s.ngModule;if(p=Bn(b),!p)return!1;h=b}const C=c.has(h);if(y){if(C)return!1;if(c.add(h),y.dependencies){const b="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const A of b)Oy(A,o,u,c)}}else{if(!p)return!1;{if(null!=p.imports&&!C){let A;c.add(h);try{bs(p.imports,M=>{Oy(M,o,u,c)&&(A||(A=[]),A.push(M))})}finally{}void 0!==A&&Td(A,o)}if(!C){const A=ho(h)||(()=>new h);o.push({provide:h,useFactory:A,deps:Ze},{provide:dc,useValue:h,multi:!0},{provide:Ny,useValue:()=>$e(h),multi:!0})}const b=p.providers;null==b||C||ky(b,M=>{o.push(M)})}}return h!==s&&void 0!==s.providers}function ky(s,o){for(let u of s)Se(u)&&(u=u.\u0275providers),Array.isArray(u)?ky(u,o):o(u)}const VT=oe({provide:String,useValue:oe});function Fy(s){return null!==s&&"object"==typeof s&&VT in s}function hc(s){return"function"==typeof s}const Sd=new ln("Set Injector scope."),Ga={},jT={};let Uy;function Xg(){return void 0===Uy&&(Uy=new bd),Uy}class fc{}class NE extends fc{get destroyed(){return this._destroyed}constructor(o,u,c,h){super(),this.parent=u,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Rf(o,y=>this.processProvider(y)),this.records.set(RE,pc(void 0,this)),h.has("environment")&&this.records.set(fc,pc(void 0,this));const p=this.records.get(Sd);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(dc.multi,Ze,ct.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=Br(this),c=Xn(void 0);try{return o()}finally{Br(u),Xn(c)}}get(o,u=Jn,c=ct.Default){this.assertNotDestroyed(),c=St(c);const h=Br(this),p=Xn(void 0);try{if(!(c&ct.SkipSelf)){let C=this.records.get(o);if(void 0===C){const b=function kE(s){return"function"==typeof s||"object"==typeof s&&s instanceof ln}(o)&&Cn(o);C=b&&this.injectableDefInScope(b)?pc(Vy(o),Ga):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(c&ct.Self?Xg():this.parent).get(o,u=c&ct.Optional&&u===Jn?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[gi]=y[gi]||[]).unshift(de(o)),h)throw y;return function G(s,o,u,c){const h=s[gi];throw o[xi]&&h.unshift(o[xi]),s.message=function Y(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=de(o);if(Array.isArray(o))h=o.map(de).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let C=o[y];p.push(y+":"+("string"==typeof C?JSON.stringify(C):de(C)))}h=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(Ai,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[gi]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{Xn(p),Br(h)}}resolveInjectorInitializers(){const o=Br(this),u=Xn(void 0);try{const c=this.get(Ny.multi,Ze,ct.Self);for(const h of c)h()}finally{Br(o),Xn(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(de(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new me(205,!1)}processProvider(o){let u=hc(o=Q(o))?o:Q(o&&o.provide);const c=function $T(s){return Fy(s)?pc(void 0,s.useValue):pc(OE(s),Ga)}(o);if(hc(o)||!0!==o.multi)this.records.get(u);else{let h=this.records.get(u);h||(h=pc(void 0,Ga,!0),h.factory=()=>xt(h.multi),this.records.set(u,h)),u=o,h.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===Ga&&(u.value=jT,u.value=u.factory()),"object"==typeof u.value&&u.value&&function By(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Q(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Vy(s){const o=Cn(s),u=null!==o?o.factory:ho(s);if(null!==u)return u;if(s instanceof ln)throw new me(204,!1);if(s instanceof Function)return function HT(s){const o=s.length;if(o>0)throw function Ys(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new me(204,!1);const u=function Vr(s){const o=s&&(s[pi]||s[vn]);if(o){const u=function Hi(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new me(204,!1)}function OE(s,o,u){let c;if(hc(s)){const h=Q(s);return ho(h)||Vy(h)}if(Fy(s))c=()=>Q(s.useValue);else if(function BT(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...xt(s.deps||[]));else if(function PE(s){return!(!s||!s.useExisting)}(s))c=()=>$e(Q(s.useExisting));else{const h=Q(s&&(s.useClass||s.provide));if(!function GT(s){return!!s.deps}(s))return ho(h)||Vy(h);c=()=>new h(...xt(s.deps))}return c}function pc(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Rf(s,o){for(const u of s)Array.isArray(u)?Rf(u,o):u&&Se(u)?Rf(u.\u0275providers,o):o(u)}class Jg{}class FE{}class em{resolveComponentFactory(o){throw function zT(s){const o=Error(`No component factory found for ${de(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Ad=(()=>{class s{}return s.NULL=new em,s})();function UE(){return za(lr(),ye())}function za(s,o){return new Xu(Er(s,o))}let Xu=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=UE,s})();function VE(s){return s instanceof Xu?s.nativeElement:s}class xd{}let BE=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function qT(){const s=ye(),u=ur(lr().index,s);return(yi(u)?u:s)[11]}(),s})(),WT=(()=>{class s{}return s.\u0275prov=st({token:s,providedIn:"root",factory:()=>null}),s})();class jE{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const HE=new jE("15.1.3"),jy={};function Hy(s){return s.ngOriginalError}class Pf{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Hy(o);for(;u&&Hy(u);)u=Hy(u);return u||null}}function $y(s){return s.ownerDocument.defaultView}function Ju(s){return s instanceof Function?s():s}function WE(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||s.charCodeAt(h+p)<=32)return h}u=h+1}}const ZE="ng-template";function KE(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==WE(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function nm(s){return 4===s.type&&s.value!==ZE}function tS(s,o,u){return o===(4!==s.type||u?s.value:ZE)}function YE(s,o,u){let c=4;const h=s.attrs||[],p=function rm(s){for(let o=0;o<s.length;o++)if(ss(s[o]))return o;return s.length}(h);let y=!1;for(let C=0;C<o.length;C++){const b=o[C];if("number"!=typeof b){if(!y)if(4&c){if(c=2|1&c,""!==b&&!tS(s,b,u)||""===b&&1===o.length){if(Ni(c))return!1;y=!0}}else{const A=8&c?b:o[++C];if(8&c&&null!==s.attrs){if(!KE(s.attrs,A,u)){if(Ni(c))return!1;y=!0}continue}const L=Gy(8&c?"class":b,h,nm(s),u);if(-1===L){if(Ni(c))return!1;y=!0;continue}if(""!==A){let K;K=L>p?"":h[L+1].toLowerCase();const te=8&c?K:null;if(te&&-1!==WE(te,A,0)||2&c&&A!==K){if(Ni(c))return!1;y=!0}}}}else{if(!y&&!Ni(c)&&!Ni(b))return!1;if(y&&Ni(b))continue;y=!1,c=b|1&c}}return Ni(c)||y}function Ni(s){return 0==(1&s)}function Gy(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let p=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let C=o[++h];for(;"string"==typeof C;)C=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function im(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function QE(s,o,u=!1){for(let c=0;c<o.length;c++)if(YE(s,o[c],u))return!0;return!1}function zy(s,o){return s?":not("+o.trim()+")":o}function nS(s){let o=s[0],u=1,c=2,h="",p=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const C=s[++u];h+="["+y+(C.length>0?'="'+C+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!Ni(y)&&(o+=zy(p,h),h=""),c=y,p=p||!Ni(c);u++}return""!==h&&(o+=zy(p,h)),o}const Zt={};function eC(s){Nf(tn(),ye(),ri()+s,!1)}function Nf(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Pa(o,p,u)}else{const p=s.preOrderHooks;null!==p&&_o(o,p,0,u)}ws(u)}function qa(s,o=null,u=null,c){const h=sC(s,o,u,c);return h.resolveInjectorInitializers(),h}function sC(s,o=null,u=null,c,h=new Set){const p=[u||Ze,UT(s)];return c=c||("object"==typeof s?void 0:de(s)),new NE(p,o||Xg(),c||null,h)}let mc=(()=>{class s{static create(u,c){if(Array.isArray(u))return qa({name:""},c,u,"");{const h=u.name??"";return qa({name:h},u.parent,u.providers,h)}}}return s.THROW_IF_NOT_FOUND=Jn,s.NULL=new bd,s.\u0275prov=st({token:s,providedIn:"any",factory:()=>$e(RE)}),s.__NG_ELEMENT_ID__=-1,s})();function Nd(s,o=ct.Default){const u=ye();return null===u?$e(s,o):Fu(lr(),u,Q(s),o)}function fC(){throw new Error("invalid")}function pC(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const p=u[c+1];if(-1!==p){const y=s.data[p];zl(u[c]),y.contentQueries(2,o[p],p)}}}function Ky(s,o,u,c,h,p,y,C,b,A,M){const L=o.blueprint.slice();return L[0]=h,L[2]=76|c,(null!==M||s&&1024&s[2])&&(L[2]|=1024),jl(L),L[3]=L[15]=s,L[8]=u,L[10]=y||s&&s[10],L[11]=C||s&&s[11],L[12]=b||s&&s[12]||null,L[9]=A||s&&s[9]||null,L[6]=p,L[20]=function Xs(){return _f++}(),L[21]=M,L[16]=2==o.type?s[16]:L,L}function mn(s,o,u,c,h){let p=s.data[o];if(null===p)p=function Od(s,o,u,c,h){const p=$l(),y=Ko(),b=s.data[o]=function vS(s,o,u,c,h,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=b),null!==p&&(y?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(s,o,u,c,h),function Yc(){return Vt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=u,p.value=c,p.attrs=h;const y=function Zo(){const s=Vt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return qi(p,!0),p}function _c(s,o,u,c){if(0===u)return-1;const h=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function xo(s,o,u){Su(o);try{const c=s.viewQuery;null!==c&&um(1,c,u);const h=s.template;null!==h&&mC(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&pC(s,o),s.staticViewQueries&&um(2,s.viewQuery,u);const p=s.components;null!==p&&function yS(s,o){for(let u=0;u<o.length;u++)TS(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Cg()}}function Yy(s,o,u,c){const h=o[2];if(128!=(128&h)){Su(o);try{jl(o),function Qo(s){return Vt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&mC(s,o,u,2,c);const y=3==(3&h);if(y){const A=s.preOrderCheckHooks;null!==A&&Pa(o,A,null)}else{const A=s.preOrderHooks;null!==A&&_o(o,A,0,null),Gs(o,0)}if(function DS(s){for(let o=oi(s);null!==o;o=As(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c];512&h[2]||mo(h[3],1),h[2]|=512}}}(o),function TC(s){for(let o=oi(s);null!==o;o=As(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];go(c)&&Yy(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&pC(s,o),y){const A=s.contentCheckHooks;null!==A&&Pa(o,A)}else{const A=s.contentHooks;null!==A&&_o(o,A,1),Gs(o,1)}!function _S(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)ws(~h);else{const p=h,y=u[++c],C=u[++c];Gl(y,p),C(2,o[p])}}}finally{ws(-1)}}(s,o);const C=s.components;null!==C&&function gC(s,o){for(let u=0;u<o.length;u++)UN(s,o[u])}(o,C);const b=s.viewQuery;if(null!==b&&um(2,b,c),y){const A=s.viewCheckHooks;null!==A&&Pa(o,A)}else{const A=s.viewHooks;null!==A&&_o(o,A,2),Gs(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,mo(o[3],-1))}finally{Cg()}}}function mC(s,o,u,c,h){const p=ri(),y=2&c;try{ws(-1),y&&o.length>22&&Nf(s,o,22,!1),u(c,h)}finally{ws(p)}}function Qy(s,o,u){if(ms(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,u[p],p)}}}function Xy(s,o,u){Zc()&&(function EC(s,o,u,c){const h=u.directiveStart,p=u.directiveEnd;Ia(u)&&function FN(s,o,u){const c=Er(o,s),h=ev(u),p=s[10],y=Ld(s,Ky(s,h,null,u.onPush?32:16,c,o,p,p.createRenderer(c,u),null,null,null));s[o.index]=y}(o,u,s.data[h+u.componentOffset]),s.firstCreatePass||Cs(u,o),Yr(c,o);const y=u.initialInputs;for(let C=h;C<p;C++){const b=s.data[C],A=os(o,s,C,u);Yr(A,o),null!==y&&LN(0,C-h,A,b,0,y),wr(b)&&(ur(u.index,o)[8]=os(o,s,C,u))}}(s,o,u,Er(u,o)),64==(64&u.flags)&&CC(s,o,u))}function Jy(s,o,u=Er){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],C=-1===y?u(o,s):s[y];s[h++]=C}}}function ev(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=kd(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function kd(s,o,u,c,h,p,y,C,b,A){const M=22+c,L=M+h,K=function el(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Zt);return u}(M,L),te="function"==typeof A?A():A;return K[1]={type:s,blueprint:K,template:u,queries:null,viewQuery:C,declTNode:o,data:K.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:te,incompleteFirstPass:!1}}function _C(s,o,u,c){const h=AC(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&xC(s).push(c,h.length-1))}function tv(s,o,u,c){for(let h in s)if(s.hasOwnProperty(h)){u=null===u?{}:u;const p=s[h];null===c?nv(u,o,h,p):c.hasOwnProperty(h)&&nv(u,o,c[h],p)}return u}function nv(s,o,u,c){s.hasOwnProperty(u)?s[u].push(o,c):s[u]=[o,c]}function bi(s,o,u,c,h,p,y,C){const b=Er(o,u);let M,A=o.inputs;!C&&null!=A&&(M=A[c])?(tl(s,u,M,c,h),Ia(o)&&Ir(u,o.index)):3&o.type&&(c=function wS(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=y?y(h,o.value||"",c):h,p.setProperty(b,c,h))}function Ir(s,o){const u=ur(o,s);16&u[2]||(u[2]|=32)}function Fd(s,o,u,c){let h=!1;if(Zc()){const p=null===c?null:{"":-1},y=function CS(s,o){const u=s.directiveRegistry;let c=null,h=null;if(u)for(let p=0;p<u.length;p++){const y=u[p];if(QE(o,y.selectors,!1))if(c||(c=[]),wr(y))if(null!==y.findHostDirectiveDefs){const C=[];h=h||new Map,y.findHostDirectiveDefs(y,C,h),c.unshift(...C,y),yc(s,o,C.length)}else c.unshift(y),yc(s,o,0);else h=h||new Map,y.findHostDirectiveDefs?.(y,c,h),c.push(y)}return null===c?null:[c,h]}(s,u);let C,b;null===y?C=b=null:[C,b]=y,null!==C&&(h=!0,iv(s,o,u,C,p,b)),p&&function IS(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=u[o[h+1]];if(null==p)throw new me(-301,!1);c.push(o[h],p)}}}(u,c,p)}return u.mergedAttrs=Wi(u.mergedAttrs,u.attrs),h}function iv(s,o,u,c,h,p){for(let A=0;A<c.length;A++)Ql(Cs(u,o),s,c[A].type);!function ON(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,c.length);for(let A=0;A<c.length;A++){const M=c[A];M.providersResolver&&M.providersResolver(M)}let y=!1,C=!1,b=_c(s,o,c.length,null);for(let A=0;A<c.length;A++){const M=c[A];u.mergedAttrs=Wi(u.mergedAttrs,M.hostAttrs),kN(s,u,o,b,M),IC(b,M,h),null!==M.contentQueries&&(u.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(u.flags|=64);const L=M.type.prototype;!y&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),y=!0),!C&&(L.ngOnChanges||L.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),b++}!function yC(s,o,u){const h=o.directiveEnd,p=s.data,y=o.attrs,C=[];let b=null,A=null;for(let M=o.directiveStart;M<h;M++){const L=p[M],K=u?u.get(L):null,we=K?K.outputs:null;b=tv(L.inputs,M,b,K?K.inputs:null),A=tv(L.outputs,M,A,we);const Ge=null===b||null===y||nm(o)?null:bS(b,M,y);C.push(Ge)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=8),b.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=C,o.inputs=b,o.outputs=A}(s,u,p)}function CC(s,o,u){const c=u.directiveStart,h=u.directiveEnd,p=u.index,y=function ef(){return Vt.lFrame.currentDirectiveIndex}();try{ws(p);for(let C=c;C<h;C++){const b=s.data[C],A=o[C];$s(C),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&ES(b,A)}}finally{ws(-1),$s(y)}}function ES(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function yc(s,o,u){o.componentOffset=u,(s.components||(s.components=[])).push(o.index)}function IC(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;wr(o)&&(u[""]=s)}}function kN(s,o,u,c,h){s.data[c]=h;const p=h.factory||(h.factory=ho(h.type)),y=new Au(p,wr(h),Nd);s.blueprint[c]=y,u[c]=y,function sv(s,o,u,c,h){const p=h.hostBindings;if(p){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const C=~o.index;(function wC(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(y)!=C&&y.push(C),y.push(u,c,p)}}(s,o,c,_c(s,u,h.hostVars,Zt),h)}function Wa(s,o,u,c,h,p){const y=Er(s,o);!function bC(s,o,u,c,h,p,y){if(null==p)s.removeAttribute(o,h,u);else{const C=null==y?be(p):y(p,c||"",h);s.setAttribute(o,h,C,u)}}(o[11],y,p,s.value,u,c,h)}function LN(s,o,u,c,h,p){const y=p[o];if(null!==y){const C=c.setInput;for(let b=0;b<y.length;){const A=y[b++],M=y[b++],L=y[b++];null!==C?c.setInput(u,L,A,M):u[M]=L}}}function bS(s,o,u){let c=null,h=0;for(;h<u.length;){const p=u[h];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===c&&(c=[]);const y=s[p];for(let C=0;C<y.length;C+=2)if(y[C]===o){c.push(p,y[C+1],u[h+1]);break}}h+=2}else h+=2;else h+=4}return c}function DC(s,o,u,c){return[s,!0,!1,o,null,0,c,u,null,null]}function UN(s,o){const u=ur(o,s);if(go(u)){const c=u[1];48&u[2]?Yy(c,u,c.template,u[8]):u[5]>0&&ov(u)}}function ov(s){for(let c=oi(s);null!==c;c=As(c))for(let h=10;h<c.length;h++){const p=c[h];if(go(p))if(512&p[2]){const y=p[1];Yy(y,p,y.template,p[8])}else p[5]>0&&ov(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=ur(u[c],s);go(h)&&h[5]>0&&ov(h)}}function TS(s,o){const u=ur(o,s),c=u[1];(function SC(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),xo(c,u,u[8])}function Ld(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function am(s){for(;s;){s[2]|=32;const o=_t(s);if(pg(s)&&!o)return s;s=o}return null}function Ff(s,o,u,c=!0){const h=o[10];h.begin&&h.begin();try{Yy(s,o,s.template,u)}catch(y){throw c&&cr(o,y),y}finally{h.end&&h.end()}}function um(s,o,u){zl(0),o(s,u)}function AC(s){return s[7]||(s[7]=[])}function xC(s){return s.cleanup||(s.cleanup=[])}function cr(s,o){const u=s[9],c=u?u.get(Pf,null):null;c&&c.handleError(o)}function tl(s,o,u,c,h){for(let p=0;p<u.length;){const y=u[p++],C=u[p++],b=o[y],A=s.data[y];null!==A.setInput?A.setInput(b,h,c,C):b[C]=h}}function av(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const C=o[y];"number"==typeof C?p=C:1==p?h=ge(h,C):2==p&&(c=ge(c,C+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}function Lf(s,o,u,c,h=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(kn(p)),vi(p))for(let C=10;C<p.length;C++){const b=p[C],A=b[1].firstChild;null!==A&&Lf(b[1],b,A,c)}const y=u.type;if(8&y)Lf(s,o,u.child,c);else if(32&y){const C=Re(u,o);let b;for(;b=C();)c.push(b)}else if(16&y){const C=mE(o,u);if(Array.isArray(C))c.push(...C);else{const b=_t(o[16]);Lf(b[1],b,C,c,!0)}}u=h?u.projectionNext:u.next}return c}class Uf{get rootNodes(){const o=this._lView,u=o[1];return Lf(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(vi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(vy(o,c),La(u,c))}this._attachedToViewContainer=!1}hE(this._lView[1],this._lView)}onDestroy(o){_C(this._lView[1],this._lView,null,o)}markForCheck(){am(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ff(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Cf(s,o){ac(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new me(902,!1);this._appRef=o}}class MS extends Uf{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Ff(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class RS extends Ad{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=on(o);return new Vf(u,this.ngModule)}}function PS(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class BN{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){c=St(c);const h=this.injector.get(o,jy,c);return h!==jy||u===jy?h:this.parentInjector.get(o,u,c)}}class Vf extends FE{get inputs(){return PS(this.componentDef.inputs)}get outputs(){return PS(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function rS(s){return s.map(nS).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,c,h){let p=(h=h||this.ngModule)instanceof fc?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new BN(o,p):o,C=y.get(xd,null);if(null===C)throw new me(407,!1);const b=y.get(WT,null),A=C.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",L=c?function NN(s,o,u){return s.selectRootElement(o,u===Me.ShadowDom)}(A,c,this.componentDef.encapsulation):Gu(A,M,function VN(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(M)),K=this.componentDef.onPush?288:272,te=kd(0,null,null,1,0,null,null,null,null,null),we=Ky(null,te,null,K,null,null,C,A,b,y,null);let Ge,Qe;Su(we);try{const gt=this.componentDef;let Nt,Le=null;gt.findHostDirectiveDefs?(Nt=[],Le=new Map,gt.findHostDirectiveDefs(gt,Nt,Le),Nt.push(gt)):Nt=[gt];const qt=function Ka(s,o){const u=s[1];return s[22]=o,mn(u,22,2,"#host",null)}(we,L),Wn=function NS(s,o,u,c,h,p,y,C){const b=h[1];!function OS(s,o,u,c){for(const h of s)o.mergedAttrs=Wi(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(av(o,o.mergedAttrs,!0),null!==u&&Ku(c,u,o))}(c,s,o,y);const A=p.createRenderer(o,u),M=Ky(h,ev(u),null,u.onPush?32:16,h[s.index],s,p,A,C||null,null,null);return b.firstCreatePass&&yc(b,s,c.length-1),Ld(h,M),h[s.index]=M}(qt,L,gt,Nt,we,C,A);Qe=bu(te,22),L&&function FS(s,o,u,c){if(c)xu(s,u,["ng-version",HE.full]);else{const{attrs:h,classes:p}=function iS(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++c]):8===h&&u.push(p);else{if(!Ni(h))break;h=p}c++}return{attrs:o,classes:u}}(o.selectors[0]);h&&xu(s,u,h),p&&p.length>0&&Hg(s,u,p.join(" "))}}(A,gt,L,c),void 0!==u&&function LS(s,o,u){const c=s.projection=[];for(let h=0;h<o.length;h++){const p=u[h];c.push(null!=p?Array.from(p):null)}}(Qe,this.ngContentSelectors,u),Ge=function kS(s,o,u,c,h,p){const y=lr(),C=h[1],b=Er(y,h);iv(C,h,y,u,null,c);for(let M=0;M<u.length;M++)Yr(os(h,C,y.directiveStart+M,y),h);CC(C,h,y),b&&Yr(b,h);const A=os(h,C,y.directiveStart+y.componentOffset,y);if(s[8]=h[8]=A,null!==p)for(const M of p)M(A,o);return Qy(C,y,s),A}(Wn,gt,Nt,Le,we,[US]),xo(te,we,null)}finally{Cg()}return new jN(this.componentType,Ge,za(Qe,we),we,Qe)}}class jN extends Jg{constructor(o,u,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new MS(h),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const p=this._rootLView;tl(p[1],p,h,o,u),Ir(p,this._tNode.index)}}get injector(){return new Is(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function US(){const s=lr();Ra(ye()[1],s)}function fe(s){let o=function Ud(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let h;if(wr(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new me(903,!1);h=o.\u0275dir}if(h){if(u){c.push(h);const y=s;y.inputs=Vd(s.inputs),y.declaredInputs=Vd(s.declaredInputs),y.outputs=Vd(s.outputs);const C=h.hostBindings;C&&VS(s,C);const b=h.viewQuery,A=h.contentQueries;if(b&&RC(s,b),A&&uv(s,A),_e(s.inputs,h.inputs),_e(s.declaredInputs,h.declaredInputs),_e(s.outputs,h.outputs),wr(h)&&h.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const C=p[y];C&&C.ngInherit&&C(s),C===fe&&(u=!1)}}o=Object.getPrototypeOf(o)}!function MC(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=Wi(h.hostAttrs,u=Wi(u,h.hostAttrs))}}(c)}function Vd(s){return s===pt?{}:s===Ze?[]:s}function RC(s,o){const u=s.viewQuery;s.viewQuery=u?(c,h)=>{o(c,h),u(c,h)}:o}function uv(s,o){const u=s.contentQueries;s.contentQueries=u?(c,h,p)=>{o(c,h,p),u(c,h,p)}:o}function VS(s,o){const u=s.hostBindings;s.hostBindings=u?(c,h)=>{o(c,h),u(c,h)}:o}let jf=null;function nl(){if(!jf){const s=Ot.Symbol;if(s&&s.iterator)jf=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(jf=c)}}}return jf}function Hf(s){return!!lv(s)&&(Array.isArray(s)||!(s instanceof Map)&&nl()in s)}function lv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ca(s,o,u){return s[o]=u}function Oi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function dm(s,o,u,c){const h=ye();return Oi(h,vs(),o)&&(tn(),Wa(pn(),h,s,o,u,c)),dm}function Gf(s,o,u,c){return Oi(s,vs(),u)?o+be(u)+c:Zt}function BC(s,o,u,c,h,p,y,C){const b=ye(),A=tn(),M=s+22,L=A.firstCreatePass?function Zd(s,o,u,c,h,p,y,C,b){const A=o.consts,M=mn(o,s,4,y||null,zi(A,C));Fd(o,u,M,zi(A,b)),Ra(o,M);const L=M.tViews=kd(2,M,c,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,M),L.queries=o.queries.embeddedTView(M)),M}(M,A,b,o,u,c,h,p,y):A.data[M];qi(L,!1);const K=b[11].createComment("");jg(A,b,K,L),Yr(K,b),Ld(b,b[M]=DC(K,b,K,L)),Ul(L)&&Xy(A,b,L),null!=y&&Jy(b,L,C)}function ai(s,o,u){const c=ye();return Oi(c,vs(),o)&&bi(tn(),pn(),c,s,o,c[11],u,!1),ai}function da(s,o,u,c,h){const y=h?"class":"style";tl(s,u,o.inputs[y],y,c)}function wc(s,o,u,c){const h=ye(),p=tn(),y=22+s,C=h[11],b=h[y]=Gu(C,o,function Ig(){return Vt.lFrame.currentNamespace}()),A=p.firstCreatePass?function qS(s,o,u,c,h,p,y){const C=o.consts,A=mn(o,s,2,h,zi(C,p));return Fd(o,u,A,zi(C,y)),null!==A.attrs&&av(A,A.attrs,!1),null!==A.mergedAttrs&&av(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,p,h,0,o,u,c):p.data[y];return qi(A,!0),Ku(C,b,A),32!=(32&A.flags)&&jg(p,h,b,A),0===function Aa(){return Vt.lFrame.elementDepthCount}()&&Yr(b,h),function Yh(){Vt.lFrame.elementDepthCount++}(),Ul(A)&&(Xy(p,h,A),Qy(p,A,h)),null!==c&&Jy(h,A),wc}function zf(){let s=lr();Ko()?Kc():(s=s.parent,qi(s,!1));const o=s;!function xa(){Vt.lFrame.elementDepthCount--}();const u=tn();return u.firstCreatePass&&(Ra(u,s),ms(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function nd(s){return 0!=(8&s.flags)}(o)&&da(u,o,ye(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function zs(s){return 0!=(16&s.flags)}(o)&&da(u,o,ye(),o.stylesWithoutHost,!1),zf}function hm(s,o,u,c){return wc(s,o,u,c),zf(),hm}function qf(s,o,u){const c=ye(),h=tn(),p=s+22,y=h.firstCreatePass?function HC(s,o,u,c,h){const p=o.consts,y=zi(p,c),C=mn(o,s,8,"ng-container",y);return null!==y&&av(C,y,!0),Fd(o,u,C,zi(p,h)),null!==o.queries&&o.queries.elementStart(o,C),C}(p,h,c,o,u):h.data[p];qi(y,!0);const C=c[p]=c[11].createComment("");return jg(h,c,C,y),Yr(C,c),Ul(y)&&(Xy(h,c,y),Qy(h,y,c)),null!=u&&Jy(c,y),qf}function Wf(){let s=lr();const o=tn();return Ko()?Kc():(s=s.parent,qi(s,!1)),o.firstCreatePass&&(Ra(o,s),ms(s)&&o.queries.elementEnd(s)),Wf}function fm(s){return!!s&&"function"==typeof s.then}function Zf(s){return!!s&&"function"==typeof s.subscribe}const fv=Zf;function pm(s,o,u,c){const h=ye(),p=tn(),y=lr();return function zC(s,o,u,c,h,p,y){const C=Ul(c),A=s.firstCreatePass&&xC(s),M=o[8],L=AC(o);let K=!0;if(3&c.type||y){const Ge=Er(c,o),Qe=y?y(Ge):Ge,gt=L.length,Nt=y?qt=>y(kn(qt[c.index])):c.index;let Le=null;if(!y&&C&&(Le=function GC(s,o,u,c){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===u&&h[p+1]===c){const C=o[7],b=h[p+2];return C.length>b?C[b]:null}"string"==typeof y&&(p+=2)}return null}(s,o,h,c.index)),null!==Le)(Le.__ngLastListenerFn__||Le).__ngNextListenerFn__=p,Le.__ngLastListenerFn__=p,K=!1;else{p=mv(c,o,M,p,!1);const qt=u.listen(Qe,h,p);L.push(p,qt),A&&A.push(h,Nt,gt,gt+1)}}else p=mv(c,o,M,p,!1);const te=c.outputs;let we;if(K&&null!==te&&(we=te[h])){const Ge=we.length;if(Ge)for(let Qe=0;Qe<Ge;Qe+=2){const Wn=o[we[Qe]][we[Qe+1]].subscribe(p),Ar=L.length;L.push(p,Wn),A&&A.push(h,c.index,Ar,-(Ar+1))}}}(p,h,h[11],y,s,o,c),pm}function gv(s,o,u,c){try{return!1!==u(c)}catch(h){return cr(s,h),!1}}function mv(s,o,u,c,h){return function p(y){if(y===Function)return c;am(s.componentOffset>-1?ur(s.index,o):o);let b=gv(o,0,c,y),A=p.__ngNextListenerFn__;for(;A;)b=gv(o,0,A,y)&&b,A=A.__ngNextListenerFn__;return h&&!1===b&&(y.preventDefault(),y.returnValue=!1),b}}function gm(s=1){return function cy(s){return(Vt.lFrame.contextLView=function Jc(s,o){for(;s>0;)o=o[15],s--;return o}(s,Vt.lFrame.contextLView))[8]}(s)}function mm(s,o,u){return Kf(s,"",o,"",u),mm}function Kf(s,o,u,c,h){const p=ye(),y=Gf(p,o,u,c);return y!==Zt&&bi(tn(),pn(),p,s,y,p[11],h,!1),Kf}function Cv(s,o){return s<<17|o<<2}function Ec(s){return s>>17&32767}function Qf(s){return 2|s}function ha(s){return(131068&s)>>2}function Iv(s,o){return-131069&s|o<<2}function Dv(s){return 1|s}function WS(s,o,u,c,h){const p=s[u+1],y=null===o;let C=c?Ec(p):ha(p),b=!1;for(;0!==C&&(!1===b||y);){const M=s[C+1];qN(s[C],o)&&(b=!0,s[C+1]=c?Dv(M):Qf(M)),C=c?Ec(M):ha(M)}b&&(s[u+1]=c?Qf(p):Dv(p))}function qN(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Bt(s,o)>=0}function Im(s,o){return function fa(s,o,u,c){const h=ye(),p=tn(),y=function Hs(s){const o=Vt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);p.firstUpdatePass&&function Xd(s,o,u,c){const h=s.data;if(null===h[u+1]){const p=h[ri()],y=function QS(s,o){return o>=s.expandoStartIndex}(s,u);(function JC(s,o){return 0!=(s.flags&(o?8:16))})(p,c)&&null===o&&!y&&(o=!1),o=function Tv(s,o,u,c){const h=function Ma(s){const o=Vt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=tp(u=Jd(null,s,o,u,c),o.attrs,c),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(u=Jd(h,s,o,u,c),null===p){let b=function Dm(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==ha(c))return s[Ec(c)]}(s,o,c);void 0!==b&&Array.isArray(b)&&(b=Jd(null,s,o,b[1],c),b=tp(b,o.attrs,c),function ep(s,o,u,c){s[Ec(u?o.classBindings:o.styleBindings)]=c}(s,o,c,b))}else p=function Tm(s,o,u){let c;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)c=tp(c,s[p].hostAttrs,u);return tp(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(h,p,o,c),function GN(s,o,u,c,h,p){let y=p?o.classBindings:o.styleBindings,C=Ec(y),b=ha(y);s[c]=u;let M,A=!1;if(Array.isArray(u)?(M=u[1],(null===M||Bt(u,M)>0)&&(A=!0)):M=u,h)if(0!==b){const K=Ec(s[C+1]);s[c+1]=Cv(K,C),0!==K&&(s[K+1]=Iv(s[K+1],c)),s[C+1]=function vm(s,o){return 131071&s|o<<17}(s[C+1],c)}else s[c+1]=Cv(C,0),0!==C&&(s[C+1]=Iv(s[C+1],c)),C=c;else s[c+1]=Cv(b,0),0===C?C=c:s[b+1]=Iv(s[b+1],c),b=c;A&&(s[c+1]=Qf(s[c+1])),WS(s,M,c,!0),WS(s,M,c,!1),function zN(s,o,u,c,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Bt(p,o)>=0&&(u[c+1]=Dv(u[c+1]))}(o,M,s,c,p),y=Cv(C,b),p?o.classBindings=y:o.styleBindings=y}(h,p,o,u,y,c)}}(p,s,y,c),o!==Zt&&Oi(h,y,o)&&function QC(s,o,u,c,h,p,y,C){if(!(3&o.type))return;const b=s.data,A=b[C+1],M=function bv(s){return 1==(1&s)}(A)?Av(b,o,u,h,ha(A),y):void 0;Sm(M)||(Sm(p)||function ym(s){return 2==(2&s)}(A)&&(p=Av(b,null,u,h,C,y)),function Sf(s,o,u,c,h){if(o)h?s.addClass(u,c):s.removeClass(u,c);else{let p=-1===c.indexOf("-")?void 0:us.DashCase;null==h?s.removeStyle(u,c,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=us.Important),s.setStyle(u,c,h,p))}}(c,y,js(ri(),u),h,p))}(p,p.data[ri()],h,h[11],s,h[y+1]=function XC(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=de(la(s)))),s}(o,u),c,y)}(s,o,null,!0),Im}function Jd(s,o,u,c,h){let p=null;const y=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<y&&(p=o[C],c=tp(c,p.hostAttrs,h),p!==s);)C++;return null!==s&&(u.directiveStylingLast=C),c}function tp(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?h=y:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),zr(s,y,!!u||o[++p]))}return void 0===s?null:s}function Av(s,o,u,c,h,p){const y=null===o;let C;for(;h>0;){const b=s[h],A=Array.isArray(b),M=A?b[1]:b,L=null===M;let K=u[h+1];K===Zt&&(K=L?Ze:void 0);let te=L?pd(K,c):M===c?K:void 0;if(A&&!Sm(te)&&(te=pd(b,c)),Sm(te)&&(C=te,y))return C;const we=s[h+1];h=y?Ec(we):ha(we)}if(null!==o){let b=p?o.residualClasses:o.residualStyles;null!=b&&(C=pd(b,c))}return C}function Sm(s){return void 0!==s}function JS(s,o=""){const u=ye(),c=tn(),h=s+22,p=c.firstCreatePass?mn(c,h,1,o,null):c.data[h],y=u[h]=function Ha(s,o){return s.createText(o)}(u[11],o);jg(c,u,y,p),qi(p,!1)}function xv(s){return eh("",s,""),xv}function eh(s,o,u){const c=ye(),h=Gf(c,s,o,u);return h!==Zt&&function Za(s,o,u){const c=js(o,s);!function $u(s,o,u){s.setValue(o,u)}(s[11],c,u)}(c,ri(),h),eh}const Cc=void 0;var uA=["en",[["a","p"],["AM","PM"],Cc],[["AM","PM"],Cc,Cc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Cc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Cc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Cc,"{1} 'at' {0}",Cc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function hI(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Po={};function sp(s){const o=function lA(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Fv(o);if(u)return u;const c=o.split("-")[0];if(u=Fv(c),u)return u;if("en"===c)return uA;throw new me(701,!1)}function Rm(s){return sp(s)[At.PluralCase]}function Fv(s){return s in Po||(Po[s]=Ot.ng&&Ot.ng.common&&Ot.ng.common.locales&&Ot.ng.common.locales[s]),Po[s]}var At=(()=>((At=At||{})[At.LocaleId=0]="LocaleId",At[At.DayPeriodsFormat=1]="DayPeriodsFormat",At[At.DayPeriodsStandalone=2]="DayPeriodsStandalone",At[At.DaysFormat=3]="DaysFormat",At[At.DaysStandalone=4]="DaysStandalone",At[At.MonthsFormat=5]="MonthsFormat",At[At.MonthsStandalone=6]="MonthsStandalone",At[At.Eras=7]="Eras",At[At.FirstDayOfWeek=8]="FirstDayOfWeek",At[At.WeekendRange=9]="WeekendRange",At[At.DateFormat=10]="DateFormat",At[At.TimeFormat=11]="TimeFormat",At[At.DateTimeFormat=12]="DateTimeFormat",At[At.NumberSymbols=13]="NumberSymbols",At[At.NumberFormats=14]="NumberFormats",At[At.CurrencyCode=15]="CurrencyCode",At[At.CurrencySymbol=16]="CurrencySymbol",At[At.CurrencyName=17]="CurrencyName",At[At.Currencies=18]="Currencies",At[At.Directionality=19]="Directionality",At[At.PluralCase=20]="PluralCase",At[At.ExtraData=21]="ExtraData",At))();const ol="en-US";let Nm=ol;function jm(s,o,u,c,h){if(s=Q(s),Array.isArray(s))for(let p=0;p<s.length;p++)jm(s[p],o,u,c,h);else{const p=tn(),y=ye();let C=hc(s)?s:Q(s.provide),b=OE(s);const A=lr(),M=1048575&A.providerIndexes,L=A.directiveStart,K=A.providerIndexes>>20;if(hc(s)||!s.multi){const te=new Au(b,h,Nd),we=hp(C,o,h?M:M+K,L);-1===we?(Ql(Cs(A,y),p,C),ih(p,s,o.length),o.push(C),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),u.push(te),y.push(te)):(u[we]=te,y[we]=te)}else{const te=hp(C,o,M+K,L),we=hp(C,o,M,M+K),Qe=we>=0&&u[we];if(h&&!Qe||!h&&!(te>=0&&u[te])){Ql(Cs(A,y),p,C);const gt=function e0(s,o,u,c,h){const p=new Au(s,u,Nd);return p.multi=[],p.index=o,p.componentProviders=0,Hm(p,h,c&&!u),p}(h?CA:Xv,u.length,h,c,b);!h&&Qe&&(u[we].providerFactory=gt),ih(p,s,o.length,0),o.push(C),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),u.push(gt),y.push(gt)}else ih(p,s,te>-1?te:we,Hm(u[h?we:te],b,!h&&c));!h&&c&&Qe&&u[we].componentProviders++}}}function ih(s,o,u,c){const h=hc(o),p=function Ly(s){return!!s.useClass}(o);if(h||p){const b=(p?Q(o.useClass):o).prototype.ngOnDestroy;if(b){const A=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const M=A.indexOf(u);-1===M?A.push(u,[c,b]):A[M+1].push(c,b)}else A.push(u,b)}}}function Hm(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function hp(s,o,u,c){for(let h=u;h<c;h++)if(o[h]===s)return h;return-1}function Xv(s,o,u,c){return Jv(this.multi,[])}function CA(s,o,u,c){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,C=os(u,u[1],this.providerFactory.index,c);p=C.slice(0,y),Jv(h,p);for(let b=y;b<C.length;b++)p.push(C[b])}else p=[],Jv(h,p);return p}function Jv(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function t0(s,o=[]){return u=>{u.providersResolver=(c,h)=>function EA(s,o,u){const c=tn();if(c.firstCreatePass){const h=wr(s);jm(u,c.data,c.blueprint,h,!0),jm(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class sh{}class oh{}function IA(s,o){return new PI(s,o??null)}class PI extends sh{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new RS(this);const c=Hr(o);this._bootstrapComponents=Ju(c.bootstrap),this._r3Injector=sC(o,u,[{provide:sh,useValue:this},{provide:Ad,useValue:this.componentFactoryResolver}],de(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class n0 extends oh{constructor(o){super(),this.moduleType=o}create(o){return new PI(this.moduleType,o)}}class Gm extends sh{constructor(o,u,c){super(),this.componentFactoryResolver=new RS(this),this.instance=null;const h=new NE([...o,{provide:sh,useValue:this},{provide:Ad,useValue:this.componentFactoryResolver}],u||Xg(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function fp(s,o,u=null){return new Gm(s,o,u).injector}let NI=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=Dd(0,u.type),h=c.length>0?fp([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,h)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=st({token:s,providedIn:"environment",factory:()=>new s($e(fc))}),s})();function r0(s){s.getStandaloneInjector=o=>o.get(NI).getOrCreateStandaloneInjector(s)}function di(s,o,u,c){return function BI(s,o,u,c,h,p){const y=o+u;return Oi(s,y,h)?ca(s,y+1,p?c.call(p,h):c(h)):Ic(s,y+1)}(ye(),kr(),s,o,u,c)}function Ic(s,o){const u=s[o];return u===Zt?void 0:u}function Qm(s,o,u,c,h,p,y){const C=o+u;return function vc(s,o,u,c){const h=Oi(s,o,u);return Oi(s,o+1,c)||h}(s,C,h,p)?ca(s,C+2,y?c.call(y,h,p):c(h,p)):Ic(s,C+2)}function Xm(s,o){const u=tn();let c;const h=s+22;u.firstCreatePass?(c=function d0(s,o){if(o)for(let u=o.length-1;u>=0;u--){const c=o[u];if(s===c.name)return c}}(o,u.pipeRegistry),u.data[h]=c,c.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(h,c.onDestroy)):c=u.data[h];const p=c.factory||(c.factory=ho(c.type)),y=Xn(Nd);try{const C=qs(!1),b=p();return qs(C),function sl(s,o,u,c){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=c}(u,ye(),h,b),b}finally{Xn(y)}}function ah(s,o,u,c){const h=s+22,p=ye(),y=function ys(s,o){return s[o]}(p,h);return function cl(s,o){return s[1].data[o].pure}(p,h)?Qm(p,kr(),o,y.transform,u,c,y):y.transform(u,c)}function h0(s){return o=>{setTimeout(s,void 0,o)}}const Yi=class NA extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let h=o,p=u||(()=>null),y=c;if(o&&"object"==typeof o){const b=o;h=b.next?.bind(b),p=b.error?.bind(b),y=b.complete?.bind(b)}this.__isAsync&&(p=h0(p),h&&(h=h0(h)),y&&(y=h0(y)));const C=super.subscribe({next:h,error:p,complete:y});return o instanceof $.w0&&o.add(C),C}};function OA(){return this._results[nl()]()}class f0{get changes(){return this._changes||(this._changes=new Yi)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=nl(),c=f0.prototype;c[u]||(c[u]=OA)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=function Lr(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function hd(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],p=o[c];if(u&&(h=u(h),p=u(p)),p!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Oo=(()=>{class s{}return s.__NG_ELEMENT_ID__=qI,s})();const zI=Oo,Jm=class extends zI{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,h=Ky(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(c)),xo(c,h,o),new Uf(h)}};function qI(){return dl(lr(),ye())}function dl(s,o){return 4&s.type?new Jm(o,s,za(s,o)):null}let mp=(()=>{class s{}return s.__NG_ELEMENT_ID__=Qi,s})();function Qi(){return t_(lr(),ye())}const WI=mp,uh=class extends WI{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return za(this._hostTNode,this._hostLView)}get injector(){return new Is(this._hostTNode,this._hostLView)}get parentInjector(){const o=Nu(this._hostTNode,this._hostLView);if(Wl(o)){const u=yo(o,this._hostLView),c=ea(o);return new Is(u[1].data[c+8],u)}return new Is(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=_p(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let h,p;"number"==typeof c?h=c:null!=c&&(h=c.index,p=c.injector);const y=o.createEmbeddedView(u||{},p);return this.insert(y,h),y}createComponent(o,u,c,h,p){const y=o&&!function Bu(s){return"function"==typeof s}(o);let C;if(y)C=u;else{const L=u||{};C=L.index,c=L.injector,h=L.projectableNodes,p=L.environmentInjector||L.ngModuleRef}const b=y?o:new Vf(on(o)),A=c||this.parentInjector;if(!p&&null==b.ngModule){const K=(y?A:this.parentInjector).get(fc,null);K&&(p=K)}const M=b.create(A,h,void 0,p);return this.insert(M.hostView,C),M}insert(o,u){const c=o._lView,h=c[1];if(function Zh(s){return vi(s[3])}(c)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const L=c[3],K=new uh(L,L[6],L[3]);K.detach(K.indexOf(o))}}const p=this._adjustIndex(u),y=this._lContainer;!function yy(s,o,u,c){const h=10+c,p=u.length;c>0&&(u[h-1][4]=o),c<p-10?(o[4]=u[h],ec(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function If(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const C=o[19];null!==C&&C.insertView(s),o[2]|=64}(h,c,y,p);const C=Tf(p,y),b=c[11],A=qu(b,y[7]);return null!==A&&function Fg(s,o,u,c,h,p){c[0]=h,c[6]=o,ac(s,c,u,1,h,p)}(h,y[6],b,c,A,C),o.attachToViewContainerRef(),ec(e_(y),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=_p(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=vy(this._lContainer,u);c&&(La(e_(this._lContainer),u),hE(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=vy(this._lContainer,u);return c&&null!=La(e_(this._lContainer),u)?new Uf(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function _p(s){return s[8]}function e_(s){return s[8]||(s[8]=[])}function t_(s,o){let u;const c=o[s.index];if(vi(c))u=c;else{let h;if(8&s.type)h=kn(c);else{const p=o[11];h=p.createComment("");const y=Er(s,o);vd(p,qu(p,y),h,function wd(s,o){return s.nextSibling(o)}(p,y),!1)}o[s.index]=u=DC(c,o,h,s),Ld(o,u)}return new uh(u,s,o)}class n_{constructor(o){this.queryList=o,this.matches=null}clone(){return new n_(this.queryList)}setDirty(){this.queryList.setDirty()}}class r_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let p=0;p<c;p++){const y=u.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new r_(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Ip(o,u).matches&&this.queries[u].setDirty()}}class lh{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class yp{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new yp(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class vp{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new vp(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,u,p0(u,p)),this.matchTNodeWithReadOption(o,u,wo(u,o,p,!1,!1))}else c===Oo?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,wo(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Xu||h===mp||h===Oo&&4&u.type)this.addMatch(u.index,-2);else{const p=wo(u,o,h,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function p0(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function wp(s,o,u,c){return-1===u?function i_(s,o){return 11&s.type?za(s,o):4&s.type?dl(s,o):null}(o,s):-2===u?function ZI(s,o,u){return u===Xu?za(o,s):u===Oo?dl(o,s):u===mp?t_(o,s):void 0}(s,o,c):os(s,s[1],u,o)}function KI(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const p=s.data,y=u.matches,C=[];for(let b=0;b<y.length;b+=2){const A=y[b];C.push(A<0?null:wp(o,p[A],y[b+1],u.metadata.read))}h.matches=C}return h.matches}function Ep(s,o,u,c){const h=s.queries.getByIndex(u),p=h.matches;if(null!==p){const y=KI(s,o,h,u);for(let C=0;C<p.length;C+=2){const b=p[C];if(b>0)c.push(y[C/2]);else{const A=p[C+1],M=o[-b];for(let L=10;L<M.length;L++){const K=M[L];K[17]===K[3]&&Ep(K[1],K,A,c)}if(null!==M[9]){const L=M[9];for(let K=0;K<L.length;K++){const te=L[K];Ep(te[1],te,A,c)}}}}}return c}function Cp(s){const o=ye(),u=tn(),c=tf();zl(c+1);const h=Ip(u,c);if(s.dirty&&function Du(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?Ep(u,o,c,[]):KI(u,o,h,c);s.reset(p,VE),s.notifyOnChanges()}return!0}return!1}function s_(s,o,u){const c=tn();c.firstCreatePass&&(ch(c,new lh(s,o,u),-1),2==(2&o)&&(c.staticViewQueries=!0)),QI(c,ye(),o)}function g0(s,o,u,c){const h=tn();if(h.firstCreatePass){const p=lr();ch(h,new lh(o,u,c),p.index),function XI(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}QI(h,ye(),u)}function m0(){return function YI(s,o){return s[19].queries[o].queryList}(ye(),tf())}function QI(s,o,u){const c=new f0(4==(4&u));_C(s,o,c,c.destroy),null===o[19]&&(o[19]=new r_),o[19].queries.push(new n_(c))}function ch(s,o,u){null===s.queries&&(s.queries=new yp),s.queries.track(new vp(o,u))}function Ip(s,o){return s.queries.getByIndex(o)}function no(...s){}const S0=new ln("Application Initializer");let ph=(()=>{class s{constructor(u){this.appInits=u,this.resolve=no,this.reject=no,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(fm(p))u.push(p);else if(fv(p)){const y=new Promise((C,b)=>{p.subscribe({complete:C,error:b})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)($e(S0,8))},s.\u0275prov=st({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const gh=new ln("AppId",{providedIn:"root",factory:function A0(){return`${mh()}${mh()}${mh()}`}});function mh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const x0=new ln("Platform Initializer"),h_=new ln("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),lb=new ln("appBootstrapListener");let cb=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=st({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const _h=new ln("LocaleId",{providedIn:"root",factory:()=>rt(_h,ct.Optional|ct.SkipSelf)||function db(){return typeof $localize<"u"&&$localize.locale||ol}()}),M0=new ln("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class hb{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Tc=(()=>{class s{compileModuleSync(u){return new n0(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=Ju(Hr(u).declarations).reduce((y,C)=>{const b=on(C);return b&&y.push(new Vf(b)),y},[]);return new hb(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=st({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const gb=(()=>Promise.resolve(0))();function gl(s){typeof Zone>"u"?gb.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ls{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Yi(!1),this.onMicrotaskEmpty=new Yi(!1),this.onStable=new Yi(!1),this.onError=new Yi(!1),typeof Zone>"u")throw new me(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function QA(){let s=Ot.requestAnimationFrame,o=Ot.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function JA(s){const o=()=>{!function mb(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Ot,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,yh(s),s.isCheckStableRunning=!0,N0(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),yh(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,p,y,C)=>{try{return _b(s),u.invokeTask(h,p,y,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),O0(s)}},onInvoke:(u,c,h,p,y,C,b)=>{try{return _b(s),u.invoke(h,p,y,C,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),O0(s)}},onHasTask:(u,c,h,p)=>{u.hasTask(h,p),c===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,yh(s),N0(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,h,p)=>(u.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ls.isInAngularZone())throw new me(909,!1)}static assertNotInAngularZone(){if(ls.isInAngularZone())throw new me(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,o,XA,no,no);try{return p.runTask(y,u,c)}finally{p.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const XA={};function N0(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function yh(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function _b(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function O0(s){s._nesting--,N0(s)}class hi{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Yi,this.onMicrotaskEmpty=new Yi,this.onStable=new Yi,this.onError=new Yi}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}const Sc=new ln(""),eu=new ln("");let rr,k0=(()=>{class s{constructor(u,c,h){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,rr||(function Ue(s){rr=s}(h),h.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ls.assertNotInAngularZone(),gl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())gl(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)($e(ls),$e(yb),$e(eu))},s.\u0275prov=st({token:s,factory:s.\u0275fac}),s})(),yb=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return rr?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=st({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),cs=null;const p_=new ln("AllowMultipleToken"),dt=new ln("PlatformDestroyListeners");class ke{constructor(o,u){this.name=o,this.token=u}}function Eb(s,o,u=[]){const c=`Platform: ${o}`,h=new ln(c);return(p=[])=>{let y=F0();if(!y||y.injector.get(p_,!1)){const C=[...u,...p,{provide:h,useValue:!0}];s?s(C):function Xr(s){if(cs&&!cs.get(p_,!1))throw new me(400,!1);cs=s;const o=s.get(rx);(function wb(s){const o=s.get(x0,null);o&&o.forEach(u=>u())})(s)}(function Cb(s=[],o){return mc.create({name:o,providers:[{provide:Sd,useValue:"platform"},{provide:dt,useValue:new Set([()=>cs=null])},...s]})}(C,c))}return function tx(s){const o=F0();if(!o)throw new me(401,!1);return o}()}}function F0(){return cs?.get(rx)??null}let rx=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const h=function L0(s,o){let u;return u="noop"===s?new hi:("zone.js"===s?void 0:s)||new ls(o),u}(c?.ngZone,function Ib(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:ls,useValue:h}];return h.run(()=>{const y=mc.create({providers:p,parent:this.injector,name:u.moduleType.name}),C=u.create(y),b=C.injector.get(Pf,null);if(!b)throw new me(402,!1);return h.runOutsideAngular(()=>{const A=h.onError.subscribe({next:M=>{b.handleError(M)}});C.onDestroy(()=>{Rn(this._modules,C),A.unsubscribe()})}),function Gt(s,o,u){try{const c=u();return fm(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(b,h,()=>{const A=C.injector.get(ph);return A.runInitializers(),A.donePromise.then(()=>(function pI(s){nt(s,"Expected localeId to be defined"),"string"==typeof s&&(Nm=s.toLowerCase().replace(/_/g,"-"))}(C.injector.get(_h,ol)||ol),this._moduleDoBootstrap(C),C))})})}bootstrapModule(u,c=[]){const h=Ac({},c);return function ex(s,o,u){const c=new n0(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(u){const c=u.injector.get(Pp);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new me(-403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new me(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(dt,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)($e(mc))},s.\u0275prov=st({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Ac(s,o){return Array.isArray(o)?o.reduce(Ac,s):{...s,...o}}let Pp=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,c,h){this._zone=u,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new O.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),y=new O.y(C=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{ls.assertNotInAngularZone(),gl(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{ls.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{b.unsubscribe(),A.unsubscribe()}});this.isStable=(0,ne.T)(p,y.pipe((0,ie.B)()))}bootstrap(u,c){const h=u instanceof FE;if(!this._injector.get(ph).done)throw!h&&$n(u),new me(405,false);let y;y=h?u:this._injector.get(Ad).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const C=function he(s){return s.isBoundToModule}(y)?void 0:this._injector.get(sh),A=y.create(mc.NULL,[],c||y.selector,C),M=A.location.nativeElement,L=A.injector.get(Sc,null);return L?.registerApplication(M),A.onDestroy(()=>{this.detachView(A.hostView),Rn(this.components,A),L?.unregisterApplication(M)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new me(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Rn(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const c=this._injector.get(lb,[]);c.push(...this._bootstrapListeners),c.forEach(h=>h(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Rn(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new me(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)($e(ls),$e(fc),$e(Pf))},s.\u0275prov=st({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Rn(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}function cn(){return!1}let U0=(()=>{class s{}return s.__NG_ELEMENT_ID__=xc,s})();function xc(s){return function ix(s,o,u){if(Ia(s)&&!u){const c=ur(s.index,o);return new Uf(c,c)}return 47&s.type?new Uf(o[16],o):null}(lr(),ye(),16==(16&s))}class Sb{constructor(){}supports(o){return Hf(o)}create(o){return new lx(o)}}const Ps=(s,o)=>o;class lx{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Ps}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,p=null;for(;u||c;){const y=!c||u&&u.currentIndex<B0(c,h,p)?u:c,C=B0(y,h,p),b=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)h++;else{p||(p=[]);const A=C-h,M=b-h;if(A!=M){for(let K=0;K<A;K++){const te=K<p.length?p[K]:p[K]=0,we=te+K;M<=we&&we<A&&(p[K]=te+1)}p[y.previousIndex]=M-A}}C!==b&&o(y,C,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Hf(o))throw new me(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)p=o[C],y=this._trackByFn(C,p),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,p,y,C)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,y,C),c=!0),u=u._next}else h=0,function kC(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[nl()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,C=>{y=this._trackByFn(h,C),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,C,y,h)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,y,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,h)):o=this._addAfter(new ml(u,c),p,h),o}_verifyReinsertion(o,u,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new _l),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _l),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class ml{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ab{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class _l{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new Ab,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function B0(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class Ch{constructor(){}supports(o){return o instanceof Map||lv(o)}create(){return new kp}}class kp{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||lv(o)))throw new me(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const c=new xb(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class xb{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Mb(){return new Sr([new Sb])}let Sr=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Mb()),deps:[[s,new T,new Eo]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new me(901,!1)}}return s.\u0275prov=st({token:s,providedIn:"root",factory:Mb}),s})();function ru(){return new qn([new Ch])}let qn=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||ru()),deps:[[s,new T,new Eo]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(c)return c;throw new me(901,!1)}}return s.\u0275prov=st({token:s,providedIn:"root",factory:ru}),s})();const yl=Eb(null,"core",[]);let y_=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)($e(Pp))},s.\u0275mod=Vo({type:s}),s.\u0275inj=Dn({}),s})();function Pc(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(Et,De,U)=>{U.d(De,{Z:()=>We});var d=U(2090),$=U(4859),O=U(9681),ne=U(1877);class ie{constructor(me,Ae){this._delegate=me,this.firebase=Ae,(0,O._addComponent)(me,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(me,Ae=O._DEFAULT_ENTRY_NAME){var be;this._delegate.checkDestroyed();const Fe=this._delegate.container.getProvider(me);return!Fe.isInitialized()&&"EXPLICIT"===(null===(be=Fe.getComponent())||void 0===be?void 0:be.instantiationMode)&&Fe.initialize(),Fe.getImmediate({identifier:Ae})}_removeServiceInstance(me,Ae=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(Ae)}_addComponent(me){(0,O._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,O._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _e=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function ge(){const lt=function de(lt){const me={},Ae={__esModule:!0,initializeApp:function xe(J,ae={}){const Ee=O.initializeApp(J,ae);if((0,d.r3)(me,Ee.name))return me[Ee.name];const Ke=new lt(Ee,Ae);return me[Ee.name]=Ke,Ke},app:Fe,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Te(J){const ae=J.name,Ee=ae.replace("-compat","");if(O._registerComponent(J)&&"PUBLIC"===J.type){const Ke=(ze=Fe())=>{if("function"!=typeof ze[Ee])throw _e.create("invalid-app-argument",{appName:ae});return ze[Ee]()};void 0!==J.serviceProps&&(0,d.ZB)(Ke,J.serviceProps),Ae[Ee]=Ke,lt.prototype[Ee]=function(...ze){return this._getService.bind(this,ae).apply(this,J.multipleInstances?ze:[])}}return"PUBLIC"===J.type?Ae[Ee]:null},removeApp:function be(J){delete me[J]},useAsService:function je(J,ae){return"serverAuth"===ae?null:ae},modularAPIs:O}};function Fe(J){if(!(0,d.r3)(me,J=J||O._DEFAULT_ENTRY_NAME))throw _e.create("no-app",{appName:J});return me[J]}return Ae.default=Ae,Object.defineProperty(Ae,"apps",{get:function Pe(){return Object.keys(me).map(J=>me[J])}}),Fe.App=lt,Ae}(ie);return lt.INTERNAL=Object.assign(Object.assign({},lt.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function me(Ae){(0,d.ZB)(lt,Ae)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),lt}(),W=new ne.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const lt=self.firebase.SDK_VERSION;lt&&lt.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const We=Z;!function Se(lt){(0,O.registerVersion)("@firebase/app-compat","0.2.3",lt)}()},9681:(Et,De,U)=>{U.r(De),U.d(De,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>Vr,_DEFAULT_ENTRY_NAME:()=>Ve,_addComponent:()=>hn,_addOrOverwriteComponent:()=>Tt,_apps:()=>nt,_clearComponents:()=>Dn,_components:()=>Ye,_getProvider:()=>st,_registerComponent:()=>bt,_removeServiceInstance:()=>sn,deleteApp:()=>Si,getApp:()=>Bn,getApps:()=>pi,initializeApp:()=>Hi,onLog:()=>ct,registerVersion:()=>pr,setLogLevel:()=>gr});var d=U(5861),$=U(4859),O=U(1877),ne=U(2090),ie=U(8766);class oe{constructor(Ie){this.container=Ie}getPlatformInfoString(){return this.container.getProviders().map(rt=>{if(function _e($e){return"VERSION"===$e.getComponent()?.type}(rt)){const St=rt.getImmediate();return`${St.library}/${St.version}`}return null}).filter(rt=>rt).join(" ")}}const de="@firebase/app",Z=new O.Yd("@firebase/app"),Ve="[DEFAULT]",Be={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},nt=new Map,Ye=new Map;function hn($e,Ie){try{$e.container.addComponent(Ie)}catch(rt){Z.debug(`Component ${Ie.name} failed to register with FirebaseApp ${$e.name}`,rt)}}function Tt($e,Ie){$e.container.addOrOverwriteComponent(Ie)}function bt($e){const Ie=$e.name;if(Ye.has(Ie))return Z.debug(`There were multiple attempts to register component ${Ie}.`),!1;Ye.set(Ie,$e);for(const rt of nt.values())hn(rt,$e);return!0}function st($e,Ie){const rt=$e.container.getProvider("heartbeat").getImmediate({optional:!0});return rt&&rt.triggerHeartbeat(),$e.container.getProvider(Ie)}function sn($e,Ie,rt=Ve){st($e,Ie).clearInstance(rt)}function Dn(){Ye.clear()}const un=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Qn{constructor(Ie,rt,St){this._isDeleted=!1,this._options=Object.assign({},Ie),this._config=Object.assign({},rt),this._name=rt.name,this._automaticDataCollectionEnabled=rt.automaticDataCollectionEnabled,this._container=St,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ie){this._isDeleted=Ie}checkDestroyed(){if(this.isDeleted)throw un.create("app-deleted",{appName:this._name})}}const Vr="9.17.1";function Hi($e,Ie={}){let rt=$e;"object"!=typeof Ie&&(Ie={name:Ie});const St=Object.assign({name:Ve,automaticDataCollectionEnabled:!1},Ie),xt=St.name;if("string"!=typeof xt||!xt)throw un.create("bad-app-name",{appName:String(xt)});if(rt||(rt=(0,ne.aH)()),!rt)throw un.create("no-options");const Jt=nt.get(xt);if(Jt){if((0,ne.vZ)(rt,Jt.options)&&(0,ne.vZ)(St,Jt.config))return Jt;throw un.create("duplicate-app",{appName:xt})}const q=new $.H0(xt);for(const Y of Ye.values())q.addComponent(Y);const G=new Qn(rt,St,q);return nt.set(xt,G),G}function Bn($e=Ve){const Ie=nt.get($e);if(!Ie&&$e===Ve)return Hi();if(!Ie)throw un.create("no-app",{appName:$e});return Ie}function pi(){return Array.from(nt.values())}function Si($e){return vn.apply(this,arguments)}function vn(){return(vn=(0,d.Z)(function*($e){const Ie=$e.name;nt.has(Ie)&&(nt.delete(Ie),yield Promise.all($e.container.getProviders().map(rt=>rt.delete())),$e.isDeleted=!0)})).apply(this,arguments)}function pr($e,Ie,rt){var St;let xt=null!==(St=Be[$e])&&void 0!==St?St:$e;rt&&(xt+=`-${rt}`);const Jt=xt.match(/\s|\//),q=Ie.match(/\s|\//);if(Jt||q){const G=[`Unable to register library "${xt}" with version "${Ie}":`];return Jt&&G.push(`library name "${xt}" contains illegal characters (whitespace or "/")`),Jt&&q&&G.push("and"),q&&G.push(`version name "${Ie}" contains illegal characters (whitespace or "/")`),void Z.warn(G.join(" "))}bt(new $.wA(`${xt}-version`,()=>({library:xt,version:Ie}),"VERSION"))}function ct($e,Ie){if(null!==$e&&"function"!=typeof $e)throw un.create("invalid-log-argument");(0,O.Am)($e,Ie)}function gr($e){(0,O.Ub)($e)}const jn="firebase-heartbeat-store";let ti=null;function Ot(){return ti||(ti=(0,ie.X3)("firebase-heartbeat-database",1,{upgrade:($e,Ie)=>{0===Ie&&$e.createObjectStore(jn)}}).catch($e=>{throw un.create("idb-open",{originalErrorMessage:$e.message})})),ti}function Rt(){return(Rt=(0,d.Z)(function*($e){try{return(yield Ot()).transaction(jn).objectStore(jn).get(xn($e))}catch(Ie){if(Ie instanceof ne.ZR)Z.warn(Ie.message);else{const rt=un.create("idb-get",{originalErrorMessage:Ie?.message});Z.warn(rt.message)}}})).apply(this,arguments)}function wn($e,Ie){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,d.Z)(function*($e,Ie){try{const St=(yield Ot()).transaction(jn,"readwrite");return yield St.objectStore(jn).put(Ie,xn($e)),St.done}catch(rt){if(rt instanceof ne.ZR)Z.warn(rt.message);else{const St=un.create("idb-set",{originalErrorMessage:rt?.message});Z.warn(St.message)}}})).apply(this,arguments)}function xn($e){return`${$e.name}!${$e.options.appId}`}class Ai{constructor(Ie){this.container=Ie,this._heartbeatsCache=null;const rt=this.container.getProvider("app").getImmediate();this._storage=new Kt(rt),this._heartbeatsCachePromise=this._storage.read().then(St=>(this._heartbeatsCache=St,St))}triggerHeartbeat(){var Ie=this;return(0,d.Z)(function*(){const St=Ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),xt=jt();if(null===Ie._heartbeatsCache&&(Ie._heartbeatsCache=yield Ie._heartbeatsCachePromise),Ie._heartbeatsCache.lastSentHeartbeatDate!==xt&&!Ie._heartbeatsCache.heartbeats.some(Jt=>Jt.date===xt))return Ie._heartbeatsCache.heartbeats.push({date:xt,agent:St}),Ie._heartbeatsCache.heartbeats=Ie._heartbeatsCache.heartbeats.filter(Jt=>{const q=new Date(Jt.date).valueOf();return Date.now()-q<=2592e6}),Ie._storage.overwrite(Ie._heartbeatsCache)})()}getHeartbeatsHeader(){var Ie=this;return(0,d.Z)(function*(){if(null===Ie._heartbeatsCache&&(yield Ie._heartbeatsCachePromise),null===Ie._heartbeatsCache||0===Ie._heartbeatsCache.heartbeats.length)return"";const rt=jt(),{heartbeatsToSend:St,unsentEntries:xt}=function xi($e,Ie=1024){const rt=[];let St=$e.slice();for(const xt of $e){const Jt=rt.find(q=>q.agent===xt.agent);if(Jt){if(Jt.dates.push(xt.date),Br(rt)>Ie){Jt.dates.pop();break}}else if(rt.push({agent:xt.agent,dates:[xt.date]}),Br(rt)>Ie){rt.pop();break}St=St.slice(1)}return{heartbeatsToSend:rt,unsentEntries:St}}(Ie._heartbeatsCache.heartbeats),Jt=(0,ne.L)(JSON.stringify({version:2,heartbeats:St}));return Ie._heartbeatsCache.lastSentHeartbeatDate=rt,xt.length>0?(Ie._heartbeatsCache.heartbeats=xt,yield Ie._storage.overwrite(Ie._heartbeatsCache)):(Ie._heartbeatsCache.heartbeats=[],Ie._storage.overwrite(Ie._heartbeatsCache)),Jt})()}}function jt(){return(new Date).toISOString().substring(0,10)}class Kt{constructor(Ie){this.app=Ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ie=this;return(0,d.Z)(function*(){return(yield Ie._canUseIndexedDBPromise)&&(yield function It($e){return Rt.apply(this,arguments)}(Ie.app))||{heartbeats:[]}})()}overwrite(Ie){var rt=this;return(0,d.Z)(function*(){var St;if(yield rt._canUseIndexedDBPromise){const Jt=yield rt.read();return wn(rt.app,{lastSentHeartbeatDate:null!==(St=Ie.lastSentHeartbeatDate)&&void 0!==St?St:Jt.lastSentHeartbeatDate,heartbeats:Ie.heartbeats})}})()}add(Ie){var rt=this;return(0,d.Z)(function*(){var St;if(yield rt._canUseIndexedDBPromise){const Jt=yield rt.read();return wn(rt.app,{lastSentHeartbeatDate:null!==(St=Ie.lastSentHeartbeatDate)&&void 0!==St?St:Jt.lastSentHeartbeatDate,heartbeats:[...Jt.heartbeats,...Ie.heartbeats]})}})()}}function Br($e){return(0,ne.L)(JSON.stringify({version:2,heartbeats:$e})).length}!function Hn($e){bt(new $.wA("platform-logger",Ie=>new oe(Ie),"PRIVATE")),bt(new $.wA("heartbeat",Ie=>new Ai(Ie),"PRIVATE")),pr(de,"0.9.3",$e),pr(de,"0.9.3","esm2017"),pr("fire-js","")}("")},4859:(Et,De,U)=>{U.d(De,{H0:()=>de,wA:()=>O,zt:()=>ie});var d=U(5861),$=U(2090);class O{constructor(Z,W,Q){this.name=Z,this.instanceFactory=W,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const ne="[DEFAULT]";class ie{constructor(Z,W){this.name=Z,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const W=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(W)){const Q=new $.BH;if(this.instancesDeferred.set(W,Q),this.isInitialized(W)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:W});He&&Q.resolve(He)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate(Z){var W;const Q=this.normalizeInstanceIdentifier(Z?.identifier),He=null!==(W=Z?.optional)&&void 0!==W&&W;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Se){if(He)return null;throw Se}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function _e(ge){return"EAGER"===ge.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[W,Q]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(W);try{const Se=this.getOrInitializeService({instanceIdentifier:He});Q.resolve(Se)}catch{}}}}clearInstance(Z=ne){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,d.Z)(function*(){const W=Array.from(Z.instances.values());yield Promise.all([...W.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...W.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=ne){return this.instances.has(Z)}getOptions(Z=ne){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:W={}}=Z,Q=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:Q,options:W});for(const[Se,We]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Se)&&We.resolve(He);return He}onInit(Z,W){var Q;const He=this.normalizeInstanceIdentifier(W),Se=null!==(Q=this.onInitCallbacks.get(He))&&void 0!==Q?Q:new Set;Se.add(Z),this.onInitCallbacks.set(He,Se);const We=this.instances.get(He);return We&&Z(We,He),()=>{Se.delete(Z)}}invokeOnInitCallbacks(Z,W){const Q=this.onInitCallbacks.get(W);if(Q)for(const He of Q)try{He(Z,W)}catch{}}getOrInitializeService({instanceIdentifier:Z,options:W={}}){let Q=this.instances.get(Z);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=Z,ge===ne?void 0:ge),options:W}),this.instances.set(Z,Q),this.instancesOptions.set(Z,W),this.invokeOnInitCallbacks(Q,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,Q)}catch{}var ge;return Q||null}normalizeInstanceIdentifier(Z=ne){return this.component?this.component.multipleInstances?Z:ne:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const W=this.getProvider(Z.name);if(W.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);W.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const W=new ie(Z,this);return this.providers.set(Z,W),W}getProviders(){return Array.from(this.providers.values())}}},1877:(Et,De,U)=>{U.d(De,{Am:()=>ge,Ub:()=>de,Yd:()=>_e,in:()=>$});const d=[];var $=(()=>{return(Z=$||($={}))[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",$;var Z})();const O={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},ne=$.INFO,ie={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},oe=(Z,W,...Q)=>{if(W<Z.logLevel)return;const He=(new Date).toISOString(),Se=ie[W];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Se](`[${He}]  ${Z.name}:`,...Q)};class _e{constructor(W){this.name=W,this._logLevel=ne,this._logHandler=oe,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in $))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?O[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...W),this._logHandler(this,$.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...W),this._logHandler(this,$.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,$.INFO,...W),this._logHandler(this,$.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,$.WARN,...W),this._logHandler(this,$.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...W),this._logHandler(this,$.ERROR,...W)}}function de(Z){d.forEach(W=>{W.setLogLevel(Z)})}function ge(Z,W){for(const Q of d){let He=null;W&&W.level&&(He=O[W.level]),Q.userLogHandler=null===Z?null:(Se,We,...lt)=>{const me=lt.map(Ae=>{if(null==Ae)return null;if("string"==typeof Ae)return Ae;if("number"==typeof Ae||"boolean"==typeof Ae)return Ae.toString();if(Ae instanceof Error)return Ae.message;try{return JSON.stringify(Ae)}catch{return null}}).filter(Ae=>Ae).join(" ");We>=(He??Se.logLevel)&&Z({level:$[We].toLowerCase(),message:me,args:lt,type:Se.name})}}}},259:(Et,De,U)=>{U.d(De,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=U(9681);(0,d.registerVersion)("firebase","9.17.1","app")},9260:(Et,De,U)=>{U.d(De,{Z:()=>d.Z});var d=U(3942);d.Z.registerVersion("firebase","9.17.1","app-compat")},9568:(Et,De,U)=>{U.r(De);var d=U(5861),$=U(3942),O=U(2722),ne=U(2090),_e=(U(9681),U(1877),U(4859));function de(){return window}function W(){return(W=(0,d.Z)(function*(j,N,B){var se;const{BuildInfo:Me}=de();(0,O.ap)(N.sessionId,"AuthEvent did not contain a session ID");const pt=yield Ae(N.sessionId),Ze={};return(0,O.aq)()?Ze.ibi=Me.packageName:(0,O.ar)()?Ze.apn=Me.packageName:(0,O.as)(j,"operation-not-supported-in-this-environment"),Me.displayName&&(Ze.appDisplayName=Me.displayName),Ze.sessionId=pt,(0,O.at)(j,B,N.type,void 0,null!==(se=N.eventId)&&void 0!==se?se:void 0,Ze)})).apply(this,arguments)}function He(){return(He=(0,d.Z)(function*(j){const{BuildInfo:N}=de(),B={};(0,O.aq)()?B.iosBundleId=N.packageName:(0,O.ar)()?B.androidPackageName=N.packageName:(0,O.as)(j,"operation-not-supported-in-this-environment"),yield(0,O.au)(j,B)})).apply(this,arguments)}function lt(){return(lt=(0,d.Z)(function*(j,N,B){const{cordova:se}=de();let Me=()=>{};try{yield new Promise((pt,Ze)=>{let Ut=null;function vt(){var Lt;pt();const jr=null===(Lt=se.plugins.browsertab)||void 0===Lt?void 0:Lt.close;"function"==typeof jr&&jr(),"function"==typeof B?.close&&B.close()}function In(){Ut||(Ut=window.setTimeout(()=>{Ze((0,O.aw)(j,"redirect-cancelled-by-user"))},2e3))}function mr(){"visible"===document?.visibilityState&&In()}N.addPassiveListener(vt),document.addEventListener("resume",In,!1),(0,O.ar)()&&document.addEventListener("visibilitychange",mr,!1),Me=()=>{N.removePassiveListener(vt),document.removeEventListener("resume",In,!1),document.removeEventListener("visibilitychange",mr,!1),Ut&&window.clearTimeout(Ut)}})}finally{Me()}})).apply(this,arguments)}function Ae(j){return be.apply(this,arguments)}function be(){return(be=(0,d.Z)(function*(j){const N=Fe(j),B=yield crypto.subtle.digest("SHA-256",N);return Array.from(new Uint8Array(B)).map(Me=>Me.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Fe(j){if((0,O.ap)(/[0-9a-zA-Z]+/.test(j),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(j);const N=new ArrayBuffer(j.length),B=new Uint8Array(N);for(let se=0;se<j.length;se++)B[se]=j.charCodeAt(se);return B}class Pe extends O.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(N=>{this.resolveInialized=N})}addPassiveListener(N){this.passiveListeners.add(N)}removePassiveListener(N){this.passiveListeners.delete(N)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(N){return this.resolveInialized(),this.passiveListeners.forEach(B=>B(N)),super.onEvent(N)}initialized(){var N=this;return(0,d.Z)(function*(){yield N.initPromise})()}}function J(j){return ae.apply(this,arguments)}function ae(){return(ae=(0,d.Z)(function*(j){const N=yield ze()._get(Mt(j));return N&&(yield ze()._remove(Mt(j))),N})).apply(this,arguments)}function Ke(){const j=[],N="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let B=0;B<20;B++){const se=Math.floor(Math.random()*N.length);j.push(N.charAt(se))}return j.join("")}function ze(){return(0,O.az)(O.b)}function Mt(j){return(0,O.aA)("authEvent",j.config.apiKey,j.name)}function pe(j){if(!j?.includes("?"))return{};const[N,...B]=j.split("?");return(0,ne.zd)(B.join("?"))}const Ve=class Ne{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(N){var B=this;return(0,d.Z)(function*(){const se=N._key();let Me=B.eventManagers.get(se);return Me||(Me=new Pe(N),B.eventManagers.set(se,Me),B.attachCallbackListeners(N,Me)),Me})()}_openPopup(N){(0,O.as)(N,"operation-not-supported-in-this-environment")}_openRedirect(N,B,se,Me){var pt=this;return(0,d.Z)(function*(){!function me(j){var N,B,se,Me,pt,Ze,Ut,vt,In,mr;const Lt=de();(0,O.ax)("function"==typeof(null===(N=Lt?.universalLinks)||void 0===N?void 0:N.subscribe),j,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.ax)(typeof(null===(B=Lt?.BuildInfo)||void 0===B?void 0:B.packageName)<"u",j,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.ax)("function"==typeof(null===(pt=null===(Me=null===(se=Lt?.cordova)||void 0===se?void 0:se.plugins)||void 0===Me?void 0:Me.browsertab)||void 0===pt?void 0:pt.openUrl),j,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(vt=null===(Ut=null===(Ze=Lt?.cordova)||void 0===Ze?void 0:Ze.plugins)||void 0===Ut?void 0:Ut.browsertab)||void 0===vt?void 0:vt.isAvailable),j,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(mr=null===(In=Lt?.cordova)||void 0===In?void 0:In.InAppBrowser)||void 0===mr?void 0:mr.open),j,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(N);const Ze=yield pt._initialize(N);yield Ze.initialized(),Ze.resetRedirect(),(0,O.aD)(),yield pt._originValidation(N);const Ut=function Te(j,N,B=null){return{type:N,eventId:B,urlResponse:null,sessionId:Ke(),postBody:null,tenantId:j.tenantId,error:(0,O.aw)(j,"no-auth-event")}}(N,se,Me);yield function je(j,N){return ze()._set(Mt(j),N)}(N,Ut);const vt=yield function Z(j,N,B){return W.apply(this,arguments)}(N,Ut,B),In=yield function Se(j){const{cordova:N}=de();return new Promise(B=>{N.plugins.browsertab.isAvailable(se=>{let Me=null;se?N.plugins.browsertab.openUrl(j):Me=N.InAppBrowser.open(j,(0,O.av)()?"_blank":"_system","location=yes"),B(Me)})})}(vt);return function We(j,N,B){return lt.apply(this,arguments)}(N,Ze,In)})()}_isIframeWebStorageSupported(N,B){throw new Error("Method not implemented.")}_originValidation(N){const B=N._key();return this.originValidationPromises[B]||(this.originValidationPromises[B]=function Q(j){return He.apply(this,arguments)}(N)),this.originValidationPromises[B]}attachCallbackListeners(N,B){const{universalLinks:se,handleOpenURL:Me,BuildInfo:pt}=de(),Ze=setTimeout((0,d.Z)(function*(){yield J(N),B.onEvent(Be())}),500),Ut=function(){var mr=(0,d.Z)(function*(Lt){clearTimeout(Ze);const jr=yield J(N);let Pl=null;jr&&Lt?.url&&(Pl=function Ee(j,N){var B,se;const Me=function ue(j){const N=pe(j),B=N.link?decodeURIComponent(N.link):void 0,se=pe(B).link,Me=N.deep_link_id?decodeURIComponent(N.deep_link_id):void 0;return pe(Me).link||Me||se||B||j}(N);if(Me.includes("/__/auth/callback")){const pt=pe(Me),Ze=pt.firebaseError?function Je(j){try{return JSON.parse(j)}catch{return null}}(decodeURIComponent(pt.firebaseError)):null,Ut=null===(se=null===(B=Ze?.code)||void 0===B?void 0:B.split("auth/"))||void 0===se?void 0:se[1],vt=Ut?(0,O.aw)(Ut):null;return vt?{type:j.type,eventId:j.eventId,tenantId:j.tenantId,error:vt,urlResponse:null,sessionId:null,postBody:null}:{type:j.type,eventId:j.eventId,tenantId:j.tenantId,sessionId:j.sessionId,urlResponse:Me,postBody:null}}return null}(jr,Lt.url)),B.onEvent(Pl||Be())});return function(jr){return mr.apply(this,arguments)}}();typeof se<"u"&&"function"==typeof se.subscribe&&se.subscribe(null,Ut);const vt=Me,In=`${pt.packageName.toLowerCase()}://`;de().handleOpenURL=function(){var mr=(0,d.Z)(function*(Lt){if(Lt.toLowerCase().startsWith(In)&&Ut({url:Lt}),"function"==typeof vt)try{vt(Lt)}catch(jr){console.error(jr)}});return function(Lt){return mr.apply(this,arguments)}}()}};function Be(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aw)("no-auth-event")}}function bt(){var j;return(null===(j=self?.location)||void 0===j?void 0:j.protocol)||null}function sn(j=(0,ne.z$)()){return!("file:"!==bt()&&"ionic:"!==bt()&&"capacitor:"!==bt()||!j.toLowerCase().match(/iphone|ipad|ipod|android/))}function Vr(){try{const j=self.localStorage,N=O.aI();if(j)return j.setItem(N,"1"),j.removeItem(N),!function Qn(j=(0,ne.z$)()){return function Cn(){return(0,ne.w1)()&&11===document?.documentMode}()||function un(j=(0,ne.z$)()){return/Edge\/\d+/.test(j)}(j)}()||(0,ne.hl)()}catch{return Hi()&&(0,ne.hl)()}return!1}function Hi(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Bn(){return(function st(){return"http:"===bt()||"https:"===bt()}()||(0,ne.ru)()||sn())&&!function Dn(){return(0,ne.b$)()||(0,ne.UG)()}()&&Vr()&&!Hi()}function pi(){return sn()&&typeof document<"u"}function vn(){return(vn=(0,d.Z)(function*(){return!!pi()&&new Promise(j=>{const N=setTimeout(()=>{j(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(N),j(!0)})})})).apply(this,arguments)}const ct={LOCAL:"local",NONE:"none",SESSION:"session"},gr=O.ax,Pr="persistence";function jn(j){return ti.apply(this,arguments)}function ti(){return(ti=(0,d.Z)(function*(j){yield j._initializationPromise;const N=It(),B=O.aA(Pr,j.config.apiKey,j.name);N&&N.setItem(B,j._getPersistence())})).apply(this,arguments)}function It(){var j;try{return(null===(j=function pr(){return typeof window<"u"?window:null}())||void 0===j?void 0:j.sessionStorage)||null}catch{return null}}const Rt=O.ax;class wn{constructor(){this.browserResolver=O.az(O.k),this.cordovaResolver=O.az(Ve),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(N){var B=this;return(0,d.Z)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._initialize(N)})()}_openPopup(N,B,se,Me){var pt=this;return(0,d.Z)(function*(){return yield pt.selectUnderlyingResolver(),pt.assertedUnderlyingResolver._openPopup(N,B,se,Me)})()}_openRedirect(N,B,se,Me){var pt=this;return(0,d.Z)(function*(){return yield pt.selectUnderlyingResolver(),pt.assertedUnderlyingResolver._openRedirect(N,B,se,Me)})()}_isIframeWebStorageSupported(N,B){this.assertedUnderlyingResolver._isIframeWebStorageSupported(N,B)}_originValidation(N){return this.assertedUnderlyingResolver._originValidation(N)}get _shouldInitProactively(){return pi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Rt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var N=this;return(0,d.Z)(function*(){if(N.underlyingResolver)return;const B=yield function Si(){return vn.apply(this,arguments)}();N.underlyingResolver=B?N.cordovaResolver:N.browserResolver})()}}function Jn(j){return j.unwrap()}function gi(j){return Ai(j)}function Ai(j){const{_tokenResponse:N}=j instanceof ne.ZR?j.customData:j;if(!N)return null;if(!(j instanceof ne.ZR)&&"temporaryProof"in N&&"phoneNumber"in N)return O.P.credentialFromResult(j);const B=N.providerId;if(!B||B===O.o.PASSWORD)return null;let se;switch(B){case O.o.GOOGLE:se=O.Q;break;case O.o.FACEBOOK:se=O.N;break;case O.o.GITHUB:se=O.T;break;case O.o.TWITTER:se=O.W;break;default:const{oauthIdToken:Me,oauthAccessToken:pt,oauthTokenSecret:Ze,pendingToken:Ut,nonce:vt}=N;return pt||Ze||Me||Ut?Ut?B.startsWith("saml.")?O.aL._create(B,Ut):O.J._fromParams({providerId:B,signInMethod:B,pendingToken:Ut,idToken:Me,accessToken:pt}):new O.U(B).credential({idToken:Me,accessToken:pt,rawNonce:vt}):null}return j instanceof ne.ZR?se.credentialFromError(j):se.credentialFromResult(j)}function jt(j,N){return N.catch(B=>{throw B instanceof ne.ZR&&function er(j,N){var B;const se=null===(B=N.customData)||void 0===B?void 0:B._tokenResponse;if("auth/multi-factor-auth-required"===N?.code)N.resolver=new Br(j,O.an(j,N));else if(se){const Me=Ai(N),pt=N;Me&&(pt.credential=Me,pt.tenantId=se.tenantId||void 0,pt.email=se.email||void 0,pt.phoneNumber=se.phoneNumber||void 0)}}(j,B),B}).then(B=>{const Me=B.user;return{operationType:B.operationType,credential:gi(B),additionalUserInfo:O.al(B),user:Hn.getOrCreate(Me)}})}function xi(j,N){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,d.Z)(function*(j,N){const B=yield N;return{verificationId:B.verificationId,confirm:se=>jt(j,B.confirm(se))}})).apply(this,arguments)}class Br{constructor(N,B){this.resolver=B,this.auth=function xn(j){return j.wrapped()}(N)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(N){return jt(Jn(this.auth),this.resolver.resolveSignIn(N))}}class Hn{constructor(N){this._delegate=N,this.multiFactor=O.ao(N)}static getOrCreate(N){return Hn.USER_MAP.has(N)||Hn.USER_MAP.set(N,new Hn(N)),Hn.USER_MAP.get(N)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(N){return this._delegate.getIdTokenResult(N)}getIdToken(N){return this._delegate.getIdToken(N)}linkAndRetrieveDataWithCredential(N){return this.linkWithCredential(N)}linkWithCredential(N){var B=this;return(0,d.Z)(function*(){return jt(B.auth,O.Z(B._delegate,N))})()}linkWithPhoneNumber(N,B){var se=this;return(0,d.Z)(function*(){return xi(se.auth,O.l(se._delegate,N,B))})()}linkWithPopup(N){var B=this;return(0,d.Z)(function*(){return jt(B.auth,O.d(B._delegate,N,wn))})()}linkWithRedirect(N){var B=this;return(0,d.Z)(function*(){return yield jn(O.aE(B.auth)),O.g(B._delegate,N,wn)})()}reauthenticateAndRetrieveDataWithCredential(N){return this.reauthenticateWithCredential(N)}reauthenticateWithCredential(N){var B=this;return(0,d.Z)(function*(){return jt(B.auth,O._(B._delegate,N))})()}reauthenticateWithPhoneNumber(N,B){return xi(this.auth,O.r(this._delegate,N,B))}reauthenticateWithPopup(N){return jt(this.auth,O.e(this._delegate,N,wn))}reauthenticateWithRedirect(N){var B=this;return(0,d.Z)(function*(){return yield jn(O.aE(B.auth)),O.h(B._delegate,N,wn)})()}sendEmailVerification(N){return O.ab(this._delegate,N)}unlink(N){var B=this;return(0,d.Z)(function*(){return yield O.ak(B._delegate,N),B})()}updateEmail(N){return O.ag(this._delegate,N)}updatePassword(N){return O.ah(this._delegate,N)}updatePhoneNumber(N){return O.u(this._delegate,N)}updateProfile(N){return O.af(this._delegate,N)}verifyBeforeUpdateEmail(N,B){return O.ac(this._delegate,N,B)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Hn.USER_MAP=new WeakMap;const $e=O.ax;let Ie=(()=>{class j{constructor(B,se){if(this.app=B,se.isInitialized())return this._delegate=se.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Me}=B.options;$e(Me,"invalid-api-key",{appName:B.name}),$e(Me,"invalid-api-key",{appName:B.name});const pt=typeof window<"u"?wn:void 0;this._delegate=se.initialize({options:{persistence:St(Me,B.name),popupRedirectResolver:pt}}),this._delegate._updateErrorMap(O.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Hn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(B){this._delegate.languageCode=B}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(B){this._delegate.tenantId=B}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(B,se){O.G(this._delegate,B,se)}applyActionCode(B){return O.a2(this._delegate,B)}checkActionCode(B){return O.a3(this._delegate,B)}confirmPasswordReset(B,se){return O.a1(this._delegate,B,se)}createUserWithEmailAndPassword(B,se){var Me=this;return(0,d.Z)(function*(){return jt(Me._delegate,O.a5(Me._delegate,B,se))})()}fetchProvidersForEmail(B){return this.fetchSignInMethodsForEmail(B)}fetchSignInMethodsForEmail(B){return O.aa(this._delegate,B)}isSignInWithEmailLink(B){return O.a8(this._delegate,B)}getRedirectResult(){var B=this;return(0,d.Z)(function*(){$e(Bn(),B._delegate,"operation-not-supported-in-this-environment");const se=yield O.j(B._delegate,wn);return se?jt(B._delegate,Promise.resolve(se)):{credential:null,user:null}})()}addFrameworkForLogging(B){!function nt(j,N){(0,O.aE)(j)._logFramework(N)}(this._delegate,B)}onAuthStateChanged(B,se,Me){const{next:pt,error:Ze,complete:Ut}=rt(B,se,Me);return this._delegate.onAuthStateChanged(pt,Ze,Ut)}onIdTokenChanged(B,se,Me){const{next:pt,error:Ze,complete:Ut}=rt(B,se,Me);return this._delegate.onIdTokenChanged(pt,Ze,Ut)}sendSignInLinkToEmail(B,se){return O.a7(this._delegate,B,se)}sendPasswordResetEmail(B,se){return O.a0(this._delegate,B,se||void 0)}setPersistence(B){var se=this;return(0,d.Z)(function*(){let Me;switch(function Xn(j,N){gr(Object.values(ct).includes(N),j,"invalid-persistence-type"),(0,ne.b$)()?gr(N!==ct.SESSION,j,"unsupported-persistence-type"):(0,ne.UG)()?gr(N===ct.NONE,j,"unsupported-persistence-type"):Hi()?gr(N===ct.NONE||N===ct.LOCAL&&(0,ne.hl)(),j,"unsupported-persistence-type"):gr(N===ct.NONE||Vr(),j,"unsupported-persistence-type")}(se._delegate,B),B){case ct.SESSION:Me=O.a;break;case ct.LOCAL:Me=(yield O.az(O.i)._isAvailable())?O.i:O.b;break;case ct.NONE:Me=O.L;break;default:return O.as("argument-error",{appName:se._delegate.name})}return se._delegate.setPersistence(Me)})()}signInAndRetrieveDataWithCredential(B){return this.signInWithCredential(B)}signInAnonymously(){return jt(this._delegate,O.X(this._delegate))}signInWithCredential(B){return jt(this._delegate,O.Y(this._delegate,B))}signInWithCustomToken(B){return jt(this._delegate,O.$(this._delegate,B))}signInWithEmailAndPassword(B,se){return jt(this._delegate,O.a6(this._delegate,B,se))}signInWithEmailLink(B,se){return jt(this._delegate,O.a9(this._delegate,B,se))}signInWithPhoneNumber(B,se){return xi(this._delegate,O.s(this._delegate,B,se))}signInWithPopup(B){var se=this;return(0,d.Z)(function*(){return $e(Bn(),se._delegate,"operation-not-supported-in-this-environment"),jt(se._delegate,O.c(se._delegate,B,wn))})()}signInWithRedirect(B){var se=this;return(0,d.Z)(function*(){return $e(Bn(),se._delegate,"operation-not-supported-in-this-environment"),yield jn(se._delegate),O.f(se._delegate,B,wn)})()}updateCurrentUser(B){return this._delegate.updateCurrentUser(B)}verifyPasswordResetCode(B){return O.a4(this._delegate,B)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return j.Persistence=ct,j})();function rt(j,N,B){let se=j;"function"!=typeof j&&({next:se,error:N,complete:B}=j);const Me=se;return{next:Ze=>Me(Ze&&Hn.getOrCreate(Ze)),error:N,complete:B}}function St(j,N){const B=function Ot(j,N){const B=It();if(!B)return[];const se=O.aA(Pr,j,N);switch(B.getItem(se)){case ct.NONE:return[O.L];case ct.LOCAL:return[O.i,O.a];case ct.SESSION:return[O.a];default:return[]}}(j,N);if(typeof self<"u"&&!B.includes(O.i)&&B.push(O.i),typeof window<"u")for(const se of[O.b,O.a])B.includes(se)||B.push(se);return B.includes(O.L)||B.push(O.L),B}class xt{constructor(){this.providerId="phone",this._delegate=new O.P(Jn($.Z.auth()))}static credential(N,B){return O.P.credential(N,B)}verifyPhoneNumber(N,B){return this._delegate.verifyPhoneNumber(N,B)}unwrap(){return this._delegate}}xt.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,xt.PROVIDER_ID=O.P.PROVIDER_ID;const Jt=O.ax;class q{constructor(N,B,se=$.Z.app()){var Me;Jt(null===(Me=se.options)||void 0===Me?void 0:Me.apiKey,"invalid-api-key",{appName:se.name}),this._delegate=new O.R(N,B,se.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Y(j){j.INTERNAL.registerComponent(new _e.wA("auth-compat",N=>{const B=N.getProvider("app-compat").getImmediate(),se=N.getProvider("auth");return new Ie(B,se)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.M,FacebookAuthProvider:O.N,GithubAuthProvider:O.T,GoogleAuthProvider:O.Q,OAuthProvider:O.U,SAMLAuthProvider:O.V,PhoneAuthProvider:xt,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:q,TwitterAuthProvider:O.W,Auth:Ie,AuthCredential:O.H,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),j.registerVersion("@firebase/auth-compat","0.3.3")}($.Z)},8766:(Et,De,U)=>{U.d(De,{Lj:()=>xe,X3:()=>Fe});var d=U(5861);let O,ne;const _e=new WeakMap,de=new WeakMap,ge=new WeakMap,Z=new WeakMap,W=new WeakMap;let Se={get(ae,Ee,Ke){if(ae instanceof IDBTransaction){if("done"===Ee)return de.get(ae);if("objectStoreNames"===Ee)return ae.objectStoreNames||ge.get(ae);if("store"===Ee)return Ke.objectStoreNames[1]?void 0:Ke.objectStore(Ke.objectStoreNames[0])}return Ae(ae[Ee])},set:(ae,Ee,Ke)=>(ae[Ee]=Ke,!0),has:(ae,Ee)=>ae instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in ae};function me(ae){return"function"==typeof ae?function lt(ae){return ae!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function oe(){return ne||(ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ae)?function(...Ee){return ae.apply(be(this),Ee),Ae(_e.get(this))}:function(...Ee){return Ae(ae.apply(be(this),Ee))}:function(Ee,...Ke){const ze=ae.call(be(this),Ee,...Ke);return ge.set(ze,Ee.sort?Ee.sort():[Ee]),Ae(ze)}}(ae):(ae instanceof IDBTransaction&&function He(ae){if(de.has(ae))return;const Ee=new Promise((Ke,ze)=>{const Mt=()=>{ae.removeEventListener("complete",Je),ae.removeEventListener("error",ue),ae.removeEventListener("abort",ue)},Je=()=>{Ke(),Mt()},ue=()=>{ze(ae.error||new DOMException("AbortError","AbortError")),Mt()};ae.addEventListener("complete",Je),ae.addEventListener("error",ue),ae.addEventListener("abort",ue)});de.set(ae,Ee)}(ae),((ae,Ee)=>Ee.some(Ke=>ae instanceof Ke))(ae,function ie(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ae,Se):ae)}function Ae(ae){if(ae instanceof IDBRequest)return function Q(ae){const Ee=new Promise((Ke,ze)=>{const Mt=()=>{ae.removeEventListener("success",Je),ae.removeEventListener("error",ue)},Je=()=>{Ke(Ae(ae.result)),Mt()},ue=()=>{ze(ae.error),Mt()};ae.addEventListener("success",Je),ae.addEventListener("error",ue)});return Ee.then(Ke=>{Ke instanceof IDBCursor&&_e.set(Ke,ae)}).catch(()=>{}),W.set(Ee,ae),Ee}(ae);if(Z.has(ae))return Z.get(ae);const Ee=me(ae);return Ee!==ae&&(Z.set(ae,Ee),W.set(Ee,ae)),Ee}const be=ae=>W.get(ae);function Fe(ae,Ee,{blocked:Ke,upgrade:ze,blocking:Mt,terminated:Je}={}){const ue=indexedDB.open(ae,Ee),pe=Ae(ue);return ze&&ue.addEventListener("upgradeneeded",Ce=>{ze(Ae(ue.result),Ce.oldVersion,Ce.newVersion,Ae(ue.transaction))}),Ke&&ue.addEventListener("blocked",()=>Ke()),pe.then(Ce=>{Je&&Ce.addEventListener("close",()=>Je()),Mt&&Ce.addEventListener("versionchange",()=>Mt())}).catch(()=>{}),pe}function xe(ae,{blocked:Ee}={}){const Ke=indexedDB.deleteDatabase(ae);return Ee&&Ke.addEventListener("blocked",()=>Ee()),Ae(Ke).then(()=>{})}const Pe=["get","getKey","getAll","getAllKeys","count"],Te=["put","add","delete","clear"],je=new Map;function J(ae,Ee){if(!(ae instanceof IDBDatabase)||Ee in ae||"string"!=typeof Ee)return;if(je.get(Ee))return je.get(Ee);const Ke=Ee.replace(/FromIndex$/,""),ze=Ee!==Ke,Mt=Te.includes(Ke);if(!(Ke in(ze?IDBIndex:IDBObjectStore).prototype)||!Mt&&!Pe.includes(Ke))return;const Je=function(){var ue=(0,d.Z)(function*(pe,...Ce){const Ne=this.transaction(pe,Mt?"readwrite":"readonly");let Ve=Ne.store;return ze&&(Ve=Ve.index(Ce.shift())),(yield Promise.all([Ve[Ke](...Ce),Mt&&Ne.done]))[0]});return function(Ce){return ue.apply(this,arguments)}}();return je.set(Ee,Je),Je}!function We(ae){Se=ae(Se)}(ae=>({...ae,get:(Ee,Ke,ze)=>J(Ee,Ke)||ae.get(Ee,Ke,ze),has:(Ee,Ke)=>!!J(Ee,Ke)||ae.has(Ee,Ke)}))},5861:(Et,De,U)=>{function d(O,ne,ie,oe,_e,de,ge){try{var Z=O[de](ge),W=Z.value}catch(Q){return void ie(Q)}Z.done?ne(W):Promise.resolve(W).then(oe,_e)}function $(O){return function(){var ne=this,ie=arguments;return new Promise(function(oe,_e){var de=O.apply(ne,ie);function ge(W){d(de,oe,_e,ge,Z,"next",W)}function Z(W){d(de,oe,_e,ge,Z,"throw",W)}ge(void 0)})}}U.d(De,{Z:()=>$})}},Et=>{Et(Et.s=9436)}]);